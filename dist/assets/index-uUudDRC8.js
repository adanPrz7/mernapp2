var W1=Object.defineProperty;var z1=(e,t,i)=>t in e?W1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var se=(e,t,i)=>z1(e,typeof t!="symbol"?t+"":t,i);function j1(e,t){for(var i=0;i<t.length;i++){const s=t[i];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in e)){const o=Object.getOwnPropertyDescriptor(s,n);o&&Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();function ka(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Rv={exports:{}},au={},bv={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ma=Symbol.for("react.element"),U1=Symbol.for("react.portal"),K1=Symbol.for("react.fragment"),$1=Symbol.for("react.strict_mode"),q1=Symbol.for("react.profiler"),Y1=Symbol.for("react.provider"),Q1=Symbol.for("react.context"),X1=Symbol.for("react.forward_ref"),J1=Symbol.for("react.suspense"),Z1=Symbol.for("react.memo"),e5=Symbol.for("react.lazy"),Ug=Symbol.iterator;function t5(e){return e===null||typeof e!="object"?null:(e=Ug&&e[Ug]||e["@@iterator"],typeof e=="function"?e:null)}var Pv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xv=Object.assign,Fv={};function Io(e,t,i){this.props=e,this.context=t,this.refs=Fv,this.updater=i||Pv}Io.prototype.isReactComponent={};Io.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Io.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ev(){}Ev.prototype=Io.prototype;function Np(e,t,i){this.props=e,this.context=t,this.refs=Fv,this.updater=i||Pv}var _p=Np.prototype=new Ev;_p.constructor=Np;xv(_p,Io.prototype);_p.isPureReactComponent=!0;var Kg=Array.isArray,kv=Object.prototype.hasOwnProperty,Gp={current:null},Mv={key:!0,ref:!0,__self:!0,__source:!0};function Dv(e,t,i){var s,n={},o=null,r=null;if(t!=null)for(s in t.ref!==void 0&&(r=t.ref),t.key!==void 0&&(o=""+t.key),t)kv.call(t,s)&&!Mv.hasOwnProperty(s)&&(n[s]=t[s]);var a=arguments.length-2;if(a===1)n.children=i;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];n.children=l}if(e&&e.defaultProps)for(s in a=e.defaultProps,a)n[s]===void 0&&(n[s]=a[s]);return{$$typeof:Ma,type:e,key:o,ref:r,props:n,_owner:Gp.current}}function i5(e,t){return{$$typeof:Ma,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Hp(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ma}function s5(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var $g=/\/+/g;function ju(e,t){return typeof e=="object"&&e!==null&&e.key!=null?s5(""+e.key):t.toString(36)}function Ll(e,t,i,s,n){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var r=!1;if(e===null)r=!0;else switch(o){case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case Ma:case U1:r=!0}}if(r)return r=e,n=n(r),e=s===""?"."+ju(r,0):s,Kg(n)?(i="",e!=null&&(i=e.replace($g,"$&/")+"/"),Ll(n,t,i,"",function(c){return c})):n!=null&&(Hp(n)&&(n=i5(n,i+(!n.key||r&&r.key===n.key?"":(""+n.key).replace($g,"$&/")+"/")+e)),t.push(n)),1;if(r=0,s=s===""?".":s+":",Kg(e))for(var a=0;a<e.length;a++){o=e[a];var l=s+ju(o,a);r+=Ll(o,t,i,l,n)}else if(l=t5(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=s+ju(o,a++),r+=Ll(o,t,i,l,n);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return r}function Ua(e,t,i){if(e==null)return e;var s=[],n=0;return Ll(e,s,"","",function(o){return t.call(i,o,n++)}),s}function n5(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var St={current:null},Ol={transition:null},o5={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:Ol,ReactCurrentOwner:Gp};function Tv(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Ua,forEach:function(e,t,i){Ua(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Ua(e,function(){t++}),t},toArray:function(e){return Ua(e,function(t){return t})||[]},only:function(e){if(!Hp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ce.Component=Io;ce.Fragment=K1;ce.Profiler=q1;ce.PureComponent=Np;ce.StrictMode=$1;ce.Suspense=J1;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o5;ce.act=Tv;ce.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=xv({},e.props),n=e.key,o=e.ref,r=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,r=Gp.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)kv.call(t,l)&&!Mv.hasOwnProperty(l)&&(s[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)s.children=i;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}return{$$typeof:Ma,type:e.type,key:n,ref:o,props:s,_owner:r}};ce.createContext=function(e){return e={$$typeof:Q1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Y1,_context:e},e.Consumer=e};ce.createElement=Dv;ce.createFactory=function(e){var t=Dv.bind(null,e);return t.type=e,t};ce.createRef=function(){return{current:null}};ce.forwardRef=function(e){return{$$typeof:X1,render:e}};ce.isValidElement=Hp;ce.lazy=function(e){return{$$typeof:e5,_payload:{_status:-1,_result:e},_init:n5}};ce.memo=function(e,t){return{$$typeof:Z1,type:e,compare:t===void 0?null:t}};ce.startTransition=function(e){var t=Ol.transition;Ol.transition={};try{e()}finally{Ol.transition=t}};ce.unstable_act=Tv;ce.useCallback=function(e,t){return St.current.useCallback(e,t)};ce.useContext=function(e){return St.current.useContext(e)};ce.useDebugValue=function(){};ce.useDeferredValue=function(e){return St.current.useDeferredValue(e)};ce.useEffect=function(e,t){return St.current.useEffect(e,t)};ce.useId=function(){return St.current.useId()};ce.useImperativeHandle=function(e,t,i){return St.current.useImperativeHandle(e,t,i)};ce.useInsertionEffect=function(e,t){return St.current.useInsertionEffect(e,t)};ce.useLayoutEffect=function(e,t){return St.current.useLayoutEffect(e,t)};ce.useMemo=function(e,t){return St.current.useMemo(e,t)};ce.useReducer=function(e,t,i){return St.current.useReducer(e,t,i)};ce.useRef=function(e){return St.current.useRef(e)};ce.useState=function(e){return St.current.useState(e)};ce.useSyncExternalStore=function(e,t,i){return St.current.useSyncExternalStore(e,t,i)};ce.useTransition=function(){return St.current.useTransition()};ce.version="18.3.1";bv.exports=ce;var y=bv.exports;const B=ka(y),r5=j1({__proto__:null,default:B},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a5=y,l5=Symbol.for("react.element"),c5=Symbol.for("react.fragment"),u5=Object.prototype.hasOwnProperty,d5=a5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h5={key:!0,ref:!0,__self:!0,__source:!0};function Av(e,t,i){var s,n={},o=null,r=null;i!==void 0&&(o=""+i),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(r=t.ref);for(s in t)u5.call(t,s)&&!h5.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)n[s]===void 0&&(n[s]=t[s]);return{$$typeof:l5,type:e,key:o,ref:r,props:n,_owner:d5.current}}au.Fragment=c5;au.jsx=Av;au.jsxs=Av;Rv.exports=au;var f=Rv.exports,Iv={exports:{}},jt={},Lv={exports:{}},Ov={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,_){var V=L.length;L.push(_);e:for(;0<V;){var Z=V-1>>>1,Y=L[Z];if(0<n(Y,_))L[Z]=_,L[V]=Y,V=Z;else break e}}function i(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var _=L[0],V=L.pop();if(V!==_){L[0]=V;e:for(var Z=0,Y=L.length,de=Y>>>1;Z<de;){var K=2*(Z+1)-1,W=L[K],J=K+1,oe=L[J];if(0>n(W,V))J<Y&&0>n(oe,W)?(L[Z]=oe,L[J]=V,Z=J):(L[Z]=W,L[K]=V,Z=K);else if(J<Y&&0>n(oe,V))L[Z]=oe,L[J]=V,Z=J;else break e}}return _}function n(L,_){var V=L.sortIndex-_.sortIndex;return V!==0?V:L.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var r=Date,a=r.now();e.unstable_now=function(){return r.now()-a}}var l=[],c=[],u=1,d=null,h=3,p=!1,g=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var _=i(c);_!==null;){if(_.callback===null)s(c);else if(_.startTime<=L)s(c),_.sortIndex=_.expirationTime,t(l,_);else break;_=i(c)}}function R(L){if(v=!1,w(L),!g)if(i(l)!==null)g=!0,U(b);else{var _=i(c);_!==null&&q(R,_.startTime-L)}}function b(L,_){g=!1,v&&(v=!1,m(F),F=-1),p=!0;var V=h;try{for(w(_),d=i(l);d!==null&&(!(d.expirationTime>_)||L&&!T());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,h=d.priorityLevel;var Y=Z(d.expirationTime<=_);_=e.unstable_now(),typeof Y=="function"?d.callback=Y:d===i(l)&&s(l),w(_)}else s(l);d=i(l)}if(d!==null)var de=!0;else{var K=i(c);K!==null&&q(R,K.startTime-_),de=!1}return de}finally{d=null,h=V,p=!1}}var P=!1,x=null,F=-1,k=5,E=-1;function T(){return!(e.unstable_now()-E<k)}function O(){if(x!==null){var L=e.unstable_now();E=L;var _=!0;try{_=x(!0,L)}finally{_?z():(P=!1,x=null)}}else P=!1}var z;if(typeof C=="function")z=function(){C(O)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,j=X.port2;X.port1.onmessage=O,z=function(){j.postMessage(null)}}else z=function(){S(O,0)};function U(L){x=L,P||(P=!0,z())}function q(L,_){F=S(function(){L(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,U(b))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return i(l)},e.unstable_next=function(L){switch(h){case 1:case 2:case 3:var _=3;break;default:_=h}var V=h;h=_;try{return L()}finally{h=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,_){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var V=h;h=L;try{return _()}finally{h=V}},e.unstable_scheduleCallback=function(L,_,V){var Z=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?Z+V:Z):V=Z,L){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=V+Y,L={id:u++,callback:_,priorityLevel:L,startTime:V,expirationTime:Y,sortIndex:-1},V>Z?(L.sortIndex=V,t(c,L),i(l)===null&&L===i(c)&&(v?(m(F),F=-1):v=!0,q(R,V-Z))):(L.sortIndex=Y,t(l,L),g||p||(g=!0,U(b))),L},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(L){var _=h;return function(){var V=h;h=_;try{return L.apply(this,arguments)}finally{h=V}}}})(Ov);Lv.exports=Ov;var p5=Lv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f5=y,Wt=p5;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bv=new Set,Yr={};function In(e,t){mo(e,t),mo(e+"Capture",t)}function mo(e,t){for(Yr[e]=t,e=0;e<t.length;e++)Bv.add(t[e])}var Ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zd=Object.prototype.hasOwnProperty,g5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qg={},Yg={};function m5(e){return Zd.call(Yg,e)?!0:Zd.call(qg,e)?!1:g5.test(e)?Yg[e]=!0:(qg[e]=!0,!1)}function C5(e,t,i,s){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function v5(e,t,i,s){if(t===null||typeof t>"u"||C5(e,t,i,s))return!0;if(s)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wt(e,t,i,s,n,o,r){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=r}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){st[e]=new wt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];st[t]=new wt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){st[e]=new wt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){st[e]=new wt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){st[e]=new wt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){st[e]=new wt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){st[e]=new wt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){st[e]=new wt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){st[e]=new wt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Vp=/[\-:]([a-z])/g;function Wp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Vp,Wp);st[t]=new wt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Vp,Wp);st[t]=new wt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Vp,Wp);st[t]=new wt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){st[e]=new wt(e,1,!1,e.toLowerCase(),null,!1,!1)});st.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){st[e]=new wt(e,1,!1,e.toLowerCase(),null,!0,!0)});function zp(e,t,i,s){var n=st.hasOwnProperty(t)?st[t]:null;(n!==null?n.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(v5(t,i,n,s)&&(i=null),s||n===null?m5(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):n.mustUseProperty?e[n.propertyName]=i===null?n.type===3?!1:"":i:(t=n.attributeName,s=n.attributeNamespace,i===null?e.removeAttribute(t):(n=n.type,i=n===3||n===4&&i===!0?"":""+i,s?e.setAttributeNS(s,t,i):e.setAttribute(t,i))))}var ns=f5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ka=Symbol.for("react.element"),jn=Symbol.for("react.portal"),Un=Symbol.for("react.fragment"),jp=Symbol.for("react.strict_mode"),eh=Symbol.for("react.profiler"),Nv=Symbol.for("react.provider"),_v=Symbol.for("react.context"),Up=Symbol.for("react.forward_ref"),th=Symbol.for("react.suspense"),ih=Symbol.for("react.suspense_list"),Kp=Symbol.for("react.memo"),fs=Symbol.for("react.lazy"),Gv=Symbol.for("react.offscreen"),Qg=Symbol.iterator;function Zo(e){return e===null||typeof e!="object"?null:(e=Qg&&e[Qg]||e["@@iterator"],typeof e=="function"?e:null)}var Be=Object.assign,Uu;function mr(e){if(Uu===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Uu=t&&t[1]||""}return`
`+Uu+e}var Ku=!1;function $u(e,t){if(!e||Ku)return"";Ku=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var n=c.stack.split(`
`),o=s.stack.split(`
`),r=n.length-1,a=o.length-1;1<=r&&0<=a&&n[r]!==o[a];)a--;for(;1<=r&&0<=a;r--,a--)if(n[r]!==o[a]){if(r!==1||a!==1)do if(r--,a--,0>a||n[r]!==o[a]){var l=`
`+n[r].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=r&&0<=a);break}}}finally{Ku=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?mr(e):""}function S5(e){switch(e.tag){case 5:return mr(e.type);case 16:return mr("Lazy");case 13:return mr("Suspense");case 19:return mr("SuspenseList");case 0:case 2:case 15:return e=$u(e.type,!1),e;case 11:return e=$u(e.type.render,!1),e;case 1:return e=$u(e.type,!0),e;default:return""}}function sh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Un:return"Fragment";case jn:return"Portal";case eh:return"Profiler";case jp:return"StrictMode";case th:return"Suspense";case ih:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case _v:return(e.displayName||"Context")+".Consumer";case Nv:return(e._context.displayName||"Context")+".Provider";case Up:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Kp:return t=e.displayName||null,t!==null?t:sh(e.type)||"Memo";case fs:t=e._payload,e=e._init;try{return sh(e(t))}catch{}}return null}function w5(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sh(t);case 8:return t===jp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _s(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Hv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function y5(e){var t=Hv(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var n=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(r){s=""+r,o.call(this,r)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(r){s=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $a(e){e._valueTracker||(e._valueTracker=y5(e))}function Vv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=Hv(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function rc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nh(e,t){var i=t.checked;return Be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Xg(e,t){var i=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;i=_s(t.value!=null?t.value:i),e._wrapperState={initialChecked:s,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Wv(e,t){t=t.checked,t!=null&&zp(e,"checked",t,!1)}function oh(e,t){Wv(e,t);var i=_s(t.value),s=t.type;if(i!=null)s==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?rh(e,t.type,i):t.hasOwnProperty("defaultValue")&&rh(e,t.type,_s(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Jg(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function rh(e,t,i){(t!=="number"||rc(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Cr=Array.isArray;function so(e,t,i,s){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&s&&(e[i].defaultSelected=!0)}else{for(i=""+_s(i),t=null,n=0;n<e.length;n++){if(e[n].value===i){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function ah(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return Be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zg(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(G(92));if(Cr(i)){if(1<i.length)throw Error(G(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:_s(i)}}function zv(e,t){var i=_s(t.value),s=_s(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),s!=null&&(e.defaultValue=""+s)}function em(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function jv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qa,Uv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,s,n){MSApp.execUnsafeLocalFunction(function(){return e(t,i,s,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qa=qa||document.createElement("div"),qa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Qr(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Dr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},R5=["Webkit","ms","Moz","O"];Object.keys(Dr).forEach(function(e){R5.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Dr[t]=Dr[e]})});function Kv(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Dr.hasOwnProperty(e)&&Dr[e]?(""+t).trim():t+"px"}function $v(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var s=i.indexOf("--")===0,n=Kv(i,t[i],s);i==="float"&&(i="cssFloat"),s?e.setProperty(i,n):e[i]=n}}var b5=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ch(e,t){if(t){if(b5[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function uh(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dh=null;function $p(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hh=null,no=null,oo=null;function tm(e){if(e=Aa(e)){if(typeof hh!="function")throw Error(G(280));var t=e.stateNode;t&&(t=hu(t),hh(e.stateNode,e.type,t))}}function qv(e){no?oo?oo.push(e):oo=[e]:no=e}function Yv(){if(no){var e=no,t=oo;if(oo=no=null,tm(e),t)for(e=0;e<t.length;e++)tm(t[e])}}function Qv(e,t){return e(t)}function Xv(){}var qu=!1;function Jv(e,t,i){if(qu)return e(t,i);qu=!0;try{return Qv(e,t,i)}finally{qu=!1,(no!==null||oo!==null)&&(Xv(),Yv())}}function Xr(e,t){var i=e.stateNode;if(i===null)return null;var s=hu(i);if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(G(231,t,typeof i));return i}var ph=!1;if(Ji)try{var er={};Object.defineProperty(er,"passive",{get:function(){ph=!0}}),window.addEventListener("test",er,er),window.removeEventListener("test",er,er)}catch{ph=!1}function P5(e,t,i,s,n,o,r,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(u){this.onError(u)}}var Tr=!1,ac=null,lc=!1,fh=null,x5={onError:function(e){Tr=!0,ac=e}};function F5(e,t,i,s,n,o,r,a,l){Tr=!1,ac=null,P5.apply(x5,arguments)}function E5(e,t,i,s,n,o,r,a,l){if(F5.apply(this,arguments),Tr){if(Tr){var c=ac;Tr=!1,ac=null}else throw Error(G(198));lc||(lc=!0,fh=c)}}function Ln(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function Zv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function im(e){if(Ln(e)!==e)throw Error(G(188))}function k5(e){var t=e.alternate;if(!t){if(t=Ln(e),t===null)throw Error(G(188));return t!==e?null:e}for(var i=e,s=t;;){var n=i.return;if(n===null)break;var o=n.alternate;if(o===null){if(s=n.return,s!==null){i=s;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===i)return im(n),e;if(o===s)return im(n),t;o=o.sibling}throw Error(G(188))}if(i.return!==s.return)i=n,s=o;else{for(var r=!1,a=n.child;a;){if(a===i){r=!0,i=n,s=o;break}if(a===s){r=!0,s=n,i=o;break}a=a.sibling}if(!r){for(a=o.child;a;){if(a===i){r=!0,i=o,s=n;break}if(a===s){r=!0,s=o,i=n;break}a=a.sibling}if(!r)throw Error(G(189))}}if(i.alternate!==s)throw Error(G(190))}if(i.tag!==3)throw Error(G(188));return i.stateNode.current===i?e:t}function e0(e){return e=k5(e),e!==null?t0(e):null}function t0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=t0(e);if(t!==null)return t;e=e.sibling}return null}var i0=Wt.unstable_scheduleCallback,sm=Wt.unstable_cancelCallback,M5=Wt.unstable_shouldYield,D5=Wt.unstable_requestPaint,ze=Wt.unstable_now,T5=Wt.unstable_getCurrentPriorityLevel,qp=Wt.unstable_ImmediatePriority,s0=Wt.unstable_UserBlockingPriority,cc=Wt.unstable_NormalPriority,A5=Wt.unstable_LowPriority,n0=Wt.unstable_IdlePriority,lu=null,Mi=null;function I5(e){if(Mi&&typeof Mi.onCommitFiberRoot=="function")try{Mi.onCommitFiberRoot(lu,e,void 0,(e.current.flags&128)===128)}catch{}}var pi=Math.clz32?Math.clz32:B5,L5=Math.log,O5=Math.LN2;function B5(e){return e>>>=0,e===0?32:31-(L5(e)/O5|0)|0}var Ya=64,Qa=4194304;function vr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc(e,t){var i=e.pendingLanes;if(i===0)return 0;var s=0,n=e.suspendedLanes,o=e.pingedLanes,r=i&268435455;if(r!==0){var a=r&~n;a!==0?s=vr(a):(o&=r,o!==0&&(s=vr(o)))}else r=i&~n,r!==0?s=vr(r):o!==0&&(s=vr(o));if(s===0)return 0;if(t!==0&&t!==s&&!(t&n)&&(n=s&-s,o=t&-t,n>=o||n===16&&(o&4194240)!==0))return t;if(s&4&&(s|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)i=31-pi(t),n=1<<i,s|=e[i],t&=~n;return s}function N5(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _5(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,o=e.pendingLanes;0<o;){var r=31-pi(o),a=1<<r,l=n[r];l===-1?(!(a&i)||a&s)&&(n[r]=N5(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function gh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function o0(){var e=Ya;return Ya<<=1,!(Ya&4194240)&&(Ya=64),e}function Yu(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Da(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-pi(t),e[t]=i}function G5(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<i;){var n=31-pi(i),o=1<<n;t[n]=0,s[n]=-1,e[n]=-1,i&=~o}}function Yp(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-pi(i),n=1<<s;n&t|e[s]&t&&(e[s]|=t),i&=~n}}var Se=0;function r0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var a0,Qp,l0,c0,u0,mh=!1,Xa=[],Fs=null,Es=null,ks=null,Jr=new Map,Zr=new Map,Cs=[],H5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nm(e,t){switch(e){case"focusin":case"focusout":Fs=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":Jr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zr.delete(t.pointerId)}}function tr(e,t,i,s,n,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:o,targetContainers:[n]},t!==null&&(t=Aa(t),t!==null&&Qp(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function V5(e,t,i,s,n){switch(t){case"focusin":return Fs=tr(Fs,e,t,i,s,n),!0;case"dragenter":return Es=tr(Es,e,t,i,s,n),!0;case"mouseover":return ks=tr(ks,e,t,i,s,n),!0;case"pointerover":var o=n.pointerId;return Jr.set(o,tr(Jr.get(o)||null,e,t,i,s,n)),!0;case"gotpointercapture":return o=n.pointerId,Zr.set(o,tr(Zr.get(o)||null,e,t,i,s,n)),!0}return!1}function d0(e){var t=un(e.target);if(t!==null){var i=Ln(t);if(i!==null){if(t=i.tag,t===13){if(t=Zv(i),t!==null){e.blockedOn=t,u0(e.priority,function(){l0(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Ch(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);dh=s,i.target.dispatchEvent(s),dh=null}else return t=Aa(i),t!==null&&Qp(t),e.blockedOn=i,!1;t.shift()}return!0}function om(e,t,i){Bl(e)&&i.delete(t)}function W5(){mh=!1,Fs!==null&&Bl(Fs)&&(Fs=null),Es!==null&&Bl(Es)&&(Es=null),ks!==null&&Bl(ks)&&(ks=null),Jr.forEach(om),Zr.forEach(om)}function ir(e,t){e.blockedOn===t&&(e.blockedOn=null,mh||(mh=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,W5)))}function ea(e){function t(n){return ir(n,e)}if(0<Xa.length){ir(Xa[0],e);for(var i=1;i<Xa.length;i++){var s=Xa[i];s.blockedOn===e&&(s.blockedOn=null)}}for(Fs!==null&&ir(Fs,e),Es!==null&&ir(Es,e),ks!==null&&ir(ks,e),Jr.forEach(t),Zr.forEach(t),i=0;i<Cs.length;i++)s=Cs[i],s.blockedOn===e&&(s.blockedOn=null);for(;0<Cs.length&&(i=Cs[0],i.blockedOn===null);)d0(i),i.blockedOn===null&&Cs.shift()}var ro=ns.ReactCurrentBatchConfig,dc=!0;function z5(e,t,i,s){var n=Se,o=ro.transition;ro.transition=null;try{Se=1,Xp(e,t,i,s)}finally{Se=n,ro.transition=o}}function j5(e,t,i,s){var n=Se,o=ro.transition;ro.transition=null;try{Se=4,Xp(e,t,i,s)}finally{Se=n,ro.transition=o}}function Xp(e,t,i,s){if(dc){var n=Ch(e,t,i,s);if(n===null)od(e,t,s,hc,i),nm(e,s);else if(V5(n,e,t,i,s))s.stopPropagation();else if(nm(e,s),t&4&&-1<H5.indexOf(e)){for(;n!==null;){var o=Aa(n);if(o!==null&&a0(o),o=Ch(e,t,i,s),o===null&&od(e,t,s,hc,i),o===n)break;n=o}n!==null&&s.stopPropagation()}else od(e,t,s,null,i)}}var hc=null;function Ch(e,t,i,s){if(hc=null,e=$p(s),e=un(e),e!==null)if(t=Ln(e),t===null)e=null;else if(i=t.tag,i===13){if(e=Zv(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return hc=e,null}function h0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(T5()){case qp:return 1;case s0:return 4;case cc:case A5:return 16;case n0:return 536870912;default:return 16}default:return 16}}var Ss=null,Jp=null,Nl=null;function p0(){if(Nl)return Nl;var e,t=Jp,i=t.length,s,n="value"in Ss?Ss.value:Ss.textContent,o=n.length;for(e=0;e<i&&t[e]===n[e];e++);var r=i-e;for(s=1;s<=r&&t[i-s]===n[o-s];s++);return Nl=n.slice(e,1<s?1-s:void 0)}function _l(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ja(){return!0}function rm(){return!1}function Ut(e){function t(i,s,n,o,r){this._reactName=i,this._targetInst=n,this.type=s,this.nativeEvent=o,this.target=r,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(i=e[a],this[a]=i?i(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ja:rm,this.isPropagationStopped=rm,this}return Be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ja)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ja)},persist:function(){},isPersistent:Ja}),t}var Lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zp=Ut(Lo),Ta=Be({},Lo,{view:0,detail:0}),U5=Ut(Ta),Qu,Xu,sr,cu=Be({},Ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ef,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&e.type==="mousemove"?(Qu=e.screenX-sr.screenX,Xu=e.screenY-sr.screenY):Xu=Qu=0,sr=e),Qu)},movementY:function(e){return"movementY"in e?e.movementY:Xu}}),am=Ut(cu),K5=Be({},cu,{dataTransfer:0}),$5=Ut(K5),q5=Be({},Ta,{relatedTarget:0}),Ju=Ut(q5),Y5=Be({},Lo,{animationName:0,elapsedTime:0,pseudoElement:0}),Q5=Ut(Y5),X5=Be({},Lo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),J5=Ut(X5),Z5=Be({},Lo,{data:0}),lm=Ut(Z5),e8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},i8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s8(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=i8[e])?!!t[e]:!1}function ef(){return s8}var n8=Be({},Ta,{key:function(e){if(e.key){var t=e8[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_l(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?t8[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ef,charCode:function(e){return e.type==="keypress"?_l(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_l(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),o8=Ut(n8),r8=Be({},cu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cm=Ut(r8),a8=Be({},Ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ef}),l8=Ut(a8),c8=Be({},Lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),u8=Ut(c8),d8=Be({},cu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),h8=Ut(d8),p8=[9,13,27,32],tf=Ji&&"CompositionEvent"in window,Ar=null;Ji&&"documentMode"in document&&(Ar=document.documentMode);var f8=Ji&&"TextEvent"in window&&!Ar,f0=Ji&&(!tf||Ar&&8<Ar&&11>=Ar),um=" ",dm=!1;function g0(e,t){switch(e){case"keyup":return p8.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function m0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kn=!1;function g8(e,t){switch(e){case"compositionend":return m0(t);case"keypress":return t.which!==32?null:(dm=!0,um);case"textInput":return e=t.data,e===um&&dm?null:e;default:return null}}function m8(e,t){if(Kn)return e==="compositionend"||!tf&&g0(e,t)?(e=p0(),Nl=Jp=Ss=null,Kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return f0&&t.locale!=="ko"?null:t.data;default:return null}}var C8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!C8[e.type]:t==="textarea"}function C0(e,t,i,s){qv(s),t=pc(t,"onChange"),0<t.length&&(i=new Zp("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var Ir=null,ta=null;function v8(e){k0(e,0)}function uu(e){var t=Yn(e);if(Vv(t))return e}function S8(e,t){if(e==="change")return t}var v0=!1;if(Ji){var Zu;if(Ji){var ed="oninput"in document;if(!ed){var pm=document.createElement("div");pm.setAttribute("oninput","return;"),ed=typeof pm.oninput=="function"}Zu=ed}else Zu=!1;v0=Zu&&(!document.documentMode||9<document.documentMode)}function fm(){Ir&&(Ir.detachEvent("onpropertychange",S0),ta=Ir=null)}function S0(e){if(e.propertyName==="value"&&uu(ta)){var t=[];C0(t,ta,e,$p(e)),Jv(v8,t)}}function w8(e,t,i){e==="focusin"?(fm(),Ir=t,ta=i,Ir.attachEvent("onpropertychange",S0)):e==="focusout"&&fm()}function y8(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uu(ta)}function R8(e,t){if(e==="click")return uu(t)}function b8(e,t){if(e==="input"||e==="change")return uu(t)}function P8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mi=typeof Object.is=="function"?Object.is:P8;function ia(e,t){if(mi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var n=i[s];if(!Zd.call(t,n)||!mi(e[n],t[n]))return!1}return!0}function gm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mm(e,t){var i=gm(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=gm(i)}}function w0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?w0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function y0(){for(var e=window,t=rc();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=rc(e.document)}return t}function sf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function x8(e){var t=y0(),i=e.focusedElem,s=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&w0(i.ownerDocument.documentElement,i)){if(s!==null&&sf(i)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=i.textContent.length,o=Math.min(s.start,n);s=s.end===void 0?o:Math.min(s.end,n),!e.extend&&o>s&&(n=s,s=o,o=n),n=mm(i,o);var r=mm(i,s);n&&r&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==r.node||e.focusOffset!==r.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),o>s?(e.addRange(t),e.extend(r.node,r.offset)):(t.setEnd(r.node,r.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var F8=Ji&&"documentMode"in document&&11>=document.documentMode,$n=null,vh=null,Lr=null,Sh=!1;function Cm(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Sh||$n==null||$n!==rc(s)||(s=$n,"selectionStart"in s&&sf(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Lr&&ia(Lr,s)||(Lr=s,s=pc(vh,"onSelect"),0<s.length&&(t=new Zp("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=$n)))}function Za(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var qn={animationend:Za("Animation","AnimationEnd"),animationiteration:Za("Animation","AnimationIteration"),animationstart:Za("Animation","AnimationStart"),transitionend:Za("Transition","TransitionEnd")},td={},R0={};Ji&&(R0=document.createElement("div").style,"AnimationEvent"in window||(delete qn.animationend.animation,delete qn.animationiteration.animation,delete qn.animationstart.animation),"TransitionEvent"in window||delete qn.transitionend.transition);function du(e){if(td[e])return td[e];if(!qn[e])return e;var t=qn[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in R0)return td[e]=t[i];return e}var b0=du("animationend"),P0=du("animationiteration"),x0=du("animationstart"),F0=du("transitionend"),E0=new Map,vm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(e,t){E0.set(e,t),In(t,[e])}for(var id=0;id<vm.length;id++){var sd=vm[id],E8=sd.toLowerCase(),k8=sd[0].toUpperCase()+sd.slice(1);zs(E8,"on"+k8)}zs(b0,"onAnimationEnd");zs(P0,"onAnimationIteration");zs(x0,"onAnimationStart");zs("dblclick","onDoubleClick");zs("focusin","onFocus");zs("focusout","onBlur");zs(F0,"onTransitionEnd");mo("onMouseEnter",["mouseout","mouseover"]);mo("onMouseLeave",["mouseout","mouseover"]);mo("onPointerEnter",["pointerout","pointerover"]);mo("onPointerLeave",["pointerout","pointerover"]);In("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));In("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));In("onBeforeInput",["compositionend","keypress","textInput","paste"]);In("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));In("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));In("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M8=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function Sm(e,t,i){var s=e.type||"unknown-event";e.currentTarget=i,E5(s,t,void 0,e),e.currentTarget=null}function k0(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],n=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var r=s.length-1;0<=r;r--){var a=s[r],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&n.isPropagationStopped())break e;Sm(n,a,c),o=l}else for(r=0;r<s.length;r++){if(a=s[r],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&n.isPropagationStopped())break e;Sm(n,a,c),o=l}}}if(lc)throw e=fh,lc=!1,fh=null,e}function xe(e,t){var i=t[Ph];i===void 0&&(i=t[Ph]=new Set);var s=e+"__bubble";i.has(s)||(M0(t,e,2,!1),i.add(s))}function nd(e,t,i){var s=0;t&&(s|=4),M0(i,e,s,t)}var el="_reactListening"+Math.random().toString(36).slice(2);function sa(e){if(!e[el]){e[el]=!0,Bv.forEach(function(i){i!=="selectionchange"&&(M8.has(i)||nd(i,!1,e),nd(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[el]||(t[el]=!0,nd("selectionchange",!1,t))}}function M0(e,t,i,s){switch(h0(t)){case 1:var n=z5;break;case 4:n=j5;break;default:n=Xp}i=n.bind(null,t,i,e),n=void 0,!ph||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):n!==void 0?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function od(e,t,i,s,n){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var r=s.tag;if(r===3||r===4){var a=s.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(r===4)for(r=s.return;r!==null;){var l=r.tag;if((l===3||l===4)&&(l=r.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;r=r.return}for(;a!==null;){if(r=un(a),r===null)return;if(l=r.tag,l===5||l===6){s=o=r;continue e}a=a.parentNode}}s=s.return}Jv(function(){var c=o,u=$p(i),d=[];e:{var h=E0.get(e);if(h!==void 0){var p=Zp,g=e;switch(e){case"keypress":if(_l(i)===0)break e;case"keydown":case"keyup":p=o8;break;case"focusin":g="focus",p=Ju;break;case"focusout":g="blur",p=Ju;break;case"beforeblur":case"afterblur":p=Ju;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=am;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=$5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=l8;break;case b0:case P0:case x0:p=Q5;break;case F0:p=u8;break;case"scroll":p=U5;break;case"wheel":p=h8;break;case"copy":case"cut":case"paste":p=J5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=cm}var v=(t&4)!==0,S=!v&&e==="scroll",m=v?h!==null?h+"Capture":null:h;v=[];for(var C=c,w;C!==null;){w=C;var R=w.stateNode;if(w.tag===5&&R!==null&&(w=R,m!==null&&(R=Xr(C,m),R!=null&&v.push(na(C,R,w)))),S)break;C=C.return}0<v.length&&(h=new p(h,g,null,i,u),d.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&i!==dh&&(g=i.relatedTarget||i.fromElement)&&(un(g)||g[Zi]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=i.relatedTarget||i.toElement,p=c,g=g?un(g):null,g!==null&&(S=Ln(g),g!==S||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(v=am,R="onMouseLeave",m="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(v=cm,R="onPointerLeave",m="onPointerEnter",C="pointer"),S=p==null?h:Yn(p),w=g==null?h:Yn(g),h=new v(R,C+"leave",p,i,u),h.target=S,h.relatedTarget=w,R=null,un(u)===c&&(v=new v(m,C+"enter",g,i,u),v.target=w,v.relatedTarget=S,R=v),S=R,p&&g)t:{for(v=p,m=g,C=0,w=v;w;w=Gn(w))C++;for(w=0,R=m;R;R=Gn(R))w++;for(;0<C-w;)v=Gn(v),C--;for(;0<w-C;)m=Gn(m),w--;for(;C--;){if(v===m||m!==null&&v===m.alternate)break t;v=Gn(v),m=Gn(m)}v=null}else v=null;p!==null&&wm(d,h,p,v,!1),g!==null&&S!==null&&wm(d,S,g,v,!0)}}e:{if(h=c?Yn(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var b=S8;else if(hm(h))if(v0)b=b8;else{b=y8;var P=w8}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=R8);if(b&&(b=b(e,c))){C0(d,b,i,u);break e}P&&P(e,h,c),e==="focusout"&&(P=h._wrapperState)&&P.controlled&&h.type==="number"&&rh(h,"number",h.value)}switch(P=c?Yn(c):window,e){case"focusin":(hm(P)||P.contentEditable==="true")&&($n=P,vh=c,Lr=null);break;case"focusout":Lr=vh=$n=null;break;case"mousedown":Sh=!0;break;case"contextmenu":case"mouseup":case"dragend":Sh=!1,Cm(d,i,u);break;case"selectionchange":if(F8)break;case"keydown":case"keyup":Cm(d,i,u)}var x;if(tf)e:{switch(e){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else Kn?g0(e,i)&&(F="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(F="onCompositionStart");F&&(f0&&i.locale!=="ko"&&(Kn||F!=="onCompositionStart"?F==="onCompositionEnd"&&Kn&&(x=p0()):(Ss=u,Jp="value"in Ss?Ss.value:Ss.textContent,Kn=!0)),P=pc(c,F),0<P.length&&(F=new lm(F,e,null,i,u),d.push({event:F,listeners:P}),x?F.data=x:(x=m0(i),x!==null&&(F.data=x)))),(x=f8?g8(e,i):m8(e,i))&&(c=pc(c,"onBeforeInput"),0<c.length&&(u=new lm("onBeforeInput","beforeinput",null,i,u),d.push({event:u,listeners:c}),u.data=x))}k0(d,t)})}function na(e,t,i){return{instance:e,listener:t,currentTarget:i}}function pc(e,t){for(var i=t+"Capture",s=[];e!==null;){var n=e,o=n.stateNode;n.tag===5&&o!==null&&(n=o,o=Xr(e,i),o!=null&&s.unshift(na(e,o,n)),o=Xr(e,t),o!=null&&s.push(na(e,o,n))),e=e.return}return s}function Gn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wm(e,t,i,s,n){for(var o=t._reactName,r=[];i!==null&&i!==s;){var a=i,l=a.alternate,c=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&c!==null&&(a=c,n?(l=Xr(i,o),l!=null&&r.unshift(na(i,l,a))):n||(l=Xr(i,o),l!=null&&r.push(na(i,l,a)))),i=i.return}r.length!==0&&e.push({event:t,listeners:r})}var D8=/\r\n?/g,T8=/\u0000|\uFFFD/g;function ym(e){return(typeof e=="string"?e:""+e).replace(D8,`
`).replace(T8,"")}function tl(e,t,i){if(t=ym(t),ym(e)!==t&&i)throw Error(G(425))}function fc(){}var wh=null,yh=null;function Rh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bh=typeof setTimeout=="function"?setTimeout:void 0,A8=typeof clearTimeout=="function"?clearTimeout:void 0,Rm=typeof Promise=="function"?Promise:void 0,I8=typeof queueMicrotask=="function"?queueMicrotask:typeof Rm<"u"?function(e){return Rm.resolve(null).then(e).catch(L8)}:bh;function L8(e){setTimeout(function(){throw e})}function rd(e,t){var i=t,s=0;do{var n=i.nextSibling;if(e.removeChild(i),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(s===0){e.removeChild(n),ea(t);return}s--}else i!=="$"&&i!=="$?"&&i!=="$!"||s++;i=n}while(i);ea(t)}function Ms(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Oo=Math.random().toString(36).slice(2),Fi="__reactFiber$"+Oo,oa="__reactProps$"+Oo,Zi="__reactContainer$"+Oo,Ph="__reactEvents$"+Oo,O8="__reactListeners$"+Oo,B8="__reactHandles$"+Oo;function un(e){var t=e[Fi];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Zi]||i[Fi]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=bm(e);e!==null;){if(i=e[Fi])return i;e=bm(e)}return t}e=i,i=e.parentNode}return null}function Aa(e){return e=e[Fi]||e[Zi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function hu(e){return e[oa]||null}var xh=[],Qn=-1;function js(e){return{current:e}}function Me(e){0>Qn||(e.current=xh[Qn],xh[Qn]=null,Qn--)}function be(e,t){Qn++,xh[Qn]=e.current,e.current=t}var Gs={},ct=js(Gs),Dt=js(!1),bn=Gs;function Co(e,t){var i=e.type.contextTypes;if(!i)return Gs;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var n={},o;for(o in i)n[o]=t[o];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Tt(e){return e=e.childContextTypes,e!=null}function gc(){Me(Dt),Me(ct)}function Pm(e,t,i){if(ct.current!==Gs)throw Error(G(168));be(ct,t),be(Dt,i)}function D0(e,t,i){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return i;s=s.getChildContext();for(var n in s)if(!(n in t))throw Error(G(108,w5(e)||"Unknown",n));return Be({},i,s)}function mc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gs,bn=ct.current,be(ct,e),be(Dt,Dt.current),!0}function xm(e,t,i){var s=e.stateNode;if(!s)throw Error(G(169));i?(e=D0(e,t,bn),s.__reactInternalMemoizedMergedChildContext=e,Me(Dt),Me(ct),be(ct,e)):Me(Dt),be(Dt,i)}var Wi=null,pu=!1,ad=!1;function T0(e){Wi===null?Wi=[e]:Wi.push(e)}function N8(e){pu=!0,T0(e)}function Us(){if(!ad&&Wi!==null){ad=!0;var e=0,t=Se;try{var i=Wi;for(Se=1;e<i.length;e++){var s=i[e];do s=s(!0);while(s!==null)}Wi=null,pu=!1}catch(n){throw Wi!==null&&(Wi=Wi.slice(e+1)),i0(qp,Us),n}finally{Se=t,ad=!1}}return null}var Xn=[],Jn=0,Cc=null,vc=0,Yt=[],Qt=0,Pn=null,Ui=1,Ki="";function tn(e,t){Xn[Jn++]=vc,Xn[Jn++]=Cc,Cc=e,vc=t}function A0(e,t,i){Yt[Qt++]=Ui,Yt[Qt++]=Ki,Yt[Qt++]=Pn,Pn=e;var s=Ui;e=Ki;var n=32-pi(s)-1;s&=~(1<<n),i+=1;var o=32-pi(t)+n;if(30<o){var r=n-n%5;o=(s&(1<<r)-1).toString(32),s>>=r,n-=r,Ui=1<<32-pi(t)+n|i<<n|s,Ki=o+e}else Ui=1<<o|i<<n|s,Ki=e}function nf(e){e.return!==null&&(tn(e,1),A0(e,1,0))}function of(e){for(;e===Cc;)Cc=Xn[--Jn],Xn[Jn]=null,vc=Xn[--Jn],Xn[Jn]=null;for(;e===Pn;)Pn=Yt[--Qt],Yt[Qt]=null,Ki=Yt[--Qt],Yt[Qt]=null,Ui=Yt[--Qt],Yt[Qt]=null}var Ht=null,_t=null,De=!1,ui=null;function I0(e,t){var i=Xt(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Fm(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ht=e,_t=Ms(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ht=e,_t=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Pn!==null?{id:Ui,overflow:Ki}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Xt(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Ht=e,_t=null,!0):!1;default:return!1}}function Fh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eh(e){if(De){var t=_t;if(t){var i=t;if(!Fm(e,t)){if(Fh(e))throw Error(G(418));t=Ms(i.nextSibling);var s=Ht;t&&Fm(e,t)?I0(s,i):(e.flags=e.flags&-4097|2,De=!1,Ht=e)}}else{if(Fh(e))throw Error(G(418));e.flags=e.flags&-4097|2,De=!1,Ht=e}}}function Em(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ht=e}function il(e){if(e!==Ht)return!1;if(!De)return Em(e),De=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Rh(e.type,e.memoizedProps)),t&&(t=_t)){if(Fh(e))throw L0(),Error(G(418));for(;t;)I0(e,t),t=Ms(t.nextSibling)}if(Em(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){_t=Ms(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}_t=null}}else _t=Ht?Ms(e.stateNode.nextSibling):null;return!0}function L0(){for(var e=_t;e;)e=Ms(e.nextSibling)}function vo(){_t=Ht=null,De=!1}function rf(e){ui===null?ui=[e]:ui.push(e)}var _8=ns.ReactCurrentBatchConfig;function nr(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(G(309));var s=i.stateNode}if(!s)throw Error(G(147,e));var n=s,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(r){var a=n.refs;r===null?delete a[o]:a[o]=r},t._stringRef=o,t)}if(typeof e!="string")throw Error(G(284));if(!i._owner)throw Error(G(290,e))}return e}function sl(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function km(e){var t=e._init;return t(e._payload)}function O0(e){function t(m,C){if(e){var w=m.deletions;w===null?(m.deletions=[C],m.flags|=16):w.push(C)}}function i(m,C){if(!e)return null;for(;C!==null;)t(m,C),C=C.sibling;return null}function s(m,C){for(m=new Map;C!==null;)C.key!==null?m.set(C.key,C):m.set(C.index,C),C=C.sibling;return m}function n(m,C){return m=Is(m,C),m.index=0,m.sibling=null,m}function o(m,C,w){return m.index=w,e?(w=m.alternate,w!==null?(w=w.index,w<C?(m.flags|=2,C):w):(m.flags|=2,C)):(m.flags|=1048576,C)}function r(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,C,w,R){return C===null||C.tag!==6?(C=fd(w,m.mode,R),C.return=m,C):(C=n(C,w),C.return=m,C)}function l(m,C,w,R){var b=w.type;return b===Un?u(m,C,w.props.children,R,w.key):C!==null&&(C.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===fs&&km(b)===C.type)?(R=n(C,w.props),R.ref=nr(m,C,w),R.return=m,R):(R=Ul(w.type,w.key,w.props,null,m.mode,R),R.ref=nr(m,C,w),R.return=m,R)}function c(m,C,w,R){return C===null||C.tag!==4||C.stateNode.containerInfo!==w.containerInfo||C.stateNode.implementation!==w.implementation?(C=gd(w,m.mode,R),C.return=m,C):(C=n(C,w.children||[]),C.return=m,C)}function u(m,C,w,R,b){return C===null||C.tag!==7?(C=mn(w,m.mode,R,b),C.return=m,C):(C=n(C,w),C.return=m,C)}function d(m,C,w){if(typeof C=="string"&&C!==""||typeof C=="number")return C=fd(""+C,m.mode,w),C.return=m,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ka:return w=Ul(C.type,C.key,C.props,null,m.mode,w),w.ref=nr(m,null,C),w.return=m,w;case jn:return C=gd(C,m.mode,w),C.return=m,C;case fs:var R=C._init;return d(m,R(C._payload),w)}if(Cr(C)||Zo(C))return C=mn(C,m.mode,w,null),C.return=m,C;sl(m,C)}return null}function h(m,C,w,R){var b=C!==null?C.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return b!==null?null:a(m,C,""+w,R);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ka:return w.key===b?l(m,C,w,R):null;case jn:return w.key===b?c(m,C,w,R):null;case fs:return b=w._init,h(m,C,b(w._payload),R)}if(Cr(w)||Zo(w))return b!==null?null:u(m,C,w,R,null);sl(m,w)}return null}function p(m,C,w,R,b){if(typeof R=="string"&&R!==""||typeof R=="number")return m=m.get(w)||null,a(C,m,""+R,b);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ka:return m=m.get(R.key===null?w:R.key)||null,l(C,m,R,b);case jn:return m=m.get(R.key===null?w:R.key)||null,c(C,m,R,b);case fs:var P=R._init;return p(m,C,w,P(R._payload),b)}if(Cr(R)||Zo(R))return m=m.get(w)||null,u(C,m,R,b,null);sl(C,R)}return null}function g(m,C,w,R){for(var b=null,P=null,x=C,F=C=0,k=null;x!==null&&F<w.length;F++){x.index>F?(k=x,x=null):k=x.sibling;var E=h(m,x,w[F],R);if(E===null){x===null&&(x=k);break}e&&x&&E.alternate===null&&t(m,x),C=o(E,C,F),P===null?b=E:P.sibling=E,P=E,x=k}if(F===w.length)return i(m,x),De&&tn(m,F),b;if(x===null){for(;F<w.length;F++)x=d(m,w[F],R),x!==null&&(C=o(x,C,F),P===null?b=x:P.sibling=x,P=x);return De&&tn(m,F),b}for(x=s(m,x);F<w.length;F++)k=p(x,m,F,w[F],R),k!==null&&(e&&k.alternate!==null&&x.delete(k.key===null?F:k.key),C=o(k,C,F),P===null?b=k:P.sibling=k,P=k);return e&&x.forEach(function(T){return t(m,T)}),De&&tn(m,F),b}function v(m,C,w,R){var b=Zo(w);if(typeof b!="function")throw Error(G(150));if(w=b.call(w),w==null)throw Error(G(151));for(var P=b=null,x=C,F=C=0,k=null,E=w.next();x!==null&&!E.done;F++,E=w.next()){x.index>F?(k=x,x=null):k=x.sibling;var T=h(m,x,E.value,R);if(T===null){x===null&&(x=k);break}e&&x&&T.alternate===null&&t(m,x),C=o(T,C,F),P===null?b=T:P.sibling=T,P=T,x=k}if(E.done)return i(m,x),De&&tn(m,F),b;if(x===null){for(;!E.done;F++,E=w.next())E=d(m,E.value,R),E!==null&&(C=o(E,C,F),P===null?b=E:P.sibling=E,P=E);return De&&tn(m,F),b}for(x=s(m,x);!E.done;F++,E=w.next())E=p(x,m,F,E.value,R),E!==null&&(e&&E.alternate!==null&&x.delete(E.key===null?F:E.key),C=o(E,C,F),P===null?b=E:P.sibling=E,P=E);return e&&x.forEach(function(O){return t(m,O)}),De&&tn(m,F),b}function S(m,C,w,R){if(typeof w=="object"&&w!==null&&w.type===Un&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ka:e:{for(var b=w.key,P=C;P!==null;){if(P.key===b){if(b=w.type,b===Un){if(P.tag===7){i(m,P.sibling),C=n(P,w.props.children),C.return=m,m=C;break e}}else if(P.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===fs&&km(b)===P.type){i(m,P.sibling),C=n(P,w.props),C.ref=nr(m,P,w),C.return=m,m=C;break e}i(m,P);break}else t(m,P);P=P.sibling}w.type===Un?(C=mn(w.props.children,m.mode,R,w.key),C.return=m,m=C):(R=Ul(w.type,w.key,w.props,null,m.mode,R),R.ref=nr(m,C,w),R.return=m,m=R)}return r(m);case jn:e:{for(P=w.key;C!==null;){if(C.key===P)if(C.tag===4&&C.stateNode.containerInfo===w.containerInfo&&C.stateNode.implementation===w.implementation){i(m,C.sibling),C=n(C,w.children||[]),C.return=m,m=C;break e}else{i(m,C);break}else t(m,C);C=C.sibling}C=gd(w,m.mode,R),C.return=m,m=C}return r(m);case fs:return P=w._init,S(m,C,P(w._payload),R)}if(Cr(w))return g(m,C,w,R);if(Zo(w))return v(m,C,w,R);sl(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,C!==null&&C.tag===6?(i(m,C.sibling),C=n(C,w),C.return=m,m=C):(i(m,C),C=fd(w,m.mode,R),C.return=m,m=C),r(m)):i(m,C)}return S}var So=O0(!0),B0=O0(!1),Sc=js(null),wc=null,Zn=null,af=null;function lf(){af=Zn=wc=null}function cf(e){var t=Sc.current;Me(Sc),e._currentValue=t}function kh(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function ao(e,t){wc=e,af=Zn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ft=!0),e.firstContext=null)}function si(e){var t=e._currentValue;if(af!==e)if(e={context:e,memoizedValue:t,next:null},Zn===null){if(wc===null)throw Error(G(308));Zn=e,wc.dependencies={lanes:0,firstContext:e}}else Zn=Zn.next=e;return t}var dn=null;function uf(e){dn===null?dn=[e]:dn.push(e)}function N0(e,t,i,s){var n=t.interleaved;return n===null?(i.next=i,uf(t)):(i.next=n.next,n.next=i),t.interleaved=i,es(e,s)}function es(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var gs=!1;function df(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ds(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,he&2){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,es(e,i)}return n=s.interleaved,n===null?(t.next=t,uf(s)):(t.next=n.next,n.next=t),s.interleaved=t,es(e,i)}function Gl(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,Yp(e,i)}}function Mm(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var n=null,o=null;if(i=i.firstBaseUpdate,i!==null){do{var r={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};o===null?n=o=r:o=o.next=r,i=i.next}while(i!==null);o===null?n=o=t:o=o.next=t}else n=o=t;i={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:s.shared,effects:s.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function yc(e,t,i,s){var n=e.updateQueue;gs=!1;var o=n.firstBaseUpdate,r=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var l=a,c=l.next;l.next=null,r===null?o=c:r.next=c,r=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==r&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=n.baseState;r=0,u=c=l=null,a=o;do{var h=a.lane,p=a.eventTime;if((s&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,v=a;switch(h=t,p=i,v.tag){case 1:if(g=v.payload,typeof g=="function"){d=g.call(p,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(p,d,h):g,h==null)break e;d=Be({},d,h);break e;case 2:gs=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=n.effects,h===null?n.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,r|=h;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;h=a,a=h.next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}while(!0);if(u===null&&(l=d),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=u,t=n.shared.interleaved,t!==null){n=t;do r|=n.lane,n=n.next;while(n!==t)}else o===null&&(n.shared.lanes=0);Fn|=r,e.lanes=r,e.memoizedState=d}}function Dm(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],n=s.callback;if(n!==null){if(s.callback=null,s=i,typeof n!="function")throw Error(G(191,n));n.call(s)}}}var Ia={},Di=js(Ia),ra=js(Ia),aa=js(Ia);function hn(e){if(e===Ia)throw Error(G(174));return e}function hf(e,t){switch(be(aa,t),be(ra,e),be(Di,Ia),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lh(t,e)}Me(Di),be(Di,t)}function wo(){Me(Di),Me(ra),Me(aa)}function G0(e){hn(aa.current);var t=hn(Di.current),i=lh(t,e.type);t!==i&&(be(ra,e),be(Di,i))}function pf(e){ra.current===e&&(Me(Di),Me(ra))}var Te=js(0);function Rc(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ld=[];function ff(){for(var e=0;e<ld.length;e++)ld[e]._workInProgressVersionPrimary=null;ld.length=0}var Hl=ns.ReactCurrentDispatcher,cd=ns.ReactCurrentBatchConfig,xn=0,Le=null,$e=null,Qe=null,bc=!1,Or=!1,la=0,G8=0;function nt(){throw Error(G(321))}function gf(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!mi(e[i],t[i]))return!1;return!0}function mf(e,t,i,s,n,o){if(xn=o,Le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Hl.current=e===null||e.memoizedState===null?z8:j8,e=i(s,n),Or){o=0;do{if(Or=!1,la=0,25<=o)throw Error(G(301));o+=1,Qe=$e=null,t.updateQueue=null,Hl.current=U8,e=i(s,n)}while(Or)}if(Hl.current=Pc,t=$e!==null&&$e.next!==null,xn=0,Qe=$e=Le=null,bc=!1,t)throw Error(G(300));return e}function Cf(){var e=la!==0;return la=0,e}function Pi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Le.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function ni(){if($e===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=Qe===null?Le.memoizedState:Qe.next;if(t!==null)Qe=t,$e=e;else{if(e===null)throw Error(G(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Qe===null?Le.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function ca(e,t){return typeof t=="function"?t(e):t}function ud(e){var t=ni(),i=t.queue;if(i===null)throw Error(G(311));i.lastRenderedReducer=e;var s=$e,n=s.baseQueue,o=i.pending;if(o!==null){if(n!==null){var r=n.next;n.next=o.next,o.next=r}s.baseQueue=n=o,i.pending=null}if(n!==null){o=n.next,s=s.baseState;var a=r=null,l=null,c=o;do{var u=c.lane;if((xn&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:e(s,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,r=s):l=l.next=d,Le.lanes|=u,Fn|=u}c=c.next}while(c!==null&&c!==o);l===null?r=s:l.next=a,mi(s,t.memoizedState)||(Ft=!0),t.memoizedState=s,t.baseState=r,t.baseQueue=l,i.lastRenderedState=s}if(e=i.interleaved,e!==null){n=e;do o=n.lane,Le.lanes|=o,Fn|=o,n=n.next;while(n!==e)}else n===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function dd(e){var t=ni(),i=t.queue;if(i===null)throw Error(G(311));i.lastRenderedReducer=e;var s=i.dispatch,n=i.pending,o=t.memoizedState;if(n!==null){i.pending=null;var r=n=n.next;do o=e(o,r.action),r=r.next;while(r!==n);mi(o,t.memoizedState)||(Ft=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),i.lastRenderedState=o}return[o,s]}function H0(){}function V0(e,t){var i=Le,s=ni(),n=t(),o=!mi(s.memoizedState,n);if(o&&(s.memoizedState=n,Ft=!0),s=s.queue,vf(j0.bind(null,i,s,e),[e]),s.getSnapshot!==t||o||Qe!==null&&Qe.memoizedState.tag&1){if(i.flags|=2048,ua(9,z0.bind(null,i,s,n,t),void 0,null),Je===null)throw Error(G(349));xn&30||W0(i,t,n)}return n}function W0(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function z0(e,t,i,s){t.value=i,t.getSnapshot=s,U0(t)&&K0(e)}function j0(e,t,i){return i(function(){U0(t)&&K0(e)})}function U0(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!mi(e,i)}catch{return!0}}function K0(e){var t=es(e,1);t!==null&&fi(t,e,1,-1)}function Tm(e){var t=Pi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:e},t.queue=e,e=e.dispatch=W8.bind(null,Le,e),[t.memoizedState,e]}function ua(e,t,i,s){return e={tag:e,create:t,destroy:i,deps:s,next:null},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e)),e}function $0(){return ni().memoizedState}function Vl(e,t,i,s){var n=Pi();Le.flags|=e,n.memoizedState=ua(1|t,i,void 0,s===void 0?null:s)}function fu(e,t,i,s){var n=ni();s=s===void 0?null:s;var o=void 0;if($e!==null){var r=$e.memoizedState;if(o=r.destroy,s!==null&&gf(s,r.deps)){n.memoizedState=ua(t,i,o,s);return}}Le.flags|=e,n.memoizedState=ua(1|t,i,o,s)}function Am(e,t){return Vl(8390656,8,e,t)}function vf(e,t){return fu(2048,8,e,t)}function q0(e,t){return fu(4,2,e,t)}function Y0(e,t){return fu(4,4,e,t)}function Q0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function X0(e,t,i){return i=i!=null?i.concat([e]):null,fu(4,4,Q0.bind(null,t,e),i)}function Sf(){}function J0(e,t){var i=ni();t=t===void 0?null:t;var s=i.memoizedState;return s!==null&&t!==null&&gf(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function Z0(e,t){var i=ni();t=t===void 0?null:t;var s=i.memoizedState;return s!==null&&t!==null&&gf(t,s[1])?s[0]:(e=e(),i.memoizedState=[e,t],e)}function e2(e,t,i){return xn&21?(mi(i,t)||(i=o0(),Le.lanes|=i,Fn|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ft=!0),e.memoizedState=i)}function H8(e,t){var i=Se;Se=i!==0&&4>i?i:4,e(!0);var s=cd.transition;cd.transition={};try{e(!1),t()}finally{Se=i,cd.transition=s}}function t2(){return ni().memoizedState}function V8(e,t,i){var s=As(e);if(i={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null},i2(e))s2(t,i);else if(i=N0(e,t,i,s),i!==null){var n=vt();fi(i,e,s,n),n2(i,t,s)}}function W8(e,t,i){var s=As(e),n={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null};if(i2(e))s2(t,n);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var r=t.lastRenderedState,a=o(r,i);if(n.hasEagerState=!0,n.eagerState=a,mi(a,r)){var l=t.interleaved;l===null?(n.next=n,uf(t)):(n.next=l.next,l.next=n),t.interleaved=n;return}}catch{}finally{}i=N0(e,t,n,s),i!==null&&(n=vt(),fi(i,e,s,n),n2(i,t,s))}}function i2(e){var t=e.alternate;return e===Le||t!==null&&t===Le}function s2(e,t){Or=bc=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function n2(e,t,i){if(i&4194240){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,Yp(e,i)}}var Pc={readContext:si,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},z8={readContext:si,useCallback:function(e,t){return Pi().memoizedState=[e,t===void 0?null:t],e},useContext:si,useEffect:Am,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Vl(4194308,4,Q0.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Vl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vl(4,2,e,t)},useMemo:function(e,t){var i=Pi();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var s=Pi();return t=i!==void 0?i(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=V8.bind(null,Le,e),[s.memoizedState,e]},useRef:function(e){var t=Pi();return e={current:e},t.memoizedState=e},useState:Tm,useDebugValue:Sf,useDeferredValue:function(e){return Pi().memoizedState=e},useTransition:function(){var e=Tm(!1),t=e[0];return e=H8.bind(null,e[1]),Pi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var s=Le,n=Pi();if(De){if(i===void 0)throw Error(G(407));i=i()}else{if(i=t(),Je===null)throw Error(G(349));xn&30||W0(s,t,i)}n.memoizedState=i;var o={value:i,getSnapshot:t};return n.queue=o,Am(j0.bind(null,s,o,e),[e]),s.flags|=2048,ua(9,z0.bind(null,s,o,i,t),void 0,null),i},useId:function(){var e=Pi(),t=Je.identifierPrefix;if(De){var i=Ki,s=Ui;i=(s&~(1<<32-pi(s)-1)).toString(32)+i,t=":"+t+"R"+i,i=la++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=G8++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},j8={readContext:si,useCallback:J0,useContext:si,useEffect:vf,useImperativeHandle:X0,useInsertionEffect:q0,useLayoutEffect:Y0,useMemo:Z0,useReducer:ud,useRef:$0,useState:function(){return ud(ca)},useDebugValue:Sf,useDeferredValue:function(e){var t=ni();return e2(t,$e.memoizedState,e)},useTransition:function(){var e=ud(ca)[0],t=ni().memoizedState;return[e,t]},useMutableSource:H0,useSyncExternalStore:V0,useId:t2,unstable_isNewReconciler:!1},U8={readContext:si,useCallback:J0,useContext:si,useEffect:vf,useImperativeHandle:X0,useInsertionEffect:q0,useLayoutEffect:Y0,useMemo:Z0,useReducer:dd,useRef:$0,useState:function(){return dd(ca)},useDebugValue:Sf,useDeferredValue:function(e){var t=ni();return $e===null?t.memoizedState=e:e2(t,$e.memoizedState,e)},useTransition:function(){var e=dd(ca)[0],t=ni().memoizedState;return[e,t]},useMutableSource:H0,useSyncExternalStore:V0,useId:t2,unstable_isNewReconciler:!1};function ai(e,t){if(e&&e.defaultProps){t=Be({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function Mh(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:Be({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var gu={isMounted:function(e){return(e=e._reactInternals)?Ln(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var s=vt(),n=As(e),o=qi(s,n);o.payload=t,i!=null&&(o.callback=i),t=Ds(e,o,n),t!==null&&(fi(t,e,n,s),Gl(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=vt(),n=As(e),o=qi(s,n);o.tag=1,o.payload=t,i!=null&&(o.callback=i),t=Ds(e,o,n),t!==null&&(fi(t,e,n,s),Gl(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=vt(),s=As(e),n=qi(i,s);n.tag=2,t!=null&&(n.callback=t),t=Ds(e,n,s),t!==null&&(fi(t,e,s,i),Gl(t,e,s))}};function Im(e,t,i,s,n,o,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,r):t.prototype&&t.prototype.isPureReactComponent?!ia(i,s)||!ia(n,o):!0}function o2(e,t,i){var s=!1,n=Gs,o=t.contextType;return typeof o=="object"&&o!==null?o=si(o):(n=Tt(t)?bn:ct.current,s=t.contextTypes,o=(s=s!=null)?Co(e,n):Gs),t=new t(i,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gu,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=o),t}function Lm(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&gu.enqueueReplaceState(t,t.state,null)}function Dh(e,t,i,s){var n=e.stateNode;n.props=i,n.state=e.memoizedState,n.refs={},df(e);var o=t.contextType;typeof o=="object"&&o!==null?n.context=si(o):(o=Tt(t)?bn:ct.current,n.context=Co(e,o)),n.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Mh(e,t,o,i),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&gu.enqueueReplaceState(n,n.state,null),yc(e,i,n,s),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function yo(e,t){try{var i="",s=t;do i+=S5(s),s=s.return;while(s);var n=i}catch(o){n=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:n,digest:null}}function hd(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function Th(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var K8=typeof WeakMap=="function"?WeakMap:Map;function r2(e,t,i){i=qi(-1,i),i.tag=3,i.payload={element:null};var s=t.value;return i.callback=function(){Fc||(Fc=!0,Vh=s),Th(e,t)},i}function a2(e,t,i){i=qi(-1,i),i.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var n=t.value;i.payload=function(){return s(n)},i.callback=function(){Th(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(i.callback=function(){Th(e,t),typeof s!="function"&&(Ts===null?Ts=new Set([this]):Ts.add(this));var r=t.stack;this.componentDidCatch(t.value,{componentStack:r!==null?r:""})}),i}function Om(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new K8;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(i)||(n.add(i),e=r4.bind(null,e,t,i),t.then(e,e))}function Bm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Nm(e,t,i,s,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=qi(-1,1),t.tag=2,Ds(i,t,1))),i.lanes|=1),e)}var $8=ns.ReactCurrentOwner,Ft=!1;function pt(e,t,i,s){t.child=e===null?B0(t,null,i,s):So(t,e.child,i,s)}function _m(e,t,i,s,n){i=i.render;var o=t.ref;return ao(t,n),s=mf(e,t,i,s,o,n),i=Cf(),e!==null&&!Ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,ts(e,t,n)):(De&&i&&nf(t),t.flags|=1,pt(e,t,s,n),t.child)}function Gm(e,t,i,s,n){if(e===null){var o=i.type;return typeof o=="function"&&!Ef(o)&&o.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=o,l2(e,t,o,s,n)):(e=Ul(i.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&n)){var r=o.memoizedProps;if(i=i.compare,i=i!==null?i:ia,i(r,s)&&e.ref===t.ref)return ts(e,t,n)}return t.flags|=1,e=Is(o,s),e.ref=t.ref,e.return=t,t.child=e}function l2(e,t,i,s,n){if(e!==null){var o=e.memoizedProps;if(ia(o,s)&&e.ref===t.ref)if(Ft=!1,t.pendingProps=s=o,(e.lanes&n)!==0)e.flags&131072&&(Ft=!0);else return t.lanes=e.lanes,ts(e,t,n)}return Ah(e,t,i,s,n)}function c2(e,t,i){var s=t.pendingProps,n=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(to,Nt),Nt|=i;else{if(!(i&1073741824))return e=o!==null?o.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,be(to,Nt),Nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:i,be(to,Nt),Nt|=s}else o!==null?(s=o.baseLanes|i,t.memoizedState=null):s=i,be(to,Nt),Nt|=s;return pt(e,t,n,i),t.child}function u2(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Ah(e,t,i,s,n){var o=Tt(i)?bn:ct.current;return o=Co(t,o),ao(t,n),i=mf(e,t,i,s,o,n),s=Cf(),e!==null&&!Ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,ts(e,t,n)):(De&&s&&nf(t),t.flags|=1,pt(e,t,i,n),t.child)}function Hm(e,t,i,s,n){if(Tt(i)){var o=!0;mc(t)}else o=!1;if(ao(t,n),t.stateNode===null)Wl(e,t),o2(t,i,s),Dh(t,i,s,n),s=!0;else if(e===null){var r=t.stateNode,a=t.memoizedProps;r.props=a;var l=r.context,c=i.contextType;typeof c=="object"&&c!==null?c=si(c):(c=Tt(i)?bn:ct.current,c=Co(t,c));var u=i.getDerivedStateFromProps,d=typeof u=="function"||typeof r.getSnapshotBeforeUpdate=="function";d||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==s||l!==c)&&Lm(t,r,s,c),gs=!1;var h=t.memoizedState;r.state=h,yc(t,s,r,n),l=t.memoizedState,a!==s||h!==l||Dt.current||gs?(typeof u=="function"&&(Mh(t,i,u,s),l=t.memoizedState),(a=gs||Im(t,i,a,s,h,l,c))?(d||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),r.props=s,r.state=l,r.context=c,s=a):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{r=t.stateNode,_0(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ai(t.type,a),r.props=c,d=t.pendingProps,h=r.context,l=i.contextType,typeof l=="object"&&l!==null?l=si(l):(l=Tt(i)?bn:ct.current,l=Co(t,l));var p=i.getDerivedStateFromProps;(u=typeof p=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Lm(t,r,s,l),gs=!1,h=t.memoizedState,r.state=h,yc(t,s,r,n);var g=t.memoizedState;a!==d||h!==g||Dt.current||gs?(typeof p=="function"&&(Mh(t,i,p,s),g=t.memoizedState),(c=gs||Im(t,i,c,s,h,g,l)||!1)?(u||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(s,g,l),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(s,g,l)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=g),r.props=s,r.state=g,r.context=l,s=c):(typeof r.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return Ih(e,t,i,s,o,n)}function Ih(e,t,i,s,n,o){u2(e,t);var r=(t.flags&128)!==0;if(!s&&!r)return n&&xm(t,i,!1),ts(e,t,o);s=t.stateNode,$8.current=t;var a=r&&typeof i.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&r?(t.child=So(t,e.child,null,o),t.child=So(t,null,a,o)):pt(e,t,a,o),t.memoizedState=s.state,n&&xm(t,i,!0),t.child}function d2(e){var t=e.stateNode;t.pendingContext?Pm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pm(e,t.context,!1),hf(e,t.containerInfo)}function Vm(e,t,i,s,n){return vo(),rf(n),t.flags|=256,pt(e,t,i,s),t.child}var Lh={dehydrated:null,treeContext:null,retryLane:0};function Oh(e){return{baseLanes:e,cachePool:null,transitions:null}}function h2(e,t,i){var s=t.pendingProps,n=Te.current,o=!1,r=(t.flags&128)!==0,a;if((a=r)||(a=e!==null&&e.memoizedState===null?!1:(n&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),be(Te,n&1),e===null)return Eh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(r=s.children,e=s.fallback,o?(s=t.mode,o=t.child,r={mode:"hidden",children:r},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=r):o=vu(r,s,0,null),e=mn(e,s,i,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oh(i),t.memoizedState=Lh,e):wf(t,r));if(n=e.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return q8(e,t,r,s,a,n,i);if(o){o=s.fallback,r=t.mode,n=e.child,a=n.sibling;var l={mode:"hidden",children:s.children};return!(r&1)&&t.child!==n?(s=t.child,s.childLanes=0,s.pendingProps=l,t.deletions=null):(s=Is(n,l),s.subtreeFlags=n.subtreeFlags&14680064),a!==null?o=Is(a,o):(o=mn(o,r,i,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,r=e.child.memoizedState,r=r===null?Oh(i):{baseLanes:r.baseLanes|i,cachePool:null,transitions:r.transitions},o.memoizedState=r,o.childLanes=e.childLanes&~i,t.memoizedState=Lh,s}return o=e.child,e=o.sibling,s=Is(o,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=i),s.return=t,s.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=s,t.memoizedState=null,s}function wf(e,t){return t=vu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function nl(e,t,i,s){return s!==null&&rf(s),So(t,e.child,null,i),e=wf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function q8(e,t,i,s,n,o,r){if(i)return t.flags&256?(t.flags&=-257,s=hd(Error(G(422))),nl(e,t,r,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=s.fallback,n=t.mode,s=vu({mode:"visible",children:s.children},n,0,null),o=mn(o,n,r,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,t.mode&1&&So(t,e.child,null,r),t.child.memoizedState=Oh(r),t.memoizedState=Lh,o);if(!(t.mode&1))return nl(e,t,r,null);if(n.data==="$!"){if(s=n.nextSibling&&n.nextSibling.dataset,s)var a=s.dgst;return s=a,o=Error(G(419)),s=hd(o,s,void 0),nl(e,t,r,s)}if(a=(r&e.childLanes)!==0,Ft||a){if(s=Je,s!==null){switch(r&-r){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(s.suspendedLanes|r)?0:n,n!==0&&n!==o.retryLane&&(o.retryLane=n,es(e,n),fi(s,e,n,-1))}return Ff(),s=hd(Error(G(421))),nl(e,t,r,s)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=a4.bind(null,e),n._reactRetry=t,null):(e=o.treeContext,_t=Ms(n.nextSibling),Ht=t,De=!0,ui=null,e!==null&&(Yt[Qt++]=Ui,Yt[Qt++]=Ki,Yt[Qt++]=Pn,Ui=e.id,Ki=e.overflow,Pn=t),t=wf(t,s.children),t.flags|=4096,t)}function Wm(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),kh(e.return,t,i)}function pd(e,t,i,s,n){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:n}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=i,o.tailMode=n)}function p2(e,t,i){var s=t.pendingProps,n=s.revealOrder,o=s.tail;if(pt(e,t,s.children,i),s=Te.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wm(e,i,t);else if(e.tag===19)Wm(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(be(Te,s),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(i=t.child,n=null;i!==null;)e=i.alternate,e!==null&&Rc(e)===null&&(n=i),i=i.sibling;i=n,i===null?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),pd(t,!1,n,i,o);break;case"backwards":for(i=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Rc(e)===null){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}pd(t,!0,i,null,o);break;case"together":pd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ts(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Fn|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,i=Is(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Is(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Y8(e,t,i){switch(t.tag){case 3:d2(t),vo();break;case 5:G0(t);break;case 1:Tt(t.type)&&mc(t);break;case 4:hf(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,n=t.memoizedProps.value;be(Sc,s._currentValue),s._currentValue=n;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(be(Te,Te.current&1),t.flags|=128,null):i&t.child.childLanes?h2(e,t,i):(be(Te,Te.current&1),e=ts(e,t,i),e!==null?e.sibling:null);be(Te,Te.current&1);break;case 19:if(s=(i&t.childLanes)!==0,e.flags&128){if(s)return p2(e,t,i);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),be(Te,Te.current),s)break;return null;case 22:case 23:return t.lanes=0,c2(e,t,i)}return ts(e,t,i)}var f2,Bh,g2,m2;f2=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Bh=function(){};g2=function(e,t,i,s){var n=e.memoizedProps;if(n!==s){e=t.stateNode,hn(Di.current);var o=null;switch(i){case"input":n=nh(e,n),s=nh(e,s),o=[];break;case"select":n=Be({},n,{value:void 0}),s=Be({},s,{value:void 0}),o=[];break;case"textarea":n=ah(e,n),s=ah(e,s),o=[];break;default:typeof n.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=fc)}ch(i,s);var r;i=null;for(c in n)if(!s.hasOwnProperty(c)&&n.hasOwnProperty(c)&&n[c]!=null)if(c==="style"){var a=n[c];for(r in a)a.hasOwnProperty(r)&&(i||(i={}),i[r]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Yr.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in s){var l=s[c];if(a=n!=null?n[c]:void 0,s.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(r in a)!a.hasOwnProperty(r)||l&&l.hasOwnProperty(r)||(i||(i={}),i[r]="");for(r in l)l.hasOwnProperty(r)&&a[r]!==l[r]&&(i||(i={}),i[r]=l[r])}else i||(o||(o=[]),o.push(c,i)),i=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Yr.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xe("scroll",e),o||a===l||(o=[])):(o=o||[]).push(c,l))}i&&(o=o||[]).push("style",i);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};m2=function(e,t,i,s){i!==s&&(t.flags|=4)};function or(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var n=e.child;n!==null;)i|=n.lanes|n.childLanes,s|=n.subtreeFlags&14680064,s|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)i|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function Q8(e,t,i){var s=t.pendingProps;switch(of(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(t),null;case 1:return Tt(t.type)&&gc(),ot(t),null;case 3:return s=t.stateNode,wo(),Me(Dt),Me(ct),ff(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(il(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ui!==null&&(jh(ui),ui=null))),Bh(e,t),ot(t),null;case 5:pf(t);var n=hn(aa.current);if(i=t.type,e!==null&&t.stateNode!=null)g2(e,t,i,s,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(G(166));return ot(t),null}if(e=hn(Di.current),il(t)){s=t.stateNode,i=t.type;var o=t.memoizedProps;switch(s[Fi]=t,s[oa]=o,e=(t.mode&1)!==0,i){case"dialog":xe("cancel",s),xe("close",s);break;case"iframe":case"object":case"embed":xe("load",s);break;case"video":case"audio":for(n=0;n<Sr.length;n++)xe(Sr[n],s);break;case"source":xe("error",s);break;case"img":case"image":case"link":xe("error",s),xe("load",s);break;case"details":xe("toggle",s);break;case"input":Xg(s,o),xe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},xe("invalid",s);break;case"textarea":Zg(s,o),xe("invalid",s)}ch(i,o),n=null;for(var r in o)if(o.hasOwnProperty(r)){var a=o[r];r==="children"?typeof a=="string"?s.textContent!==a&&(o.suppressHydrationWarning!==!0&&tl(s.textContent,a,e),n=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&tl(s.textContent,a,e),n=["children",""+a]):Yr.hasOwnProperty(r)&&a!=null&&r==="onScroll"&&xe("scroll",s)}switch(i){case"input":$a(s),Jg(s,o,!0);break;case"textarea":$a(s),em(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=fc)}s=n,t.updateQueue=s,s!==null&&(t.flags|=4)}else{r=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jv(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=r.createElement(i,{is:s.is}):(e=r.createElement(i),i==="select"&&(r=e,s.multiple?r.multiple=!0:s.size&&(r.size=s.size))):e=r.createElementNS(e,i),e[Fi]=t,e[oa]=s,f2(e,t,!1,!1),t.stateNode=e;e:{switch(r=uh(i,s),i){case"dialog":xe("cancel",e),xe("close",e),n=s;break;case"iframe":case"object":case"embed":xe("load",e),n=s;break;case"video":case"audio":for(n=0;n<Sr.length;n++)xe(Sr[n],e);n=s;break;case"source":xe("error",e),n=s;break;case"img":case"image":case"link":xe("error",e),xe("load",e),n=s;break;case"details":xe("toggle",e),n=s;break;case"input":Xg(e,s),n=nh(e,s),xe("invalid",e);break;case"option":n=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},n=Be({},s,{value:void 0}),xe("invalid",e);break;case"textarea":Zg(e,s),n=ah(e,s),xe("invalid",e);break;default:n=s}ch(i,n),a=n;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?$v(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Uv(e,l)):o==="children"?typeof l=="string"?(i!=="textarea"||l!=="")&&Qr(e,l):typeof l=="number"&&Qr(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Yr.hasOwnProperty(o)?l!=null&&o==="onScroll"&&xe("scroll",e):l!=null&&zp(e,o,l,r))}switch(i){case"input":$a(e),Jg(e,s,!1);break;case"textarea":$a(e),em(e);break;case"option":s.value!=null&&e.setAttribute("value",""+_s(s.value));break;case"select":e.multiple=!!s.multiple,o=s.value,o!=null?so(e,!!s.multiple,o,!1):s.defaultValue!=null&&so(e,!!s.multiple,s.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=fc)}switch(i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ot(t),null;case 6:if(e&&t.stateNode!=null)m2(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(G(166));if(i=hn(aa.current),hn(Di.current),il(t)){if(s=t.stateNode,i=t.memoizedProps,s[Fi]=t,(o=s.nodeValue!==i)&&(e=Ht,e!==null))switch(e.tag){case 3:tl(s.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&tl(s.nodeValue,i,(e.mode&1)!==0)}o&&(t.flags|=4)}else s=(i.nodeType===9?i:i.ownerDocument).createTextNode(s),s[Fi]=t,t.stateNode=s}return ot(t),null;case 13:if(Me(Te),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(De&&_t!==null&&t.mode&1&&!(t.flags&128))L0(),vo(),t.flags|=98560,o=!1;else if(o=il(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(G(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(G(317));o[Fi]=t}else vo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ot(t),o=!1}else ui!==null&&(jh(ui),ui=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Te.current&1?qe===0&&(qe=3):Ff())),t.updateQueue!==null&&(t.flags|=4),ot(t),null);case 4:return wo(),Bh(e,t),e===null&&sa(t.stateNode.containerInfo),ot(t),null;case 10:return cf(t.type._context),ot(t),null;case 17:return Tt(t.type)&&gc(),ot(t),null;case 19:if(Me(Te),o=t.memoizedState,o===null)return ot(t),null;if(s=(t.flags&128)!==0,r=o.rendering,r===null)if(s)or(o,!1);else{if(qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(r=Rc(e),r!==null){for(t.flags|=128,or(o,!1),s=r.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=i,i=t.child;i!==null;)o=i,e=s,o.flags&=14680066,r=o.alternate,r===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,o.type=r.type,e=r.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return be(Te,Te.current&1|2),t.child}e=e.sibling}o.tail!==null&&ze()>Ro&&(t.flags|=128,s=!0,or(o,!1),t.lanes=4194304)}else{if(!s)if(e=Rc(r),e!==null){if(t.flags|=128,s=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),or(o,!0),o.tail===null&&o.tailMode==="hidden"&&!r.alternate&&!De)return ot(t),null}else 2*ze()-o.renderingStartTime>Ro&&i!==1073741824&&(t.flags|=128,s=!0,or(o,!1),t.lanes=4194304);o.isBackwards?(r.sibling=t.child,t.child=r):(i=o.last,i!==null?i.sibling=r:t.child=r,o.last=r)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ze(),t.sibling=null,i=Te.current,be(Te,s?i&1|2:i&1),t):(ot(t),null);case 22:case 23:return xf(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Nt&1073741824&&(ot(t),t.subtreeFlags&6&&(t.flags|=8192)):ot(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function X8(e,t){switch(of(t),t.tag){case 1:return Tt(t.type)&&gc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wo(),Me(Dt),Me(ct),ff(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return pf(t),null;case 13:if(Me(Te),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));vo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Me(Te),null;case 4:return wo(),null;case 10:return cf(t.type._context),null;case 22:case 23:return xf(),null;case 24:return null;default:return null}}var ol=!1,lt=!1,J8=typeof WeakSet=="function"?WeakSet:Set,$=null;function eo(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(s){Ne(e,t,s)}else i.current=null}function Nh(e,t,i){try{i()}catch(s){Ne(e,t,s)}}var zm=!1;function Z8(e,t){if(wh=dc,e=y0(),sf(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var n=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{i.nodeType,o.nodeType}catch{i=null;break e}var r=0,a=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var p;d!==i||n!==0&&d.nodeType!==3||(a=r+n),d!==o||s!==0&&d.nodeType!==3||(l=r+s),d.nodeType===3&&(r+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===i&&++c===n&&(a=r),h===o&&++u===s&&(l=r),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}i=a===-1||l===-1?null:{start:a,end:l}}else i=null}i=i||{start:0,end:0}}else i=null;for(yh={focusedElem:e,selectionRange:i},dc=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,S=g.memoizedState,m=t.stateNode,C=m.getSnapshotBeforeUpdate(t.elementType===t.type?v:ai(t.type,v),S);m.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(R){Ne(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return g=zm,zm=!1,g}function Br(e,t,i){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&e)===e){var o=n.destroy;n.destroy=void 0,o!==void 0&&Nh(t,i,o)}n=n.next}while(n!==s)}}function mu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var s=i.create;i.destroy=s()}i=i.next}while(i!==t)}}function _h(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function C2(e){var t=e.alternate;t!==null&&(e.alternate=null,C2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Fi],delete t[oa],delete t[Ph],delete t[O8],delete t[B8])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function v2(e){return e.tag===5||e.tag===3||e.tag===4}function jm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||v2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gh(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=fc));else if(s!==4&&(e=e.child,e!==null))for(Gh(e,t,i),e=e.sibling;e!==null;)Gh(e,t,i),e=e.sibling}function Hh(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Hh(e,t,i),e=e.sibling;e!==null;)Hh(e,t,i),e=e.sibling}var et=null,li=!1;function ls(e,t,i){for(i=i.child;i!==null;)S2(e,t,i),i=i.sibling}function S2(e,t,i){if(Mi&&typeof Mi.onCommitFiberUnmount=="function")try{Mi.onCommitFiberUnmount(lu,i)}catch{}switch(i.tag){case 5:lt||eo(i,t);case 6:var s=et,n=li;et=null,ls(e,t,i),et=s,li=n,et!==null&&(li?(e=et,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):et.removeChild(i.stateNode));break;case 18:et!==null&&(li?(e=et,i=i.stateNode,e.nodeType===8?rd(e.parentNode,i):e.nodeType===1&&rd(e,i),ea(e)):rd(et,i.stateNode));break;case 4:s=et,n=li,et=i.stateNode.containerInfo,li=!0,ls(e,t,i),et=s,li=n;break;case 0:case 11:case 14:case 15:if(!lt&&(s=i.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){n=s=s.next;do{var o=n,r=o.destroy;o=o.tag,r!==void 0&&(o&2||o&4)&&Nh(i,t,r),n=n.next}while(n!==s)}ls(e,t,i);break;case 1:if(!lt&&(eo(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(a){Ne(i,t,a)}ls(e,t,i);break;case 21:ls(e,t,i);break;case 22:i.mode&1?(lt=(s=lt)||i.memoizedState!==null,ls(e,t,i),lt=s):ls(e,t,i);break;default:ls(e,t,i)}}function Um(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new J8),t.forEach(function(s){var n=l4.bind(null,e,s);i.has(s)||(i.add(s),s.then(n,n))})}}function ri(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var n=i[s];try{var o=e,r=t,a=r;e:for(;a!==null;){switch(a.tag){case 5:et=a.stateNode,li=!1;break e;case 3:et=a.stateNode.containerInfo,li=!0;break e;case 4:et=a.stateNode.containerInfo,li=!0;break e}a=a.return}if(et===null)throw Error(G(160));S2(o,r,n),et=null,li=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(c){Ne(n,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)w2(t,e),t=t.sibling}function w2(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ri(t,e),wi(e),s&4){try{Br(3,e,e.return),mu(3,e)}catch(v){Ne(e,e.return,v)}try{Br(5,e,e.return)}catch(v){Ne(e,e.return,v)}}break;case 1:ri(t,e),wi(e),s&512&&i!==null&&eo(i,i.return);break;case 5:if(ri(t,e),wi(e),s&512&&i!==null&&eo(i,i.return),e.flags&32){var n=e.stateNode;try{Qr(n,"")}catch(v){Ne(e,e.return,v)}}if(s&4&&(n=e.stateNode,n!=null)){var o=e.memoizedProps,r=i!==null?i.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Wv(n,o),uh(a,r);var c=uh(a,o);for(r=0;r<l.length;r+=2){var u=l[r],d=l[r+1];u==="style"?$v(n,d):u==="dangerouslySetInnerHTML"?Uv(n,d):u==="children"?Qr(n,d):zp(n,u,d,c)}switch(a){case"input":oh(n,o);break;case"textarea":zv(n,o);break;case"select":var h=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?so(n,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?so(n,!!o.multiple,o.defaultValue,!0):so(n,!!o.multiple,o.multiple?[]:"",!1))}n[oa]=o}catch(v){Ne(e,e.return,v)}}break;case 6:if(ri(t,e),wi(e),s&4){if(e.stateNode===null)throw Error(G(162));n=e.stateNode,o=e.memoizedProps;try{n.nodeValue=o}catch(v){Ne(e,e.return,v)}}break;case 3:if(ri(t,e),wi(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{ea(t.containerInfo)}catch(v){Ne(e,e.return,v)}break;case 4:ri(t,e),wi(e);break;case 13:ri(t,e),wi(e),n=e.child,n.flags&8192&&(o=n.memoizedState!==null,n.stateNode.isHidden=o,!o||n.alternate!==null&&n.alternate.memoizedState!==null||(bf=ze())),s&4&&Um(e);break;case 22:if(u=i!==null&&i.memoizedState!==null,e.mode&1?(lt=(c=lt)||u,ri(t,e),lt=c):ri(t,e),wi(e),s&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for($=e,u=e.child;u!==null;){for(d=$=u;$!==null;){switch(h=$,p=h.child,h.tag){case 0:case 11:case 14:case 15:Br(4,h,h.return);break;case 1:eo(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){s=h,i=h.return;try{t=s,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Ne(s,i,v)}}break;case 5:eo(h,h.return);break;case 22:if(h.memoizedState!==null){$m(d);continue}}p!==null?(p.return=h,$=p):$m(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{n=d.stateNode,c?(o=n.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,r=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Kv("display",r))}catch(v){Ne(e,e.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Ne(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ri(t,e),wi(e),s&4&&Um(e);break;case 21:break;default:ri(t,e),wi(e)}}function wi(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(v2(i)){var s=i;break e}i=i.return}throw Error(G(160))}switch(s.tag){case 5:var n=s.stateNode;s.flags&32&&(Qr(n,""),s.flags&=-33);var o=jm(e);Hh(e,o,n);break;case 3:case 4:var r=s.stateNode.containerInfo,a=jm(e);Gh(e,a,r);break;default:throw Error(G(161))}}catch(l){Ne(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function e4(e,t,i){$=e,y2(e)}function y2(e,t,i){for(var s=(e.mode&1)!==0;$!==null;){var n=$,o=n.child;if(n.tag===22&&s){var r=n.memoizedState!==null||ol;if(!r){var a=n.alternate,l=a!==null&&a.memoizedState!==null||lt;a=ol;var c=lt;if(ol=r,(lt=l)&&!c)for($=n;$!==null;)r=$,l=r.child,r.tag===22&&r.memoizedState!==null?qm(n):l!==null?(l.return=r,$=l):qm(n);for(;o!==null;)$=o,y2(o),o=o.sibling;$=n,ol=a,lt=c}Km(e)}else n.subtreeFlags&8772&&o!==null?(o.return=n,$=o):Km(e)}}function Km(e){for(;$!==null;){var t=$;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:lt||mu(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!lt)if(i===null)s.componentDidMount();else{var n=t.elementType===t.type?i.memoizedProps:ai(t.type,i.memoizedProps);s.componentDidUpdate(n,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Dm(t,o,s);break;case 3:var r=t.updateQueue;if(r!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Dm(t,r,i)}break;case 5:var a=t.stateNode;if(i===null&&t.flags&4){i=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&i.focus();break;case"img":l.src&&(i.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&ea(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}lt||t.flags&512&&_h(t)}catch(h){Ne(t,t.return,h)}}if(t===e){$=null;break}if(i=t.sibling,i!==null){i.return=t.return,$=i;break}$=t.return}}function $m(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var i=t.sibling;if(i!==null){i.return=t.return,$=i;break}$=t.return}}function qm(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{mu(4,t)}catch(l){Ne(t,i,l)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var n=t.return;try{s.componentDidMount()}catch(l){Ne(t,n,l)}}var o=t.return;try{_h(t)}catch(l){Ne(t,o,l)}break;case 5:var r=t.return;try{_h(t)}catch(l){Ne(t,r,l)}}}catch(l){Ne(t,t.return,l)}if(t===e){$=null;break}var a=t.sibling;if(a!==null){a.return=t.return,$=a;break}$=t.return}}var t4=Math.ceil,xc=ns.ReactCurrentDispatcher,yf=ns.ReactCurrentOwner,Zt=ns.ReactCurrentBatchConfig,he=0,Je=null,Ue=null,tt=0,Nt=0,to=js(0),qe=0,da=null,Fn=0,Cu=0,Rf=0,Nr=null,Pt=null,bf=0,Ro=1/0,Vi=null,Fc=!1,Vh=null,Ts=null,rl=!1,ws=null,Ec=0,_r=0,Wh=null,zl=-1,jl=0;function vt(){return he&6?ze():zl!==-1?zl:zl=ze()}function As(e){return e.mode&1?he&2&&tt!==0?tt&-tt:_8.transition!==null?(jl===0&&(jl=o0()),jl):(e=Se,e!==0||(e=window.event,e=e===void 0?16:h0(e.type)),e):1}function fi(e,t,i,s){if(50<_r)throw _r=0,Wh=null,Error(G(185));Da(e,i,s),(!(he&2)||e!==Je)&&(e===Je&&(!(he&2)&&(Cu|=i),qe===4&&vs(e,tt)),At(e,s),i===1&&he===0&&!(t.mode&1)&&(Ro=ze()+500,pu&&Us()))}function At(e,t){var i=e.callbackNode;_5(e,t);var s=uc(e,e===Je?tt:0);if(s===0)i!==null&&sm(i),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(i!=null&&sm(i),t===1)e.tag===0?N8(Ym.bind(null,e)):T0(Ym.bind(null,e)),I8(function(){!(he&6)&&Us()}),i=null;else{switch(r0(s)){case 1:i=qp;break;case 4:i=s0;break;case 16:i=cc;break;case 536870912:i=n0;break;default:i=cc}i=M2(i,R2.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function R2(e,t){if(zl=-1,jl=0,he&6)throw Error(G(327));var i=e.callbackNode;if(lo()&&e.callbackNode!==i)return null;var s=uc(e,e===Je?tt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=kc(e,s);else{t=s;var n=he;he|=2;var o=P2();(Je!==e||tt!==t)&&(Vi=null,Ro=ze()+500,gn(e,t));do try{n4();break}catch(a){b2(e,a)}while(!0);lf(),xc.current=o,he=n,Ue!==null?t=0:(Je=null,tt=0,t=qe)}if(t!==0){if(t===2&&(n=gh(e),n!==0&&(s=n,t=zh(e,n))),t===1)throw i=da,gn(e,0),vs(e,s),At(e,ze()),i;if(t===6)vs(e,s);else{if(n=e.current.alternate,!(s&30)&&!i4(n)&&(t=kc(e,s),t===2&&(o=gh(e),o!==0&&(s=o,t=zh(e,o))),t===1))throw i=da,gn(e,0),vs(e,s),At(e,ze()),i;switch(e.finishedWork=n,e.finishedLanes=s,t){case 0:case 1:throw Error(G(345));case 2:sn(e,Pt,Vi);break;case 3:if(vs(e,s),(s&130023424)===s&&(t=bf+500-ze(),10<t)){if(uc(e,0)!==0)break;if(n=e.suspendedLanes,(n&s)!==s){vt(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=bh(sn.bind(null,e,Pt,Vi),t);break}sn(e,Pt,Vi);break;case 4:if(vs(e,s),(s&4194240)===s)break;for(t=e.eventTimes,n=-1;0<s;){var r=31-pi(s);o=1<<r,r=t[r],r>n&&(n=r),s&=~o}if(s=n,s=ze()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*t4(s/1960))-s,10<s){e.timeoutHandle=bh(sn.bind(null,e,Pt,Vi),s);break}sn(e,Pt,Vi);break;case 5:sn(e,Pt,Vi);break;default:throw Error(G(329))}}}return At(e,ze()),e.callbackNode===i?R2.bind(null,e):null}function zh(e,t){var i=Nr;return e.current.memoizedState.isDehydrated&&(gn(e,t).flags|=256),e=kc(e,t),e!==2&&(t=Pt,Pt=i,t!==null&&jh(t)),e}function jh(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function i4(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var s=0;s<i.length;s++){var n=i[s],o=n.getSnapshot;n=n.value;try{if(!mi(o(),n))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vs(e,t){for(t&=~Rf,t&=~Cu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-pi(t),s=1<<i;e[i]=-1,t&=~s}}function Ym(e){if(he&6)throw Error(G(327));lo();var t=uc(e,0);if(!(t&1))return At(e,ze()),null;var i=kc(e,t);if(e.tag!==0&&i===2){var s=gh(e);s!==0&&(t=s,i=zh(e,s))}if(i===1)throw i=da,gn(e,0),vs(e,t),At(e,ze()),i;if(i===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sn(e,Pt,Vi),At(e,ze()),null}function Pf(e,t){var i=he;he|=1;try{return e(t)}finally{he=i,he===0&&(Ro=ze()+500,pu&&Us())}}function En(e){ws!==null&&ws.tag===0&&!(he&6)&&lo();var t=he;he|=1;var i=Zt.transition,s=Se;try{if(Zt.transition=null,Se=1,e)return e()}finally{Se=s,Zt.transition=i,he=t,!(he&6)&&Us()}}function xf(){Nt=to.current,Me(to)}function gn(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,A8(i)),Ue!==null)for(i=Ue.return;i!==null;){var s=i;switch(of(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&gc();break;case 3:wo(),Me(Dt),Me(ct),ff();break;case 5:pf(s);break;case 4:wo();break;case 13:Me(Te);break;case 19:Me(Te);break;case 10:cf(s.type._context);break;case 22:case 23:xf()}i=i.return}if(Je=e,Ue=e=Is(e.current,null),tt=Nt=t,qe=0,da=null,Rf=Cu=Fn=0,Pt=Nr=null,dn!==null){for(t=0;t<dn.length;t++)if(i=dn[t],s=i.interleaved,s!==null){i.interleaved=null;var n=s.next,o=i.pending;if(o!==null){var r=o.next;o.next=n,s.next=r}i.pending=s}dn=null}return e}function b2(e,t){do{var i=Ue;try{if(lf(),Hl.current=Pc,bc){for(var s=Le.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}bc=!1}if(xn=0,Qe=$e=Le=null,Or=!1,la=0,yf.current=null,i===null||i.return===null){qe=1,da=t,Ue=null;break}e:{var o=e,r=i.return,a=i,l=t;if(t=tt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Bm(r);if(p!==null){p.flags&=-257,Nm(p,r,a,o,t),p.mode&1&&Om(o,c,t),t=p,l=c;var g=t.updateQueue;if(g===null){var v=new Set;v.add(l),t.updateQueue=v}else g.add(l);break e}else{if(!(t&1)){Om(o,c,t),Ff();break e}l=Error(G(426))}}else if(De&&a.mode&1){var S=Bm(r);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Nm(S,r,a,o,t),rf(yo(l,a));break e}}o=l=yo(l,a),qe!==4&&(qe=2),Nr===null?Nr=[o]:Nr.push(o),o=r;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=r2(o,l,t);Mm(o,m);break e;case 1:a=l;var C=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof C.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ts===null||!Ts.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var R=a2(o,a,t);Mm(o,R);break e}}o=o.return}while(o!==null)}F2(i)}catch(b){t=b,Ue===i&&i!==null&&(Ue=i=i.return);continue}break}while(!0)}function P2(){var e=xc.current;return xc.current=Pc,e===null?Pc:e}function Ff(){(qe===0||qe===3||qe===2)&&(qe=4),Je===null||!(Fn&268435455)&&!(Cu&268435455)||vs(Je,tt)}function kc(e,t){var i=he;he|=2;var s=P2();(Je!==e||tt!==t)&&(Vi=null,gn(e,t));do try{s4();break}catch(n){b2(e,n)}while(!0);if(lf(),he=i,xc.current=s,Ue!==null)throw Error(G(261));return Je=null,tt=0,qe}function s4(){for(;Ue!==null;)x2(Ue)}function n4(){for(;Ue!==null&&!M5();)x2(Ue)}function x2(e){var t=k2(e.alternate,e,Nt);e.memoizedProps=e.pendingProps,t===null?F2(e):Ue=t,yf.current=null}function F2(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=X8(i,t),i!==null){i.flags&=32767,Ue=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Ue=null;return}}else if(i=Q8(i,t,Nt),i!==null){Ue=i;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);qe===0&&(qe=5)}function sn(e,t,i){var s=Se,n=Zt.transition;try{Zt.transition=null,Se=1,o4(e,t,i,s)}finally{Zt.transition=n,Se=s}return null}function o4(e,t,i,s){do lo();while(ws!==null);if(he&6)throw Error(G(327));i=e.finishedWork;var n=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var o=i.lanes|i.childLanes;if(G5(e,o),e===Je&&(Ue=Je=null,tt=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||rl||(rl=!0,M2(cc,function(){return lo(),null})),o=(i.flags&15990)!==0,i.subtreeFlags&15990||o){o=Zt.transition,Zt.transition=null;var r=Se;Se=1;var a=he;he|=4,yf.current=null,Z8(e,i),w2(i,e),x8(yh),dc=!!wh,yh=wh=null,e.current=i,e4(i),D5(),he=a,Se=r,Zt.transition=o}else e.current=i;if(rl&&(rl=!1,ws=e,Ec=n),o=e.pendingLanes,o===0&&(Ts=null),I5(i.stateNode),At(e,ze()),t!==null)for(s=e.onRecoverableError,i=0;i<t.length;i++)n=t[i],s(n.value,{componentStack:n.stack,digest:n.digest});if(Fc)throw Fc=!1,e=Vh,Vh=null,e;return Ec&1&&e.tag!==0&&lo(),o=e.pendingLanes,o&1?e===Wh?_r++:(_r=0,Wh=e):_r=0,Us(),null}function lo(){if(ws!==null){var e=r0(Ec),t=Zt.transition,i=Se;try{if(Zt.transition=null,Se=16>e?16:e,ws===null)var s=!1;else{if(e=ws,ws=null,Ec=0,he&6)throw Error(G(331));var n=he;for(he|=4,$=e.current;$!==null;){var o=$,r=o.child;if($.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for($=c;$!==null;){var u=$;switch(u.tag){case 0:case 11:case 15:Br(8,u,o)}var d=u.child;if(d!==null)d.return=u,$=d;else for(;$!==null;){u=$;var h=u.sibling,p=u.return;if(C2(u),u===c){$=null;break}if(h!==null){h.return=p,$=h;break}$=p}}}var g=o.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}$=o}}if(o.subtreeFlags&2064&&r!==null)r.return=o,$=r;else e:for(;$!==null;){if(o=$,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Br(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,$=m;break e}$=o.return}}var C=e.current;for($=C;$!==null;){r=$;var w=r.child;if(r.subtreeFlags&2064&&w!==null)w.return=r,$=w;else e:for(r=C;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mu(9,a)}}catch(b){Ne(a,a.return,b)}if(a===r){$=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,$=R;break e}$=a.return}}if(he=n,Us(),Mi&&typeof Mi.onPostCommitFiberRoot=="function")try{Mi.onPostCommitFiberRoot(lu,e)}catch{}s=!0}return s}finally{Se=i,Zt.transition=t}}return!1}function Qm(e,t,i){t=yo(i,t),t=r2(e,t,1),e=Ds(e,t,1),t=vt(),e!==null&&(Da(e,1,t),At(e,t))}function Ne(e,t,i){if(e.tag===3)Qm(e,e,i);else for(;t!==null;){if(t.tag===3){Qm(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ts===null||!Ts.has(s))){e=yo(i,e),e=a2(t,e,1),t=Ds(t,e,1),e=vt(),t!==null&&(Da(t,1,e),At(t,e));break}}t=t.return}}function r4(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),t=vt(),e.pingedLanes|=e.suspendedLanes&i,Je===e&&(tt&i)===i&&(qe===4||qe===3&&(tt&130023424)===tt&&500>ze()-bf?gn(e,0):Rf|=i),At(e,t)}function E2(e,t){t===0&&(e.mode&1?(t=Qa,Qa<<=1,!(Qa&130023424)&&(Qa=4194304)):t=1);var i=vt();e=es(e,t),e!==null&&(Da(e,t,i),At(e,i))}function a4(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),E2(e,i)}function l4(e,t){var i=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(i=n.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(G(314))}s!==null&&s.delete(t),E2(e,i)}var k2;k2=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Dt.current)Ft=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return Ft=!1,Y8(e,t,i);Ft=!!(e.flags&131072)}else Ft=!1,De&&t.flags&1048576&&A0(t,vc,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Wl(e,t),e=t.pendingProps;var n=Co(t,ct.current);ao(t,i),n=mf(null,t,s,e,n,i);var o=Cf();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Tt(s)?(o=!0,mc(t)):o=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,df(t),n.updater=gu,t.stateNode=n,n._reactInternals=t,Dh(t,s,e,i),t=Ih(null,t,s,!0,o,i)):(t.tag=0,De&&o&&nf(t),pt(null,t,n,i),t=t.child),t;case 16:s=t.elementType;e:{switch(Wl(e,t),e=t.pendingProps,n=s._init,s=n(s._payload),t.type=s,n=t.tag=u4(s),e=ai(s,e),n){case 0:t=Ah(null,t,s,e,i);break e;case 1:t=Hm(null,t,s,e,i);break e;case 11:t=_m(null,t,s,e,i);break e;case 14:t=Gm(null,t,s,ai(s.type,e),i);break e}throw Error(G(306,s,""))}return t;case 0:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:ai(s,n),Ah(e,t,s,n,i);case 1:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:ai(s,n),Hm(e,t,s,n,i);case 3:e:{if(d2(t),e===null)throw Error(G(387));s=t.pendingProps,o=t.memoizedState,n=o.element,_0(e,t),yc(t,s,null,i);var r=t.memoizedState;if(s=r.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:r.cache,pendingSuspenseBoundaries:r.pendingSuspenseBoundaries,transitions:r.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){n=yo(Error(G(423)),t),t=Vm(e,t,s,i,n);break e}else if(s!==n){n=yo(Error(G(424)),t),t=Vm(e,t,s,i,n);break e}else for(_t=Ms(t.stateNode.containerInfo.firstChild),Ht=t,De=!0,ui=null,i=B0(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(vo(),s===n){t=ts(e,t,i);break e}pt(e,t,s,i)}t=t.child}return t;case 5:return G0(t),e===null&&Eh(t),s=t.type,n=t.pendingProps,o=e!==null?e.memoizedProps:null,r=n.children,Rh(s,n)?r=null:o!==null&&Rh(s,o)&&(t.flags|=32),u2(e,t),pt(e,t,r,i),t.child;case 6:return e===null&&Eh(t),null;case 13:return h2(e,t,i);case 4:return hf(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=So(t,null,s,i):pt(e,t,s,i),t.child;case 11:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:ai(s,n),_m(e,t,s,n,i);case 7:return pt(e,t,t.pendingProps,i),t.child;case 8:return pt(e,t,t.pendingProps.children,i),t.child;case 12:return pt(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(s=t.type._context,n=t.pendingProps,o=t.memoizedProps,r=n.value,be(Sc,s._currentValue),s._currentValue=r,o!==null)if(mi(o.value,r)){if(o.children===n.children&&!Dt.current){t=ts(e,t,i);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){r=o.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(o.tag===1){l=qi(-1,i&-i),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=i,l=o.alternate,l!==null&&(l.lanes|=i),kh(o.return,i,t),a.lanes|=i;break}l=l.next}}else if(o.tag===10)r=o.type===t.type?null:o.child;else if(o.tag===18){if(r=o.return,r===null)throw Error(G(341));r.lanes|=i,a=r.alternate,a!==null&&(a.lanes|=i),kh(r,i,t),r=o.sibling}else r=o.child;if(r!==null)r.return=o;else for(r=o;r!==null;){if(r===t){r=null;break}if(o=r.sibling,o!==null){o.return=r.return,r=o;break}r=r.return}o=r}pt(e,t,n.children,i),t=t.child}return t;case 9:return n=t.type,s=t.pendingProps.children,ao(t,i),n=si(n),s=s(n),t.flags|=1,pt(e,t,s,i),t.child;case 14:return s=t.type,n=ai(s,t.pendingProps),n=ai(s.type,n),Gm(e,t,s,n,i);case 15:return l2(e,t,t.type,t.pendingProps,i);case 17:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:ai(s,n),Wl(e,t),t.tag=1,Tt(s)?(e=!0,mc(t)):e=!1,ao(t,i),o2(t,s,n),Dh(t,s,n,i),Ih(null,t,s,!0,e,i);case 19:return p2(e,t,i);case 22:return c2(e,t,i)}throw Error(G(156,t.tag))};function M2(e,t){return i0(e,t)}function c4(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(e,t,i,s){return new c4(e,t,i,s)}function Ef(e){return e=e.prototype,!(!e||!e.isReactComponent)}function u4(e){if(typeof e=="function")return Ef(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Up)return 11;if(e===Kp)return 14}return 2}function Is(e,t){var i=e.alternate;return i===null?(i=Xt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Ul(e,t,i,s,n,o){var r=2;if(s=e,typeof e=="function")Ef(e)&&(r=1);else if(typeof e=="string")r=5;else e:switch(e){case Un:return mn(i.children,n,o,t);case jp:r=8,n|=8;break;case eh:return e=Xt(12,i,t,n|2),e.elementType=eh,e.lanes=o,e;case th:return e=Xt(13,i,t,n),e.elementType=th,e.lanes=o,e;case ih:return e=Xt(19,i,t,n),e.elementType=ih,e.lanes=o,e;case Gv:return vu(i,n,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Nv:r=10;break e;case _v:r=9;break e;case Up:r=11;break e;case Kp:r=14;break e;case fs:r=16,s=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=Xt(r,i,t,n),t.elementType=e,t.type=s,t.lanes=o,t}function mn(e,t,i,s){return e=Xt(7,e,s,t),e.lanes=i,e}function vu(e,t,i,s){return e=Xt(22,e,s,t),e.elementType=Gv,e.lanes=i,e.stateNode={isHidden:!1},e}function fd(e,t,i){return e=Xt(6,e,null,t),e.lanes=i,e}function gd(e,t,i){return t=Xt(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function d4(e,t,i,s,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yu(0),this.expirationTimes=Yu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yu(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function kf(e,t,i,s,n,o,r,a,l){return e=new d4(e,t,i,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Xt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},df(o),e}function h4(e,t,i){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jn,key:s==null?null:""+s,children:e,containerInfo:t,implementation:i}}function D2(e){if(!e)return Gs;e=e._reactInternals;e:{if(Ln(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Tt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var i=e.type;if(Tt(i))return D0(e,i,t)}return t}function T2(e,t,i,s,n,o,r,a,l){return e=kf(i,s,!0,e,n,o,r,a,l),e.context=D2(null),i=e.current,s=vt(),n=As(i),o=qi(s,n),o.callback=t??null,Ds(i,o,n),e.current.lanes=n,Da(e,n,s),At(e,s),e}function Su(e,t,i,s){var n=t.current,o=vt(),r=As(n);return i=D2(i),t.context===null?t.context=i:t.pendingContext=i,t=qi(o,r),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Ds(n,t,r),e!==null&&(fi(e,n,r,o),Gl(e,n,r)),r}function Mc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Mf(e,t){Xm(e,t),(e=e.alternate)&&Xm(e,t)}function p4(){return null}var A2=typeof reportError=="function"?reportError:function(e){console.error(e)};function Df(e){this._internalRoot=e}wu.prototype.render=Df.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));Su(e,t,null,null)};wu.prototype.unmount=Df.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;En(function(){Su(null,e,null,null)}),t[Zi]=null}};function wu(e){this._internalRoot=e}wu.prototype.unstable_scheduleHydration=function(e){if(e){var t=c0();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Cs.length&&t!==0&&t<Cs[i].priority;i++);Cs.splice(i,0,e),i===0&&d0(e)}};function Tf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function yu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jm(){}function f4(e,t,i,s,n){if(n){if(typeof s=="function"){var o=s;s=function(){var c=Mc(r);o.call(c)}}var r=T2(t,s,e,0,null,!1,!1,"",Jm);return e._reactRootContainer=r,e[Zi]=r.current,sa(e.nodeType===8?e.parentNode:e),En(),r}for(;n=e.lastChild;)e.removeChild(n);if(typeof s=="function"){var a=s;s=function(){var c=Mc(l);a.call(c)}}var l=kf(e,0,!1,null,null,!1,!1,"",Jm);return e._reactRootContainer=l,e[Zi]=l.current,sa(e.nodeType===8?e.parentNode:e),En(function(){Su(t,l,i,s)}),l}function Ru(e,t,i,s,n){var o=i._reactRootContainer;if(o){var r=o;if(typeof n=="function"){var a=n;n=function(){var l=Mc(r);a.call(l)}}Su(t,r,e,n)}else r=f4(i,t,e,n,s);return Mc(r)}a0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=vr(t.pendingLanes);i!==0&&(Yp(t,i|1),At(t,ze()),!(he&6)&&(Ro=ze()+500,Us()))}break;case 13:En(function(){var s=es(e,1);if(s!==null){var n=vt();fi(s,e,1,n)}}),Mf(e,1)}};Qp=function(e){if(e.tag===13){var t=es(e,134217728);if(t!==null){var i=vt();fi(t,e,134217728,i)}Mf(e,134217728)}};l0=function(e){if(e.tag===13){var t=As(e),i=es(e,t);if(i!==null){var s=vt();fi(i,e,t,s)}Mf(e,t)}};c0=function(){return Se};u0=function(e,t){var i=Se;try{return Se=e,t()}finally{Se=i}};hh=function(e,t,i){switch(t){case"input":if(oh(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var n=hu(s);if(!n)throw Error(G(90));Vv(s),oh(s,n)}}}break;case"textarea":zv(e,i);break;case"select":t=i.value,t!=null&&so(e,!!i.multiple,t,!1)}};Qv=Pf;Xv=En;var g4={usingClientEntryPoint:!1,Events:[Aa,Yn,hu,qv,Yv,Pf]},rr={findFiberByHostInstance:un,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},m4={bundleType:rr.bundleType,version:rr.version,rendererPackageName:rr.rendererPackageName,rendererConfig:rr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=e0(e),e===null?null:e.stateNode},findFiberByHostInstance:rr.findFiberByHostInstance||p4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{lu=al.inject(m4),Mi=al}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g4;jt.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tf(t))throw Error(G(200));return h4(e,t,null,i)};jt.createRoot=function(e,t){if(!Tf(e))throw Error(G(299));var i=!1,s="",n=A2;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=kf(e,1,!1,null,null,i,!1,s,n),e[Zi]=t.current,sa(e.nodeType===8?e.parentNode:e),new Df(t)};jt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=e0(t),e=e===null?null:e.stateNode,e};jt.flushSync=function(e){return En(e)};jt.hydrate=function(e,t,i){if(!yu(t))throw Error(G(200));return Ru(null,e,t,!0,i)};jt.hydrateRoot=function(e,t,i){if(!Tf(e))throw Error(G(405));var s=i!=null&&i.hydratedSources||null,n=!1,o="",r=A2;if(i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onRecoverableError!==void 0&&(r=i.onRecoverableError)),t=T2(t,null,e,1,i??null,n,!1,o,r),e[Zi]=t.current,sa(e),s)for(e=0;e<s.length;e++)i=s[e],n=i._getVersion,n=n(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,n]:t.mutableSourceEagerHydrationData.push(i,n);return new wu(t)};jt.render=function(e,t,i){if(!yu(t))throw Error(G(200));return Ru(null,e,t,!1,i)};jt.unmountComponentAtNode=function(e){if(!yu(e))throw Error(G(40));return e._reactRootContainer?(En(function(){Ru(null,null,e,!1,function(){e._reactRootContainer=null,e[Zi]=null})}),!0):!1};jt.unstable_batchedUpdates=Pf;jt.unstable_renderSubtreeIntoContainer=function(e,t,i,s){if(!yu(i))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return Ru(e,t,i,!1,s)};jt.version="18.3.1-next-f1338f8080-20240426";function I2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(I2)}catch(e){console.error(e)}}I2(),Iv.exports=jt;var bu=Iv.exports;const C4=ka(bu);var L2,Zm=bu;L2=Zm.createRoot,Zm.hydrateRoot;var O2={exports:{}},v4="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",S4=v4,w4=S4;function B2(){}function N2(){}N2.resetWarningCache=B2;var y4=function(){function e(s,n,o,r,a,l){if(l!==w4){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:N2,resetWarningCache:B2};return i.PropTypes=i,i};O2.exports=y4();var R4=O2.exports;function _2(){this.name="NoVideoInputDevicesError",this.message="No video input devices found"}_2.prototype=new Error;var b4={NoVideoInputDevicesError:_2},P4=b4,e3=P4.NoVideoInputDevicesError;function x4(e,t,i){return e.length>0?e[0].deviceId:t.length==1||i=="user"?t[0].deviceId:t[1].deviceId}var G2=function(t){return t=="environment"?/rear|back|environment/ig:/front|user|face/ig};function F4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x4;return new Promise(function(i,s){var n=void 0;try{n=navigator.mediaDevices.enumerateDevices()}catch{s(new e3)}n.then(function(o){var r=o.filter(function(c){return c.kind=="videoinput"});if(r.length<1){s(new e3);return}var a=G2(e),l=r.filter(function(c){var u=c.label;return a.test(u)});i(t(l,r,e))})})}var E4={getDeviceId:F4,getFacingModePattern:G2},k4=function(t,i,s){var n=[];return s.forEach(function(o){t[o]!=i[o]&&n.push(o)}),n},M4=function(t,i){t=t||[],i=i||{};try{return new Blob(t,i)}catch(r){if(r.name!=="TypeError")throw r;for(var s=window.BlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder||window.WebKitBlobBuilder,n=new s,o=0;o<t.length;o+=1)n.append(t[o]);return n.getBlob(i.type)}};let H2=!0,V2=!0;function wr(e,t,i){const s=e.match(t);return s&&s.length>=i&&parseInt(s[i],10)}function Bo(e,t,i){if(!e.RTCPeerConnection)return;const s=e.RTCPeerConnection.prototype,n=s.addEventListener;s.addEventListener=function(r,a){if(r!==t)return n.apply(this,arguments);const l=c=>{const u=i(c);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(a,l),n.apply(this,[r,l])};const o=s.removeEventListener;s.removeEventListener=function(r,a){if(r!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(a))return o.apply(this,arguments);const l=this._eventMap[t].get(a);return this._eventMap[t].delete(a),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[r,l])},Object.defineProperty(s,"on"+t,{get(){return this["_on"+t]},set(r){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),r&&this.addEventListener(t,this["_on"+t]=r)},enumerable:!0,configurable:!0})}function D4(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(H2=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function T4(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(V2=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Af(){if(typeof window=="object"){if(H2)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Pu(e,t){V2&&console.warn(e+" is deprecated, please use "+t+" instead.")}function A4(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator)return t.browser="Not a browser.",t;const{navigator:i}=e;if(i.mozGetUserMedia)t.browser="firefox",t.version=wr(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=wr(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(i.mediaDevices&&i.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=wr(i.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(e.RTCPeerConnection&&i.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=wr(i.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function t3(e){return Object.prototype.toString.call(e)==="[object Object]"}function W2(e){return t3(e)?Object.keys(e).reduce(function(t,i){const s=t3(e[i]),n=s?W2(e[i]):e[i],o=s&&!Object.keys(n).length;return n===void 0||o?t:Object.assign(t,{[i]:n})},{}):e}function Uh(e,t,i){!t||i.has(t.id)||(i.set(t.id,t),Object.keys(t).forEach(s=>{s.endsWith("Id")?Uh(e,e.get(t[s]),i):s.endsWith("Ids")&&t[s].forEach(n=>{Uh(e,e.get(n),i)})}))}function i3(e,t,i){const s=i?"outbound-rtp":"inbound-rtp",n=new Map;if(t===null)return n;const o=[];return e.forEach(r=>{r.type==="track"&&r.trackIdentifier===t.id&&o.push(r)}),o.forEach(r=>{e.forEach(a=>{a.type===s&&a.trackId===r.id&&Uh(e,a,n)})}),n}const s3=Af;function z2(e,t){const i=e&&e.navigator;if(!i.mediaDevices)return;const s=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const l={};return Object.keys(a).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const u=typeof a[c]=="object"?a[c]:{ideal:a[c]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(h,p){return h?h+p.charAt(0).toUpperCase()+p.slice(1):p==="deviceId"?"sourceId":p};if(u.ideal!==void 0){l.optional=l.optional||[];let h={};typeof u.ideal=="number"?(h[d("min",c)]=u.ideal,l.optional.push(h),h={},h[d("max",c)]=u.ideal,l.optional.push(h)):(h[d("",c)]=u.ideal,l.optional.push(h))}u.exact!==void 0&&typeof u.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[d("",c)]=u.exact):["min","max"].forEach(h=>{u[h]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[d(h,c)]=u[h])})}),a.advanced&&(l.optional=(l.optional||[]).concat(a.advanced)),l},n=function(a,l){if(t.version>=61)return l(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const c=function(u,d,h){d in u&&!(h in u)&&(u[h]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),c(a.audio,"autoGainControl","googAutoGainControl"),c(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=s(a.audio)}if(a&&typeof a.video=="object"){let c=a.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const u=t.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(i.mediaDevices.getSupportedConstraints&&i.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(c.exact==="environment"||c.ideal==="environment"?d=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(d=["front"]),d)return i.mediaDevices.enumerateDevices().then(h=>{h=h.filter(g=>g.kind==="videoinput");let p=h.find(g=>d.some(v=>g.label.toLowerCase().includes(v)));return!p&&h.length&&d.includes("back")&&(p=h[h.length-1]),p&&(a.video.deviceId=c.exact?{exact:p.deviceId}:{ideal:p.deviceId}),a.video=s(a.video),s3("chrome: "+JSON.stringify(a)),l(a)})}a.video=s(a.video)}return s3("chrome: "+JSON.stringify(a)),l(a)},o=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},r=function(a,l,c){n(a,u=>{i.webkitGetUserMedia(u,l,d=>{c&&c(o(d))})})};if(i.getUserMedia=r.bind(i),i.mediaDevices.getUserMedia){const a=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(l){return n(l,c=>a(c).then(u=>{if(c.audio&&!u.getAudioTracks().length||c.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(o(u))))}}}function I4(e,t){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&e.navigator.mediaDevices){if(typeof t!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(s){return t(s).then(n=>{const o=s.video&&s.video.width,r=s.video&&s.video.height,a=s.video&&s.video.frameRate;return s.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxFrameRate:a||3}},o&&(s.video.mandatory.maxWidth=o),r&&(s.video.mandatory.maxHeight=r),e.navigator.mediaDevices.getUserMedia(s)})}}}function j2(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function U2(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(i){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=i)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=s=>{s.stream.addEventListener("addtrack",n=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===n.track.id):o={track:n.track};const r=new Event("track");r.track=n.track,r.receiver=o,r.transceiver={receiver:o},r.streams=[s.stream],this.dispatchEvent(r)}),s.stream.getTracks().forEach(n=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===n.id):o={track:n};const r=new Event("track");r.track=n,r.receiver=o,r.transceiver={receiver:o},r.streams=[s.stream],this.dispatchEvent(r)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Bo(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function K2(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(n,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=n.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:n}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,l){let c=n.apply(this,arguments);return c||(c=t(this,a),this._senders.push(c)),c};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){o.apply(this,arguments);const l=this._senders.indexOf(a);l!==-1&&this._senders.splice(l,1)}}const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],i.apply(this,[o]),o.getTracks().forEach(r=>{this._senders.push(t(this,r))})};const s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],s.apply(this,[o]),o.getTracks().forEach(r=>{const a=this._senders.find(l=>l.track===r);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const s=t.apply(this,[]);return s.forEach(n=>n._pc=this),s},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function $2(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,n,o]=arguments;if(arguments.length>0&&typeof s=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof s!="function"))return t.apply(this,[]);const r=function(l){const c={};return l.result().forEach(d=>{const h={id:d.id,timestamp:d.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[d.type]||d.type};d.names().forEach(p=>{h[p]=d.stat(p)}),c[h.id]=h}),c},a=function(l){return new Map(Object.keys(l).map(c=>[c,l[c]]))};if(arguments.length>=2){const l=function(c){n(a(r(c)))};return t.apply(this,[l,s])}return new Promise((l,c)=>{t.apply(this,[function(u){l(a(r(u)))},c])}).then(n,o)}}function q2(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const i=e.RTCPeerConnection.prototype.getSenders;i&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=i.apply(this,[]);return o.forEach(r=>r._pc=this),o});const s=e.RTCPeerConnection.prototype.addTrack;s&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=s.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(r=>i3(r,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){const n=i.apply(this,[]);return n.forEach(o=>o._pc=this),n}),Bo(e,"track",s=>(s.receiver._pc=s.srcElement,s)),e.RTCRtpReceiver.prototype.getStats=function(){const n=this;return this._pc.getStats().then(o=>i3(o,n.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const s=arguments[0];let n,o,r;return this.getSenders().forEach(a=>{a.track===s&&(n?r=!0:n=a)}),this.getReceivers().forEach(a=>(a.track===s&&(o?r=!0:o=a),a.track===s)),r||n&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Y2(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(r=>this._shimmedLocalStreams[r][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(r,a){if(!a)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=t.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(l)===-1&&this._shimmedLocalStreams[a.id].push(l):this._shimmedLocalStreams[a.id]=[a,l],l};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(r){this._shimmedLocalStreams=this._shimmedLocalStreams||{},r.getTracks().forEach(c=>{if(this.getSenders().find(d=>d.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();i.apply(this,arguments);const l=this.getSenders().filter(c=>a.indexOf(c)===-1);this._shimmedLocalStreams[r.id]=[r].concat(l)};const s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(r){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[r.id],s.apply(this,arguments)};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(r){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},r&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const l=this._shimmedLocalStreams[a].indexOf(r);l!==-1&&this._shimmedLocalStreams[a].splice(l,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),n.apply(this,arguments)}}function Q2(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Y2(e);const i=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const u=i.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const s=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(p=>p.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new e.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}s.apply(this,[u])};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},n.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},e.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const h=[].slice.call(arguments,1);if(h.length!==1||!h[0].getTracks().find(v=>v===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(v=>v.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const g=this._streams[d.id];if(g)g.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const v=new e.MediaStream([u]);this._streams[d.id]=v,this._reverseStreams[v.id]=d,this.addStream(v)}return this.getSenders().find(v=>v.track===u)};function o(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(h=>{const p=c._reverseStreams[h],g=c._streams[p.id];d=d.replace(new RegExp(g.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function r(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(h=>{const p=c._reverseStreams[h],g=c._streams[p.id];d=d.replace(new RegExp(p.id,"g"),g.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(c){const u=e.RTCPeerConnection.prototype[c],d={[c](){const h=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[g=>{const v=o(this,g);h[0].apply(null,[v])},g=>{h[1]&&h[1].apply(null,g)},arguments[2]]):u.apply(this,arguments).then(g=>o(this,g))}};e.RTCPeerConnection.prototype[c]=d[c]});const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=r(this,arguments[0]),a.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const c=l.get.apply(this);return c.type===""?c:o(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let h;Object.keys(this._streams).forEach(p=>{this._streams[p].getTracks().find(v=>u.track===v)&&(h=this._streams[p])}),h&&(h.getTracks().length===1?this.removeStream(this._reverseStreams[h.id]):h.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Kh(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],n={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=n[i]})}function X2(e,t){Bo(e,"negotiationneeded",i=>{const s=i.target;if(!((t.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")&&s.signalingState!=="stable"))return i})}const n3=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:X2,shimAddTrackRemoveTrack:Q2,shimAddTrackRemoveTrackWithNative:Y2,shimGetDisplayMedia:I4,shimGetSendersWithDtmf:K2,shimGetStats:$2,shimGetUserMedia:z2,shimMediaStream:j2,shimOnTrack:U2,shimPeerConnection:Kh,shimSenderReceiverGetStats:q2},Symbol.toStringTag,{value:"Module"}));function L4(e,t){let i=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(s=>{if(s&&(s.urls||s.url)){let n=s.urls||s.url;s.url&&!s.urls&&Pu("RTCIceServer.url","RTCIceServer.urls");const o=typeof n=="string";return o&&(n=[n]),n=n.filter(r=>{if(r.indexOf("stun:")===0)return!1;const a=r.startsWith("turn")&&!r.startsWith("turn:[")&&r.includes("transport=udp");return a&&!i?(i=!0,!0):a&&!i}),delete s.url,s.urls=o?n[0]:n,!!n.length}})}var J2={exports:{}};(function(e){var t={};t.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},t.localCName=t.generateIdentifier(),t.splitLines=function(i){return i.trim().split(`
`).map(function(s){return s.trim()})},t.splitSections=function(i){var s=i.split(`
m=`);return s.map(function(n,o){return(o>0?"m="+n:n).trim()+`\r
`})},t.getDescription=function(i){var s=t.splitSections(i);return s&&s[0]},t.getMediaSections=function(i){var s=t.splitSections(i);return s.shift(),s},t.matchPrefix=function(i,s){return t.splitLines(i).filter(function(n){return n.indexOf(s)===0})},t.parseCandidate=function(i){var s;i.indexOf("a=candidate:")===0?s=i.substring(12).split(" "):s=i.substring(10).split(" ");for(var n={foundation:s[0],component:parseInt(s[1],10),protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]},o=8;o<s.length;o+=2)switch(s[o]){case"raddr":n.relatedAddress=s[o+1];break;case"rport":n.relatedPort=parseInt(s[o+1],10);break;case"tcptype":n.tcpType=s[o+1];break;case"ufrag":n.ufrag=s[o+1],n.usernameFragment=s[o+1];break;default:n[s[o]]=s[o+1];break}return n},t.writeCandidate=function(i){var s=[];s.push(i.foundation),s.push(i.component),s.push(i.protocol.toUpperCase()),s.push(i.priority),s.push(i.address||i.ip),s.push(i.port);var n=i.type;return s.push("typ"),s.push(n),n!=="host"&&i.relatedAddress&&i.relatedPort&&(s.push("raddr"),s.push(i.relatedAddress),s.push("rport"),s.push(i.relatedPort)),i.tcpType&&i.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(i.tcpType)),(i.usernameFragment||i.ufrag)&&(s.push("ufrag"),s.push(i.usernameFragment||i.ufrag)),"candidate:"+s.join(" ")},t.parseIceOptions=function(i){return i.substr(14).split(" ")},t.parseRtpMap=function(i){var s=i.substr(9).split(" "),n={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),n.name=s[0],n.clockRate=parseInt(s[1],10),n.channels=s.length===3?parseInt(s[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(i){var s=i.payloadType;i.preferredPayloadType!==void 0&&(s=i.preferredPayloadType);var n=i.channels||i.numChannels||1;return"a=rtpmap:"+s+" "+i.name+"/"+i.clockRate+(n!==1?"/"+n:"")+`\r
`},t.parseExtmap=function(i){var s=i.substr(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1]}},t.writeExtmap=function(i){return"a=extmap:"+(i.id||i.preferredId)+(i.direction&&i.direction!=="sendrecv"?"/"+i.direction:"")+" "+i.uri+`\r
`},t.parseFmtp=function(i){for(var s={},n,o=i.substr(i.indexOf(" ")+1).split(";"),r=0;r<o.length;r++)n=o[r].trim().split("="),s[n[0].trim()]=n[1];return s},t.writeFmtp=function(i){var s="",n=i.payloadType;if(i.preferredPayloadType!==void 0&&(n=i.preferredPayloadType),i.parameters&&Object.keys(i.parameters).length){var o=[];Object.keys(i.parameters).forEach(function(r){i.parameters[r]?o.push(r+"="+i.parameters[r]):o.push(r)}),s+="a=fmtp:"+n+" "+o.join(";")+`\r
`}return s},t.parseRtcpFb=function(i){var s=i.substr(i.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},t.writeRtcpFb=function(i){var s="",n=i.payloadType;return i.preferredPayloadType!==void 0&&(n=i.preferredPayloadType),i.rtcpFeedback&&i.rtcpFeedback.length&&i.rtcpFeedback.forEach(function(o){s+="a=rtcp-fb:"+n+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),s},t.parseSsrcMedia=function(i){var s=i.indexOf(" "),n={ssrc:parseInt(i.substr(7,s-7),10)},o=i.indexOf(":",s);return o>-1?(n.attribute=i.substr(s+1,o-s-1),n.value=i.substr(o+1)):n.attribute=i.substr(s+1),n},t.parseSsrcGroup=function(i){var s=i.substr(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(function(n){return parseInt(n,10)})}},t.getMid=function(i){var s=t.matchPrefix(i,"a=mid:")[0];if(s)return s.substr(6)},t.parseFingerprint=function(i){var s=i.substr(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1]}},t.getDtlsParameters=function(i,s){var n=t.matchPrefix(i+s,"a=fingerprint:");return{role:"auto",fingerprints:n.map(t.parseFingerprint)}},t.writeDtlsParameters=function(i,s){var n="a=setup:"+s+`\r
`;return i.fingerprints.forEach(function(o){n+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),n},t.parseCryptoLine=function(i){var s=i.substr(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},t.writeCryptoLine=function(i){return"a=crypto:"+i.tag+" "+i.cryptoSuite+" "+(typeof i.keyParams=="object"?t.writeCryptoKeyParams(i.keyParams):i.keyParams)+(i.sessionParams?" "+i.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(i){if(i.indexOf("inline:")!==0)return null;var s=i.substr(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(i){return i.keyMethod+":"+i.keySalt+(i.lifeTime?"|"+i.lifeTime:"")+(i.mkiValue&&i.mkiLength?"|"+i.mkiValue+":"+i.mkiLength:"")},t.getCryptoParameters=function(i,s){var n=t.matchPrefix(i+s,"a=crypto:");return n.map(t.parseCryptoLine)},t.getIceParameters=function(i,s){var n=t.matchPrefix(i+s,"a=ice-ufrag:")[0],o=t.matchPrefix(i+s,"a=ice-pwd:")[0];return n&&o?{usernameFragment:n.substr(12),password:o.substr(10)}:null},t.writeIceParameters=function(i){return"a=ice-ufrag:"+i.usernameFragment+`\r
a=ice-pwd:`+i.password+`\r
`},t.parseRtpParameters=function(i){for(var s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=t.splitLines(i),o=n[0].split(" "),r=3;r<o.length;r++){var a=o[r],l=t.matchPrefix(i,"a=rtpmap:"+a+" ")[0];if(l){var c=t.parseRtpMap(l),u=t.matchPrefix(i,"a=fmtp:"+a+" ");switch(c.parameters=u.length?t.parseFmtp(u[0]):{},c.rtcpFeedback=t.matchPrefix(i,"a=rtcp-fb:"+a+" ").map(t.parseRtcpFb),s.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(c.name.toUpperCase());break}}}return t.matchPrefix(i,"a=extmap:").forEach(function(d){s.headerExtensions.push(t.parseExtmap(d))}),s},t.writeRtpDescription=function(i,s){var n="";n+="m="+i+" ",n+=s.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=s.codecs.map(function(r){return r.preferredPayloadType!==void 0?r.preferredPayloadType:r.payloadType}).join(" ")+`\r
`,n+=`c=IN IP4 0.0.0.0\r
`,n+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(function(r){n+=t.writeRtpMap(r),n+=t.writeFmtp(r),n+=t.writeRtcpFb(r)});var o=0;return s.codecs.forEach(function(r){r.maxptime>o&&(o=r.maxptime)}),o>0&&(n+="a=maxptime:"+o+`\r
`),n+=`a=rtcp-mux\r
`,s.headerExtensions&&s.headerExtensions.forEach(function(r){n+=t.writeExtmap(r)}),n},t.parseRtpEncodingParameters=function(i){var s=[],n=t.parseRtpParameters(i),o=n.fecMechanisms.indexOf("RED")!==-1,r=n.fecMechanisms.indexOf("ULPFEC")!==-1,a=t.matchPrefix(i,"a=ssrc:").map(function(h){return t.parseSsrcMedia(h)}).filter(function(h){return h.attribute==="cname"}),l=a.length>0&&a[0].ssrc,c,u=t.matchPrefix(i,"a=ssrc-group:FID").map(function(h){var p=h.substr(17).split(" ");return p.map(function(g){return parseInt(g,10)})});u.length>0&&u[0].length>1&&u[0][0]===l&&(c=u[0][1]),n.codecs.forEach(function(h){if(h.name.toUpperCase()==="RTX"&&h.parameters.apt){var p={ssrc:l,codecPayloadType:parseInt(h.parameters.apt,10)};l&&c&&(p.rtx={ssrc:c}),s.push(p),o&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:l,mechanism:r?"red+ulpfec":"red"},s.push(p))}}),s.length===0&&l&&s.push({ssrc:l});var d=t.matchPrefix(i,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substr(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substr(5),10)*1e3*.95-50*40*8:d=void 0,s.forEach(function(h){h.maxBitrate=d})),s},t.parseRtcpParameters=function(i){var s={},n=t.matchPrefix(i,"a=ssrc:").map(function(a){return t.parseSsrcMedia(a)}).filter(function(a){return a.attribute==="cname"})[0];n&&(s.cname=n.value,s.ssrc=n.ssrc);var o=t.matchPrefix(i,"a=rtcp-rsize");s.reducedSize=o.length>0,s.compound=o.length===0;var r=t.matchPrefix(i,"a=rtcp-mux");return s.mux=r.length>0,s},t.parseMsid=function(i){var s,n=t.matchPrefix(i,"a=msid:");if(n.length===1)return s=n[0].substr(7).split(" "),{stream:s[0],track:s[1]};var o=t.matchPrefix(i,"a=ssrc:").map(function(r){return t.parseSsrcMedia(r)}).filter(function(r){return r.attribute==="msid"});if(o.length>0)return s=o[0].value.split(" "),{stream:s[0],track:s[1]}},t.parseSctpDescription=function(i){var s=t.parseMLine(i),n=t.matchPrefix(i,"a=max-message-size:"),o;n.length>0&&(o=parseInt(n[0].substr(19),10)),isNaN(o)&&(o=65536);var r=t.matchPrefix(i,"a=sctp-port:");if(r.length>0)return{port:parseInt(r[0].substr(12),10),protocol:s.fmt,maxMessageSize:o};var a=t.matchPrefix(i,"a=sctpmap:");if(a.length>0){var l=t.matchPrefix(i,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:o}}},t.writeSctpDescription=function(i,s){var n=[];return i.protocol!=="DTLS/SCTP"?n=["m="+i.kind+" 9 "+i.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:n=["m="+i.kind+" 9 "+i.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&n.push("a=max-message-size:"+s.maxMessageSize+`\r
`),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(i,s,n){var o,r=s!==void 0?s:2;i?o=i:o=t.generateSessionId();var a=n||"thisisadapterortc";return`v=0\r
o=`+a+" "+o+" "+r+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.writeMediaSection=function(i,s,n,o){var r=t.writeRtpDescription(i.kind,s);if(r+=t.writeIceParameters(i.iceGatherer.getLocalParameters()),r+=t.writeDtlsParameters(i.dtlsTransport.getLocalParameters(),n==="offer"?"actpass":"active"),r+="a=mid:"+i.mid+`\r
`,i.direction?r+="a="+i.direction+`\r
`:i.rtpSender&&i.rtpReceiver?r+=`a=sendrecv\r
`:i.rtpSender?r+=`a=sendonly\r
`:i.rtpReceiver?r+=`a=recvonly\r
`:r+=`a=inactive\r
`,i.rtpSender){var a="msid:"+o.id+" "+i.rtpSender.track.id+`\r
`;r+="a="+a,r+="a=ssrc:"+i.sendEncodingParameters[0].ssrc+" "+a,i.sendEncodingParameters[0].rtx&&(r+="a=ssrc:"+i.sendEncodingParameters[0].rtx.ssrc+" "+a,r+="a=ssrc-group:FID "+i.sendEncodingParameters[0].ssrc+" "+i.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return r+="a=ssrc:"+i.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+`\r
`,i.rtpSender&&i.sendEncodingParameters[0].rtx&&(r+="a=ssrc:"+i.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+`\r
`),r},t.getDirection=function(i,s){for(var n=t.splitLines(i),o=0;o<n.length;o++)switch(n[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[o].substr(2)}return s?t.getDirection(s):"sendrecv"},t.getKind=function(i){var s=t.splitLines(i),n=s[0].split(" ");return n[0].substr(2)},t.isRejected=function(i){return i.split(" ",2)[1]==="0"},t.parseMLine=function(i){var s=t.splitLines(i),n=s[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(i){var s=t.matchPrefix(i,"o=")[0],n=s.substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(i){if(typeof i!="string"||i.length===0)return!1;for(var s=t.splitLines(i),n=0;n<s.length;n++)if(s[n].length<2||s[n].charAt(1)!=="=")return!1;return!0},e.exports=t})(J2);var Z2=J2.exports;const Kl=ka(Z2);var ne=Z2;function O4(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function o3(e,t,i,s,n){var o=ne.writeRtpDescription(e.kind,t);if(o+=ne.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=ne.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),i==="offer"?"actpass":n||"active"),o+="a=mid:"+e.mid+`\r
`,e.rtpSender&&e.rtpReceiver?o+=`a=sendrecv\r
`:e.rtpSender?o+=`a=sendonly\r
`:e.rtpReceiver?o+=`a=recvonly\r
`:o+=`a=inactive\r
`,e.rtpSender){var r=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=r;var a="msid:"+(s?s.id:"-")+" "+r+`\r
`;o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+ne.localCName+`\r
`,e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+ne.localCName+`\r
`),o}function B4(e,t){var i=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(function(s){if(s&&(s.urls||s.url)){var n=s.urls||s.url;s.url&&!s.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o=typeof n=="string";return o&&(n=[n]),n=n.filter(function(r){var a=r.indexOf("turn:")===0&&r.indexOf("transport=udp")!==-1&&r.indexOf("turn:[")===-1&&!i;return a?(i=!0,!0):r.indexOf("stun:")===0&&t>=14393&&r.indexOf("?transport=udp")===-1}),delete s.url,s.urls=o?n[0]:n,!!n.length}})}function ll(e,t){var i={codecs:[],headerExtensions:[],fecMechanisms:[]},s=function(o,r){o=parseInt(o,10);for(var a=0;a<r.length;a++)if(r[a].payloadType===o||r[a].preferredPayloadType===o)return r[a]},n=function(o,r,a,l){var c=s(o.parameters.apt,a),u=s(r.parameters.apt,l);return c&&u&&c.name.toLowerCase()===u.name.toLowerCase()};return e.codecs.forEach(function(o){for(var r=0;r<t.codecs.length;r++){var a=t.codecs[r];if(o.name.toLowerCase()===a.name.toLowerCase()&&o.clockRate===a.clockRate){if(o.name.toLowerCase()==="rtx"&&o.parameters&&a.parameters.apt&&!n(o,a,e.codecs,t.codecs))continue;a=JSON.parse(JSON.stringify(a)),a.numChannels=Math.min(o.numChannels,a.numChannels),i.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter(function(l){for(var c=0;c<o.rtcpFeedback.length;c++)if(o.rtcpFeedback[c].type===l.type&&o.rtcpFeedback[c].parameter===l.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(o){for(var r=0;r<t.headerExtensions.length;r++){var a=t.headerExtensions[r];if(o.uri===a.uri){i.headerExtensions.push(a);break}}}),i}function r3(e,t,i){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(i)!==-1}function md(e,t){var i=e.getRemoteCandidates().find(function(s){return t.foundation===s.foundation&&t.ip===s.ip&&t.port===s.port&&t.priority===s.priority&&t.protocol===s.protocol&&t.type===s.type});return i||e.addRemoteCandidate(t),!i}function rt(e,t){var i=new Error(t);return i.name=e,i.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],i}var N4=function(e,t){function i(l,c){c.addTrack(l),c.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:l}))}function s(l,c){c.removeTrack(l),c.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:l}))}function n(l,c,u,d){var h=new Event("track");h.track=c,h.receiver=u,h.transceiver={receiver:u},h.streams=d,e.setTimeout(function(){l._dispatchEvent("track",h)})}var o=function(l){var c=this,u=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(h){c[h]=u[h].bind(u)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",l=JSON.parse(JSON.stringify(l||{})),this.usingBundle=l.bundlePolicy==="max-bundle",l.rtcpMuxPolicy==="negotiate")throw rt("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(l.rtcpMuxPolicy||(l.rtcpMuxPolicy="require"),l.iceTransportPolicy){case"all":case"relay":break;default:l.iceTransportPolicy="all";break}switch(l.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:l.bundlePolicy="balanced";break}if(l.iceServers=B4(l.iceServers||[],t),this._iceGatherers=[],l.iceCandidatePoolSize)for(var d=l.iceCandidatePoolSize;d>0;d--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:l.iceServers,gatherPolicy:l.iceTransportPolicy}));else l.iceCandidatePoolSize=0;this._config=l,this.transceivers=[],this._sdpSessionId=ne.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(o.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(o.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),o.prototype.onicecandidate=null,o.prototype.onaddstream=null,o.prototype.ontrack=null,o.prototype.onremovestream=null,o.prototype.onsignalingstatechange=null,o.prototype.oniceconnectionstatechange=null,o.prototype.onconnectionstatechange=null,o.prototype.onicegatheringstatechange=null,o.prototype.onnegotiationneeded=null,o.prototype.ondatachannel=null,o.prototype._dispatchEvent=function(l,c){this._isClosed||(this.dispatchEvent(c),typeof this["on"+l]=="function"&&this["on"+l](c))},o.prototype._emitGatheringStateChange=function(){var l=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",l)},o.prototype.getConfiguration=function(){return this._config},o.prototype.getLocalStreams=function(){return this.localStreams},o.prototype.getRemoteStreams=function(){return this.remoteStreams},o.prototype._createTransceiver=function(l,c){var u=this.transceivers.length>0,d={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:l,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&u)d.iceTransport=this.transceivers[0].iceTransport,d.dtlsTransport=this.transceivers[0].dtlsTransport;else{var h=this._createIceAndDtlsTransports();d.iceTransport=h.iceTransport,d.dtlsTransport=h.dtlsTransport}return c||this.transceivers.push(d),d},o.prototype.addTrack=function(l,c){if(this._isClosed)throw rt("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var u=this.transceivers.find(function(p){return p.track===l});if(u)throw rt("InvalidAccessError","Track already exists.");for(var d,h=0;h<this.transceivers.length;h++)!this.transceivers[h].track&&this.transceivers[h].kind===l.kind&&(d=this.transceivers[h]);return d||(d=this._createTransceiver(l.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(c)===-1&&this.localStreams.push(c),d.track=l,d.stream=c,d.rtpSender=new e.RTCRtpSender(l,d.dtlsTransport),d.rtpSender},o.prototype.addStream=function(l){var c=this;if(t>=15025)l.getTracks().forEach(function(d){c.addTrack(d,l)});else{var u=l.clone();l.getTracks().forEach(function(d,h){var p=u.getTracks()[h];d.addEventListener("enabled",function(g){p.enabled=g.enabled})}),u.getTracks().forEach(function(d){c.addTrack(d,u)})}},o.prototype.removeTrack=function(l){if(this._isClosed)throw rt("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(l instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var c=this.transceivers.find(function(h){return h.rtpSender===l});if(!c)throw rt("InvalidAccessError","Sender was not created by this connection.");var u=c.stream;c.rtpSender.stop(),c.rtpSender=null,c.track=null,c.stream=null;var d=this.transceivers.map(function(h){return h.stream});d.indexOf(u)===-1&&this.localStreams.indexOf(u)>-1&&this.localStreams.splice(this.localStreams.indexOf(u),1),this._maybeFireNegotiationNeeded()},o.prototype.removeStream=function(l){var c=this;l.getTracks().forEach(function(u){var d=c.getSenders().find(function(h){return h.track===u});d&&c.removeTrack(d)})},o.prototype.getSenders=function(){return this.transceivers.filter(function(l){return!!l.rtpSender}).map(function(l){return l.rtpSender})},o.prototype.getReceivers=function(){return this.transceivers.filter(function(l){return!!l.rtpReceiver}).map(function(l){return l.rtpReceiver})},o.prototype._createIceGatherer=function(l,c){var u=this;if(c&&l>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var d=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(d,"state",{value:"new",writable:!0}),this.transceivers[l].bufferedCandidateEvents=[],this.transceivers[l].bufferCandidates=function(h){var p=!h.candidate||Object.keys(h.candidate).length===0;d.state=p?"completed":"gathering",u.transceivers[l].bufferedCandidateEvents!==null&&u.transceivers[l].bufferedCandidateEvents.push(h)},d.addEventListener("localcandidate",this.transceivers[l].bufferCandidates),d},o.prototype._gather=function(l,c){var u=this,d=this.transceivers[c].iceGatherer;if(!d.onlocalcandidate){var h=this.transceivers[c].bufferedCandidateEvents;this.transceivers[c].bufferedCandidateEvents=null,d.removeEventListener("localcandidate",this.transceivers[c].bufferCandidates),d.onlocalcandidate=function(p){if(!(u.usingBundle&&c>0)){var g=new Event("icecandidate");g.candidate={sdpMid:l,sdpMLineIndex:c};var v=p.candidate,S=!v||Object.keys(v).length===0;if(S)(d.state==="new"||d.state==="gathering")&&(d.state="completed");else{d.state==="new"&&(d.state="gathering"),v.component=1,v.ufrag=d.getLocalParameters().usernameFragment;var m=ne.writeCandidate(v);g.candidate=Object.assign(g.candidate,ne.parseCandidate(m)),g.candidate.candidate=m,g.candidate.toJSON=function(){return{candidate:g.candidate.candidate,sdpMid:g.candidate.sdpMid,sdpMLineIndex:g.candidate.sdpMLineIndex,usernameFragment:g.candidate.usernameFragment}}}var C=ne.getMediaSections(u._localDescription.sdp);S?C[g.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:C[g.candidate.sdpMLineIndex]+="a="+g.candidate.candidate+`\r
`,u._localDescription.sdp=ne.getDescription(u._localDescription.sdp)+C.join("");var w=u.transceivers.every(function(R){return R.iceGatherer&&R.iceGatherer.state==="completed"});u.iceGatheringState!=="gathering"&&(u.iceGatheringState="gathering",u._emitGatheringStateChange()),S||u._dispatchEvent("icecandidate",g),w&&(u._dispatchEvent("icecandidate",new Event("icecandidate")),u.iceGatheringState="complete",u._emitGatheringStateChange())}},e.setTimeout(function(){h.forEach(function(p){d.onlocalcandidate(p)})},0)}},o.prototype._createIceAndDtlsTransports=function(){var l=this,c=new e.RTCIceTransport(null);c.onicestatechange=function(){l._updateIceConnectionState(),l._updateConnectionState()};var u=new e.RTCDtlsTransport(c);return u.ondtlsstatechange=function(){l._updateConnectionState()},u.onerror=function(){Object.defineProperty(u,"state",{value:"failed",writable:!0}),l._updateConnectionState()},{iceTransport:c,dtlsTransport:u}},o.prototype._disposeIceAndDtlsTransports=function(l){var c=this.transceivers[l].iceGatherer;c&&(delete c.onlocalcandidate,delete this.transceivers[l].iceGatherer);var u=this.transceivers[l].iceTransport;u&&(delete u.onicestatechange,delete this.transceivers[l].iceTransport);var d=this.transceivers[l].dtlsTransport;d&&(delete d.ondtlsstatechange,delete d.onerror,delete this.transceivers[l].dtlsTransport)},o.prototype._transceive=function(l,c,u){var d=ll(l.localCapabilities,l.remoteCapabilities);c&&l.rtpSender&&(d.encodings=l.sendEncodingParameters,d.rtcp={cname:ne.localCName,compound:l.rtcpParameters.compound},l.recvEncodingParameters.length&&(d.rtcp.ssrc=l.recvEncodingParameters[0].ssrc),l.rtpSender.send(d)),u&&l.rtpReceiver&&d.codecs.length>0&&(l.kind==="video"&&l.recvEncodingParameters&&t<15019&&l.recvEncodingParameters.forEach(function(h){delete h.rtx}),l.recvEncodingParameters.length?d.encodings=l.recvEncodingParameters:d.encodings=[{}],d.rtcp={compound:l.rtcpParameters.compound},l.rtcpParameters.cname&&(d.rtcp.cname=l.rtcpParameters.cname),l.sendEncodingParameters.length&&(d.rtcp.ssrc=l.sendEncodingParameters[0].ssrc),l.rtpReceiver.receive(d))},o.prototype.setLocalDescription=function(l){var c=this;if(["offer","answer"].indexOf(l.type)===-1)return Promise.reject(rt("TypeError",'Unsupported type "'+l.type+'"'));if(!r3("setLocalDescription",l.type,c.signalingState)||c._isClosed)return Promise.reject(rt("InvalidStateError","Can not set local "+l.type+" in state "+c.signalingState));var u,d;if(l.type==="offer")u=ne.splitSections(l.sdp),d=u.shift(),u.forEach(function(p,g){var v=ne.parseRtpParameters(p);c.transceivers[g].localCapabilities=v}),c.transceivers.forEach(function(p,g){c._gather(p.mid,g)});else if(l.type==="answer"){u=ne.splitSections(c._remoteDescription.sdp),d=u.shift();var h=ne.matchPrefix(d,"a=ice-lite").length>0;u.forEach(function(p,g){var v=c.transceivers[g],S=v.iceGatherer,m=v.iceTransport,C=v.dtlsTransport,w=v.localCapabilities,R=v.remoteCapabilities,b=ne.isRejected(p)&&ne.matchPrefix(p,"a=bundle-only").length===0;if(!b&&!v.rejected){var P=ne.getIceParameters(p,d),x=ne.getDtlsParameters(p,d);h&&(x.role="server"),(!c.usingBundle||g===0)&&(c._gather(v.mid,g),m.state==="new"&&m.start(S,P,h?"controlling":"controlled"),C.state==="new"&&C.start(x));var F=ll(w,R);c._transceive(v,F.codecs.length>0,!1)}})}return c._localDescription={type:l.type,sdp:l.sdp},l.type==="offer"?c._updateSignalingState("have-local-offer"):c._updateSignalingState("stable"),Promise.resolve()},o.prototype.setRemoteDescription=function(l){var c=this;if(["offer","answer"].indexOf(l.type)===-1)return Promise.reject(rt("TypeError",'Unsupported type "'+l.type+'"'));if(!r3("setRemoteDescription",l.type,c.signalingState)||c._isClosed)return Promise.reject(rt("InvalidStateError","Can not set remote "+l.type+" in state "+c.signalingState));var u={};c.remoteStreams.forEach(function(m){u[m.id]=m});var d=[],h=ne.splitSections(l.sdp),p=h.shift(),g=ne.matchPrefix(p,"a=ice-lite").length>0,v=ne.matchPrefix(p,"a=group:BUNDLE ").length>0;c.usingBundle=v;var S=ne.matchPrefix(p,"a=ice-options:")[0];return S?c.canTrickleIceCandidates=S.substr(14).split(" ").indexOf("trickle")>=0:c.canTrickleIceCandidates=!1,h.forEach(function(m,C){var w=ne.splitLines(m),R=ne.getKind(m),b=ne.isRejected(m)&&ne.matchPrefix(m,"a=bundle-only").length===0,P=w[0].substr(2).split(" ")[2],x=ne.getDirection(m,p),F=ne.parseMsid(m),k=ne.getMid(m)||ne.generateIdentifier();if(b||R==="application"&&(P==="DTLS/SCTP"||P==="UDP/DTLS/SCTP")){c.transceivers[C]={mid:k,kind:R,protocol:P,rejected:!0};return}!b&&c.transceivers[C]&&c.transceivers[C].rejected&&(c.transceivers[C]=c._createTransceiver(R,!0));var E,T,O,z,X,j,U,q,L,_=ne.parseRtpParameters(m),V,Z;b||(V=ne.getIceParameters(m,p),Z=ne.getDtlsParameters(m,p),Z.role="client"),U=ne.parseRtpEncodingParameters(m);var Y=ne.parseRtcpParameters(m),de=ne.matchPrefix(m,"a=end-of-candidates",p).length>0,K=ne.matchPrefix(m,"a=candidate:").map(function(A){return ne.parseCandidate(A)}).filter(function(A){return A.component===1});if((l.type==="offer"||l.type==="answer")&&!b&&v&&C>0&&c.transceivers[C]&&(c._disposeIceAndDtlsTransports(C),c.transceivers[C].iceGatherer=c.transceivers[0].iceGatherer,c.transceivers[C].iceTransport=c.transceivers[0].iceTransport,c.transceivers[C].dtlsTransport=c.transceivers[0].dtlsTransport,c.transceivers[C].rtpSender&&c.transceivers[C].rtpSender.setTransport(c.transceivers[0].dtlsTransport),c.transceivers[C].rtpReceiver&&c.transceivers[C].rtpReceiver.setTransport(c.transceivers[0].dtlsTransport)),l.type==="offer"&&!b){E=c.transceivers[C]||c._createTransceiver(R),E.mid=k,E.iceGatherer||(E.iceGatherer=c._createIceGatherer(C,v)),K.length&&E.iceTransport.state==="new"&&(de&&(!v||C===0)?E.iceTransport.setRemoteCandidates(K):K.forEach(function(A){md(E.iceTransport,A)})),q=e.RTCRtpReceiver.getCapabilities(R),t<15019&&(q.codecs=q.codecs.filter(function(A){return A.name!=="rtx"})),j=E.sendEncodingParameters||[{ssrc:(2*C+2)*1001}];var W=!1;if(x==="sendrecv"||x==="sendonly"){if(W=!E.rtpReceiver,X=E.rtpReceiver||new e.RTCRtpReceiver(E.dtlsTransport,R),W){var J;L=X.track,F&&F.stream==="-"||(F?(u[F.stream]||(u[F.stream]=new e.MediaStream,Object.defineProperty(u[F.stream],"id",{get:function(){return F.stream}})),Object.defineProperty(L,"id",{get:function(){return F.track}}),J=u[F.stream]):(u.default||(u.default=new e.MediaStream),J=u.default)),J&&(i(L,J),E.associatedRemoteMediaStreams.push(J)),d.push([L,X,J])}}else E.rtpReceiver&&E.rtpReceiver.track&&(E.associatedRemoteMediaStreams.forEach(function(A){var H=A.getTracks().find(function(Q){return Q.id===E.rtpReceiver.track.id});H&&s(H,A)}),E.associatedRemoteMediaStreams=[]);E.localCapabilities=q,E.remoteCapabilities=_,E.rtpReceiver=X,E.rtcpParameters=Y,E.sendEncodingParameters=j,E.recvEncodingParameters=U,c._transceive(c.transceivers[C],!1,W)}else if(l.type==="answer"&&!b){E=c.transceivers[C],T=E.iceGatherer,O=E.iceTransport,z=E.dtlsTransport,X=E.rtpReceiver,j=E.sendEncodingParameters,q=E.localCapabilities,c.transceivers[C].recvEncodingParameters=U,c.transceivers[C].remoteCapabilities=_,c.transceivers[C].rtcpParameters=Y,K.length&&O.state==="new"&&((g||de)&&(!v||C===0)?O.setRemoteCandidates(K):K.forEach(function(A){md(E.iceTransport,A)})),(!v||C===0)&&(O.state==="new"&&O.start(T,V,"controlling"),z.state==="new"&&z.start(Z));var oe=ll(E.localCapabilities,E.remoteCapabilities),Re=oe.codecs.filter(function(A){return A.name.toLowerCase()==="rtx"}).length;!Re&&E.sendEncodingParameters[0].rtx&&delete E.sendEncodingParameters[0].rtx,c._transceive(E,x==="sendrecv"||x==="recvonly",x==="sendrecv"||x==="sendonly"),X&&(x==="sendrecv"||x==="sendonly")?(L=X.track,F?(u[F.stream]||(u[F.stream]=new e.MediaStream),i(L,u[F.stream]),d.push([L,X,u[F.stream]])):(u.default||(u.default=new e.MediaStream),i(L,u.default),d.push([L,X,u.default]))):delete E.rtpReceiver}}),c._dtlsRole===void 0&&(c._dtlsRole=l.type==="offer"?"active":"passive"),c._remoteDescription={type:l.type,sdp:l.sdp},l.type==="offer"?c._updateSignalingState("have-remote-offer"):c._updateSignalingState("stable"),Object.keys(u).forEach(function(m){var C=u[m];if(C.getTracks().length){if(c.remoteStreams.indexOf(C)===-1){c.remoteStreams.push(C);var w=new Event("addstream");w.stream=C,e.setTimeout(function(){c._dispatchEvent("addstream",w)})}d.forEach(function(R){var b=R[0],P=R[1];C.id===R[2].id&&n(c,b,P,[C])})}}),d.forEach(function(m){m[2]||n(c,m[0],m[1],[])}),e.setTimeout(function(){c&&c.transceivers&&c.transceivers.forEach(function(m){m.iceTransport&&m.iceTransport.state==="new"&&m.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),m.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},o.prototype.close=function(){this.transceivers.forEach(function(l){l.iceTransport&&l.iceTransport.stop(),l.dtlsTransport&&l.dtlsTransport.stop(),l.rtpSender&&l.rtpSender.stop(),l.rtpReceiver&&l.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},o.prototype._updateSignalingState=function(l){this.signalingState=l;var c=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",c)},o.prototype._maybeFireNegotiationNeeded=function(){var l=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,e.setTimeout(function(){if(l.needNegotiation){l.needNegotiation=!1;var c=new Event("negotiationneeded");l._dispatchEvent("negotiationneeded",c)}},0))},o.prototype._updateIceConnectionState=function(){var l,c={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(d){d.iceTransport&&!d.rejected&&c[d.iceTransport.state]++}),l="new",c.failed>0?l="failed":c.checking>0?l="checking":c.disconnected>0?l="disconnected":c.new>0?l="new":c.connected>0?l="connected":c.completed>0&&(l="completed"),l!==this.iceConnectionState){this.iceConnectionState=l;var u=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",u)}},o.prototype._updateConnectionState=function(){var l,c={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(d){d.iceTransport&&d.dtlsTransport&&!d.rejected&&(c[d.iceTransport.state]++,c[d.dtlsTransport.state]++)}),c.connected+=c.completed,l="new",c.failed>0?l="failed":c.connecting>0?l="connecting":c.disconnected>0?l="disconnected":c.new>0?l="new":c.connected>0&&(l="connected"),l!==this.connectionState){this.connectionState=l;var u=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",u)}},o.prototype.createOffer=function(){var l=this;if(l._isClosed)return Promise.reject(rt("InvalidStateError","Can not call createOffer after close"));var c=l.transceivers.filter(function(g){return g.kind==="audio"}).length,u=l.transceivers.filter(function(g){return g.kind==="video"}).length,d=arguments[0];if(d){if(d.mandatory||d.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");d.offerToReceiveAudio!==void 0&&(d.offerToReceiveAudio===!0?c=1:d.offerToReceiveAudio===!1?c=0:c=d.offerToReceiveAudio),d.offerToReceiveVideo!==void 0&&(d.offerToReceiveVideo===!0?u=1:d.offerToReceiveVideo===!1?u=0:u=d.offerToReceiveVideo)}for(l.transceivers.forEach(function(g){g.kind==="audio"?(c--,c<0&&(g.wantReceive=!1)):g.kind==="video"&&(u--,u<0&&(g.wantReceive=!1))});c>0||u>0;)c>0&&(l._createTransceiver("audio"),c--),u>0&&(l._createTransceiver("video"),u--);var h=ne.writeSessionBoilerplate(l._sdpSessionId,l._sdpSessionVersion++);l.transceivers.forEach(function(g,v){var S=g.track,m=g.kind,C=g.mid||ne.generateIdentifier();g.mid=C,g.iceGatherer||(g.iceGatherer=l._createIceGatherer(v,l.usingBundle));var w=e.RTCRtpSender.getCapabilities(m);t<15019&&(w.codecs=w.codecs.filter(function(b){return b.name!=="rtx"})),w.codecs.forEach(function(b){b.name==="H264"&&b.parameters["level-asymmetry-allowed"]===void 0&&(b.parameters["level-asymmetry-allowed"]="1"),g.remoteCapabilities&&g.remoteCapabilities.codecs&&g.remoteCapabilities.codecs.forEach(function(P){b.name.toLowerCase()===P.name.toLowerCase()&&b.clockRate===P.clockRate&&(b.preferredPayloadType=P.payloadType)})}),w.headerExtensions.forEach(function(b){var P=g.remoteCapabilities&&g.remoteCapabilities.headerExtensions||[];P.forEach(function(x){b.uri===x.uri&&(b.id=x.id)})});var R=g.sendEncodingParameters||[{ssrc:(2*v+1)*1001}];S&&t>=15019&&m==="video"&&!R[0].rtx&&(R[0].rtx={ssrc:R[0].ssrc+1}),g.wantReceive&&(g.rtpReceiver=new e.RTCRtpReceiver(g.dtlsTransport,m)),g.localCapabilities=w,g.sendEncodingParameters=R}),l._config.bundlePolicy!=="max-compat"&&(h+="a=group:BUNDLE "+l.transceivers.map(function(g){return g.mid}).join(" ")+`\r
`),h+=`a=ice-options:trickle\r
`,l.transceivers.forEach(function(g,v){h+=o3(g,g.localCapabilities,"offer",g.stream,l._dtlsRole),h+=`a=rtcp-rsize\r
`,g.iceGatherer&&l.iceGatheringState!=="new"&&(v===0||!l.usingBundle)&&(g.iceGatherer.getLocalCandidates().forEach(function(S){S.component=1,h+="a="+ne.writeCandidate(S)+`\r
`}),g.iceGatherer.state==="completed"&&(h+=`a=end-of-candidates\r
`))});var p=new e.RTCSessionDescription({type:"offer",sdp:h});return Promise.resolve(p)},o.prototype.createAnswer=function(){var l=this;if(l._isClosed)return Promise.reject(rt("InvalidStateError","Can not call createAnswer after close"));if(!(l.signalingState==="have-remote-offer"||l.signalingState==="have-local-pranswer"))return Promise.reject(rt("InvalidStateError","Can not call createAnswer in signalingState "+l.signalingState));var c=ne.writeSessionBoilerplate(l._sdpSessionId,l._sdpSessionVersion++);l.usingBundle&&(c+="a=group:BUNDLE "+l.transceivers.map(function(h){return h.mid}).join(" ")+`\r
`),c+=`a=ice-options:trickle\r
`;var u=ne.getMediaSections(l._remoteDescription.sdp).length;l.transceivers.forEach(function(h,p){if(!(p+1>u)){if(h.rejected){h.kind==="application"?h.protocol==="DTLS/SCTP"?c+=`m=application 0 DTLS/SCTP 5000\r
`:c+="m=application 0 "+h.protocol+` webrtc-datachannel\r
`:h.kind==="audio"?c+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:h.kind==="video"&&(c+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),c+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+h.mid+`\r
`;return}if(h.stream){var g;h.kind==="audio"?g=h.stream.getAudioTracks()[0]:h.kind==="video"&&(g=h.stream.getVideoTracks()[0]),g&&t>=15019&&h.kind==="video"&&!h.sendEncodingParameters[0].rtx&&(h.sendEncodingParameters[0].rtx={ssrc:h.sendEncodingParameters[0].ssrc+1})}var v=ll(h.localCapabilities,h.remoteCapabilities),S=v.codecs.filter(function(m){return m.name.toLowerCase()==="rtx"}).length;!S&&h.sendEncodingParameters[0].rtx&&delete h.sendEncodingParameters[0].rtx,c+=o3(h,v,"answer",h.stream,l._dtlsRole),h.rtcpParameters&&h.rtcpParameters.reducedSize&&(c+=`a=rtcp-rsize\r
`)}});var d=new e.RTCSessionDescription({type:"answer",sdp:c});return Promise.resolve(d)},o.prototype.addIceCandidate=function(l){var c=this,u;return l&&!(l.sdpMLineIndex!==void 0||l.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(d,h){if(c._remoteDescription)if(!l||l.candidate==="")for(var p=0;p<c.transceivers.length&&!(!c.transceivers[p].rejected&&(c.transceivers[p].iceTransport.addRemoteCandidate({}),u=ne.getMediaSections(c._remoteDescription.sdp),u[p]+=`a=end-of-candidates\r
`,c._remoteDescription.sdp=ne.getDescription(c._remoteDescription.sdp)+u.join(""),c.usingBundle));p++);else{var g=l.sdpMLineIndex;if(l.sdpMid){for(var v=0;v<c.transceivers.length;v++)if(c.transceivers[v].mid===l.sdpMid){g=v;break}}var S=c.transceivers[g];if(S){if(S.rejected)return d();var m=Object.keys(l.candidate).length>0?ne.parseCandidate(l.candidate):{};if(m.protocol==="tcp"&&(m.port===0||m.port===9)||m.component&&m.component!==1)return d();if((g===0||g>0&&S.iceTransport!==c.transceivers[0].iceTransport)&&!md(S.iceTransport,m))return h(rt("OperationError","Can not add ICE candidate"));var C=l.candidate.trim();C.indexOf("a=")===0&&(C=C.substr(2)),u=ne.getMediaSections(c._remoteDescription.sdp),u[g]+="a="+(m.type?C:"end-of-candidates")+`\r
`,c._remoteDescription.sdp=ne.getDescription(c._remoteDescription.sdp)+u.join("")}else return h(rt("OperationError","Can not add ICE candidate"))}else return h(rt("InvalidStateError","Can not add ICE candidate without a remote description"));d()})},o.prototype.getStats=function(l){if(l&&l instanceof e.MediaStreamTrack){var c=null;if(this.transceivers.forEach(function(d){d.rtpSender&&d.rtpSender.track===l?c=d.rtpSender:d.rtpReceiver&&d.rtpReceiver.track===l&&(c=d.rtpReceiver)}),!c)throw rt("InvalidAccessError","Invalid selector.");return c.getStats()}var u=[];return this.transceivers.forEach(function(d){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(h){d[h]&&u.push(d[h].getStats())})}),Promise.all(u).then(function(d){var h=new Map;return d.forEach(function(p){p.forEach(function(g){h.set(g.id,g)})}),h})};var r=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];r.forEach(function(l){var c=e[l];if(c&&c.prototype&&c.prototype.getStats){var u=c.prototype.getStats;c.prototype.getStats=function(){return u.apply(this).then(function(d){var h=new Map;return Object.keys(d).forEach(function(p){d[p].type=O4(d[p]),h.set(p,d[p])}),h})}}});var a=["createOffer","createAnswer"];return a.forEach(function(l){var c=o.prototype[l];o.prototype[l]=function(){var u=arguments;return typeof u[0]=="function"||typeof u[1]=="function"?c.apply(this,[arguments[2]]).then(function(d){typeof u[0]=="function"&&u[0].apply(null,[d])},function(d){typeof u[1]=="function"&&u[1].apply(null,[d])}):c.apply(this,arguments)}}),a=["setLocalDescription","setRemoteDescription","addIceCandidate"],a.forEach(function(l){var c=o.prototype[l];o.prototype[l]=function(){var u=arguments;return typeof u[1]=="function"||typeof u[2]=="function"?c.apply(this,arguments).then(function(){typeof u[1]=="function"&&u[1].apply(null)},function(d){typeof u[2]=="function"&&u[2].apply(null,[d])}):c.apply(this,arguments)}}),["getStats"].forEach(function(l){var c=o.prototype[l];o.prototype[l]=function(){var u=arguments;return typeof u[1]=="function"?c.apply(this,arguments).then(function(){typeof u[1]=="function"&&u[1].apply(null)}):c.apply(this,arguments)}}),o};const _4=ka(N4);function eS(e){const t=e&&e.navigator,i=function(n){return{name:{PermissionDeniedError:"NotAllowedError"}[n.name]||n.name,message:n.message,constraint:n.constraint,toString(){return this.name}}},s=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(n){return s(n).catch(o=>Promise.reject(i(o)))}}function tS(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function $h(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(n){return n}),e.RTCSessionDescription||(e.RTCSessionDescription=function(n){return n}),t.version<15025)){const s=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(n){s.set.call(this,n);const o=new Event("enabled");o.enabled=n,this.dispatchEvent(o)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new e.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const i=_4(e,t.version);e.RTCPeerConnection=function(n){return n&&n.iceServers&&(n.iceServers=L4(n.iceServers,t.version),Af("ICE servers after filtering:",n.iceServers)),new i(n)},e.RTCPeerConnection.prototype=i.prototype}function iS(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}const a3=Object.freeze(Object.defineProperty({__proto__:null,shimGetDisplayMedia:tS,shimGetUserMedia:eS,shimPeerConnection:$h,shimReplaceTrack:iS},Symbol.toStringTag,{value:"Module"}));function sS(e,t){const i=e&&e.navigator,s=e&&e.MediaStreamTrack;if(i.getUserMedia=function(n,o,r){Pu("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(n).then(o,r)},!(t.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const n=function(r,a,l){a in r&&!(l in r)&&(r[l]=r[a],delete r[a])},o=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(r){return typeof r=="object"&&typeof r.audio=="object"&&(r=JSON.parse(JSON.stringify(r)),n(r.audio,"autoGainControl","mozAutoGainControl"),n(r.audio,"noiseSuppression","mozNoiseSuppression")),o(r)},s&&s.prototype.getSettings){const r=s.prototype.getSettings;s.prototype.getSettings=function(){const a=r.apply(this,arguments);return n(a,"mozAutoGainControl","autoGainControl"),n(a,"mozNoiseSuppression","noiseSuppression"),a}}if(s&&s.prototype.applyConstraints){const r=s.prototype.applyConstraints;s.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),n(a,"autoGainControl","mozAutoGainControl"),n(a,"noiseSuppression","mozNoiseSuppression")),r.apply(this,[a])}}}}function G4(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(s){if(!(s&&s.video)){const n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return s.video===!0?s.video={mediaSource:t}:s.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(s)})}function nS(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function qh(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const o=e.RTCPeerConnection.prototype[n],r={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=r[n]});const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[o,r,a]=arguments;return s.apply(this,[o||null]).then(l=>{if(t.version<53&&!r)try{l.forEach(c=>{c.type=i[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;l.forEach((u,d)=>{l.set(d,Object.assign({},u,{type:i[u.type]||u.type}))})}return l}).then(r,a)}}function oS(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const n=t.apply(this,[]);return n.forEach(o=>o._pc=this),n});const i=e.RTCPeerConnection.prototype.addTrack;i&&(e.RTCPeerConnection.prototype.addTrack=function(){const n=i.apply(this,arguments);return n._pc=this,n}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function rS(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const s=t.apply(this,[]);return s.forEach(n=>n._pc=this),s}),Bo(e,"track",i=>(i.receiver._pc=i.srcElement,i)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function aS(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(i){Pu("removeStream","removeTrack"),this.getSenders().forEach(s=>{s.track&&i.getTracks().includes(s.track)&&this.removeTrack(s)})})}function lS(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function cS(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const s=arguments[1],n=s&&"sendEncodings"in s;n&&s.sendEncodings.forEach(r=>{if("rid"in r&&!/^[a-z0-9]{0,16}$/i.test(r.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in r&&!(parseFloat(r.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in r&&!(parseFloat(r.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=t.apply(this,arguments);if(n){const{sender:r}=o,a=r.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=s.sendEncodings,r.sendEncodings=s.sendEncodings,this.setParametersPromises.push(r.setParameters(a).then(()=>{delete r.sendEncodings}).catch(()=>{delete r.sendEncodings})))}return o})}function uS(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const s=t.apply(this,arguments);return"encodings"in s||(s.encodings=[].concat(this.sendEncodings||[{}])),s})}function dS(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function hS(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const l3=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:cS,shimCreateAnswer:hS,shimCreateOffer:dS,shimGetDisplayMedia:G4,shimGetParameters:uS,shimGetUserMedia:sS,shimOnTrack:nS,shimPeerConnection:qh,shimRTCDataChannel:lS,shimReceiverGetStats:rS,shimRemoveStream:aS,shimSenderGetStats:oS},Symbol.toStringTag,{value:"Module"}));function pS(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(s){this._localStreams||(this._localStreams=[]),this._localStreams.includes(s)||this._localStreams.push(s),s.getAudioTracks().forEach(n=>t.call(this,n,s)),s.getVideoTracks().forEach(n=>t.call(this,n,s))},e.RTCPeerConnection.prototype.addTrack=function(s,...n){return n&&n.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(i){this._localStreams||(this._localStreams=[]);const s=this._localStreams.indexOf(i);if(s===-1)return;this._localStreams.splice(s,1);const n=i.getTracks();this.getSenders().forEach(o=>{n.includes(o.track)&&this.removeTrack(o)})})}}function fS(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(i){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=i),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(n=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(n))return;this._remoteStreams.push(n);const o=new Event("addstream");o.stream=n,this.dispatchEvent(o)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const s=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(n){n.streams.forEach(o=>{if(s._remoteStreams||(s._remoteStreams=[]),s._remoteStreams.indexOf(o)>=0)return;s._remoteStreams.push(o);const r=new Event("addstream");r.stream=o,s.dispatchEvent(r)})}),t.apply(s,arguments)}}}function gS(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,i=t.createOffer,s=t.createAnswer,n=t.setLocalDescription,o=t.setRemoteDescription,r=t.addIceCandidate;t.createOffer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=i.apply(this,[d]);return u?(h.then(c,u),Promise.resolve()):h},t.createAnswer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=s.apply(this,[d]);return u?(h.then(c,u),Promise.resolve()):h};let a=function(l,c,u){const d=n.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d};t.setLocalDescription=a,a=function(l,c,u){const d=o.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d},t.setRemoteDescription=a,a=function(l,c,u){const d=r.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d},t.addIceCandidate=a}function mS(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const i=t.mediaDevices,s=i.getUserMedia.bind(i);t.mediaDevices.getUserMedia=n=>s(CS(n))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(s,n,o){t.mediaDevices.getUserMedia(s).then(n,o)}).bind(t))}function CS(e){return e&&e.video!==void 0?Object.assign({},e,{video:W2(e.video)}):e}function vS(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(s,n){if(s&&s.iceServers){const o=[];for(let r=0;r<s.iceServers.length;r++){let a=s.iceServers[r];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(Pu("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,o.push(a)):o.push(s.iceServers[r])}s.iceServers=o}return new t(s,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function SS(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function wS(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(s){if(s){typeof s.offerToReceiveAudio<"u"&&(s.offerToReceiveAudio=!!s.offerToReceiveAudio);const n=this.getTransceivers().find(r=>r.receiver.track.kind==="audio");s.offerToReceiveAudio===!1&&n?n.direction==="sendrecv"?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":n.direction==="recvonly"&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):s.offerToReceiveAudio===!0&&!n&&this.addTransceiver("audio"),typeof s.offerToReceiveVideo<"u"&&(s.offerToReceiveVideo=!!s.offerToReceiveVideo);const o=this.getTransceivers().find(r=>r.receiver.track.kind==="video");s.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):s.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video")}return t.apply(this,arguments)}}function yS(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const c3=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:yS,shimCallbacksAPI:gS,shimConstraints:CS,shimCreateOfferLegacy:wS,shimGetUserMedia:mS,shimLocalStreamsAPI:pS,shimRTCIceServerUrls:vS,shimRemoteStreamsAPI:fS,shimTrackEventTransceiver:SS},Symbol.toStringTag,{value:"Module"}));function $l(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(s){if(typeof s=="object"&&s.candidate&&s.candidate.indexOf("a=")===0&&(s=JSON.parse(JSON.stringify(s)),s.candidate=s.candidate.substr(2)),s.candidate&&s.candidate.length){const n=new t(s),o=Kl.parseCandidate(s.candidate),r=Object.assign(n,o);return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(s)},e.RTCIceCandidate.prototype=t.prototype,Bo(e,"icecandidate",i=>(i.candidate&&Object.defineProperty(i,"candidate",{value:new e.RTCIceCandidate(i.candidate),writable:"false"}),i))}function yr(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const i=function(a){if(!a||!a.sdp)return!1;const l=Kl.splitSections(a.sdp);return l.shift(),l.some(c=>{const u=Kl.parseMLine(c);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},s=function(a){const l=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const c=parseInt(l[1],10);return c!==c?-1:c},n=function(a){let l=65536;return t.browser==="firefox"&&(t.version<57?a===-1?l=16384:l=2147483637:t.version<60?l=t.version===57?65535:65536:l=2147483637),l},o=function(a,l){let c=65536;t.browser==="firefox"&&t.version===57&&(c=65535);const u=Kl.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?c=parseInt(u[0].substr(19),10):t.browser==="firefox"&&l!==-1&&(c=2147483637),c},r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const l=s(arguments[0]),c=n(l),u=o(arguments[0],l);let d;c===0&&u===0?d=Number.POSITIVE_INFINITY:c===0||u===0?d=Math.max(c,u):d=Math.min(c,u);const h={};Object.defineProperty(h,"maxMessageSize",{get(){return d}}),this._sctp=h}return r.apply(this,arguments)}}function Rr(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(s,n){const o=s.send;s.send=function(){const a=arguments[0],l=a.length||a.size||a.byteLength;if(s.readyState==="open"&&n.sctp&&l>n.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+n.sctp.maxMessageSize+" bytes)");return o.apply(s,arguments)}}const i=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const n=i.apply(this,arguments);return t(n,this),n},Bo(e,"datachannel",s=>(t(s.channel,s.target),s))}function Yh(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(i){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),i&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=i)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(i=>{const s=t[i];t[i]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=n=>{const o=n.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const r=new Event("connectionstatechange",n);o.dispatchEvent(r)}return n},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function Qh(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(n){if(n&&n.sdp&&n.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=n.sdp.split(`
`).filter(r=>r.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&n instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:n.type,sdp:o}):n.sdp=o}return i.apply(this,arguments)}}function ql(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const i=e.RTCPeerConnection.prototype.addIceCandidate;!i||i.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const H4=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Qh,shimAddIceCandidateNullOrEmpty:ql,shimConnectionState:Yh,shimMaxMessageSize:yr,shimRTCIceCandidate:$l,shimSendThrowTypeError:Rr},Symbol.toStringTag,{value:"Module"}));function V4({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const i=Af,s=A4(e),n={browserDetails:s,commonShim:H4,extractVersion:wr,disableLog:D4,disableWarnings:T4};switch(s.browser){case"chrome":if(!n3||!Kh||!t.shimChrome)return i("Chrome shim is not included in this adapter release."),n;if(s.version===null)return i("Chrome shim can not determine version, not shimming."),n;i("adapter.js shimming chrome."),n.browserShim=n3,ql(e,s),z2(e,s),j2(e),Kh(e,s),U2(e),Q2(e,s),K2(e),$2(e),q2(e),X2(e,s),$l(e),Yh(e),yr(e,s),Rr(e),Qh(e,s);break;case"firefox":if(!l3||!qh||!t.shimFirefox)return i("Firefox shim is not included in this adapter release."),n;i("adapter.js shimming firefox."),n.browserShim=l3,ql(e,s),sS(e,s),qh(e,s),nS(e),aS(e),oS(e),rS(e),lS(e),cS(e),uS(e),dS(e),hS(e),$l(e),Yh(e),yr(e,s),Rr(e);break;case"edge":if(!a3||!$h||!t.shimEdge)return i("MS edge shim is not included in this adapter release."),n;i("adapter.js shimming edge."),n.browserShim=a3,eS(e),tS(e),$h(e,s),iS(e),yr(e,s),Rr(e);break;case"safari":if(!c3||!t.shimSafari)return i("Safari shim is not included in this adapter release."),n;i("adapter.js shimming safari."),n.browserShim=c3,ql(e,s),vS(e),wS(e),gS(e),pS(e),fS(e),SS(e),mS(e),yS(e),$l(e),yr(e,s),Rr(e),Qh(e,s);break;default:i("Unsupported browser!");break}return n}V4({window:typeof window>"u"?void 0:window});var u3=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},W4=function(){function e(t,i){for(var s=0;s<i.length;s++){var n=i[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),Cd,d3;function z4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j4(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function U4(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var hs=y,K4=hs.Component,yt=R4,RS=E4,$4=RS.getDeviceId;RS.getFacingModePattern;var h3=k4,q4=M4,Y4=q4([`!function(o,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.jsQR=e():o.jsQR=e()}("undefined"!=typeof self?self:this,function(){return function(o){function e(t){if(r[t])return r[t].exports;var c=r[t]={i:t,l:!1,exports:{}};return o[t].call(c.exports,c,c.exports,e),c.l=!0,c.exports}var r={};return e.m=o,e.c=r,e.d=function(o,r,t){e.o(o,r)||Object.defineProperty(o,r,{configurable:!1,enumerable:!0,get:t})},e.n=function(o){var r=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(r,"a",r),r},e.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},e.p="",e(e.s=3)}([function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function o(o,e){this.width=e,this.height=o.length/e,this.data=o}return o.createEmpty=function(e,r){return new o(new Uint8ClampedArray(e*r),e)},o.prototype.get=function(o,e){return!(o<0||o>=this.width||e<0||e>=this.height)&&!!this.data[e*this.width+o]},o.prototype.set=function(o,e,r){this.data[e*this.width+o]=r?1:0},o.prototype.setRegion=function(o,e,r,t,c){for(var s=e;s<e+t;s++)for(var a=o;a<o+r;a++)this.set(a,s,!!c)},o}();e.BitMatrix=t},function(o,e,r){"use strict";function t(o,e){return o^e}Object.defineProperty(e,"__esModule",{value:!0});var c=r(2);e.addOrSubtractGF=t;var s=function(){function o(o,e,r){this.primitive=o,this.size=e,this.generatorBase=r,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var t=1,s=0;s<this.size;s++)this.expTable[s]=t,(t*=2)>=this.size&&(t=(t^this.primitive)&this.size-1);for(var s=0;s<this.size-1;s++)this.logTable[this.expTable[s]]=s;this.zero=new c.default(this,Uint8ClampedArray.from([0])),this.one=new c.default(this,Uint8ClampedArray.from([1]))}return o.prototype.multiply=function(o,e){return 0===o||0===e?0:this.expTable[(this.logTable[o]+this.logTable[e])%(this.size-1)]},o.prototype.inverse=function(o){if(0===o)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[o]-1]},o.prototype.buildMonomial=function(o,e){if(o<0)throw new Error("Invalid monomial degree less than 0");if(0===e)return this.zero;var r=new Uint8ClampedArray(o+1);return r[0]=e,new c.default(this,r)},o.prototype.log=function(o){if(0===o)throw new Error("Can't take log(0)");return this.logTable[o]},o.prototype.exp=function(o){return this.expTable[o]},o}();e.default=s},function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=r(1),c=function(){function o(o,e){if(0===e.length)throw new Error("No coefficients.");this.field=o;var r=e.length;if(r>1&&0===e[0]){for(var t=1;t<r&&0===e[t];)t++;if(t===r)this.coefficients=o.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(r-t);for(var c=0;c<this.coefficients.length;c++)this.coefficients[c]=e[t+c]}}else this.coefficients=e}return o.prototype.degree=function(){return this.coefficients.length-1},o.prototype.isZero=function(){return 0===this.coefficients[0]},o.prototype.getCoefficient=function(o){return this.coefficients[this.coefficients.length-1-o]},o.prototype.addOrSubtract=function(e){if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,c=e.coefficients;r.length>c.length&&(n=[c,r],r=n[0],c=n[1]);for(var s=new Uint8ClampedArray(c.length),a=c.length-r.length,d=0;d<a;d++)s[d]=c[d];for(var d=a;d<c.length;d++)s[d]=t.addOrSubtractGF(r[d-a],c[d]);return new o(this.field,s);var n},o.prototype.multiply=function(e){if(0===e)return this.field.zero;if(1===e)return this;for(var r=this.coefficients.length,t=new Uint8ClampedArray(r),c=0;c<r;c++)t[c]=this.field.multiply(this.coefficients[c],e);return new o(this.field,t)},o.prototype.multiplyPoly=function(e){if(this.isZero()||e.isZero())return this.field.zero;for(var r=this.coefficients,c=r.length,s=e.coefficients,a=s.length,d=new Uint8ClampedArray(c+a-1),n=0;n<c;n++)for(var l=r[n],i=0;i<a;i++)d[n+i]=t.addOrSubtractGF(d[n+i],this.field.multiply(l,s[i]));return new o(this.field,d)},o.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Error("Invalid degree less than 0");if(0===r)return this.field.zero;for(var t=this.coefficients.length,c=new Uint8ClampedArray(t+e),s=0;s<t;s++)c[s]=this.field.multiply(this.coefficients[s],r);return new o(this.field,c)},o.prototype.evaluateAt=function(o){var e=0;if(0===o)return this.getCoefficient(0);var r=this.coefficients.length;if(1===o)return this.coefficients.forEach(function(o){e=t.addOrSubtractGF(e,o)}),e;e=this.coefficients[0];for(var c=1;c<r;c++)e=t.addOrSubtractGF(this.field.multiply(o,e),this.coefficients[c]);return e},o}();e.default=c},function(o,e,r){"use strict";function t(o){var e=n.locate(o);if(!e)return null;var r=d.extract(o,e),t=a.decode(r.matrix);return t?{binaryData:t.bytes,data:t.text,chunks:t.chunks,location:{topRightCorner:r.mappingFunction(e.dimension,0),topLeftCorner:r.mappingFunction(0,0),bottomRightCorner:r.mappingFunction(e.dimension,e.dimension),bottomLeftCorner:r.mappingFunction(0,e.dimension),topRightFinderPattern:e.topRight,topLeftFinderPattern:e.topLeft,bottomLeftFinderPattern:e.bottomLeft,bottomRightAlignmentPattern:e.alignmentPattern}}:null}function c(o,e,r,c){void 0===c&&(c={});var a=l;Object.keys(a||{}).forEach(function(o){a[o]=c[o]||a[o]});var d="attemptBoth"===a.inversionAttempts||"invertFirst"===a.inversionAttempts,n="onlyInvert"===a.inversionAttempts||"invertFirst"===a.inversionAttempts,i=s.binarize(o,e,r,d),B=i.binarized,k=i.inverted,u=t(n?k:B);return u||"attemptBoth"!==a.inversionAttempts&&"invertFirst"!==a.inversionAttempts||(u=t(n?B:k)),u}Object.defineProperty(e,"__esModule",{value:!0});var s=r(4),a=r(5),d=r(11),n=r(12),l={inversionAttempts:"attemptBoth"};c.default=c,e.default=c},function(o,e,r){"use strict";function t(o,e,r){return o<e?e:o>r?r:o}function c(o,e,r,c){if(o.length!==e*r*4)throw new Error("Malformed data passed to binarizer.");for(var l=new n(e,r),i=0;i<e;i++)for(var B=0;B<r;B++){var k=o[4*(B*e+i)+0],u=o[4*(B*e+i)+1],C=o[4*(B*e+i)+2];l.set(i,B,.2126*k+.7152*u+.0722*C)}for(var m=Math.ceil(e/a),f=Math.ceil(r/a),w=new n(m,f),P=0;P<f;P++)for(var v=0;v<m;v++){for(var h=0,p=1/0,y=0,B=0;B<a;B++)for(var i=0;i<a;i++){var b=l.get(v*a+i,P*a+B);h+=b,p=Math.min(p,b),y=Math.max(y,b)}var g=h/Math.pow(a,2);if(y-p<=d&&(g=p/2,P>0&&v>0)){var x=(w.get(v,P-1)+2*w.get(v-1,P)+w.get(v-1,P-1))/4;p<x&&(g=x)}w.set(v,P,g)}var M=s.BitMatrix.createEmpty(e,r),L=null;c&&(L=s.BitMatrix.createEmpty(e,r));for(var P=0;P<f;P++)for(var v=0;v<m;v++){for(var N=t(v,2,m-3),I=t(P,2,f-3),h=0,O=-2;O<=2;O++)for(var z=-2;z<=2;z++)h+=w.get(N+O,I+z);for(var S=h/25,O=0;O<a;O++)for(var z=0;z<a;z++){var i=v*a+O,B=P*a+z,X=l.get(i,B);M.set(i,B,X<=S),c&&L.set(i,B,!(X<=S))}}return c?{binarized:M,inverted:L}:{binarized:M}}Object.defineProperty(e,"__esModule",{value:!0});var s=r(0),a=8,d=24,n=function(){function o(o,e){this.width=o,this.data=new Uint8ClampedArray(o*e)}return o.prototype.get=function(o,e){return this.data[e*this.width+o]},o.prototype.set=function(o,e,r){this.data[e*this.width+o]=r},o}();e.binarize=c},function(o,e,r){"use strict";function t(o,e){for(var r=o^e,t=0;r;)t++,r&=r-1;return t}function c(o,e){return e<<1|o}function s(o){var e=17+4*o.versionNumber,r=k.BitMatrix.createEmpty(e,e);r.setRegion(0,0,9,9,!0),r.setRegion(e-8,0,8,9,!0),r.setRegion(0,e-8,9,8,!0);for(var t=0,c=o.alignmentPatternCenters;t<c.length;t++)for(var s=c[t],a=0,d=o.alignmentPatternCenters;a<d.length;a++){var n=d[a];6===s&&6===n||6===s&&n===e-7||s===e-7&&6===n||r.setRegion(s-2,n-2,5,5,!0)}return r.setRegion(6,9,1,e-17,!0),r.setRegion(9,6,e-17,1,!0),o.versionNumber>6&&(r.setRegion(e-11,0,3,6,!0),r.setRegion(0,e-11,6,3,!0)),r}function a(o,e,r){for(var t=w[r.dataMask],a=o.height,d=s(e),n=[],l=0,i=0,B=!0,k=a-1;k>0;k-=2){6===k&&k--;for(var u=0;u<a;u++)for(var C=B?a-1-u:u,m=0;m<2;m++){var f=k-m;if(!d.get(f,C)){i++;var P=o.get(f,C);t({y:C,x:f})&&(P=!P),l=c(P,l),8===i&&(n.push(l),i=0,l=0)}}B=!B}return n}function d(o){var e=o.height,r=Math.floor((e-17)/4);if(r<=6)return m.VERSIONS[r-1];for(var s=0,a=5;a>=0;a--)for(var d=e-9;d>=e-11;d--)s=c(o.get(d,a),s);for(var n=0,d=5;d>=0;d--)for(var a=e-9;a>=e-11;a--)n=c(o.get(d,a),n);for(var l,i=1/0,B=0,k=m.VERSIONS;B<k.length;B++){var u=k[B];if(u.infoBits===s||u.infoBits===n)return u;var C=t(s,u.infoBits);C<i&&(l=u,i=C),C=t(n,u.infoBits),C<i&&(l=u,i=C)}return i<=3?l:void 0}function n(o){for(var e=0,r=0;r<=8;r++)6!==r&&(e=c(o.get(r,8),e));for(var s=7;s>=0;s--)6!==s&&(e=c(o.get(8,s),e));for(var a=o.height,d=0,s=a-1;s>=a-7;s--)d=c(o.get(8,s),d);for(var r=a-8;r<a;r++)d=c(o.get(r,8),d);for(var n=1/0,l=null,i=0,B=f;i<B.length;i++){var k=B[i],u=k.bits,C=k.formatInfo;if(u===e||u===d)return C;var m=t(e,u);m<n&&(l=C,n=m),e!==d&&(m=t(d,u))<n&&(l=C,n=m)}return n<=3?l:null}function l(o,e,r){var t=e.errorCorrectionLevels[r],c=[],s=0;if(t.ecBlocks.forEach(function(o){for(var e=0;e<o.numBlocks;e++)c.push({numDataCodewords:o.dataCodewordsPerBlock,codewords:[]}),s+=o.dataCodewordsPerBlock+t.ecCodewordsPerBlock}),o.length<s)return null;o=o.slice(0,s);for(var a=t.ecBlocks[0].dataCodewordsPerBlock,d=0;d<a;d++)for(var n=0,l=c;n<l.length;n++){var i=l[n];i.codewords.push(o.shift())}if(t.ecBlocks.length>1)for(var B=t.ecBlocks[0].numBlocks,k=t.ecBlocks[1].numBlocks,d=0;d<k;d++)c[B+d].codewords.push(o.shift());for(;o.length>0;)for(var u=0,C=c;u<C.length;u++){var i=C[u];i.codewords.push(o.shift())}return c}function i(o){var e=d(o);if(!e)return null;var r=n(o);if(!r)return null;var t=a(o,e,r),c=l(t,e,r.errorCorrectionLevel);if(!c)return null;for(var s=c.reduce(function(o,e){return o+e.numDataCodewords},0),i=new Uint8ClampedArray(s),B=0,k=0,m=c;k<m.length;k++){var f=m[k],w=C.decode(f.codewords,f.codewords.length-f.numDataCodewords);if(!w)return null;for(var P=0;P<f.numDataCodewords;P++)i[B++]=w[P]}try{return u.decode(i,e.versionNumber)}catch(o){return null}}function B(o){if(null==o)return null;var e=i(o);if(e)return e;for(var r=0;r<o.width;r++)for(var t=r+1;t<o.height;t++)o.get(r,t)!==o.get(t,r)&&(o.set(r,t,!o.get(r,t)),o.set(t,r,!o.get(t,r)));return i(o)}Object.defineProperty(e,"__esModule",{value:!0});var k=r(0),u=r(6),C=r(9),m=r(10),f=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],w=[function(o){return(o.y+o.x)%2==0},function(o){return o.y%2==0},function(o){return o.x%3==0},function(o){return(o.y+o.x)%3==0},function(o){return(Math.floor(o.y/2)+Math.floor(o.x/3))%2==0},function(o){return o.x*o.y%2+o.x*o.y%3==0},function(o){return(o.y*o.x%2+o.y*o.x%3)%2==0},function(o){return((o.y+o.x)%2+o.y*o.x%3)%2==0}];e.decode=B},function(o,e,r){"use strict";function t(o,e){for(var r=[],t="",c=[10,12,14][e],s=o.readBits(c);s>=3;){var a=o.readBits(10);if(a>=1e3)throw new Error("Invalid numeric value above 999");var d=Math.floor(a/100),n=Math.floor(a/10)%10,l=a%10;r.push(48+d,48+n,48+l),t+=d.toString()+n.toString()+l.toString(),s-=3}if(2===s){var a=o.readBits(7);if(a>=100)throw new Error("Invalid numeric value above 99");var d=Math.floor(a/10),n=a%10;r.push(48+d,48+n),t+=d.toString()+n.toString()}else if(1===s){var a=o.readBits(4);if(a>=10)throw new Error("Invalid numeric value above 9");r.push(48+a),t+=a.toString()}return{bytes:r,text:t}}function c(o,e){for(var r=[],t="",c=[9,11,13][e],s=o.readBits(c);s>=2;){var a=o.readBits(11),d=Math.floor(a/45),n=a%45;r.push(k[d].charCodeAt(0),k[n].charCodeAt(0)),t+=k[d]+k[n],s-=2}if(1===s){var d=o.readBits(6);r.push(k[d].charCodeAt(0)),t+=k[d]}return{bytes:r,text:t}}function s(o,e){for(var r=[],t="",c=[8,16,16][e],s=o.readBits(c),a=0;a<s;a++){var d=o.readBits(8);r.push(d)}try{t+=decodeURIComponent(r.map(function(o){return"%"+("0"+o.toString(16)).substr(-2)}).join(""))}catch(o){}return{bytes:r,text:t}}function a(o,e){for(var r=[],t="",c=[8,10,12][e],s=o.readBits(c),a=0;a<s;a++){var d=o.readBits(13),n=Math.floor(d/192)<<8|d%192;n+=n<7936?33088:49472,r.push(n>>8,255&n),t+=String.fromCharCode(i.shiftJISTable[n])}return{bytes:r,text:t}}function d(o,e){for(var r=new l.BitStream(o),d=e<=9?0:e<=26?1:2,i={text:"",bytes:[],chunks:[]};r.available()>=4;){var k=r.readBits(4);if(k===B.Terminator)return i;if(k===B.ECI)0===r.readBits(1)?i.chunks.push({type:n.ECI,assignmentNumber:r.readBits(7)}):0===r.readBits(1)?i.chunks.push({type:n.ECI,assignmentNumber:r.readBits(14)}):0===r.readBits(1)?i.chunks.push({type:n.ECI,assignmentNumber:r.readBits(21)}):i.chunks.push({type:n.ECI,assignmentNumber:-1});else if(k===B.Numeric){var u=t(r,d);i.text+=u.text,(w=i.bytes).push.apply(w,u.bytes),i.chunks.push({type:n.Numeric,text:u.text})}else if(k===B.Alphanumeric){var C=c(r,d);i.text+=C.text,(P=i.bytes).push.apply(P,C.bytes),i.chunks.push({type:n.Alphanumeric,text:C.text})}else if(k===B.Byte){var m=s(r,d);i.text+=m.text,(v=i.bytes).push.apply(v,m.bytes),i.chunks.push({type:n.Byte,bytes:m.bytes,text:m.text})}else if(k===B.Kanji){var f=a(r,d);i.text+=f.text,(h=i.bytes).push.apply(h,f.bytes),i.chunks.push({type:n.Kanji,bytes:f.bytes,text:f.text})}}var w,P,v,h}Object.defineProperty(e,"__esModule",{value:!0});var n,l=r(7),i=r(8);!function(o){o.Numeric="numeric",o.Alphanumeric="alphanumeric",o.Byte="byte",o.Kanji="kanji",o.ECI="eci"}(n=e.Mode||(e.Mode={}));var B;!function(o){o[o.Terminator=0]="Terminator",o[o.Numeric=1]="Numeric",o[o.Alphanumeric=2]="Alphanumeric",o[o.Byte=4]="Byte",o[o.Kanji=8]="Kanji",o[o.ECI=7]="ECI"}(B||(B={}));var k=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];e.decode=d},function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function o(o){this.byteOffset=0,this.bitOffset=0,this.bytes=o}return o.prototype.readBits=function(o){if(o<1||o>32||o>this.available())throw new Error("Cannot read "+o.toString()+" bits");var e=0;if(this.bitOffset>0){var r=8-this.bitOffset,t=o<r?o:r,c=r-t,s=255>>8-t<<c;e=(this.bytes[this.byteOffset]&s)>>c,o-=t,this.bitOffset+=t,8===this.bitOffset&&(this.bitOffset=0,this.byteOffset++)}if(o>0){for(;o>=8;)e=e<<8|255&this.bytes[this.byteOffset],this.byteOffset++,o-=8;if(o>0){var c=8-o,s=255>>c<<c;e=e<<o|(this.bytes[this.byteOffset]&s)>>c,this.bitOffset+=o}}return e},o.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},o}();e.BitStream=t},function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,
36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,
39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,
59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(o,e,r){"use strict";function t(o,e,r,t){e.degree()<r.degree()&&(w=[r,e],e=w[0],r=w[1]);for(var c=e,s=r,a=o.zero,d=o.one;s.degree()>=t/2;){var n=c,l=a;if(c=s,a=d,c.isZero())return null;s=n;for(var i=o.zero,B=c.getCoefficient(c.degree()),k=o.inverse(B);s.degree()>=c.degree()&&!s.isZero();){var u=s.degree()-c.degree(),C=o.multiply(s.getCoefficient(s.degree()),k);i=i.addOrSubtract(o.buildMonomial(u,C)),s=s.addOrSubtract(c.multiplyByMonomial(u,C))}if(d=i.multiplyPoly(a).addOrSubtract(l),s.degree()>=c.degree())return null}var m=d.getCoefficient(0);if(0===m)return null;var f=o.inverse(m);return[d.multiply(f),s.multiply(f)];var w}function c(o,e){var r=e.degree();if(1===r)return[e.getCoefficient(1)];for(var t=new Array(r),c=0,s=1;s<o.size&&c<r;s++)0===e.evaluateAt(s)&&(t[c]=o.inverse(s),c++);return c!==r?null:t}function s(o,e,r){for(var t=r.length,c=new Array(t),s=0;s<t;s++){for(var a=o.inverse(r[s]),n=1,l=0;l<t;l++)s!==l&&(n=o.multiply(n,d.addOrSubtractGF(1,o.multiply(r[l],a))));c[s]=o.multiply(e.evaluateAt(a),o.inverse(n)),0!==o.generatorBase&&(c[s]=o.multiply(c[s],a))}return c}function a(o,e){var r=new Uint8ClampedArray(o.length);r.set(o);for(var a=new d.default(285,256,0),l=new n.default(a,r),i=new Uint8ClampedArray(e),B=!1,k=0;k<e;k++){var u=l.evaluateAt(a.exp(k+a.generatorBase));i[i.length-1-k]=u,0!==u&&(B=!0)}if(!B)return r;var C=new n.default(a,i),m=t(a,a.buildMonomial(e,1),C,e);if(null===m)return null;var f=c(a,m[0]);if(null==f)return null;for(var w=s(a,m[1],f),P=0;P<f.length;P++){var v=r.length-1-a.log(f[P]);if(v<0)return null;r[v]=d.addOrSubtractGF(r[v],w[P])}return r}Object.defineProperty(e,"__esModule",{value:!0});var d=r(1),n=r(2);e.decode=a},function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(o,e,r){"use strict";function t(o,e,r,t){var c=o.x-e.x+r.x-t.x,s=o.y-e.y+r.y-t.y;if(0===c&&0===s)return{a11:e.x-o.x,a12:e.y-o.y,a13:0,a21:r.x-e.x,a22:r.y-e.y,a23:0,a31:o.x,a32:o.y,a33:1};var a=e.x-r.x,d=t.x-r.x,n=e.y-r.y,l=t.y-r.y,i=a*l-d*n,B=(c*l-d*s)/i,k=(a*s-c*n)/i;return{a11:e.x-o.x+B*e.x,a12:e.y-o.y+B*e.y,a13:B,a21:t.x-o.x+k*t.x,a22:t.y-o.y+k*t.y,a23:k,a31:o.x,a32:o.y,a33:1}}function c(o,e,r,c){var s=t(o,e,r,c);return{a11:s.a22*s.a33-s.a23*s.a32,a12:s.a13*s.a32-s.a12*s.a33,a13:s.a12*s.a23-s.a13*s.a22,a21:s.a23*s.a31-s.a21*s.a33,a22:s.a11*s.a33-s.a13*s.a31,a23:s.a13*s.a21-s.a11*s.a23,a31:s.a21*s.a32-s.a22*s.a31,a32:s.a12*s.a31-s.a11*s.a32,a33:s.a11*s.a22-s.a12*s.a21}}function s(o,e){return{a11:o.a11*e.a11+o.a21*e.a12+o.a31*e.a13,a12:o.a12*e.a11+o.a22*e.a12+o.a32*e.a13,a13:o.a13*e.a11+o.a23*e.a12+o.a33*e.a13,a21:o.a11*e.a21+o.a21*e.a22+o.a31*e.a23,a22:o.a12*e.a21+o.a22*e.a22+o.a32*e.a23,a23:o.a13*e.a21+o.a23*e.a22+o.a33*e.a23,a31:o.a11*e.a31+o.a21*e.a32+o.a31*e.a33,a32:o.a12*e.a31+o.a22*e.a32+o.a32*e.a33,a33:o.a13*e.a31+o.a23*e.a32+o.a33*e.a33}}function a(o,e){for(var r=c({x:3.5,y:3.5},{x:e.dimension-3.5,y:3.5},{x:e.dimension-6.5,y:e.dimension-6.5},{x:3.5,y:e.dimension-3.5}),a=t(e.topLeft,e.topRight,e.alignmentPattern,e.bottomLeft),n=s(a,r),l=d.BitMatrix.createEmpty(e.dimension,e.dimension),i=function(o,e){var r=n.a13*o+n.a23*e+n.a33;return{x:(n.a11*o+n.a21*e+n.a31)/r,y:(n.a12*o+n.a22*e+n.a32)/r}},B=0;B<e.dimension;B++)for(var k=0;k<e.dimension;k++){var u=k+.5,C=B+.5,m=i(u,C);l.set(k,B,o.get(Math.floor(m.x),Math.floor(m.y)))}return{matrix:l,mappingFunction:i}}Object.defineProperty(e,"__esModule",{value:!0});var d=r(0);e.extract=a},function(o,e,r){"use strict";function t(o){return o.reduce(function(o,e){return o+e})}function c(o,e,r){var t,c,s,a=C(o,e),d=C(e,r),n=C(o,r);return d>=a&&d>=n?(l=[e,o,r],t=l[0],c=l[1],s=l[2]):n>=d&&n>=a?(i=[o,e,r],t=i[0],c=i[1],s=i[2]):(B=[o,r,e],t=B[0],c=B[1],s=B[2]),(s.x-c.x)*(t.y-c.y)-(s.y-c.y)*(t.x-c.x)<0&&(k=[s,t],t=k[0],s=k[1]),{bottomLeft:t,topLeft:c,topRight:s};var l,i,B,k}function s(o,e,r,c){var s=(t(d(o,r,c,5))/7+t(d(o,e,c,5))/7+t(d(r,o,c,5))/7+t(d(e,o,c,5))/7)/4;if(s<1)throw new Error("Invalid module size");var a=Math.round(C(o,e)/s),n=Math.round(C(o,r)/s),l=Math.floor((a+n)/2)+7;switch(l%4){case 0:l++;break;case 2:l--}return{dimension:l,moduleSize:s}}function a(o,e,r,t){var c,s,a,d,n=[{x:Math.floor(o.x),y:Math.floor(o.y)}],l=Math.abs(e.y-o.y)>Math.abs(e.x-o.x);l?(c=Math.floor(o.y),s=Math.floor(o.x),a=Math.floor(e.y),d=Math.floor(e.x)):(c=Math.floor(o.x),s=Math.floor(o.y),a=Math.floor(e.x),d=Math.floor(e.y));for(var i=Math.abs(a-c),B=Math.abs(d-s),k=Math.floor(-i/2),u=c<a?1:-1,m=s<d?1:-1,f=!0,w=c,P=s;w!==a+u;w+=u){var v=l?P:w,h=l?w:P;if(r.get(v,h)!==f&&(f=!f,n.push({x:v,y:h}),n.length===t+1))break;if((k+=B)>0){if(P===d)break;P+=m,k-=i}}for(var p=[],y=0;y<t;y++)n[y]&&n[y+1]?p.push(C(n[y],n[y+1])):p.push(0);return p}function d(o,e,r,t){var c=e.y-o.y,s=e.x-o.x,d=a(o,e,r,Math.ceil(t/2)),n=a(o,{x:o.x-s,y:o.y-c},r,Math.ceil(t/2)),l=d.shift()+n.shift()-1;return(i=n.concat(l)).concat.apply(i,d);var i}function n(o,e){var r=t(o)/t(e),c=0;return e.forEach(function(e,t){c+=Math.pow(o[t]-e*r,2)}),{averageSize:r,error:c}}function l(o,e,r){try{var t=d(o,{x:-1,y:o.y},r,e.length),c=d(o,{x:o.x,y:-1},r,e.length),s={x:Math.max(0,o.x-o.y)-1,y:Math.max(0,o.y-o.x)-1},a=d(o,s,r,e.length),l={x:Math.min(r.width,o.x+o.y)+1,y:Math.min(r.height,o.y+o.x)+1},i=d(o,l,r,e.length),B=n(t,e),k=n(c,e),u=n(a,e),C=n(i,e),m=Math.sqrt(B.error*B.error+k.error*k.error+u.error*u.error+C.error*C.error),f=(B.averageSize+k.averageSize+u.averageSize+C.averageSize)/4;return m+(Math.pow(B.averageSize-f,2)+Math.pow(k.averageSize-f,2)+Math.pow(u.averageSize-f,2)+Math.pow(C.averageSize-f,2))/f}catch(o){return 1/0}}function i(o){for(var e=[],r=[],a=[],d=[],n=0;n<=o.height;n++)!function(c){for(var s=0,n=!1,l=[0,0,0,0,0],i=-1;i<=o.width;i++)!function(e){var a=o.get(e,c);if(a===n)s++;else{l=[l[1],l[2],l[3],l[4],s],s=1,n=a;var i=t(l)/7,B=Math.abs(l[0]-i)<i&&Math.abs(l[1]-i)<i&&Math.abs(l[2]-3*i)<3*i&&Math.abs(l[3]-i)<i&&Math.abs(l[4]-i)<i&&!a,C=t(l.slice(-3))/3,m=Math.abs(l[2]-C)<C&&Math.abs(l[3]-C)<C&&Math.abs(l[4]-C)<C&&a;if(B){var f=e-l[3]-l[4],w=f-l[2],P={startX:w,endX:f,y:c},v=r.filter(function(o){return w>=o.bottom.startX&&w<=o.bottom.endX||f>=o.bottom.startX&&w<=o.bottom.endX||w<=o.bottom.startX&&f>=o.bottom.endX&&l[2]/(o.bottom.endX-o.bottom.startX)<u&&l[2]/(o.bottom.endX-o.bottom.startX)>k});v.length>0?v[0].bottom=P:r.push({top:P,bottom:P})}if(m){var h=e-l[4],p=h-l[3],P={startX:p,y:c,endX:h},v=d.filter(function(o){return p>=o.bottom.startX&&p<=o.bottom.endX||h>=o.bottom.startX&&p<=o.bottom.endX||p<=o.bottom.startX&&h>=o.bottom.endX&&l[2]/(o.bottom.endX-o.bottom.startX)<u&&l[2]/(o.bottom.endX-o.bottom.startX)>k});v.length>0?v[0].bottom=P:d.push({top:P,bottom:P})}}}(i);e.push.apply(e,r.filter(function(o){return o.bottom.y!==c&&o.bottom.y-o.top.y>=2})),r=r.filter(function(o){return o.bottom.y===c}),a.push.apply(a,d.filter(function(o){return o.bottom.y!==c})),d=d.filter(function(o){return o.bottom.y===c})}(n);e.push.apply(e,r.filter(function(o){return o.bottom.y-o.top.y>=2})),a.push.apply(a,d);var i=e.filter(function(o){return o.bottom.y-o.top.y>=2}).map(function(e){var r=(e.top.startX+e.top.endX+e.bottom.startX+e.bottom.endX)/4,c=(e.top.y+e.bottom.y+1)/2;if(o.get(Math.round(r),Math.round(c))){
var s=[e.top.endX-e.top.startX,e.bottom.endX-e.bottom.startX,e.bottom.y-e.top.y+1],a=t(s)/s.length;return{score:l({x:Math.round(r),y:Math.round(c)},[1,1,3,1,1],o),x:r,y:c,size:a}}}).filter(function(o){return!!o}).sort(function(o,e){return o.score-e.score}).map(function(o,e,r){if(e>B)return null;var t=r.filter(function(o,r){return e!==r}).map(function(e){return{x:e.x,y:e.y,score:e.score+Math.pow(e.size-o.size,2)/o.size,size:e.size}}).sort(function(o,e){return o.score-e.score});if(t.length<2)return null;var c=o.score+t[0].score+t[1].score;return{points:[o].concat(t.slice(0,2)),score:c}}).filter(function(o){return!!o}).sort(function(o,e){return o.score-e.score});if(0===i.length)return null;var m,f,w=c(i[0].points[0],i[0].points[1],i[0].points[2]),P=w.topRight,v=w.topLeft,h=w.bottomLeft;try{L=s(v,P,h,o),m=L.dimension,f=L.moduleSize}catch(o){return null}var p={x:P.x-v.x+h.x,y:P.y-v.y+h.y},y=(C(v,h)+C(v,P))/2/f,b=1-3/y,g={x:v.x+b*(p.x-v.x),y:v.y+b*(p.y-v.y)},x=a.map(function(e){var r=(e.top.startX+e.top.endX+e.bottom.startX+e.bottom.endX)/4,c=(e.top.y+e.bottom.y+1)/2;if(o.get(Math.floor(r),Math.floor(c))){var s=[e.top.endX-e.top.startX,e.bottom.endX-e.bottom.startX,e.bottom.y-e.top.y+1];t(s);return{x:r,y:c,score:l({x:Math.floor(r),y:Math.floor(c)},[1,1,1],o)+C({x:r,y:c},g)}}}).filter(function(o){return!!o}).sort(function(o,e){return o.score-e.score}),M=y>=15&&x.length?x[0]:g;return{alignmentPattern:{x:M.x,y:M.y},bottomLeft:{x:h.x,y:h.y},dimension:m,topLeft:{x:v.x,y:v.y},topRight:{x:P.x,y:P.y}};var L}Object.defineProperty(e,"__esModule",{value:!0});var B=4,k=.5,u=1.5,C=function(o,e){return Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2))};e.locate=i}]).default}),self.addEventListener("message",function(o){var e=jsQR(o.data.data,o.data.width,o.data.height);e?postMessage(e.data):postMessage(null)});`],{type:"application/javascript"}),p3=["delay","legacyMode","facingMode"],Q4=(d3=Cd=function(e){U4(t,e);function t(i){z4(this,t);var s=j4(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));return s.els={},s.state={mirrorVideo:!1},s.initiate=s.initiate.bind(s),s.initiateLegacyMode=s.initiateLegacyMode.bind(s),s.check=s.check.bind(s),s.handleVideo=s.handleVideo.bind(s),s.handleLoadStart=s.handleLoadStart.bind(s),s.handleInputChange=s.handleInputChange.bind(s),s.clearComponent=s.clearComponent.bind(s),s.handleReaderLoad=s.handleReaderLoad.bind(s),s.openImageDialog=s.openImageDialog.bind(s),s.handleWorkerMessage=s.handleWorkerMessage.bind(s),s.setRefFactory=s.setRefFactory.bind(s),s}return W4(t,[{key:"componentDidMount",value:function(){this.worker=new Worker(URL.createObjectURL(Y4)),this.worker.onmessage=this.handleWorkerMessage,this.props.legacyMode?this.initiateLegacyMode():this.initiate()}},{key:"componentWillReceiveProps",value:function(s){var n=h3(this.props,s,p3),o=!0,r=!1,a=void 0;try{for(var l=n[Symbol.iterator](),c;!(o=(c=l.next()).done);o=!0){var u=c.value;if(u=="facingMode"){this.clearComponent(),this.initiate(s);break}else if(u=="delay")this.props.delay==!1&&!s.legacyMode&&(this.timeout=setTimeout(this.check,s.delay)),s.delay==!1&&clearTimeout(this.timeout);else if(u=="legacyMode"){this.props.legacyMode&&!s.legacyMode?(this.clearComponent(),this.initiate(s)):(this.clearComponent(),this.componentDidUpdate=this.initiateLegacyMode);break}}}catch(d){r=!0,a=d}finally{try{!o&&l.return&&l.return()}finally{if(r)throw a}}}},{key:"shouldComponentUpdate",value:function(s,n){if(n!==this.state)return!0;var o=h3(this.props,s,p3);return o.length>0}},{key:"componentWillUnmount",value:function(){this.worker&&(this.worker.terminate(),this.worker=void 0),this.clearComponent()}},{key:"clearComponent",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.stopCamera&&this.stopCamera(),this.reader&&this.reader.removeEventListener("load",this.handleReaderLoad),this.els.img&&this.els.img.removeEventListener("load",this.check)}},{key:"initiate",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,n=s.onError,o=s.facingMode,r=/firefox/i.test(navigator.userAgent),a={};navigator.mediaDevices&&typeof navigator.mediaDevices.getSupportedConstraints=="function"&&(a=navigator.mediaDevices.getSupportedConstraints());var l={};a.facingMode&&(l.facingMode={ideal:o}),a.frameRate&&(l.frameRate={ideal:25,min:10});var c=a.facingMode||r?Promise.resolve(s.constraints||l):$4(o).then(function(u){return Object.assign({},{deviceId:u},s.constraints)});c.then(function(u){return navigator.mediaDevices.getUserMedia({video:u})}).then(this.handleVideo).catch(n)}},{key:"handleVideo",value:function(s){var n=this.els.preview,o=this.props.facingMode;if(!n)return setTimeout(this.handleVideo,200,s);(n||{}).srcObject!==void 0?n.srcObject=s:n.mozSrcObject!==void 0?n.mozSrcObject=s:window.URL.createObjectURL?n.src=window.URL.createObjectURL(s):window.webkitURL?n.src=window.webkitURL.createObjectURL(s):n.src=s,n.playsInline=!0;var r=s.getTracks()[0];this.stopCamera=r.stop.bind(r),n.addEventListener("loadstart",this.handleLoadStart),this.setState({mirrorVideo:o=="user",streamLabel:r.label})}},{key:"handleLoadStart",value:function(){var s=this.props,n=s.delay,o=s.onLoad,r=this.state,a=r.mirrorVideo,l=r.streamLabel,c=this.els.preview;c.play(),typeof o=="function"&&o({mirrorVideo:a,streamLabel:l}),typeof n=="number"&&(this.timeout=setTimeout(this.check,n)),c.removeEventListener("loadstart",this.handleLoadStart)}},{key:"check",value:function(){var s=this.props,n=s.legacyMode,o=s.resolution,r=s.delay,a=this.els,l=a.preview,c=a.canvas,u=a.img,d=Math.floor(n?u.naturalWidth:l.videoWidth),h=Math.floor(n?u.naturalHeight:l.videoHeight),p=0,g=0;if(n){var v=d>h?d:h,S=o/v;h=S*h,d=S*d,c.width=d,c.height=h}else{var m=d<h?d:h,C=o/m;h=C*h,d=C*d,g=(h-o)/2*-1,p=(d-o)/2*-1,c.width=o,c.height=o}var w=l&&l.readyState===l.HAVE_ENOUGH_DATA;if(n||w){var R=c.getContext("2d");R.drawImage(n?u:l,p,g,d,h);var b=R.getImageData(0,0,c.width,c.height);this.worker.postMessage(b)}else this.timeout=setTimeout(this.check,r)}},{key:"handleWorkerMessage",value:function(s){var n=this.props,o=n.onScan,r=n.legacyMode,a=n.delay,l=s.data;o(l||null),!r&&typeof a=="number"&&this.worker&&(this.timeout=setTimeout(this.check,a))}},{key:"initiateLegacyMode",value:function(){this.reader=new FileReader,this.reader.addEventListener("load",this.handleReaderLoad),this.els.img.addEventListener("load",this.check,!1),this.componentDidUpdate=void 0,typeof this.props.onLoad=="function"&&this.props.onLoad()}},{key:"handleInputChange",value:function(s){var n=s.target.files[0];this.reader.readAsDataURL(n)}},{key:"handleReaderLoad",value:function(s){this.els.img.src=s.target.result}},{key:"openImageDialog",value:function(){this.els.input.click()}},{key:"setRefFactory",value:function(s){var n=this;return function(o){n.els[s]=o}}},{key:"render",value:function(){var s=this.props,n=s.style,o=s.className,r=s.onImageLoad,a=s.legacyMode,l=s.showViewFinder;s.facingMode;var c={overflow:"hidden",position:"relative",width:"100%",paddingTop:"100%"},u={display:"none"},d={top:0,left:0,display:"block",position:"absolute",overflow:"hidden",width:"100%",height:"100%"},h=u3({},d,{objectFit:"cover",transform:this.state.mirrorVideo?"scaleX(-1)":void 0}),p=u3({},d,{objectFit:"scale-down"}),g={top:0,left:0,zIndex:1,boxSizing:"border-box",border:"50px solid rgba(0, 0, 0, 0.3)",boxShadow:"inset 0 0 0 5px rgba(255, 0, 0, 0.5)",position:"absolute",width:"100%",height:"100%"};return hs.createElement("section",{className:o,style:n},hs.createElement("section",{style:c},!a&&l?hs.createElement("div",{style:g}):null,a?hs.createElement("input",{style:u,type:"file",accept:"image/*",ref:this.setRefFactory("input"),onChange:this.handleInputChange}):null,a?hs.createElement("img",{style:p,ref:this.setRefFactory("img"),onLoad:r}):hs.createElement("video",{style:h,ref:this.setRefFactory("preview")}),hs.createElement("canvas",{style:u,ref:this.setRefFactory("canvas")})))}}]),t}(K4),Cd.propTypes={onScan:yt.func.isRequired,onError:yt.func.isRequired,onLoad:yt.func,onImageLoad:yt.func,delay:yt.oneOfType([yt.number,yt.bool]),facingMode:yt.oneOf(["user","environment"]),legacyMode:yt.bool,resolution:yt.number,showViewFinder:yt.bool,style:yt.any,className:yt.string,constraints:yt.object},Cd.defaultProps={delay:500,resolution:600,facingMode:"environment",showViewFinder:!0,constraints:null},d3);const X4=ka(Q4),La=(e={})=>{const[t,i]=y.useState(e);return{form:t,changed:({target:n})=>{const{name:o,value:r}=n;i({...t,[o]:r})}}},ue={url:"https://compraygana2024pds.com/api/"};/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ha(){return ha=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},ha.apply(this,arguments)}var ys;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ys||(ys={}));const f3="popstate";function J4(e){e===void 0&&(e={});function t(s,n){let{pathname:o,search:r,hash:a}=s.location;return Xh("",{pathname:o,search:r,hash:a},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function i(s,n){return typeof n=="string"?n:Dc(n)}return e9(t,i,null,e)}function Oe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function bS(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Z4(){return Math.random().toString(36).substr(2,8)}function g3(e,t){return{usr:e.state,key:e.key,idx:t}}function Xh(e,t,i,s){return i===void 0&&(i=null),ha({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?No(t):t,{state:i,key:t&&t.key||s||Z4()})}function Dc(e){let{pathname:t="/",search:i="",hash:s=""}=e;return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function No(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function e9(e,t,i,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:o=!1}=s,r=n.history,a=ys.Pop,l=null,c=u();c==null&&(c=0,r.replaceState(ha({},r.state,{idx:c}),""));function u(){return(r.state||{idx:null}).idx}function d(){a=ys.Pop;let S=u(),m=S==null?null:S-c;c=S,l&&l({action:a,location:v.location,delta:m})}function h(S,m){a=ys.Push;let C=Xh(v.location,S,m);c=u()+1;let w=g3(C,c),R=v.createHref(C);try{r.pushState(w,"",R)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;n.location.assign(R)}o&&l&&l({action:a,location:v.location,delta:1})}function p(S,m){a=ys.Replace;let C=Xh(v.location,S,m);c=u();let w=g3(C,c),R=v.createHref(C);r.replaceState(w,"",R),o&&l&&l({action:a,location:v.location,delta:0})}function g(S){let m=n.location.origin!=="null"?n.location.origin:n.location.href,C=typeof S=="string"?S:Dc(S);return C=C.replace(/ $/,"%20"),Oe(m,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,m)}let v={get action(){return a},get location(){return e(n,r)},listen(S){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(f3,d),l=S,()=>{n.removeEventListener(f3,d),l=null}},createHref(S){return t(n,S)},createURL:g,encodeLocation(S){let m=g(S);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:p,go(S){return r.go(S)}};return v}var m3;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(m3||(m3={}));function t9(e,t,i){return i===void 0&&(i="/"),i9(e,t,i,!1)}function i9(e,t,i,s){let n=typeof t=="string"?No(t):t,o=bo(n.pathname||"/",i);if(o==null)return null;let r=PS(e);s9(r);let a=null;for(let l=0;a==null&&l<r.length;++l){let c=f9(o);a=h9(r[l],c,s)}return a}function PS(e,t,i,s){t===void 0&&(t=[]),i===void 0&&(i=[]),s===void 0&&(s="");let n=(o,r,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:r,route:o};l.relativePath.startsWith("/")&&(Oe(l.relativePath.startsWith(s),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(s.length));let c=Ls([s,l.relativePath]),u=i.concat(l);o.children&&o.children.length>0&&(Oe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),PS(o.children,t,u,c)),!(o.path==null&&!o.index)&&t.push({path:c,score:u9(c,o.index),routesMeta:u})};return e.forEach((o,r)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))n(o,r);else for(let l of xS(o.path))n(o,r,l)}),t}function xS(e){let t=e.split("/");if(t.length===0)return[];let[i,...s]=t,n=i.endsWith("?"),o=i.replace(/\?$/,"");if(s.length===0)return n?[o,""]:[o];let r=xS(s.join("/")),a=[];return a.push(...r.map(l=>l===""?o:[o,l].join("/"))),n&&a.push(...r),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function s9(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:d9(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}const n9=/^:[\w-]+$/,o9=3,r9=2,a9=1,l9=10,c9=-2,C3=e=>e==="*";function u9(e,t){let i=e.split("/"),s=i.length;return i.some(C3)&&(s+=c9),t&&(s+=r9),i.filter(n=>!C3(n)).reduce((n,o)=>n+(n9.test(o)?o9:o===""?a9:l9),s)}function d9(e,t){return e.length===t.length&&e.slice(0,-1).every((s,n)=>s===t[n])?e[e.length-1]-t[t.length-1]:0}function h9(e,t,i){let{routesMeta:s}=e,n={},o="/",r=[];for(let a=0;a<s.length;++a){let l=s[a],c=a===s.length-1,u=o==="/"?t:t.slice(o.length)||"/",d=Tc({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&i&&!s[s.length-1].route.index&&(d=Tc({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(n,d.params),r.push({params:n,pathname:Ls([o,d.pathname]),pathnameBase:v9(Ls([o,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(o=Ls([o,d.pathnameBase]))}return r}function Tc(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,s]=p9(e.path,e.caseSensitive,e.end),n=t.match(i);if(!n)return null;let o=n[0],r=o.replace(/(.)\/+$/,"$1"),a=n.slice(1);return{params:s.reduce((c,u,d)=>{let{paramName:h,isOptional:p}=u;if(h==="*"){let v=a[d]||"";r=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[d];return p&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:r,pattern:e}}function p9(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!0),bS(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(r,a,l)=>(s.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),s]}function f9(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return bS(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function bo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=e.charAt(i);return s&&s!=="/"?null:e.slice(i)||"/"}function g9(e,t){t===void 0&&(t="/");let{pathname:i,search:s="",hash:n=""}=typeof e=="string"?No(e):e;return{pathname:i?i.startsWith("/")?i:m9(i,t):t,search:S9(s),hash:w9(n)}}function m9(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?i.length>1&&i.pop():n!=="."&&i.push(n)}),i.length>1?i.join("/"):"/"}function vd(e,t,i,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function C9(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function If(e,t){let i=C9(e);return t?i.map((s,n)=>n===i.length-1?s.pathname:s.pathnameBase):i.map(s=>s.pathnameBase)}function Lf(e,t,i,s){s===void 0&&(s=!1);let n;typeof e=="string"?n=No(e):(n=ha({},e),Oe(!n.pathname||!n.pathname.includes("?"),vd("?","pathname","search",n)),Oe(!n.pathname||!n.pathname.includes("#"),vd("#","pathname","hash",n)),Oe(!n.search||!n.search.includes("#"),vd("#","search","hash",n)));let o=e===""||n.pathname==="",r=o?"/":n.pathname,a;if(r==null)a=i;else{let d=t.length-1;if(!s&&r.startsWith("..")){let h=r.split("/");for(;h[0]==="..";)h.shift(),d-=1;n.pathname=h.join("/")}a=d>=0?t[d]:"/"}let l=g9(n,a),c=r&&r!=="/"&&r.endsWith("/"),u=(o||r===".")&&i.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ls=e=>e.join("/").replace(/\/\/+/g,"/"),v9=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),S9=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,w9=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function y9(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const FS=["post","put","patch","delete"];new Set(FS);const R9=["get",...FS];new Set(R9);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pa(){return pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},pa.apply(this,arguments)}const xu=y.createContext(null),ES=y.createContext(null),os=y.createContext(null),Fu=y.createContext(null),rs=y.createContext({outlet:null,matches:[],isDataRoute:!1}),kS=y.createContext(null);function b9(e,t){let{relative:i}=t===void 0?{}:t;_o()||Oe(!1);let{basename:s,navigator:n}=y.useContext(os),{hash:o,pathname:r,search:a}=Eu(e,{relative:i}),l=r;return s!=="/"&&(l=r==="/"?s:Ls([s,r])),n.createHref({pathname:l,search:a,hash:o})}function _o(){return y.useContext(Fu)!=null}function Go(){return _o()||Oe(!1),y.useContext(Fu).location}function MS(e){y.useContext(os).static||y.useLayoutEffect(e)}function Of(){let{isDataRoute:e}=y.useContext(rs);return e?_9():P9()}function P9(){_o()||Oe(!1);let e=y.useContext(xu),{basename:t,future:i,navigator:s}=y.useContext(os),{matches:n}=y.useContext(rs),{pathname:o}=Go(),r=JSON.stringify(If(n,i.v7_relativeSplatPath)),a=y.useRef(!1);return MS(()=>{a.current=!0}),y.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){s.go(c);return}let d=Lf(c,JSON.parse(r),o,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Ls([t,d.pathname])),(u.replace?s.replace:s.push)(d,u.state,u)},[t,s,r,o,e])}const x9=y.createContext(null);function F9(e){let t=y.useContext(rs).outlet;return t&&y.createElement(x9.Provider,{value:e},t)}function Eu(e,t){let{relative:i}=t===void 0?{}:t,{future:s}=y.useContext(os),{matches:n}=y.useContext(rs),{pathname:o}=Go(),r=JSON.stringify(If(n,s.v7_relativeSplatPath));return y.useMemo(()=>Lf(e,JSON.parse(r),o,i==="path"),[e,r,o,i])}function E9(e,t){return k9(e,t)}function k9(e,t,i,s){_o()||Oe(!1);let{navigator:n}=y.useContext(os),{matches:o}=y.useContext(rs),r=o[o.length-1],a=r?r.params:{};r&&r.pathname;let l=r?r.pathnameBase:"/";r&&r.route;let c=Go(),u;if(t){var d;let S=typeof t=="string"?No(t):t;l==="/"||(d=S.pathname)!=null&&d.startsWith(l)||Oe(!1),u=S}else u=c;let h=u.pathname||"/",p=h;if(l!=="/"){let S=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(S.length).join("/")}let g=t9(e,{pathname:p}),v=I9(g&&g.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:Ls([l,n.encodeLocation?n.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?l:Ls([l,n.encodeLocation?n.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),o,i,s);return t&&v?y.createElement(Fu.Provider,{value:{location:pa({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ys.Pop}},v):v}function M9(){let e=N9(),t=y9(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),i?y.createElement("pre",{style:n},i):null,null)}const D9=y.createElement(M9,null);class T9 extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error!==void 0?y.createElement(rs.Provider,{value:this.props.routeContext},y.createElement(kS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function A9(e){let{routeContext:t,match:i,children:s}=e,n=y.useContext(xu);return n&&n.static&&n.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=i.route.id),y.createElement(rs.Provider,{value:t},s)}function I9(e,t,i,s){var n;if(t===void 0&&(t=[]),i===void 0&&(i=null),s===void 0&&(s=null),e==null){var o;if(!i)return null;if(i.errors)e=i.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let r=e,a=(n=i)==null?void 0:n.errors;if(a!=null){let u=r.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Oe(!1),r=r.slice(0,Math.min(r.length,u+1))}let l=!1,c=-1;if(i&&s&&s.v7_partialHydration)for(let u=0;u<r.length;u++){let d=r[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:p}=i,g=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){l=!0,c>=0?r=r.slice(0,c+1):r=[r[0]];break}}}return r.reduceRight((u,d,h)=>{let p,g=!1,v=null,S=null;i&&(p=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||D9,l&&(c<0&&h===0?(g=!0,S=null):c===h&&(g=!0,S=d.route.hydrateFallbackElement||null)));let m=t.concat(r.slice(0,h+1)),C=()=>{let w;return p?w=v:g?w=S:d.route.Component?w=y.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=u,y.createElement(A9,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:i!=null},children:w})};return i&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?y.createElement(T9,{location:i.location,revalidation:i.revalidation,component:v,error:p,children:C(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):C()},null)}var DS=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(DS||{}),Ac=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ac||{});function L9(e){let t=y.useContext(xu);return t||Oe(!1),t}function O9(e){let t=y.useContext(ES);return t||Oe(!1),t}function B9(e){let t=y.useContext(rs);return t||Oe(!1),t}function TS(e){let t=B9(),i=t.matches[t.matches.length-1];return i.route.id||Oe(!1),i.route.id}function N9(){var e;let t=y.useContext(kS),i=O9(Ac.UseRouteError),s=TS(Ac.UseRouteError);return t!==void 0?t:(e=i.errors)==null?void 0:e[s]}function _9(){let{router:e}=L9(DS.UseNavigateStable),t=TS(Ac.UseNavigateStable),i=y.useRef(!1);return MS(()=>{i.current=!0}),y.useCallback(function(n,o){o===void 0&&(o={}),i.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,pa({fromRouteId:t},o)))},[e,t])}const v3={};function G9(e,t){v3[t]||(v3[t]=!0,console.warn(t))}const S3=(e,t,i)=>G9(e,"⚠️ React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+i+"."));function H9(e,t){e!=null&&e.v7_startTransition||S3("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&S3("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function Bf(e){let{to:t,replace:i,state:s,relative:n}=e;_o()||Oe(!1);let{future:o,static:r}=y.useContext(os),{matches:a}=y.useContext(rs),{pathname:l}=Go(),c=Of(),u=Lf(t,If(a,o.v7_relativeSplatPath),l,n==="path"),d=JSON.stringify(u);return y.useEffect(()=>c(JSON.parse(d),{replace:i,state:s,relative:n}),[c,d,n,i,s]),null}function Nf(e){return F9(e.context)}function Ve(e){Oe(!1)}function V9(e){let{basename:t="/",children:i=null,location:s,navigationType:n=ys.Pop,navigator:o,static:r=!1,future:a}=e;_o()&&Oe(!1);let l=t.replace(/^\/*/,"/"),c=y.useMemo(()=>({basename:l,navigator:o,static:r,future:pa({v7_relativeSplatPath:!1},a)}),[l,a,o,r]);typeof s=="string"&&(s=No(s));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:g="default"}=s,v=y.useMemo(()=>{let S=bo(u,l);return S==null?null:{location:{pathname:S,search:d,hash:h,state:p,key:g},navigationType:n}},[l,u,d,h,p,g,n]);return v==null?null:y.createElement(os.Provider,{value:c},y.createElement(Fu.Provider,{children:i,value:v}))}function W9(e){let{children:t,location:i}=e;return E9(Jh(t),i)}new Promise(()=>{});function Jh(e,t){t===void 0&&(t=[]);let i=[];return y.Children.forEach(e,(s,n)=>{if(!y.isValidElement(s))return;let o=[...t,n];if(s.type===y.Fragment){i.push.apply(i,Jh(s.props.children,o));return}s.type!==Ve&&Oe(!1),!s.props.index||!s.props.children||Oe(!1);let r={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(r.children=Jh(s.props.children,o)),i.push(r)}),i}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ic(){return Ic=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Ic.apply(this,arguments)}function AS(e,t){if(e==null)return{};var i={},s=Object.keys(e),n,o;for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}function z9(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function j9(e,t){return e.button===0&&(!t||t==="_self")&&!z9(e)}const U9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],K9=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],$9="6";try{window.__reactRouterVersion=$9}catch{}const q9=y.createContext({isTransitioning:!1}),Y9="startTransition",w3=r5[Y9];function Q9(e){let{basename:t,children:i,future:s,window:n}=e,o=y.useRef();o.current==null&&(o.current=J4({window:n,v5Compat:!0}));let r=o.current,[a,l]=y.useState({action:r.action,location:r.location}),{v7_startTransition:c}=s||{},u=y.useCallback(d=>{c&&w3?w3(()=>l(d)):l(d)},[l,c]);return y.useLayoutEffect(()=>r.listen(u),[r,u]),y.useEffect(()=>H9(s),[s]),y.createElement(V9,{basename:t,children:i,location:a.location,navigationType:a.action,navigator:r,future:s})}const X9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",J9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IS=y.forwardRef(function(t,i){let{onClick:s,relative:n,reloadDocument:o,replace:r,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=t,h=AS(t,U9),{basename:p}=y.useContext(os),g,v=!1;if(typeof c=="string"&&J9.test(c)&&(g=c,X9))try{let w=new URL(window.location.href),R=c.startsWith("//")?new URL(w.protocol+c):new URL(c),b=bo(R.pathname,p);R.origin===w.origin&&b!=null?c=b+R.search+R.hash:v=!0}catch{}let S=b9(c,{relative:n}),m=e6(c,{replace:r,state:a,target:l,preventScrollReset:u,relative:n,viewTransition:d});function C(w){s&&s(w),w.defaultPrevented||m(w)}return y.createElement("a",Ic({},h,{href:g||S,onClick:v||o?s:C,ref:i,target:l}))}),Gr=y.forwardRef(function(t,i){let{"aria-current":s="page",caseSensitive:n=!1,className:o="",end:r=!1,style:a,to:l,viewTransition:c,children:u}=t,d=AS(t,K9),h=Eu(l,{relative:d.relative}),p=Go(),g=y.useContext(ES),{navigator:v,basename:S}=y.useContext(os),m=g!=null&&t6(h)&&c===!0,C=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,w=p.pathname,R=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(w=w.toLowerCase(),R=R?R.toLowerCase():null,C=C.toLowerCase()),R&&S&&(R=bo(R,S)||R);const b=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let P=w===C||!r&&w.startsWith(C)&&w.charAt(b)==="/",x=R!=null&&(R===C||!r&&R.startsWith(C)&&R.charAt(C.length)==="/"),F={isActive:P,isPending:x,isTransitioning:m},k=P?s:void 0,E;typeof o=="function"?E=o(F):E=[o,P?"active":null,x?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let T=typeof a=="function"?a(F):a;return y.createElement(IS,Ic({},d,{"aria-current":k,className:E,ref:i,style:T,to:l,viewTransition:c}),typeof u=="function"?u(F):u)});var Zh;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Zh||(Zh={}));var y3;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(y3||(y3={}));function Z9(e){let t=y.useContext(xu);return t||Oe(!1),t}function e6(e,t){let{target:i,replace:s,state:n,preventScrollReset:o,relative:r,viewTransition:a}=t===void 0?{}:t,l=Of(),c=Go(),u=Eu(e,{relative:r});return y.useCallback(d=>{if(j9(d,i)){d.preventDefault();let h=s!==void 0?s:Dc(c)===Dc(u);l(e,{replace:h,state:n,preventScrollReset:o,relative:r,viewTransition:a})}},[c,l,u,s,n,i,e,o,r,a])}function t6(e,t){t===void 0&&(t={});let i=y.useContext(q9);i==null&&Oe(!1);let{basename:s}=Z9(Zh.useViewTransitionState),n=Eu(e,{relative:t.relative});if(!i.isTransitioning)return!1;let o=bo(i.currentLocation.pathname,s)||i.currentLocation.pathname,r=bo(i.nextLocation.pathname,s)||i.nextLocation.pathname;return Tc(n.pathname,r)!=null||Tc(n.pathname,o)!=null}const R3=()=>{La({});const[e,t]=y.useState(),i=r=>{r&&console.info(r)},s=r=>{r&&n(r)},n=async r=>{if(r){let a={qrCode:r};const c=await(await fetch(ue.url+"participante/getParticipante",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}})).json();if(console.log(c),c.status=="success"){if(t(r),!c.part.isFull){let u={email:c.part.email};const h=await(await fetch(ue.url+"participante/getParticipanteByEmail",{method:"POST",body:JSON.stringify(u),headers:{"Content-Type":"application/json"}})).json();h.status=="success"&&(c.part.phone=h.part.phone)}localStorage.setItem("qrItem",r),localStorage.setItem("part",JSON.stringify(c.part)),window.location.href="/Carga"}}},o=localStorage.getItem("qrItem");return o&&n(o),f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"headerQr",children:f.jsx("div",{className:"header__texto",children:f.jsx("h2",{className:"no-margin",children:"Leer código QR"})})}),f.jsx("div",{className:"contenedor",children:f.jsxs("div",{className:"island-info",children:[f.jsx(X4,{delay:300,onError:i,onScan:s,legacyMode:!1,facingMode:"environment"}),f.jsx("p",{className:"no-margin",children:"Escanea el QR"})]})})]})},LS=y.createContext(),i6=({children:e})=>{const[t,i]=y.useState({}),[s,n]=y.useState(!0);y.useEffect(()=>{o()},[]);const o=async()=>{const r=localStorage.getItem("token"),a=localStorage.getItem("user");if(!r||!a)return n(!1),!1;let l={userId:JSON.parse(a).id};const u=await(await fetch(ue.url+"user/getPerfil",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:r}})).json();u.status=="success"?(i(u.user),n(!1)):(localStorage.clear(),i({}),window.location.reload())};return f.jsx(LS.Provider,{value:{auth:t,setAuth:i,loading:s},children:e})},ku=()=>y.useContext(LS),b3=()=>{const{form:e,changed:t}=La({}),[i,s]=y.useState("not_sended"),{setAuth:n}=ku(),o=async r=>{r.preventDefault();let a=e;const c=await(await fetch(ue.url+"user/login",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}})).json();c.status=="success"?(localStorage.setItem("token",c.token),localStorage.setItem("user",JSON.stringify(c.user)),s("login"),n(c.user),window.location.reload()):s("error")};return f.jsxs(f.Fragment,{children:[f.jsx("header",{className:"headerLogin",children:f.jsx("div",{className:"header__texto",children:f.jsx("h2",{className:"no-margin",children:"Login"})})}),f.jsx("div",{className:"contenedor",children:f.jsx("div",{className:"islandLogin",children:f.jsxs("form",{className:"form-login",onSubmit:o,children:[f.jsx("div",{className:"form-group",children:f.jsx("input",{type:"email",name:"email",placeholder:"Email",onChange:t})}),f.jsx("div",{className:"form-group",children:f.jsx("input",{type:"password",name:"password",placeholder:"Contraseña",onChange:t})}),f.jsx("input",{type:"submit",value:"Identificate",className:"btnLogin"})]})})})]})};var Oa={},s6=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},OS={},Kt={};let _f;const n6=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Kt.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Kt.getSymbolTotalCodewords=function(t){return n6[t]};Kt.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};Kt.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');_f=t};Kt.isKanjiModeEnabled=function(){return typeof _f<"u"};Kt.toSJIS=function(t){return _f(t)};var Mu={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+i)}}e.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},e.from=function(s,n){if(e.isValid(s))return s;try{return t(s)}catch{return n}}})(Mu);function BS(){this.buffer=[],this.length=0}BS.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let i=0;i<t;i++)this.putBit((e>>>t-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var o6=BS;function Ba(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}Ba.prototype.set=function(e,t,i,s){const n=e*this.size+t;this.data[n]=i,s&&(this.reservedBit[n]=!0)};Ba.prototype.get=function(e,t){return this.data[e*this.size+t]};Ba.prototype.xor=function(e,t,i){this.data[e*this.size+t]^=i};Ba.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var r6=Ba,NS={};(function(e){const t=Kt.getSymbolSize;e.getRowColCoords=function(s){if(s===1)return[];const n=Math.floor(s/7)+2,o=t(s),r=o===145?26:Math.ceil((o-13)/(2*n-2))*2,a=[o-7];for(let l=1;l<n-1;l++)a[l]=a[l-1]-r;return a.push(6),a.reverse()},e.getPositions=function(s){const n=[],o=e.getRowColCoords(s),r=o.length;for(let a=0;a<r;a++)for(let l=0;l<r;l++)a===0&&l===0||a===0&&l===r-1||a===r-1&&l===0||n.push([o[a],o[l]]);return n}})(NS);var _S={};const a6=Kt.getSymbolSize,P3=7;_S.getPositions=function(t){const i=a6(t);return[[0,0],[i-P3,0],[0,i-P3]]};var GS={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},e.from=function(n){return e.isValid(n)?parseInt(n,10):void 0},e.getPenaltyN1=function(n){const o=n.size;let r=0,a=0,l=0,c=null,u=null;for(let d=0;d<o;d++){a=l=0,c=u=null;for(let h=0;h<o;h++){let p=n.get(d,h);p===c?a++:(a>=5&&(r+=t.N1+(a-5)),c=p,a=1),p=n.get(h,d),p===u?l++:(l>=5&&(r+=t.N1+(l-5)),u=p,l=1)}a>=5&&(r+=t.N1+(a-5)),l>=5&&(r+=t.N1+(l-5))}return r},e.getPenaltyN2=function(n){const o=n.size;let r=0;for(let a=0;a<o-1;a++)for(let l=0;l<o-1;l++){const c=n.get(a,l)+n.get(a,l+1)+n.get(a+1,l)+n.get(a+1,l+1);(c===4||c===0)&&r++}return r*t.N2},e.getPenaltyN3=function(n){const o=n.size;let r=0,a=0,l=0;for(let c=0;c<o;c++){a=l=0;for(let u=0;u<o;u++)a=a<<1&2047|n.get(c,u),u>=10&&(a===1488||a===93)&&r++,l=l<<1&2047|n.get(u,c),u>=10&&(l===1488||l===93)&&r++}return r*t.N3},e.getPenaltyN4=function(n){let o=0;const r=n.data.length;for(let l=0;l<r;l++)o+=n.data[l];return Math.abs(Math.ceil(o*100/r/5)-10)*t.N4};function i(s,n,o){switch(s){case e.Patterns.PATTERN000:return(n+o)%2===0;case e.Patterns.PATTERN001:return n%2===0;case e.Patterns.PATTERN010:return o%3===0;case e.Patterns.PATTERN011:return(n+o)%3===0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(o/3))%2===0;case e.Patterns.PATTERN101:return n*o%2+n*o%3===0;case e.Patterns.PATTERN110:return(n*o%2+n*o%3)%2===0;case e.Patterns.PATTERN111:return(n*o%3+(n+o)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}e.applyMask=function(n,o){const r=o.size;for(let a=0;a<r;a++)for(let l=0;l<r;l++)o.isReserved(l,a)||o.xor(l,a,i(n,l,a))},e.getBestMask=function(n,o){const r=Object.keys(e.Patterns).length;let a=0,l=1/0;for(let c=0;c<r;c++){o(c),e.applyMask(c,n);const u=e.getPenaltyN1(n)+e.getPenaltyN2(n)+e.getPenaltyN3(n)+e.getPenaltyN4(n);e.applyMask(c,n),u<l&&(l=u,a=c)}return a}})(GS);var Du={};const Rs=Mu,cl=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ul=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Du.getBlocksCount=function(t,i){switch(i){case Rs.L:return cl[(t-1)*4+0];case Rs.M:return cl[(t-1)*4+1];case Rs.Q:return cl[(t-1)*4+2];case Rs.H:return cl[(t-1)*4+3];default:return}};Du.getTotalCodewordsCount=function(t,i){switch(i){case Rs.L:return ul[(t-1)*4+0];case Rs.M:return ul[(t-1)*4+1];case Rs.Q:return ul[(t-1)*4+2];case Rs.H:return ul[(t-1)*4+3];default:return}};var HS={},Tu={};const Hr=new Uint8Array(512),Lc=new Uint8Array(256);(function(){let t=1;for(let i=0;i<255;i++)Hr[i]=t,Lc[t]=i,t<<=1,t&256&&(t^=285);for(let i=255;i<512;i++)Hr[i]=Hr[i-255]})();Tu.log=function(t){if(t<1)throw new Error("log("+t+")");return Lc[t]};Tu.exp=function(t){return Hr[t]};Tu.mul=function(t,i){return t===0||i===0?0:Hr[Lc[t]+Lc[i]]};(function(e){const t=Tu;e.mul=function(s,n){const o=new Uint8Array(s.length+n.length-1);for(let r=0;r<s.length;r++)for(let a=0;a<n.length;a++)o[r+a]^=t.mul(s[r],n[a]);return o},e.mod=function(s,n){let o=new Uint8Array(s);for(;o.length-n.length>=0;){const r=o[0];for(let l=0;l<n.length;l++)o[l]^=t.mul(n[l],r);let a=0;for(;a<o.length&&o[a]===0;)a++;o=o.slice(a)}return o},e.generateECPolynomial=function(s){let n=new Uint8Array([1]);for(let o=0;o<s;o++)n=e.mul(n,new Uint8Array([1,t.exp(o)]));return n}})(HS);const VS=HS;function Gf(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}Gf.prototype.initialize=function(t){this.degree=t,this.genPoly=VS.generateECPolynomial(this.degree)};Gf.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(t.length+this.degree);i.set(t);const s=VS.mod(i,this.genPoly),n=this.degree-s.length;if(n>0){const o=new Uint8Array(this.degree);return o.set(s,n),o}return s};var l6=Gf,WS={},Ks={},Hf={};Hf.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var Li={};const zS="[0-9]+",c6="[A-Z $%*+\\-./:]+";let fa="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";fa=fa.replace(/u/g,"\\u");const u6="(?:(?![A-Z0-9 $%*+\\-./:]|"+fa+`)(?:.|[\r
]))+`;Li.KANJI=new RegExp(fa,"g");Li.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Li.BYTE=new RegExp(u6,"g");Li.NUMERIC=new RegExp(zS,"g");Li.ALPHANUMERIC=new RegExp(c6,"g");const d6=new RegExp("^"+fa+"$"),h6=new RegExp("^"+zS+"$"),p6=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Li.testKanji=function(t){return d6.test(t)};Li.testNumeric=function(t){return h6.test(t)};Li.testAlphanumeric=function(t){return p6.test(t)};(function(e){const t=Hf,i=Li;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(o,r){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!t.isValid(r))throw new Error("Invalid version: "+r);return r>=1&&r<10?o.ccBits[0]:r<27?o.ccBits[1]:o.ccBits[2]},e.getBestModeForData=function(o){return i.testNumeric(o)?e.NUMERIC:i.testAlphanumeric(o)?e.ALPHANUMERIC:i.testKanji(o)?e.KANJI:e.BYTE},e.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},e.isValid=function(o){return o&&o.bit&&o.ccBits};function s(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+n)}}e.from=function(o,r){if(e.isValid(o))return o;try{return s(o)}catch{return r}}})(Ks);(function(e){const t=Kt,i=Du,s=Mu,n=Ks,o=Hf,r=7973,a=t.getBCHDigit(r);function l(h,p,g){for(let v=1;v<=40;v++)if(p<=e.getCapacity(v,g,h))return v}function c(h,p){return n.getCharCountIndicator(h,p)+4}function u(h,p){let g=0;return h.forEach(function(v){const S=c(v.mode,p);g+=S+v.getBitsLength()}),g}function d(h,p){for(let g=1;g<=40;g++)if(u(h,g)<=e.getCapacity(g,p,n.MIXED))return g}e.from=function(p,g){return o.isValid(p)?parseInt(p,10):g},e.getCapacity=function(p,g,v){if(!o.isValid(p))throw new Error("Invalid QR Code version");typeof v>"u"&&(v=n.BYTE);const S=t.getSymbolTotalCodewords(p),m=i.getTotalCodewordsCount(p,g),C=(S-m)*8;if(v===n.MIXED)return C;const w=C-c(v,p);switch(v){case n.NUMERIC:return Math.floor(w/10*3);case n.ALPHANUMERIC:return Math.floor(w/11*2);case n.KANJI:return Math.floor(w/13);case n.BYTE:default:return Math.floor(w/8)}},e.getBestVersionForData=function(p,g){let v;const S=s.from(g,s.M);if(Array.isArray(p)){if(p.length>1)return d(p,S);if(p.length===0)return 1;v=p[0]}else v=p;return l(v.mode,v.getLength(),S)},e.getEncodedBits=function(p){if(!o.isValid(p)||p<7)throw new Error("Invalid QR Code version");let g=p<<12;for(;t.getBCHDigit(g)-a>=0;)g^=r<<t.getBCHDigit(g)-a;return p<<12|g}})(WS);var jS={};const ep=Kt,US=1335,f6=21522,x3=ep.getBCHDigit(US);jS.getEncodedBits=function(t,i){const s=t.bit<<3|i;let n=s<<10;for(;ep.getBCHDigit(n)-x3>=0;)n^=US<<ep.getBCHDigit(n)-x3;return(s<<10|n)^f6};var KS={};const g6=Ks;function Po(e){this.mode=g6.NUMERIC,this.data=e.toString()}Po.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Po.prototype.getLength=function(){return this.data.length};Po.prototype.getBitsLength=function(){return Po.getBitsLength(this.data.length)};Po.prototype.write=function(t){let i,s,n;for(i=0;i+3<=this.data.length;i+=3)s=this.data.substr(i,3),n=parseInt(s,10),t.put(n,10);const o=this.data.length-i;o>0&&(s=this.data.substr(i),n=parseInt(s,10),t.put(n,o*3+1))};var m6=Po;const C6=Ks,Sd=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function xo(e){this.mode=C6.ALPHANUMERIC,this.data=e}xo.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};xo.prototype.getLength=function(){return this.data.length};xo.prototype.getBitsLength=function(){return xo.getBitsLength(this.data.length)};xo.prototype.write=function(t){let i;for(i=0;i+2<=this.data.length;i+=2){let s=Sd.indexOf(this.data[i])*45;s+=Sd.indexOf(this.data[i+1]),t.put(s,11)}this.data.length%2&&t.put(Sd.indexOf(this.data[i]),6)};var v6=xo;const S6=Ks;function Fo(e){this.mode=S6.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}Fo.getBitsLength=function(t){return t*8};Fo.prototype.getLength=function(){return this.data.length};Fo.prototype.getBitsLength=function(){return Fo.getBitsLength(this.data.length)};Fo.prototype.write=function(e){for(let t=0,i=this.data.length;t<i;t++)e.put(this.data[t],8)};var w6=Fo;const y6=Ks,R6=Kt;function Eo(e){this.mode=y6.KANJI,this.data=e}Eo.getBitsLength=function(t){return t*13};Eo.prototype.getLength=function(){return this.data.length};Eo.prototype.getBitsLength=function(){return Eo.getBitsLength(this.data.length)};Eo.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let i=R6.toSJIS(this.data[t]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),e.put(i,13)}};var b6=Eo,$S={exports:{}};(function(e){var t={single_source_shortest_paths:function(i,s,n){var o={},r={};r[s]=0;var a=t.PriorityQueue.make();a.push(s,0);for(var l,c,u,d,h,p,g,v,S;!a.empty();){l=a.pop(),c=l.value,d=l.cost,h=i[c]||{};for(u in h)h.hasOwnProperty(u)&&(p=h[u],g=d+p,v=r[u],S=typeof r[u]>"u",(S||v>g)&&(r[u]=g,a.push(u,g),o[u]=c))}if(typeof n<"u"&&typeof r[n]>"u"){var m=["Could not find a path from ",s," to ",n,"."].join("");throw new Error(m)}return o},extract_shortest_path_from_predecessor_list:function(i,s){for(var n=[],o=s;o;)n.push(o),i[o],o=i[o];return n.reverse(),n},find_path:function(i,s,n){var o=t.single_source_shortest_paths(i,s,n);return t.extract_shortest_path_from_predecessor_list(o,n)},PriorityQueue:{make:function(i){var s=t.PriorityQueue,n={},o;i=i||{};for(o in s)s.hasOwnProperty(o)&&(n[o]=s[o]);return n.queue=[],n.sorter=i.sorter||s.default_sorter,n},default_sorter:function(i,s){return i.cost-s.cost},push:function(i,s){var n={value:i,cost:s};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})($S);var P6=$S.exports;(function(e){const t=Ks,i=m6,s=v6,n=w6,o=b6,r=Li,a=Kt,l=P6;function c(m){return unescape(encodeURIComponent(m)).length}function u(m,C,w){const R=[];let b;for(;(b=m.exec(w))!==null;)R.push({data:b[0],index:b.index,mode:C,length:b[0].length});return R}function d(m){const C=u(r.NUMERIC,t.NUMERIC,m),w=u(r.ALPHANUMERIC,t.ALPHANUMERIC,m);let R,b;return a.isKanjiModeEnabled()?(R=u(r.BYTE,t.BYTE,m),b=u(r.KANJI,t.KANJI,m)):(R=u(r.BYTE_KANJI,t.BYTE,m),b=[]),C.concat(w,R,b).sort(function(x,F){return x.index-F.index}).map(function(x){return{data:x.data,mode:x.mode,length:x.length}})}function h(m,C){switch(C){case t.NUMERIC:return i.getBitsLength(m);case t.ALPHANUMERIC:return s.getBitsLength(m);case t.KANJI:return o.getBitsLength(m);case t.BYTE:return n.getBitsLength(m)}}function p(m){return m.reduce(function(C,w){const R=C.length-1>=0?C[C.length-1]:null;return R&&R.mode===w.mode?(C[C.length-1].data+=w.data,C):(C.push(w),C)},[])}function g(m){const C=[];for(let w=0;w<m.length;w++){const R=m[w];switch(R.mode){case t.NUMERIC:C.push([R,{data:R.data,mode:t.ALPHANUMERIC,length:R.length},{data:R.data,mode:t.BYTE,length:R.length}]);break;case t.ALPHANUMERIC:C.push([R,{data:R.data,mode:t.BYTE,length:R.length}]);break;case t.KANJI:C.push([R,{data:R.data,mode:t.BYTE,length:c(R.data)}]);break;case t.BYTE:C.push([{data:R.data,mode:t.BYTE,length:c(R.data)}])}}return C}function v(m,C){const w={},R={start:{}};let b=["start"];for(let P=0;P<m.length;P++){const x=m[P],F=[];for(let k=0;k<x.length;k++){const E=x[k],T=""+P+k;F.push(T),w[T]={node:E,lastCount:0},R[T]={};for(let O=0;O<b.length;O++){const z=b[O];w[z]&&w[z].node.mode===E.mode?(R[z][T]=h(w[z].lastCount+E.length,E.mode)-h(w[z].lastCount,E.mode),w[z].lastCount+=E.length):(w[z]&&(w[z].lastCount=E.length),R[z][T]=h(E.length,E.mode)+4+t.getCharCountIndicator(E.mode,C))}}b=F}for(let P=0;P<b.length;P++)R[b[P]].end=0;return{map:R,table:w}}function S(m,C){let w;const R=t.getBestModeForData(m);if(w=t.from(C,R),w!==t.BYTE&&w.bit<R.bit)throw new Error('"'+m+'" cannot be encoded with mode '+t.toString(w)+`.
 Suggested mode is: `+t.toString(R));switch(w===t.KANJI&&!a.isKanjiModeEnabled()&&(w=t.BYTE),w){case t.NUMERIC:return new i(m);case t.ALPHANUMERIC:return new s(m);case t.KANJI:return new o(m);case t.BYTE:return new n(m)}}e.fromArray=function(C){return C.reduce(function(w,R){return typeof R=="string"?w.push(S(R,null)):R.data&&w.push(S(R.data,R.mode)),w},[])},e.fromString=function(C,w){const R=d(C,a.isKanjiModeEnabled()),b=g(R),P=v(b,w),x=l.find_path(P.map,"start","end"),F=[];for(let k=1;k<x.length-1;k++)F.push(P.table[x[k]].node);return e.fromArray(p(F))},e.rawSplit=function(C){return e.fromArray(d(C,a.isKanjiModeEnabled()))}})(KS);const Au=Kt,wd=Mu,x6=o6,F6=r6,E6=NS,k6=_S,tp=GS,ip=Du,M6=l6,Oc=WS,D6=jS,T6=Ks,yd=KS;function A6(e,t){const i=e.size,s=k6.getPositions(t);for(let n=0;n<s.length;n++){const o=s[n][0],r=s[n][1];for(let a=-1;a<=7;a++)if(!(o+a<=-1||i<=o+a))for(let l=-1;l<=7;l++)r+l<=-1||i<=r+l||(a>=0&&a<=6&&(l===0||l===6)||l>=0&&l<=6&&(a===0||a===6)||a>=2&&a<=4&&l>=2&&l<=4?e.set(o+a,r+l,!0,!0):e.set(o+a,r+l,!1,!0))}}function I6(e){const t=e.size;for(let i=8;i<t-8;i++){const s=i%2===0;e.set(i,6,s,!0),e.set(6,i,s,!0)}}function L6(e,t){const i=E6.getPositions(t);for(let s=0;s<i.length;s++){const n=i[s][0],o=i[s][1];for(let r=-2;r<=2;r++)for(let a=-2;a<=2;a++)r===-2||r===2||a===-2||a===2||r===0&&a===0?e.set(n+r,o+a,!0,!0):e.set(n+r,o+a,!1,!0)}}function O6(e,t){const i=e.size,s=Oc.getEncodedBits(t);let n,o,r;for(let a=0;a<18;a++)n=Math.floor(a/3),o=a%3+i-8-3,r=(s>>a&1)===1,e.set(n,o,r,!0),e.set(o,n,r,!0)}function Rd(e,t,i){const s=e.size,n=D6.getEncodedBits(t,i);let o,r;for(o=0;o<15;o++)r=(n>>o&1)===1,o<6?e.set(o,8,r,!0):o<8?e.set(o+1,8,r,!0):e.set(s-15+o,8,r,!0),o<8?e.set(8,s-o-1,r,!0):o<9?e.set(8,15-o-1+1,r,!0):e.set(8,15-o-1,r,!0);e.set(s-8,8,1,!0)}function B6(e,t){const i=e.size;let s=-1,n=i-1,o=7,r=0;for(let a=i-1;a>0;a-=2)for(a===6&&a--;;){for(let l=0;l<2;l++)if(!e.isReserved(n,a-l)){let c=!1;r<t.length&&(c=(t[r]>>>o&1)===1),e.set(n,a-l,c),o--,o===-1&&(r++,o=7)}if(n+=s,n<0||i<=n){n-=s,s=-s;break}}}function N6(e,t,i){const s=new x6;i.forEach(function(l){s.put(l.mode.bit,4),s.put(l.getLength(),T6.getCharCountIndicator(l.mode,e)),l.write(s)});const n=Au.getSymbolTotalCodewords(e),o=ip.getTotalCodewordsCount(e,t),r=(n-o)*8;for(s.getLengthInBits()+4<=r&&s.put(0,4);s.getLengthInBits()%8!==0;)s.putBit(0);const a=(r-s.getLengthInBits())/8;for(let l=0;l<a;l++)s.put(l%2?17:236,8);return _6(s,e,t)}function _6(e,t,i){const s=Au.getSymbolTotalCodewords(t),n=ip.getTotalCodewordsCount(t,i),o=s-n,r=ip.getBlocksCount(t,i),a=s%r,l=r-a,c=Math.floor(s/r),u=Math.floor(o/r),d=u+1,h=c-u,p=new M6(h);let g=0;const v=new Array(r),S=new Array(r);let m=0;const C=new Uint8Array(e.buffer);for(let x=0;x<r;x++){const F=x<l?u:d;v[x]=C.slice(g,g+F),S[x]=p.encode(v[x]),g+=F,m=Math.max(m,F)}const w=new Uint8Array(s);let R=0,b,P;for(b=0;b<m;b++)for(P=0;P<r;P++)b<v[P].length&&(w[R++]=v[P][b]);for(b=0;b<h;b++)for(P=0;P<r;P++)w[R++]=S[P][b];return w}function G6(e,t,i,s){let n;if(Array.isArray(e))n=yd.fromArray(e);else if(typeof e=="string"){let c=t;if(!c){const u=yd.rawSplit(e);c=Oc.getBestVersionForData(u,i)}n=yd.fromString(e,c||40)}else throw new Error("Invalid data");const o=Oc.getBestVersionForData(n,i);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=o;else if(t<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);const r=N6(t,i,n),a=Au.getSymbolSize(t),l=new F6(a);return A6(l,t),I6(l),L6(l,t),Rd(l,i,0),t>=7&&O6(l,t),B6(l,r),isNaN(s)&&(s=tp.getBestMask(l,Rd.bind(null,l,i))),tp.applyMask(s,l),Rd(l,i,s),{modules:l,version:t,errorCorrectionLevel:i,maskPattern:s,segments:n}}OS.create=function(t,i){if(typeof t>"u"||t==="")throw new Error("No input text");let s=wd.M,n,o;return typeof i<"u"&&(s=wd.from(i.errorCorrectionLevel,wd.M),n=Oc.from(i.version),o=tp.from(i.maskPattern),i.toSJISFunc&&Au.setToSJISFunction(i.toSJISFunc)),G6(t,n,s,o)};var qS={},Vf={};(function(e){function t(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let s=i.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+i);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(o){return[o,o]}))),s.length===6&&s.push("F","F");const n=parseInt(s.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+s.slice(0,6).join("")}}e.getOptions=function(s){s||(s={}),s.color||(s.color={});const n=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,o=s.width&&s.width>=21?s.width:void 0,r=s.scale||4;return{width:o,scale:o?4:r,margin:n,color:{dark:t(s.color.dark||"#000000ff"),light:t(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},e.getScale=function(s,n){return n.width&&n.width>=s+n.margin*2?n.width/(s+n.margin*2):n.scale},e.getImageWidth=function(s,n){const o=e.getScale(s,n);return Math.floor((s+n.margin*2)*o)},e.qrToImageData=function(s,n,o){const r=n.modules.size,a=n.modules.data,l=e.getScale(r,o),c=Math.floor((r+o.margin*2)*l),u=o.margin*l,d=[o.color.light,o.color.dark];for(let h=0;h<c;h++)for(let p=0;p<c;p++){let g=(h*c+p)*4,v=o.color.light;if(h>=u&&p>=u&&h<c-u&&p<c-u){const S=Math.floor((h-u)/l),m=Math.floor((p-u)/l);v=d[a[S*r+m]?1:0]}s[g++]=v.r,s[g++]=v.g,s[g++]=v.b,s[g]=v.a}}})(Vf);(function(e){const t=Vf;function i(n,o,r){n.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=r,o.width=r,o.style.height=r+"px",o.style.width=r+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(o,r,a){let l=a,c=r;typeof l>"u"&&(!r||!r.getContext)&&(l=r,r=void 0),r||(c=s()),l=t.getOptions(l);const u=t.getImageWidth(o.modules.size,l),d=c.getContext("2d"),h=d.createImageData(u,u);return t.qrToImageData(h.data,o,l),i(d,c,u),d.putImageData(h,0,0),c},e.renderToDataURL=function(o,r,a){let l=a;typeof l>"u"&&(!r||!r.getContext)&&(l=r,r=void 0),l||(l={});const c=e.render(o,r,l),u=l.type||"image/png",d=l.rendererOpts||{};return c.toDataURL(u,d.quality)}})(qS);var YS={};const H6=Vf;function F3(e,t){const i=e.a/255,s=t+'="'+e.hex+'"';return i<1?s+" "+t+'-opacity="'+i.toFixed(2).slice(1)+'"':s}function bd(e,t,i){let s=e+t;return typeof i<"u"&&(s+=" "+i),s}function V6(e,t,i){let s="",n=0,o=!1,r=0;for(let a=0;a<e.length;a++){const l=Math.floor(a%t),c=Math.floor(a/t);!l&&!o&&(o=!0),e[a]?(r++,a>0&&l>0&&e[a-1]||(s+=o?bd("M",l+i,.5+c+i):bd("m",n,0),n=0,o=!1),l+1<t&&e[a+1]||(s+=bd("h",r),r=0)):n++}return s}YS.render=function(t,i,s){const n=H6.getOptions(i),o=t.modules.size,r=t.modules.data,a=o+n.margin*2,l=n.color.light.a?"<path "+F3(n.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",c="<path "+F3(n.color.dark,"stroke")+' d="'+V6(r,o,n.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+u+' shape-rendering="crispEdges">'+l+c+`</svg>
`;return typeof s=="function"&&s(null,h),h};const W6=s6,sp=OS,QS=qS,z6=YS;function Wf(e,t,i,s,n){const o=[].slice.call(arguments,1),r=o.length,a=typeof o[r-1]=="function";if(!a&&!W6())throw new Error("Callback required as last argument");if(a){if(r<2)throw new Error("Too few arguments provided");r===2?(n=i,i=t,t=s=void 0):r===3&&(t.getContext&&typeof n>"u"?(n=s,s=void 0):(n=s,s=i,i=t,t=void 0))}else{if(r<1)throw new Error("Too few arguments provided");return r===1?(i=t,t=s=void 0):r===2&&!t.getContext&&(s=i,i=t,t=void 0),new Promise(function(l,c){try{const u=sp.create(i,s);l(e(u,t,s))}catch(u){c(u)}})}try{const l=sp.create(i,s);n(null,e(l,t,s))}catch(l){n(l)}}Oa.create=sp.create;Oa.toCanvas=Wf.bind(null,QS.render);Oa.toDataURL=Wf.bind(null,QS.renderToDataURL);Oa.toString=Wf.bind(null,function(e,t,i){return z6.render(e,i)});const E3=()=>{const{form:e,changed:t}=La({}),[i,s]=y.useState("not_sended"),[n,o]=y.useState(),[r,a]=y.useState([]),[l,c]=y.useState([]),[u,d]=y.useState(),[h,p]=y.useState(),[g,v]=y.useState(!1),[S,m]=y.useState(!1),[C,w]=y.useState(),[R,b]=y.useState(),[P,x]=y.useState("Modulo"),[F,k]=y.useState(!1);y.useEffect(()=>{E(),T(),O()},[]);const E=async()=>{let A=localStorage.getItem("token");const Q=await(await fetch(ue.url+"participante/getParticipantes",{method:"GET",headers:{"Content-Type":"application/json",Authorization:A}})).json();Q.partList.filter(te=>te.isFull==!0),Q.status=="success"&&a(Q.partList)},T=async()=>{let A=localStorage.getItem("idParti");if(A!=null){let H=localStorage.getItem("token"),Q={userId:A};const re=await(await fetch(ue.url+"ticket/getTicketsUI",{method:"POST",body:JSON.stringify(Q),headers:{"Content-Type":"application/json",Authorization:H}})).json();re.status=="success"&&(c(re.tickets),L(re.tickets))}},O=()=>{let A=JSON.parse(localStorage.getItem("user"));x(A.role=="67343d953ac5007d4f7f13fc"?"Admin":"Modulo")},z=async A=>{document.getElementById("btnParti").disabled=!0,A.preventDefault();let H=e;w(H.email),H.userRef=JSON.parse(localStorage.getItem("user")).id;let Q=localStorage.getItem("token");const re=await(await fetch(ue.url+"participante/register",{method:"POST",body:JSON.stringify(H),headers:{"Content-Type":"application/json",Authorization:Q}})).json();re.status=="Success"?(localStorage.setItem("idParti",re.parti._id),E(),s("success")):(document.getElementById("btnParti").disabled=!1,alert("eror al agregar, recargue la pagina"))},X=async A=>{A.preventDefault();let H=e;if(j(H.money),H.dateBuy!=null&&H.money!=null&&H.store!=null&&H.store!="Tienda participante"&&j(H.money)){H.userId=localStorage.getItem("idParti");let Q=U(new Date(H.dateBuy));H.dateBuy=Q;let te=q(Q);H.category=te,H.store=document.getElementById("store").value,parseFloat(e.money);let re=localStorage.getItem("token");(await(await fetch(ue.url+"ticket/add",{method:"POST",body:JSON.stringify(H),headers:{"Content-Type":"application/json",Authorization:re}})).json()).status=="Success"&&(document.getElementById("money").value="",await T()),b("success")}else b("error")},j=A=>A!=null&&A!=""?/^[0-9]+(\.[0-9]+)?$/.test(A.toString()):!1,U=A=>new Date(A.getUTCFullYear(),A.getUTCMonth(),A.getUTCDate()),q=A=>A>=new Date(2024,10,15)&&A<=new Date(2024,10,18)?3:A>=new Date(2024,10,27)&&A<=new Date(2024,10,30)?4:A>=new Date(2024,11,5)&&A<=new Date(2024,11,8)?5:A>=new Date(2024,11,13)&&A<=new Date(2024,11,18)?6:A>=new Date(2024,11,19)&&A<=new Date(2024,11,25)?7:A>=new Date(2025,0,30)&&A<=new Date(2025,1,3)?8:A>=new Date(2024,10,14)&&A<=new Date(2024,10,14)||A>=new Date(2024,10,21)&&A<=new Date(2024,10,21)||A>=new Date(2024,11,12)&&A<=new Date(2024,11,12)||A>=new Date(2024,11,26)&&A<=new Date(2024,11,26)?2:1,L=A=>{if(A.length>0){let H=0,Q=0,te=0,re=0,we=0,me=0,It=0,Si=0,Ys=0;for(let Pe=0;Pe<A.length;Pe++){switch(A[Pe].category){case 1:H+=parseFloat(A[Pe].money.$numberDecimal);break;case 2:Q+=parseFloat(A[Pe].money.$numberDecimal);break;case 3:te+=parseFloat(A[Pe].money.$numberDecimal);break;case 4:re+=parseFloat(A[Pe].money.$numberDecimal);break;case 5:we+=parseFloat(A[Pe].money.$numberDecimal);break;case 6:me+=parseFloat(A[Pe].money.$numberDecimal);break;case 7:It+=parseFloat(A[Pe].money.$numberDecimal);break;case 8:Si+=parseFloat(A[Pe].money.$numberDecimal);break}Ys+=parseFloat(A[Pe].money.$numberDecimal)}document.getElementById("total").innerHTML="Total: $"+parseFloat(Ys).toLocaleString("en-US"),d(Ys);let Lt=parseInt(Q/1e3)*4+parseInt(te/1e3)*10+parseInt(re/1e3)*20+parseInt(we/1e3)*15+parseInt(me/1e3)*15+parseInt(It/1e3)*10+parseInt(Si/1e3)*20;Lt+=parseInt((H+Q%1e3+te%1e3+re%1e3+we%1e3+me%1e3+It%1e3+Si%1e3)/1e3),p(Lt),document.getElementById("totalBoletos").innerHTML="Total de cupones digitales: "+Lt,localStorage.setItem("boletos",Lt)}else localStorage.setItem("boletos",0),document.getElementById("totalBoletos").innerHTML="Total de cupones digitales: 0",p(0),document.getElementById("total").innerHTML="Total: $0.00",d(0)},_=async()=>{if(!localStorage.getItem("QR")){k(!0),document.getElementById("btnQR").disabled=!0;let H="ABCDEFGHIJKLMNOPQRSTUVWXYZ",Q="abcdefghijklmnopqrstvwxyx",te="0123456789",re="";for(let Jo=0;Jo<150;Jo++)switch(Math.floor(Math.random()*3+0)){case 0:re+=H[Math.floor(Math.random()*(H.length-0)+0)];break;case 1:re+=Q[Math.floor(Math.random()*(Q.length-0)+0)];break;case 2:re+=te[Math.floor(Math.random()*(te.length-0)+0)];break;default:alert("Error de SWITCH");break}JSON.parse(localStorage.getItem("part"));let we=localStorage.getItem("token"),Si=(await(await fetch(ue.url+"contador/getContador",{method:"GET",headers:{"Content-Type":"application/json",Authorization:we}})).json()).contador.listCount,Ys=Si+1,Lt=h+Si,Pe={listCount:Lt};const Xo=await(await fetch(ue.url+"contador/update",{method:"POST",body:JSON.stringify(Pe),headers:{"Content-Type":"application/json",Authorization:we}})).json();console.log(Xo.contador),localStorage.setItem("QR",re);let Qs={qrCode:re,money:u,userId:localStorage.getItem("idParti"),ticketsAssigned:h,ticketCount:l.length,ticketStart:Ys,ticketEnd:Lt};await(await fetch(ue.url+"participante/addQr",{method:"POST",body:JSON.stringify(Qs),headers:{"Content-Type":"application/json",Authorization:we}})).json(),V(re)}},V=async A=>{let H=await Oa.toDataURL(A),Q={imgB:H.split(",")[1],userId:localStorage.getItem("idParti")};await(await fetch(ue.url+"participante/sendEmailQr",{method:"POST",body:JSON.stringify(Q),headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}})).json(),v(!0),o(H),k(!1),document.getElementById("btnQR").disabled=!1},Z=()=>{m(!0)},Y=()=>{m(!1)},de=()=>{localStorage.removeItem("idParti"),localStorage.removeItem("boletos"),localStorage.removeItem("QR"),window.location.reload()},K=async()=>{if(localStorage.getItem("QR"))alert("No puedes cancelar registro cuando ya se genero un QR");else{let H={idParti:localStorage.getItem("idParti")};await(await fetch(ue.url+"participante/deleteParti",{method:"DELETE",body:JSON.stringify(H),headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}})).json(),await(await fetch(ue.url+"ticket/deleteMany",{method:"DELETE",body:JSON.stringify(H),headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}})).json(),localStorage.removeItem("idParti"),localStorage.removeItem("boletos"),window.location.reload()}},W=async A=>{let H={_id:A};await(await fetch(ue.url+"ticket/deleteO",{method:"DELETE",body:JSON.stringify(H),headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}})).json(),T()},J=A=>["",1,4,10,20,15,15,10,20][A],oe=A=>{let H=document.getElementById(A).innerHTML;var Q=document.body.innerHTML;document.body.innerHTML=`<html><head><title></title></head><body> <center>${H} </center></body>`,window.print(),document.body.innerHTML=Q,localStorage.removeItem("idParti"),localStorage.removeItem("boletos"),localStorage.removeItem("QR"),window.location.reload()},Re=async A=>{if(prompt("Clave")=="67361be6eae6c4d5810d54fb"){let Q={idParti:A};console.log(A),await(await fetch(ue.url+"participante/deleteParti",{method:"DELETE",body:JSON.stringify(Q),headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}})).json(),window.location.reload()}else window.location.reload()};return f.jsxs(f.Fragment,{children:[f.jsx("header",{className:"headerTickets",children:f.jsx("div",{className:"header__texto"})}),f.jsxs("div",{className:"contenedor_R",children:[i!="success"&&f.jsx("div",{className:"islandTicket",children:f.jsxs("form",{className:"form-login",onSubmit:z,children:[f.jsx("div",{className:"form-group",children:f.jsx("input",{type:"email",name:"email",placeholder:"Correo electronico de registro",onChange:t})}),f.jsx("input",{type:"submit",value:"Agregar",className:"btnTicket",id:"btnParti"})]})}),i=="success"&&f.jsxs("div",{className:"register__section",children:[f.jsxs("div",{className:"islandTicket",children:[f.jsx("div",{className:"headerIsland",children:f.jsx("button",{className:"btnNewTicket",onClick:Z,children:"Nuevo"})}),S==!0&&f.jsx("div",{className:"subheaderIsland",children:f.jsxs("div",{className:"isNewLodQ",children:[f.jsx("p",{children:"¿Realmente deseas agregar uno nuevo?"}),f.jsxs("div",{className:"buttonIsNewLodQ",children:[f.jsx("button",{className:"btnYes",onClick:de,children:"SI"}),f.jsx("button",{className:"btnNo",onClick:Y,children:"NO"})]})]})}),f.jsxs("form",{className:"form-login",onSubmit:X,children:[f.jsxs("div",{className:"form-login-inputs",children:[f.jsx("div",{className:"form-group",children:f.jsx("input",{type:"tel",name:"money",placeholder:"Monto del ticket",maxLength:"10",onChange:t,id:"money"})}),f.jsx("div",{className:"form-group",children:f.jsx("input",{type:"date",name:"dateBuy",onChange:t})})]}),f.jsxs("div",{className:"form-login-buttons",children:[f.jsx("div",{className:"form-group",children:f.jsxs("select",{name:"store",id:"store",onChange:t,children:[f.jsx("option",{defaultValue:"-1",children:"Tienda participante"}),f.jsx("option",{value:"locales",children:"Locales otros"}),f.jsx("option",{value:"islas",children:"Islas otros"}),f.jsx("option",{value:"3 hermanos",children:"3 hermanos"}),f.jsx("option",{value:"+más SNACKS",children:"+más SNACKS"}),f.jsx("option",{value:"AEIOU",children:"AEIOU"}),f.jsx("option",{value:"Aeromexico",children:"Aeromexico"}),f.jsx("option",{value:"Agálea",children:"Agálea"}),f.jsx("option",{value:"Albarran",children:"Albarran"}),f.jsx("option",{value:"Aldo COnti",children:"Aldo Conti"}),f.jsx("option",{value:"Alma de Mar",children:"Alma de Mar"}),f.jsx("option",{value:"Alrid",children:"Alrid"}),f.jsx("option",{value:"ALZADA STREET WEAR",children:"ALZADA STREET WEAR"}),f.jsx("option",{value:"Anti Fashion",children:"Anti Fashion"}),f.jsx("option",{value:"ARIAT",children:"ARIAT"}),f.jsx("option",{value:"Arnoldi",children:"Arnoldi"}),f.jsx("option",{value:"Asahi Sushi",children:"Asahi Sushi"}),f.jsx("option",{value:"AT&T",children:"AT&T"}),f.jsx("option",{value:"AUTOFIN",children:"AUTOFIN"}),f.jsx("option",{value:"AVO Beauty",children:"AVO Beauty"}),f.jsx("option",{value:"Bambola",children:"Bambola"}),f.jsx("option",{value:"Bambola",children:"Bambola"}),f.jsx("option",{value:"Banca Mifel",children:"Banca Mifel"}),f.jsx("option",{value:"Banzo HSBC",children:"Banco HSBC"}),f.jsx("option",{value:"Barreto",children:"Barreto"}),f.jsx("option",{value:"Base World Sports Club",children:"Base World Sports Club"}),f.jsx("option",{value:"BBVA",children:"BBVA"}),f.jsx("option",{value:"BELLARDINA",children:"BELLARDINA"}),f.jsx("option",{value:"BioMaussan",children:"BioMaussan"}),f.jsx("option",{value:"Black Mirror",children:"Black Mirror"}),f.jsx("option",{value:"Black Velvet",children:"Black Velvet"}),f.jsx("option",{value:"Bobois",children:"Bobois"}),f.jsx("option",{value:"Bobois Outlet",children:"Bobois Outlet"}),f.jsx("option",{value:"Boca 21",children:"Boca 21"}),f.jsx("option",{value:"Botas Cuadra",children:"Botas Cuadra"}),f.jsx("option",{value:"Buonissimo",children:"Buonissimo"}),f.jsx("option",{value:"Buonissimo Trattoria y Gelato",children:"Buonissimo Trattoria y Gelato"}),f.jsx("option",{value:"Burger King",children:"Burger King"}),f.jsx("option",{value:"C&A",children:"C&A"}),f.jsx("option",{value:"CACTUS ROPES MEXICO",children:"CACTUS ROPES MEXICO"}),f.jsx("option",{value:"Café Moka",children:"Café Moka"}),f.jsx("option",{value:"Caja Libertad",children:"Caja Libertad"}),f.jsx("option",{value:"Calzzapato",children:"Calzzapato"}),f.jsx("option",{value:"Cambios Internacionales",children:"Cambios Internacionales"}),f.jsx("option",{value:"Carls Junior",children:"Carls Junior"}),f.jsx("option",{value:"Carnitas Modelo",children:"Carnitas Modelo"}),f.jsx("option",{value:"Casa Mariposa",children:"Casa Mariposa"}),f.jsx("option",{value:"Casino E- motion",children:"Casino E- motion"}),f.jsx("option",{value:"Casta",children:"Casta"}),f.jsx("option",{value:"Celular Factory",children:"Celular Factory"}),f.jsx("option",{value:"Centro Cambiario",children:"Centro Cambiario"}),f.jsx("option",{value:"CHAI",children:"CHAI"}),f.jsx("option",{value:"Charly",children:"Charly"}),f.jsx("option",{value:"Charolo",children:"Charolo"}),f.jsx("option",{value:"Chili's",children:"Chili's"}),f.jsx("option",{value:"CHINGU (ASIAN STREET FOOD)",children:"CHINGU (ASIAN STREET FOOD)"}),f.jsx("option",{value:"Chivas",children:"Chivas"}),f.jsx("option",{value:"CI Banco",children:"CI Banco"}),f.jsx("option",{value:"Cientos Poet",children:"Cintos Poet"}),f.jsx("option",{value:"CONORDEN",children:"CONORDEN"}),f.jsx("option",{value:"Copiroyal",children:"Copiroyal"}),f.jsx("option",{value:"Cuarto de Kilo",children:"Cuarto de Kilo"}),f.jsx("option",{value:"Dairy Quen",children:"Dairy Quen"}),f.jsx("option",{value:"Danny-Yo",children:"Danny-Yo"}),f.jsx("option",{value:"Danny-Yo",children:"Danny-Yo"}),f.jsx("option",{value:"De la Mora Salón and Nails",children:"De la Mora Salón and Nails"}),f.jsx("option",{value:"Del Sol Pub",children:"Del Sol Pub"}),f.jsx("option",{value:"Dermavie",children:"Dermavie"}),f.jsx("option",{value:"Dione",children:"Dione"}),f.jsx("option",{value:"Do&Be",children:"Do&Be"}),f.jsx("option",{value:"Dolares VIP",children:"Dolares VIP"}),f.jsx("option",{value:"Dolphy",children:"Dolphy"}),f.jsx("option",{value:"Drim sleep science",children:"Drim sleep science"}),f.jsx("option",{value:"El Charro",children:"El Charro"}),f.jsx("option",{value:"EL OCULISTA",children:"EL OCULISTA"}),f.jsx("option",{value:"El Rincón del Beauty",children:"El Rincón del Beauty"}),f.jsx("option",{value:"El Saloncito",children:"El Saloncito"}),f.jsx("option",{value:"Entorno Comunicación",children:"Entorno Comunicación"}),f.jsx("option",{value:"ESTAMBUL",children:"ESTAMBUL"}),f.jsx("option",{value:"Estética Alicia",children:"Estética Alicia"}),f.jsx("option",{value:"Estética Fela",children:"Estética Fela"}),f.jsx("option",{value:"Farmacias Benavides",children:"Farmacias Benavides"}),f.jsx("option",{value:"Farmacias Guadalajara",children:"Farmacias Guadalajara"}),f.jsx("option",{value:"Farmacias Similares",children:"Farmacias Similares"}),f.jsx("option",{value:"Feet Center Salud y Belleza para sus Pies",children:"Feet Center Salud y Belleza para sus Pies"}),f.jsx("option",{value:"Fiesta",children:"Fiesta"}),f.jsx("option",{value:"FILATI ESTAMBRES",children:"FILATI ESTAMBRES"}),f.jsx("option",{value:"Financiera Independencia",children:"Financiera Independencia"}),f.jsx("option",{value:"FIX & REFIT",children:"FIX & REFIT"}),f.jsx("option",{value:"FLEXI",children:"FLEXI"}),f.jsx("option",{value:"FLEXY OUTLET",children:"FLEXY OUTLET"}),f.jsx("option",{value:"Forzza Imbatible",children:"Forzza Imbatible"}),f.jsx("option",{value:"Frequent Flyer",children:"Frequent Flyer"}),f.jsx("option",{value:"Fresh Salads",children:"Fresh Salads"}),f.jsx("option",{value:"Full Sand",children:"Full Sand"}),f.jsx("option",{value:"G&K",children:"G&K"}),f.jsx("option",{value:"Gamers",children:"Gamers"}),f.jsx("option",{value:"Gaudí",children:"Gaudí"}),f.jsx("option",{value:"Gelden",children:"Gelden"}),f.jsx("option",{value:"GLANZ",children:"GLANZ"}),f.jsx("option",{value:"GNC",children:"GNC"}),f.jsx("option",{value:"GOC MAKE UP",children:"GOC MAKE UP"}),f.jsx("option",{value:"Helados Dolphy",children:"Helados Dolphy"}),f.jsx("option",{value:"Hogar China",children:"Hogar China"}),f.jsx("option",{value:"Ibarra & Tiro y campo",children:"Ibarra & Tiro y campo"}),f.jsx("option",{value:"IMEX TRAVEL",children:"IMEX TRAVEL"}),f.jsx("option",{value:"Infankids",children:"Infankids"}),f.jsx("option",{value:"Informador",children:"Informador"}),f.jsx("option",{value:"Innvictus",children:"Innvictus"}),f.jsx("option",{value:"Jeans Blue Colash",children:"Jeans Blue Colash"}),f.jsx("option",{value:"Joyería Bernal",children:"Joyería Bernal"}),f.jsx("option",{value:"JOYERÍA DANALBA",children:"JOYERÍA DANALBA"}),f.jsx("option",{value:"Joyería David",children:"Joyería David"}),f.jsx("option",{value:"Joyería Nany's",children:"Joyería Nany's"}),f.jsx("option",{value:"Joyería Oscar",children:"Joyería Oscar"}),f.jsx("option",{value:"Julio",children:"Julio"}),f.jsx("option",{value:"Krispy Kreame",children:"Krispy Kreame"}),f.jsx("option",{value:"La Bella Pandita",children:"La Bella Pandita"}),f.jsx("option",{value:"La Chispa",children:"La Chispa"}),f.jsx("option",{value:"La Flor de Cordoba",children:"La Flor de Cordoba"}),f.jsx("option",{value:"LA MICH",children:"LA MICH"}),f.jsx("option",{value:"La michoacana",children:"La michoacana"}),f.jsx("option",{value:"La Michoacana",children:"La Michoacana"}),f.jsx("option",{value:"La panza es primero",children:"La panza es primero"}),f.jsx("option",{value:"La Playita",children:"La Playita"}),f.jsx("option",{value:"Laila Intima",children:"Laila Intima"}),f.jsx("option",{value:"LAS QUEKAS",children:"LAS QUEKAS"}),f.jsx("option",{value:"Laura Sarelli",children:"Laura Sarelli"}),f.jsx("option",{value:"LÍA",children:"LÍA"}),f.jsx("option",{value:"Librerías Gonvill",children:"Librerías Gonvill"}),f.jsx("option",{value:"LIz Minelli",children:"Liz Minelli"}),f.jsx("option",{value:"LOB",children:"LOB"}),f.jsx("option",{value:"LOB Caballero",children:"LOB Caballero"}),f.jsx("option",{value:"LOB FootWear",children:"LOB FootWear"}),f.jsx("option",{value:"Lobo Solo",children:"Lobo Solo"}),f.jsx("option",{value:"LOGAN STORE",children:"LOGAN STORE"}),f.jsx("option",{value:"Macropay",children:"Macropay"}),f.jsx("option",{value:"Manguy Regalos",children:"Manguy Regalos"}),f.jsx("option",{value:"ManPau",children:"ManPau"}),f.jsx("option",{value:"Marco Viali",children:"Marco Viali"}),f.jsx("option",{value:"Martí",children:"Martí"}),f.jsx("option",{value:"MAS VISION",children:"MAS VISION"}),f.jsx("option",{value:"Max Store",children:"Max Store"}),f.jsx("option",{value:"MEN'S FACTORY",children:"MEN'S FACTORY"}),f.jsx("option",{value:"MERAKI",children:"MERAKI"}),f.jsx("option",{value:"Michel Domit",children:"Michel Domit"}),f.jsx("option",{value:"Michelle",children:"Michelle"}),f.jsx("option",{value:"Mobo",children:"Mobo"}),f.jsx("option",{value:"Moda Colombiana",children:"Moda Colombiana"}),f.jsx("option",{value:"MOTORNATION AUTO",children:"MOTORNATION AUTO"}),f.jsx("option",{value:"Movistar",children:"Movistar"}),f.jsx("option",{value:"Mr.CD",children:"Mr.CD"}),f.jsx("option",{value:"Mr.Elote",children:"Mr.Elote"}),f.jsx("option",{value:"MUMUSO",children:"MUMUSO"}),f.jsx("option",{value:"Mundara",children:"Mundara"}),f.jsx("option",{value:"Mundo de la Faja",children:"Mundo de la Faja"}),f.jsx("option",{value:"Musa Nails Studio",children:"Musa Nails Studio"}),f.jsx("option",{value:"MYHOUSE",children:"MYHOUSE"}),f.jsx("option",{value:"ESTAMBUL",children:"Nevería Snöör"}),f.jsx("option",{value:"New Era",children:"New Era"}),f.jsx("option",{value:"Nutrisa",children:"Nutrisa"}),f.jsx("option",{value:"Óptica Devlyn",children:"Óptica Devlyn"}),f.jsx("option",{value:"Óptica Krystal",children:"Óptica Krystal"}),f.jsx("option",{value:"Ópticas Calpini",children:"Ópticas Calpini"}),f.jsx("option",{value:"Ópticas del Sol",children:"Ópticas del Sol"}),f.jsx("option",{value:"Ópticas Excelentes",children:"Ópticas Excelentes"}),f.jsx("option",{value:"Ópticas Franklin",children:"Ópticas Franklin"}),f.jsx("option",{value:"Ópticas LUX",children:"Ópticas LUX"}),f.jsx("option",{value:"OPticos Amaya",children:"Ópticos Amaya"}),f.jsx("option",{value:"Oro y Plata",children:"Oro y Plata"}),f.jsx("option",{value:"ORTIZ",children:"ORTIZ"}),f.jsx("option",{value:"OXXO",children:"OXXO"}),f.jsx("option",{value:"OXXO",children:"OXXO"}),f.jsx("option",{value:"Pafecafe",children:"Pafecafe"}),f.jsx("option",{value:"Panadería Providencia",children:"Panadería Providencia"}),f.jsx("option",{value:"Panini-. Caskarita",children:"Panini- Caskarita"}),f.jsx("option",{value:"Pasteleria Neufeld",children:"Pasteleria Neufeld"}),f.jsx("option",{value:"Pastelería OK",children:"Pastelería OK"}),f.jsx("option",{value:"Pastes Mineria",children:"Pastes Mineria"}),f.jsx("option",{value:"Pastor del Sol",children:"Pastor del Sol"}),f.jsx("option",{value:"Perfecto Choice",children:"Perfecto Choice"}),f.jsx("option",{value:"Pink Lemon",children:"Pink Lemon"}),f.jsx("option",{value:"Pizza Hut",children:"Pizza Hut"}),f.jsx("option",{value:"Plata Celine",children:"Plata Celine"}),f.jsx("option",{value:"Plaza Par",children:"Plaza Par"}),f.jsx("option",{value:"Plaza Par",children:"Plaza Par"}),f.jsx("option",{value:"Probell",children:"Probell"}),f.jsx("option",{value:"PUNTO CELULAR",children:"PUNTO CELULAR"}),f.jsx("option",{value:"Punto Celular",children:"Punto Celular"}),f.jsx("option",{value:"Punto Feet",children:"Punto Feet"}),f.jsx("option",{value:"Queratina",children:"Queratina"}),f.jsx("option",{value:"QUTÉ",children:"QUTÉ"}),f.jsx("option",{value:"Radio Shack",children:"Radio Shack"}),f.jsx("option",{value:"Salón L'occoco",children:"Salón L'occoco"}),f.jsx("option",{value:"Saloon Profesional WOO",children:"Saloon Profecional WOO"}),f.jsx("option",{value:"Sambenito",children:"Sambenito"}),f.jsx("option",{value:"Sanapiel",children:"Sanapiel"}),f.jsx("option",{value:"SANAPIEL",children:"SANAPIEL"}),f.jsx("option",{value:"Sanborns",children:"Sanborns"}),f.jsx("option",{value:"Shang Hai",children:"Shang Hai"}),f.jsx("option",{value:"Silueta Michelle",children:"Silueta Michelle"}),f.jsx("option",{value:"Sophia Rinaldi",children:"Sophia Rinaldi"}),f.jsx("option",{value:"Sorbo de café",children:"Sorbo de Café"}),f.jsx("option",{value:"Soriana",children:"Soriana"}),f.jsx("option",{value:"Starbucks Café",children:"Starbucks Café"}),f.jsx("option",{value:"Steren",children:"Steren"}),f.jsx("option",{value:"Sticks Sushi",children:"Sticks Sushi"}),f.jsx("option",{value:"STOP",children:"STOP"}),f.jsx("option",{value:"Sua Desing",children:"Sua Desing"}),f.jsx("option",{value:"Suburbia",children:"Suburbia"}),f.jsx("option",{value:"Subway",children:"Subway"}),f.jsx("option",{value:"Súper Naturista",children:"Súper Naturista"}),f.jsx("option",{value:"SYCELL",children:"SYCELL"}),f.jsx("option",{value:"TACOS BIEN",children:"TACOS BIEN"}),f.jsx("option",{value:"Tacos Charli",children:"Tacos Charli"}),f.jsx("option",{value:"Tacos Paza",children:"Tacos Paza"}),f.jsx("option",{value:"Tacos Plaza",children:"Tacos Plaza"}),f.jsx("option",{value:"Tarifa baja.com",children:"Tarifabaja.com"}),f.jsx("option",{value:"Tecnocenter",children:"Tecnocenter"}),f.jsx("option",{value:"Telas Parisina",children:"Telas Parisina"}),f.jsx("option",{value:"Todo Empanadas",children:"Todo Empanadas"}),f.jsx("option",{value:"Todo Moda",children:"Todo Moda"}),f.jsx("option",{value:"Todo para sus Pies",children:"Todo para sus Pies"}),f.jsx("option",{value:"Top Original",children:"Top Original"}),f.jsx("option",{value:"Tortas Ahogadas Buenavista",children:"Tortas Ahogadas Buenavista"}),f.jsx("option",{value:"TRENDER Zapatería",children:"TRENDER Zapatería"}),f.jsx("option",{value:"Turin",children:"Turin"}),f.jsx("option",{value:"Ultra cambios del sol",children:"Ultra cambios del sol"}),f.jsx("option",{value:"Ultra Soya",children:"Ultra Soya"}),f.jsx("option",{value:"URBAN BEAUTY",children:"URBAN BEAUTY"}),f.jsx("option",{value:"Vans",children:"Vans"}),f.jsx("option",{value:"VELOUR",children:"VELOUR"}),f.jsx("option",{value:"VER DE VERDAD",children:"VER DE VERDAD"}),f.jsx("option",{value:"Victorinox",children:"Victorinox"}),f.jsx("option",{value:"Vittorio Forti",children:"Vittorio Forti"}),f.jsx("option",{value:"WALDOS",children:"WALDOS"}),f.jsx("option",{value:"WRANGLER",children:"WRANGLER"}),f.jsx("option",{value:"Yei's",children:"Yei's"}),f.jsx("option",{value:"Z Gas",children:"Z Gas"}),f.jsx("option",{value:"ZAPAKIDS",children:"ZAPAKIDS"}),f.jsx("option",{value:"ZAPATERIA BUNAR_55",children:"ZAPATERIA BUNAR_55"}),f.jsx("option",{value:"Zapatería Scarpe",children:"Zapatería Scarpe"}),f.jsx("option",{value:"Zapatería VIP",children:"Zapatería VIP"}),f.jsx("option",{value:"Zaragoza",children:"Zaragoza"}),f.jsx("option",{value:"Zitro Medical",children:"Zitro Medical"}),f.jsx("option",{value:"ZOOM MOTO",children:"ZOOM MOTO"})]})}),f.jsx("input",{type:"submit",value:"Agregar",className:"btnTicket"})]})]}),R=="error"&&f.jsxs("div",{className:"alert-dp",children:[f.jsx("i",{className:"fa-solid fa-triangle-exclamation"})," Verifica los datos ",f.jsx("i",{className:"fa-solid fa-triangle-exclamation"})]}),f.jsx("div",{className:"form-group-btn",children:f.jsxs("div",{className:"form-group-btn",children:[f.jsx("button",{className:"btnTicket",onClick:_,id:"btnQR",children:"Generar QR"}),f.jsx("button",{className:"btnTicketRed",onClick:K,children:"Cancelar registro"})]})}),f.jsxs("div",{id:"toprint",children:[f.jsx("p",{id:"total"}),f.jsx("p",{id:"totalBoletos"}),F?"Cargando QR, espere a que se genere ...":"",f.jsx("div",{className:"row",id:"emailSection",children:f.jsx("div",{className:"card",children:n&&f.jsx("img",{src:n,alt:"QRCode"})})}),f.jsx("div",{className:"row",children:f.jsxs("div",{className:"card",children:[g?"Email enviado a":"",f.jsx("p",{children:g?C:""})]})})]}),g?f.jsx("button",{className:"btnTicket",onClick:()=>{oe("toprint")},children:"Imprimir"}):""]}),f.jsx("div",{className:"register__tickets",children:f.jsxs("div",{className:"table__tickets",children:[f.jsxs("div",{className:"table__head_t",children:[f.jsx("div",{className:"head_title_t",children:"$ Cantidad"}),f.jsx("div",{className:"head_title_t",children:"Fecha Compra"}),f.jsx("div",{className:"head_title_t",children:"Tienda"}),f.jsx("div",{className:"head_title_t",children:"Cupones por fecha"}),f.jsx("div",{className:"head_title_t",children:"Acciones"})]}),l.length>0?l.map(A=>f.jsxs("div",{className:"table__body_t",children:[f.jsxs("div",{className:"body_item_t",children:["$",parseFloat(A.money.$numberDecimal).toLocaleString("en-US")]}),f.jsx("div",{className:"body_item_t",children:A.dateBuy.substring(0,10)}),f.jsx("div",{className:"body_item_t",children:A.store}),f.jsx("div",{className:"body_item_t",children:J(A.category)}),f.jsxs("div",{className:"body_item_t",children:[f.jsx("i",{className:"fas fa-trash",onClick:()=>W(A._id)})," Eliminar"]})]},A._id)):f.jsx("div",{className:"table__body_t",children:f.jsx("div",{className:"body_item_t",children:"No hay registros"})})]})})]}),P!="Modulo"&&f.jsxs(f.Fragment,{children:[f.jsx("hr",{className:"hrTicket"}),f.jsxs("div",{className:"table__part",children:[f.jsxs("div",{className:"table__head",children:[f.jsx("div",{className:"head_title",children:"Email"}),f.jsx("div",{className:"head_title",children:"Nombre"}),f.jsx("div",{className:"head_title",children:"$ Total"}),f.jsx("div",{className:"head_title",children:"Tickets"}),f.jsx("div",{className:"head_title",children:"Folios"})]}),r.length>0?r.map(A=>f.jsxs("div",{className:"table__body",children:[f.jsx("div",{className:"body_item",onClick:()=>Re(A._id),children:A.email}),f.jsx("div",{className:"body_item",children:A.isFull?`${A.namePart} ${A.surname}`:""}),f.jsx("div",{className:"body_item",children:A.money?`$ ${parseFloat(A.money.$numberDecimal).toLocaleString("en-US")}`:""}),f.jsx("div",{className:"body_item",children:A.ticketCount}),f.jsx("div",{className:"body_item",children:A.ticketsAssigned})]},A._id)):f.jsx("div",{className:"table__body",children:f.jsx("div",{className:"body_item",children:"No hay registros"})})]})]})]})]})},ga="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAL4AAADICAMAAABh0atzAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAUFQTFRFAAAAJTWPIzaPIzONIzWOJDSPIzOPHy+PJDWOJDWPJDSOHzePIzSOIjWPJDWOIzSOJDePP0x9kpJHras2urctMkGGW2RraW9in58/8eUJ5NoShIdQ//EA1s4byMIkdntZTVh0/uMF/NYJ+8gO+rsT82ov7SVH7BhM9Xcr8EA+9YQm8lw08U459pEh+awY958c7jNCJDSP//ECbip1PDGGMTOLeyhxSS+CMkKWkZnGx8vi1djp8PH3/v7+4+XwusDcg42/aHOxrbPVP06dTVukn6bOdYC4Wmeq/vz+WWaqV2SpWGWqJTWPYyt6iCZtICAgJiAgHR0dIR0fIh4gISAgIx8gIyAgIx0gIx4gJB8fIh8fIh8fIx4gIx8fHx8fIx4gIh4gIR0fHx8fIh8fIx8fIh4gIx4gIh4gIx8gJR8fIx4g++nrrQAAAGt0Uk5TADBQgI9wQBDv/68gz2C/3////////////////////////////////////////////////////////////////////////////////////x9XPMDbr+aHzu9wnHCfUBCPz4AgYEC/36//MP+su0DXAAALyUlEQVR4nO2c65LcRhWAT7cuo5nV7tpbsQ0vQFGQqgkGe33dVzBUgBRlsiG2A/iJgIpjwCaEVEHgAeCPHRMbCPZSwD/+4xjMendnRrdWc/oijTSXtVca3DLRqdrV6Hb0deuc06e7JRF4oYWYBqgnLb5JafFNSotvUlp8k9Lim5QW36S0+CalxTcpLb5JafFNSotvUlp8k9Lim5Qa+ASl3rVJVOt8qI7fYfYibhwhg3rnVzxtidW6bC7c2a1zejX8JbY4nwnTGidXw1iJa1xyQrhVw34q4Tt29QvO0LZT/dxK+Ks1I0YnLK3S6tVfBb9DK19upiTVTbEKvmtVvtxMiapHsSr4BzB9D5s2zq29/RmGFSD0qRXO2Q/fJ2QHvA42qCwAWEvVjQrEynx91X13wfgrLqePvK5wjvQ/4HnazFi6H2FT8P20i3HkESx5Ym0QrGXa430BG4Lvc4HNtsF3RPUPgl5X7RgNoUvsuZANwe/25CLahWUXl+HeqjqQBQEcphDMC+8NwT+s2gOsa/kzNx7k9ju4tD6Zo68R+BJRiP0QRL3bD1ccuT4cqduBzjxbXyPws9pHTL+LaSR/rGsfHVc68zzraQi+tn0UJgImi3TzzB/LCMo6D+foM49/bIjdjpf47BNojPTpKIBlZ8SnGzDj+L5lQ+oqk58jWPfiKEzQnkzpM40vzSaN92Btrj50AF04bNcm9BnG921p5MI8cvtxxDhEmncMkDkvGkaisj7D+McStWTuyJbRx7GyQRSSKFtnzEnzPHtQtn/T+L478osdbs8prNEonDhcNmxFfSbx/S6VATG3DaczEYCsSTxMi0r6TOKvEebKbOCo6jQ5vWTqhAIuc/YcKPMaxT+ChkLC3bzVWp2ix/1Zd4vRaLrnZRLfW1LLAP1VLA/PHIXoPFZXs4SdHd1pjuseK1e2O3vokytn5Y9ln2YidzOJL3PJsfhz8gbv3+I/feQzj072vkzi52my2uXMUairXyVzEw2XUdc9XBy0WpuK8ZnERZ8od1yM4us+iZLZjivELdi76D0W9Rltddc4zYxiZtRUotouMgJOwC8n/qaTBm91oJPN+fipMPfZvV3T+FJkCDo0d7RVtlwRtm7+VLtlFt9nbuSCkwjzmRc3s4aXcjyMhg1KGnSyr1fm4qvAryUqTWgZxT9aHN725o6dlwJnudk1nHEW116a6EllQssTiKUOi/G4z6LloepnrcyZaijZzoT1mLZ9uhtk+bKzOrP6nXIHRQzEFXYajTzHdsTsiRxYgzlpA0+lsTA70b7RHONRskIzp+3OmLjTGUPyBLyVGPeTf5X0GcX3VofJUiFgTgfPLN9RjS76eoMyTjg0GSwn8jbezdw2dST/spUUW97P/8MofjaHMpYOHRsQp1GhNCS24t3JvMGw647TtOFypG5Fp8dF9sPdNFSuzGh+KXtyoNmw66qZOJBd2SOFASqXjxM4+giOhbJoE8k+GMfPBjaDAZr1vKwBGyrF37wRZhXz6WjPmxU1teCtEWaGR03pMx73MZpjd8r3xG1gc24A2o/fC9JmDVMVRNV9vJNNUpDJsc5Gzyzm8286FA1HIg0i1pPMoiZGZsf6moEvPTjegXxCUZQDPTUfiwhnP1nSEHyZc2Iyhnfh6CdyQnFJ9Ux0ZG34vK6ofkTMeo/DkRyBw/KMp6dn62sIPqxZ8Cif3h0N5eizCDhyIJEEc55Kagy+EN24CqtXg+dY6cIrZgT8TF+D8HN6zG3UgzEs2TuSzpyXyPQ1CT/SYVJY+nKHM4c+hO7ycJ/H2ZqEjy0wcTnEns4rpwfVpvU1Cv/g+kzif6HSZf9W1GcQ/+VK1/b/XtRnEr/SU9DkL0V9jbD9/lZFBvP4r8gXWfDvHvQty7p7MH3m8bNNKds6HdM/HEyfcfxTCbiDJZIwYPdPx85HffHotePyO2cTPWj4AM4OiZU4bvr7KX3G8c+PyB/VEtwk9T48qQcccEUfYd89oTpf/OMpfcbx11n6Z7HsO9ANEX89XGFWlOBKgtlmSIGlW+fiDrNCBu5k9TcBn90XSzQiO7SSB33PYQARsYUTbwyIM9yCswluYynEkxHKPP65gHWxUjdGnCcu77JY99J7t7BoCfF2t+D8UF/rT1P6jOOfluNpnAB30MbtwGZLMYQ2dO5I+g9x53FKCYRu2kTbz1yVde7Cl4kdUWE1ZyK083UG1j10CnBktWc+XtLXAPykZwODO9J7e2kAzIkJBZcG2BaAfJCW8tSJba58vKTPNP6ZUDmpkHXGk63TenDWzQbH+cd9i+pfU/pM42/EaZDFkw2e4j04o6yJkuypcty2ocoyal7kqSUt/oEu9/+H37fBGafJ62DpzODsgFopJRYv5NAbISll1A3AhxNcNk5KzgU6vmC+oK9TiPYYWu0iv3n8/tZJTNSg79NYgOWN08nUcdjekrVLMCXqi5Fa9zZgw9a9XdRnFL9PKPa0OEkebOyJMOl8BOvermqcTnBMG7SciuXF+NItTCsaU/v97HGALgtFKQR/loBiLsTFZN1o5RZ2Iql4Zo9ju/UVmcqN9ZnEf8XGFG2rb5Purs2XnmydC8Ad2ho/Lxu7vzEUCRycDcXA2/iegGH8Ezx5AMKebcaZGAmPiUWxv6h3b3CIQj+ALhnKnA3xl3fLXRaT+CJDE5aABjHKpuKSblwIQ0LOj2hnJKMR3oSVnXKXxXDti4EFkRwHWYZjx6nCP0N1KU4lqcNkNML+WG9Y7rIYtn1I0+UI+7DWCFM0F63n7pcsaVCiUJR0IOIp78YJWK54rz51k3LWaTZwHtdJZazTZO6MbJ0/Z0myeF8aXG1bVmiXc37DzdZ6JLW4d+EUSYA4d06xJNXGfXYA2CjYxP8d9HsiYU7de8ct73ZJn/FWt5YYHWH+TJXL/vOvRX0G8b9Y6QM1n/ttUd/zxV8uPuX+8merXPahwfH9RX/kI5770P9TpQmfWKnxgSEjH7iZkOf8gRugnacfcwCE6l9Yqfhxp97ctwwOLpzPfVnq6VINv1Pzi2wF4dHz/7QWdKwF1b81rENf/at4TmcBX2Zz9+walgO1PuoHdGm/jwY9w7VJeIGQX9dSUQugplywCEmt+DfVNRjF/zpFeNb9RXUNRvFfe//VpJcGzi8razCJ/1X6wTcsTt977f3KKkziX/Cw9u1ffc19MfHh1ZR88C0IO+9V1mA28nTpiFPv59U1GMUH+GZCkxpx0zR+XWnxTUqLb1I+tfgXi6eSm3KxyWwSeIlDrqvNl2Sf3qKRx6+XTr6CB+6sRsnNypfX16185veKp4Y/Fv8vDw7p9d135eLquE+Whj/Nf19Ns3MDWi7WQWWB+JvdwhbFdbXYpdx2dF1fZIfGW3VBK8oC8UsbgL0NE/gAyTXx/8reoemNFWVx+BeXS7vpk3en8Ld7eEs2qVfeWKO3sjj8zUjV6faKHkIUrBqfZU/1jND+39RjXNugb8Lezyoz1Amcm+CqkXIxSnbjiv7yaXgjK1j8Tob/Q7iiXkAWNa32Ckd4PZYFCH5SnaFW3M/pUJTtbLs3sFyeZEWDGh9wWb26RX4A3812ZhvrWM/C8L/ti//8R+L/G139e3zApnqZK7mmN0UiMOmNUfXguTD8HBmyomDsmcIf3NQ/8DZgq+bqjZUJFoavPFIZwlty/gL9dHyAdg2Mkt+XP9AxAF5X33RrQu1rFGHTOoQWXXezI0skXOM7Mm6KuHQplT8b4braKCBIbB3XozxwjtxdFSSFbb2hv4vAU73RUOAs4+dYmYgYP9lsHUaLzxqI0saqsjh8bRWZpMGNKXyV2Gkzy6RW0rNA/EvDQrVu+9dgMmWzNGjpPtUxnYXiw2bqZ3sYu144QG2ycyO5nD+pkRepotTCv6QmeN/ON1xNxeNqKUneKR5AIQDbLVn4m+KN6u3lyKqX7v8POotXBzee6bhLnWc8cD/51PZ1GyEtvklp8U1Ki29SWnyT0uKblBbfpLT4JqXFNyktvklp8U1Ki29SWnyT0uKblBbfpLzg+P8FTKBkBd3AxM8AAAAASUVORK5CYII=",j6=()=>f.jsxs("header",{className:"layout__navbar",children:[f.jsx("div",{className:"navbar__header",children:f.jsx("a",{href:"/",className:"navbar__title",children:f.jsx("img",{className:"logoIndex",src:ga,alt:"Logo Plaza del Sol"})})}),f.jsx("nav",{className:"navbar__container-lists",children:f.jsx("ul",{className:"container-lists__menu-list",children:f.jsx("li",{className:"menu-list__item",children:f.jsxs(Gr,{to:"/show",className:"menu-list__link",children:[f.jsx("i",{className:"fa-solid fa-ticket"}),f.jsx("span",{className:"menu-list__title",children:" Mis cupones electronicos"})]})})})})]}),U6=()=>{const{auth:e}=ku();return f.jsxs(f.Fragment,{children:[f.jsx(j6,{}),f.jsx("section",{className:"layout__content",children:e._id?f.jsx(Bf,{to:"/feed"}):f.jsx(Nf,{})})]})},K6=()=>{const[e,t]=y.useState("Modulo");y.useEffect(()=>{i()},[]);const i=()=>{let s=JSON.parse(localStorage.getItem("user"));s&&t(s.role=="67343d953ac5007d4f7f13fc"?"Admin":"Modulo")};return f.jsxs("header",{className:"layout__navbar",children:[f.jsx("div",{className:"navbar__header",children:f.jsx("a",{href:"/",className:"navbar__title",children:f.jsx("img",{className:"logoIndex",src:ga,alt:"Logo Plaza del Sol"})})}),f.jsx("nav",{className:"navbar__container-lists",children:f.jsxs("ul",{className:"container-lists__menu-list",children:[e!="Modulo"&&f.jsx("li",{className:"menu-list__item",children:f.jsxs(Gr,{to:"/feed/NewUser",className:"menu-list__link",children:[f.jsx("i",{className:"fa-solid fa-user-plus"}),f.jsx("span",{className:"menu-list__title",children:" Nuevo usuario"})]})}),e!="Modulo"&&f.jsx("li",{className:"menu-list__item",children:f.jsxs(Gr,{to:"/feed/Estadisticas",className:"menu-list__link",children:[f.jsx("i",{className:"fa-solid fa-chart-simple"}),f.jsx("span",{className:"menu-list__title",children:" Estadisticas"})]})}),f.jsx("li",{className:"menu-list__item",children:f.jsxs(Gr,{to:"/feed/Logout",className:"menu-list__link",children:[f.jsx("i",{className:"fas fa-sign-out-alt"}),f.jsx("span",{className:"menu-list__title",children:" Cerrar sesión"})]})})]})})]})},$6=()=>{const{auth:e,loading:t}=ku();return t?f.jsx("h1",{children:"Cargando ..."}):f.jsxs(f.Fragment,{children:[f.jsx(K6,{}),f.jsx("section",{className:"layout__content",children:e._id?f.jsx(Nf,{}):f.jsx(Bf,{to:"/"})})]})},q6=()=>{y.useState(!0);let e=JSON.parse(localStorage.getItem("part"));localStorage.getItem("qrItem");const{form:t,changed:i}=La({}),[s,n]=y.useState(!0);let o="",r="";e!=null?(o=e.email,r=e.phone!=null?e.phone:"",e.isFull&&(window.location.href="/LoadTickets")):window.location.href="/Scan";const a=async l=>{l.preventDefault();let c=t;if(e!=null&&(c.userId=e._id,e.phone&&(c.phone=e.phone)),c.namePart&&c.surname&&c.phone){n(!0);const d=await(await fetch(ue.url+"participante/addName",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}})).json();(d.status="success")&&(e.isFull=!0,localStorage.setItem("part",JSON.stringify(e)),window.location.reload())}else n(!1)};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"imgpds",children:f.jsx("div",{className:"boximg",children:f.jsx("img",{src:ga,alt:"Logo Plaza del sol"})})}),f.jsx("div",{className:"dpform-bg"}),f.jsxs("form",{className:"dpform",onSubmit:a,children:[f.jsxs("div",{className:"dp-sect",children:[f.jsx("input",{type:"text",className:"input-text",name:"namePart",onChange:i}),f.jsx("label",{children:"Nombre completo"})]}),f.jsxs("div",{className:"dp-sect",children:[f.jsx("input",{type:"text",className:"input-text",name:"surname",onChange:i}),f.jsx("label",{children:"Apellidos completos"})]}),f.jsxs("div",{className:"dp-sect",children:[r&&f.jsx("input",{type:"tel",className:"input-text",defaultValue:r,name:"phone",disabled:!0}),!r&&f.jsx("input",{type:"tel",className:"input-text",name:"phone",maxLength:10,onChange:i}),f.jsx("label",{children:"Telefono de contacto"})]}),f.jsxs("div",{className:"dp-sect",children:[f.jsx("input",{type:"email",defaultValue:o,className:"input-text",disabled:!0}),f.jsx("label",{children:"Correo electronico"})]}),!s&&f.jsx("div",{className:"alert-dp",children:f.jsx("p",{children:"Ingresa los datos faltantes"})}),f.jsx("div",{className:"dp-sect",children:f.jsx("input",{type:"submit",value:"Siguiente",className:"btn btn-primary"})})]}),f.jsx("div",{className:"imgpds",children:f.jsx("div",{className:"boximg",children:f.jsx("img",{src:ga,alt:"Logo Plaza del sol"})})})]})},Y6=()=>{localStorage.getItem("part")||(window.location.href="/");const[t,i]=y.useState({}),[s,n]=y.useState([]),[o,r]=y.useState([]),[a,l]=y.useState(!1),[c,u]=y.useState(!1),[d,h]=y.useState(!1),[p,g]=y.useState(!1);y.useEffect(()=>{v(),S()},[]);const v=async()=>{let b=localStorage.getItem("part");if(b!=null){b=JSON.parse(b);let P={userId:b._id};const F=await(await fetch(ue.url+"participante/getAllParticipantes",{method:"POST",body:JSON.stringify(P),headers:{"Content-Type":"application/json"}})).json();if(F.status=="success"){let k=F.part.phone;F.part.phone=k.substring(0,2)+" "+k.substring(2,6)+" "+k.substring(6,10),i(F.part);let E=[];if(F.auxPart.length>0){for(let T=0;T<F.auxPart.length;T++){let O={userId:F.auxPart[T]._id};const X=await(await fetch(ue.url+"boleto/getAllByIdF",{method:"POST",body:JSON.stringify(O),headers:{"Content-Type":"application/json"}})).json();if(X.status=="success")for(let j=0;j<X.bolList.length;j++)E.push(X.bolList[j])}r(E)}}}},S=async()=>{let b=localStorage.getItem("part");if(b!=null){b=JSON.parse(b);let P={userId:b._id};const F=await(await fetch(ue.url+"boleto/getAllByIdF",{method:"POST",body:JSON.stringify(P),headers:{"Content-Type":"application/json"}})).json();F.status=="success"&&n(F.bolList)}},m=()=>{l(!0),u(!0)},C=()=>{l(!0),h(!0)},w=()=>{l(!1),h(!1),u(!1)},R=async()=>{for(let P=0;P<s.length;P++){let x=document.getElementById(s[P]._id).value;if(x!=""){let F={bolId:s[P]._id,numSpheres:x,namePart:t.namePart,surname:t.surname,phone:t.phone};await(await fetch(ue.url+"boleto/update",{method:"POST",body:JSON.stringify(F),headers:{"Content-Type":"application/json"}})).json()}}for(let P=0;P<o.length;P++){let x=document.getElementById(o[P]._id).value;if(x!=""){let F={bolId:o[P]._id,numSpheres:x};await(await fetch(ue.url+"boleto/update",{method:"POST",body:JSON.stringify(F),headers:{"Content-Type":"application/json"}})).json()}}let b=localStorage.getItem("part");if(b!=null){b=JSON.parse(b);let P={userId:b._id,email:b.email};await(await fetch(ue.url+"boleto/sendEmailFolios",{method:"POST",body:JSON.stringify(P),headers:{"Content-Type":"application/json"}})).json()}c?(S(),s.length>0?window.location.reload():window.location.href="/show"):(localStorage.clear(),window.location.reload(),window.location.href="/Mensaje")};return f.jsxs(f.Fragment,{children:[f.jsx("section",{className:"header",children:f.jsxs("div",{className:"header__texto",children:[f.jsx("h2",{className:"no-margin",children:"Tus cupones digitales de compra y gana"}),f.jsx("h3",{className:"no-margin",children:"Plaza del sol"})]})}),f.jsx("div",{className:"container",children:f.jsx("div",{className:"ticket",children:f.jsxs("div",{className:"ticket__info",children:[f.jsx("div",{className:"info__head"}),f.jsxs("div",{className:"info__person",children:[f.jsxs("div",{className:"person__label",children:[f.jsxs("div",{className:"info__label",children:[f.jsx("p",{className:"first__label",children:t.email}),f.jsx("p",{className:"second__label",children:"Correo electronico"})]}),f.jsxs("div",{className:"info__phone",children:[f.jsx("p",{className:"phone__number",children:t.phone}),f.jsx("p",{className:"phone__label",children:"Teléfono"})]})]}),f.jsxs("div",{className:"info__label",children:[f.jsxs("p",{className:"first__label",children:[t.namePart," ",t.surname]}),f.jsx("p",{className:"second__label",children:"Nombre"})]}),f.jsx("hr",{className:"hrTicket"}),f.jsx("div",{className:"sub__header__num",children:f.jsx("p",{children:"Folio de participación"})}),s.map(b=>f.jsxs("div",{className:"info__num",children:[f.jsx("div",{className:"num__cod",children:f.jsxs("span",{className:"num__cod__item",children:[f.jsx("i",{className:"fa-solid fa-ticket"})," ",b.folio]})}),f.jsxs("div",{className:"info__sphere",children:[f.jsx("input",{type:"tel",className:"input-text",id:b._id}),f.jsx("label",{children:"Numero de pelotas"})]})]},b._id)),o.map(b=>f.jsxs("div",{className:"info__num",children:[f.jsx("div",{className:"num__cod",children:f.jsxs("span",{className:"num__cod__item",children:[f.jsx("i",{className:"fa-solid fa-ticket"})," ",b.folio]})}),f.jsxs("div",{className:"info__sphere",children:[f.jsx("input",{type:"tel",className:"input-text",id:b._id}),f.jsx("label",{children:"Numero de pelotas"})]})]},b._id)),f.jsx("div",{className:"footer__ticket",children:p?f.jsx(f.Fragment,{children:"Cargando ..."}):f.jsx(f.Fragment,{children:a?f.jsxs(f.Fragment,{children:[f.jsx("p",{children:"¿Realmente deseas guardar?"}),f.jsx("button",{onClick:R,children:"SI"}),f.jsx("button",{onClick:w,children:"NO"})]}):f.jsxs(f.Fragment,{children:[f.jsxs("button",{onClick:C,children:[f.jsx("i",{className:"fa-solid fa-floppy-disk"})," Guardar Registro"]}),f.jsxs("button",{onClick:m,children:[f.jsx("i",{className:"fa-regular fa-floppy-disk"})," Guardar y continuar registro ",f.jsx("i",{className:"fa-solid fa-circle-right"})]})]})})})]})]})})})]})},Q6=()=>{localStorage.getItem("part")||(window.location.href="/");const[t,i]=y.useState({}),[s,n]=y.useState([]);y.useState(!1),y.useState(!1),y.useState(!1);const[o,r]=y.useState(!1),[a,l]=y.useState(!1);y.useEffect(()=>{c()},[]);const c=async()=>{let p=localStorage.getItem("part");if(p!=null){p=JSON.parse(p);let g={userId:p._id};const S=await(await fetch(ue.url+"participante/getAllParticipantes",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json"}})).json();if(S.status=="success"){let m=S.part.phone;S.part.phone=m.substring(0,2)+" "+m.substring(2,6)+" "+m.substring(6,10),i(S.part);let C=[],w=S.part,R={userId:w._id};const P=await(await fetch(ue.url+"boleto/getAllByIdT",{method:"POST",body:JSON.stringify(R),headers:{"Content-Type":"application/json"}})).json();if(P.status=="success"&&(R.bolList=P.bolList,R.part=w,C.push(R)),S.auxPart.length>0)for(let x=0;x<S.auxPart.length;x++){let F={userId:S.auxPart[x]._id};const E=await(await fetch(ue.url+"boleto/getAllByIdT",{method:"POST",body:JSON.stringify(F),headers:{"Content-Type":"application/json"}})).json();E.status=="success"&&(F.bolList=E.bolList,F.part=S.auxPart[x],C.push(F))}n(C),d()}}},u=async()=>{let p=localStorage.getItem("part");if(p!=null){p=JSON.parse(p);let g={userId:p._id,email:p.email};await(await fetch(ue.url+"boleto/sendEmailFolios",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json"}})).json(),l(!0)}},d=async()=>{let p=localStorage.getItem("part");if(p!=null){p=JSON.parse(p);let g={email:p.email,userId:p._id};(await(await fetch(ue.url+"boleto/PDF",{method:"POST",body:JSON.stringify(g),headers:{"Content-Type":"application/json"}})).json()).message=="Hecho"}},h=()=>{let p=localStorage.getItem("part");p!=null&&(p=JSON.parse(p),window.location.href=`https://compraygana2024pds.com/api/boleto/getPDF/${p.email}`)};return f.jsxs(f.Fragment,{children:[f.jsx("section",{className:"header",children:f.jsxs("div",{className:"header__texto",children:[f.jsx("h2",{className:"no-margin",children:"Compra y Gana"}),f.jsx("h3",{className:"no-margin",children:"Cupones electrónicos"})]})}),f.jsx("div",{className:"container",children:f.jsx("div",{className:"ticket",children:f.jsxs("div",{className:"ticket__info",children:[f.jsx("div",{className:"info__head"}),f.jsxs("div",{className:"info__person",children:[f.jsxs("div",{className:"person__label",children:[f.jsxs("div",{className:"info__label",children:[f.jsx("p",{className:"first__label",children:t.email}),f.jsx("p",{className:"second__label",children:"Correo electronico"})]}),f.jsxs("div",{className:"info__phone",children:[f.jsx("p",{className:"phone__number",children:t.phone}),f.jsx("p",{className:"phone__label",children:"Teléfono"})]})]}),f.jsx("hr",{className:"hrTicket"}),f.jsx("div",{className:"sub__header__num",children:f.jsx("p",{children:"Folio de participación"})}),s.length>0?s.map(p=>f.jsxs("div",{children:[f.jsxs("div",{className:"info__label",children:[f.jsxs("p",{className:"first__label",children:[p.part.namePart," ",p.part.surname]}),f.jsx("p",{className:"second__label",children:"Nombre"})]}),f.jsx("hr",{className:"hrTicket"}),p.bolList.length>0?p.bolList.map(g=>f.jsxs("div",{className:"info__num",children:[f.jsx("div",{className:"num__cod",children:f.jsxs("span",{className:"num__cod__item",children:[f.jsx("i",{className:"fa-solid fa-ticket"})," ",g.folio]})}),f.jsxs("div",{className:"info__sphere",children:[f.jsx("input",{type:"text",className:"input-text",defaultValue:parseInt(g.numSpheres).toLocaleString("en-US"),disabled:!0}),f.jsx("label",{children:"Numero de pelotas"})]})]},g._id)):""]},p.userId)):f.jsx("h4",{children:"No hay boletos cargados"}),f.jsx("div",{className:"footer__ticket",children:o?f.jsx(f.Fragment,{children:"Cargando ..."}):f.jsxs(f.Fragment,{children:[f.jsxs("button",{onClick:u,children:[f.jsx("i",{className:"fa-solid fa-envelope-open-text"})," Enviar correo con cupones electronicos"]}),f.jsxs("button",{onClick:h,children:[f.jsx("i",{className:"fa-solid fa-file-arrow-down"})," imprimir"]})]})}),a?"Email enviado":""]})]})})})]})},X6=()=>{const{auth:e}=ku();return f.jsx(f.Fragment,{children:f.jsx("section",{className:"layout__content",children:e._id?f.jsx(Bf,{to:"/feed"}):f.jsx(Nf,{})})})},J6=()=>(useState("not_sended"),f.jsxs(Gr,{to:"http://localhost:3900/api/boleto/PDF/",children:[f.jsx("i",{className:"fa-solid fa-user"}),f.jsx("span",{className:"menu-list__title",children:"PDF"})]})),Z6=()=>(Of(),y.useEffect(()=>{localStorage.clear(),window.location.href="/AdministracionLogin"}),f.jsx("h1",{children:"Cerrando sesión ..."})),eR=()=>f.jsxs("div",{className:"contenedorMSG",children:[f.jsx("h3",{children:"Recibirás un correo con el registro de tus cupones"}),f.jsx("img",{src:ga,alt:"Logo Plaza del Sol"})]}),tR=()=>{const[e,t]=y.useState("Modulo"),{form:i,changed:s}=La({}),[n,o]=y.useState(!0),[r,a]=y.useState(!1);y.useEffect(()=>{l()},[]);const l=()=>{let u=JSON.parse(localStorage.getItem("user"));t(u.role=="67343d953ac5007d4f7f13fc"?"Admin":"Modulo"),u.role!="67343d953ac5007d4f7f13fc"&&(window.location.href="/feed")},c=async u=>{u.preventDefault();let d=i;if(console.log(d),d.email&&d.nameUser&&d.password&&d.role&&d.surname&&d.role!="Perfil"){o(!0);const p=await(await fetch(ue.url+"user/register",{method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}})).json();console.log(p),(p.status="success")?(a(!0),setTimeout(function(){window.location.reload()},2e3)):a(!1)}else o(!1)};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"titleUser",children:f.jsx("h2",{children:"Agregar usuario"})}),f.jsxs("form",{className:"userForm",onSubmit:c,children:[f.jsxs("div",{className:"dp-sect",children:[f.jsx("input",{type:"text",className:"input-text",name:"nameUser",onChange:s}),f.jsx("label",{children:"Nombre completo"})]}),f.jsxs("div",{className:"dp-sect",children:[f.jsx("input",{type:"text",className:"input-text",name:"surname",onChange:s}),f.jsx("label",{children:"Apellidos completos"})]}),f.jsxs("div",{className:"dp-sect",children:[f.jsx("input",{type:"email",className:"input-text",name:"email",onChange:s}),f.jsx("label",{children:"Correo electronico"})]}),f.jsxs("div",{className:"dp-sect",children:[f.jsx("input",{type:"text",className:"input-text",name:"password",onChange:s}),f.jsx("label",{children:"Contraseña"})]}),f.jsx("div",{className:"dp-sect",children:f.jsx("div",{className:"form-group",children:f.jsxs("select",{name:"role",id:"role",onChange:s,children:[f.jsx("option",{defaultValue:"-1",children:"Perfil"}),f.jsx("option",{value:"Admin",children:"Admin"}),f.jsx("option",{value:"Modulo",children:"Modulo"})]})})}),f.jsx("div",{className:"dp-sect",children:f.jsx("input",{type:"submit",value:"Guardar Usuario",className:"btn btn-primary"})}),!n&&f.jsx("div",{className:"alert-dp",children:f.jsx("p",{children:"Ingresa los datos faltantes"})}),r&&f.jsx("div",{className:"alert-sc",children:f.jsx("p",{children:"Guardado correctamente"})})]})]})},iR=()=>{const[e,t]=y.useState(),[i,s]=y.useState();y.useEffect(()=>{n()},[]);const n=async()=>{let o=JSON.parse(localStorage.getItem("part"));const a=await(await fetch(ue.url+"boleto/getBoletosBypart",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}})).json(),c=await(await fetch(ue.url+"participante/getCounters",{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}})).json();if(s(c.part.ticketsAssigned),a.boletosCount==c.part.ticketsAssigned)window.location.href="/Update";else{let u=c.part.ticketStart+a.boletosCount;console.log(u);let d=0;for(let h=u;h<=c.part.ticketEnd;h++){d++;let p={parti:o._id,email:o.email,fol:h};t(d),await(await fetch(ue.url+"boleto/registerOne",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json"}})).json()}window.location.href="/Update"}};return f.jsxs("div",{className:"container__gen",children:[f.jsx("h3",{children:"Generando tus cupones digitales"}),f.jsxs("h4",{children:[e," de ",i]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Na(e){return e+.5|0}const bs=(e,t,i)=>Math.max(Math.min(e,i),t);function br(e){return bs(Na(e*2.55),0,255)}function Os(e){return bs(Na(e*255),0,255)}function zi(e){return bs(Na(e/2.55)/100,0,1)}function k3(e){return bs(Na(e*100),0,100)}const $t={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},np=[..."0123456789ABCDEF"],sR=e=>np[e&15],nR=e=>np[(e&240)>>4]+np[e&15],dl=e=>(e&240)>>4===(e&15),oR=e=>dl(e.r)&&dl(e.g)&&dl(e.b)&&dl(e.a);function rR(e){var t=e.length,i;return e[0]==="#"&&(t===4||t===5?i={r:255&$t[e[1]]*17,g:255&$t[e[2]]*17,b:255&$t[e[3]]*17,a:t===5?$t[e[4]]*17:255}:(t===7||t===9)&&(i={r:$t[e[1]]<<4|$t[e[2]],g:$t[e[3]]<<4|$t[e[4]],b:$t[e[5]]<<4|$t[e[6]],a:t===9?$t[e[7]]<<4|$t[e[8]]:255})),i}const aR=(e,t)=>e<255?t(e):"";function lR(e){var t=oR(e)?sR:nR;return e?"#"+t(e.r)+t(e.g)+t(e.b)+aR(e.a,t):void 0}const cR=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function XS(e,t,i){const s=t*Math.min(i,1-i),n=(o,r=(o+e/30)%12)=>i-s*Math.max(Math.min(r-3,9-r,1),-1);return[n(0),n(8),n(4)]}function uR(e,t,i){const s=(n,o=(n+e/60)%6)=>i-i*t*Math.max(Math.min(o,4-o,1),0);return[s(5),s(3),s(1)]}function dR(e,t,i){const s=XS(e,1,.5);let n;for(t+i>1&&(n=1/(t+i),t*=n,i*=n),n=0;n<3;n++)s[n]*=1-t-i,s[n]+=t;return s}function hR(e,t,i,s,n){return e===n?(t-i)/s+(t<i?6:0):t===n?(i-e)/s+2:(e-t)/s+4}function zf(e){const i=e.r/255,s=e.g/255,n=e.b/255,o=Math.max(i,s,n),r=Math.min(i,s,n),a=(o+r)/2;let l,c,u;return o!==r&&(u=o-r,c=a>.5?u/(2-o-r):u/(o+r),l=hR(i,s,n,u,o),l=l*60+.5),[l|0,c||0,a]}function jf(e,t,i,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,s)).map(Os)}function Uf(e,t,i){return jf(XS,e,t,i)}function pR(e,t,i){return jf(dR,e,t,i)}function fR(e,t,i){return jf(uR,e,t,i)}function JS(e){return(e%360+360)%360}function gR(e){const t=cR.exec(e);let i=255,s;if(!t)return;t[5]!==s&&(i=t[6]?br(+t[5]):Os(+t[5]));const n=JS(+t[2]),o=+t[3]/100,r=+t[4]/100;return t[1]==="hwb"?s=pR(n,o,r):t[1]==="hsv"?s=fR(n,o,r):s=Uf(n,o,r),{r:s[0],g:s[1],b:s[2],a:i}}function mR(e,t){var i=zf(e);i[0]=JS(i[0]+t),i=Uf(i),e.r=i[0],e.g=i[1],e.b=i[2]}function CR(e){if(!e)return;const t=zf(e),i=t[0],s=k3(t[1]),n=k3(t[2]);return e.a<255?`hsla(${i}, ${s}%, ${n}%, ${zi(e.a)})`:`hsl(${i}, ${s}%, ${n}%)`}const M3={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},D3={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function vR(){const e={},t=Object.keys(D3),i=Object.keys(M3);let s,n,o,r,a;for(s=0;s<t.length;s++){for(r=a=t[s],n=0;n<i.length;n++)o=i[n],a=a.replace(o,M3[o]);o=parseInt(D3[r],16),e[a]=[o>>16&255,o>>8&255,o&255]}return e}let hl;function SR(e){hl||(hl=vR(),hl.transparent=[0,0,0,0]);const t=hl[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const wR=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function yR(e){const t=wR.exec(e);let i=255,s,n,o;if(t){if(t[7]!==s){const r=+t[7];i=t[8]?br(r):bs(r*255,0,255)}return s=+t[1],n=+t[3],o=+t[5],s=255&(t[2]?br(s):bs(s,0,255)),n=255&(t[4]?br(n):bs(n,0,255)),o=255&(t[6]?br(o):bs(o,0,255)),{r:s,g:n,b:o,a:i}}}function RR(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${zi(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Pd=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Hn=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function bR(e,t,i){const s=Hn(zi(e.r)),n=Hn(zi(e.g)),o=Hn(zi(e.b));return{r:Os(Pd(s+i*(Hn(zi(t.r))-s))),g:Os(Pd(n+i*(Hn(zi(t.g))-n))),b:Os(Pd(o+i*(Hn(zi(t.b))-o))),a:e.a+i*(t.a-e.a)}}function pl(e,t,i){if(e){let s=zf(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*i,t===0?360:1)),s=Uf(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function ZS(e,t){return e&&Object.assign(t||{},e)}function T3(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Os(e[3]))):(t=ZS(e,{r:0,g:0,b:0,a:1}),t.a=Os(t.a)),t}function PR(e){return e.charAt(0)==="r"?yR(e):gR(e)}class ma{constructor(t){if(t instanceof ma)return t;const i=typeof t;let s;i==="object"?s=T3(t):i==="string"&&(s=rR(t)||SR(t)||PR(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=ZS(this._rgb);return t&&(t.a=zi(t.a)),t}set rgb(t){this._rgb=T3(t)}rgbString(){return this._valid?RR(this._rgb):void 0}hexString(){return this._valid?lR(this._rgb):void 0}hslString(){return this._valid?CR(this._rgb):void 0}mix(t,i){if(t){const s=this.rgb,n=t.rgb;let o;const r=i===o?.5:i,a=2*r-1,l=s.a-n.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,s.r=255&c*s.r+o*n.r+.5,s.g=255&c*s.g+o*n.g+.5,s.b=255&c*s.b+o*n.b+.5,s.a=r*s.a+(1-r)*n.a,this.rgb=s}return this}interpolate(t,i){return t&&(this._rgb=bR(this._rgb,t._rgb,i)),this}clone(){return new ma(this.rgb)}alpha(t){return this._rgb.a=Os(t),this}clearer(t){const i=this._rgb;return i.a*=1-t,this}greyscale(){const t=this._rgb,i=Na(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=i,this}opaquer(t){const i=this._rgb;return i.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return pl(this._rgb,2,t),this}darken(t){return pl(this._rgb,2,-t),this}saturate(t){return pl(this._rgb,1,t),this}desaturate(t){return pl(this._rgb,1,-t),this}rotate(t){return mR(this._rgb,t),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function _i(){}const xR=(()=>{let e=0;return()=>e++})();function Ee(e){return e==null}function Xe(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function pe(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function oi(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function yi(e,t){return oi(e)?e:t}function Ce(e,t){return typeof e>"u"?t:e}const FR=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,ew=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Fe(e,t,i){if(e&&typeof e.call=="function")return e.apply(i,t)}function ve(e,t,i,s){let n,o,r;if(Xe(e))for(o=e.length,n=0;n<o;n++)t.call(i,e[n],n);else if(pe(e))for(r=Object.keys(e),o=r.length,n=0;n<o;n++)t.call(i,e[r[n]],r[n])}function Bc(e,t){let i,s,n,o;if(!e||!t||e.length!==t.length)return!1;for(i=0,s=e.length;i<s;++i)if(n=e[i],o=t[i],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function Nc(e){if(Xe(e))return e.map(Nc);if(pe(e)){const t=Object.create(null),i=Object.keys(e),s=i.length;let n=0;for(;n<s;++n)t[i[n]]=Nc(e[i[n]]);return t}return e}function tw(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function ER(e,t,i,s){if(!tw(e))return;const n=t[e],o=i[e];pe(n)&&pe(o)?Ca(n,o,s):t[e]=Nc(o)}function Ca(e,t,i){const s=Xe(t)?t:[t],n=s.length;if(!pe(e))return e;i=i||{};const o=i.merger||ER;let r;for(let a=0;a<n;++a){if(r=s[a],!pe(r))continue;const l=Object.keys(r);for(let c=0,u=l.length;c<u;++c)o(l[c],e,r,i)}return e}function Vr(e,t){return Ca(e,t,{merger:kR})}function kR(e,t,i){if(!tw(e))return;const s=t[e],n=i[e];pe(s)&&pe(n)?Vr(s,n):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Nc(n))}const A3={"":e=>e,x:e=>e.x,y:e=>e.y};function MR(e){const t=e.split("."),i=[];let s="";for(const n of t)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(i.push(s),s="");return i}function DR(e){const t=MR(e);return i=>{for(const s of t){if(s==="")break;i=i&&i[s]}return i}}function kn(e,t){return(A3[t]||(A3[t]=DR(t)))(e)}function Kf(e){return e.charAt(0).toUpperCase()+e.slice(1)}const va=e=>typeof e<"u",Hs=e=>typeof e=="function",I3=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0};function TR(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Ze=Math.PI,Ke=2*Ze,_c=Number.POSITIVE_INFINITY,AR=Ze/180,Ye=Ze/2,Xs=Ze/4,L3=Ze*2/3,op=Math.log10,Bs=Math.sign;function Yl(e,t,i){return Math.abs(e-t)<i}function O3(e){const t=Math.round(e);e=Yl(e,t,e/1e3)?t:e;const i=Math.pow(10,Math.floor(op(e))),s=e/i;return(s<=1?1:s<=2?2:s<=5?5:10)*i}function IR(e){const t=[],i=Math.sqrt(e);let s;for(s=1;s<i;s++)e%s===0&&(t.push(s),t.push(e/s));return i===(i|0)&&t.push(i),t.sort((n,o)=>n-o).pop(),t}function Gc(e){return!isNaN(parseFloat(e))&&isFinite(e)}function LR(e,t){const i=Math.round(e);return i-t<=e&&i+t>=e}function OR(e,t,i){let s,n,o;for(s=0,n=e.length;s<n;s++)o=e[s][i],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function $i(e){return e*(Ze/180)}function BR(e){return e*(180/Ze)}function B3(e){if(!oi(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function iw(e,t){const i=t.x-e.x,s=t.y-e.y,n=Math.sqrt(i*i+s*s);let o=Math.atan2(s,i);return o<-.5*Ze&&(o+=Ke),{angle:o,distance:n}}function NR(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Js(e){return(e%Ke+Ke)%Ke}function Hc(e,t,i,s){const n=Js(e),o=Js(t),r=Js(i),a=Js(o-n),l=Js(r-n),c=Js(n-o),u=Js(n-r);return n===o||n===r||s&&o===r||a>l&&c<u}function Et(e,t,i){return Math.max(t,Math.min(i,e))}function _R(e){return Et(e,-32768,32767)}function pn(e,t,i,s=1e-6){return e>=Math.min(t,i)-s&&e<=Math.max(t,i)+s}function $f(e,t,i){i=i||(r=>e[r]<t);let s=e.length-1,n=0,o;for(;s-n>1;)o=n+s>>1,i(o)?n=o:s=o;return{lo:n,hi:s}}const rp=(e,t,i,s)=>$f(e,i,s?n=>{const o=e[n][t];return o<i||o===i&&e[n+1][t]===i}:n=>e[n][t]<i),GR=(e,t,i)=>$f(e,i,s=>e[s][t]>=i);function HR(e,t,i){let s=0,n=e.length;for(;s<n&&e[s]<t;)s++;for(;n>s&&e[n-1]>i;)n--;return s>0||n<e.length?e.slice(s,n):e}const sw=["push","pop","shift","splice","unshift"];function VR(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),sw.forEach(i=>{const s="_onData"+Kf(i),n=e[i];Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value(...o){const r=n.apply(this,o);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...o)}),r}})})}function N3(e,t){const i=e._chartjs;if(!i)return;const s=i.listeners,n=s.indexOf(t);n!==-1&&s.splice(n,1),!(s.length>0)&&(sw.forEach(o=>{delete e[o]}),delete e._chartjs)}function nw(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const ow=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function rw(e,t){let i=[],s=!1;return function(...n){i=n,s||(s=!0,ow.call(window,()=>{s=!1,e.apply(t,i)}))}}function WR(e,t){let i;return function(...s){return t?(clearTimeout(i),i=setTimeout(e,t,s)):e.apply(this,s),t}}const aw=e=>e==="start"?"left":e==="end"?"right":"center",Bt=(e,t,i)=>e==="start"?t:e==="end"?i:(t+i)/2,zR=(e,t,i,s)=>e===(s?"left":"right")?i:e==="center"?(t+i)/2:t,fl=e=>e===0||e===1,_3=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ke/i)),G3=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ke/i)+1,Wr={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Ye)+1,easeOutSine:e=>Math.sin(e*Ye),easeInOutSine:e=>-.5*(Math.cos(Ze*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>fl(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>fl(e)?e:_3(e,.075,.3),easeOutElastic:e=>fl(e)?e:G3(e,.075,.3),easeInOutElastic(e){return fl(e)?e:e<.5?.5*_3(e*2,.1125,.45):.5+.5*G3(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Wr.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Wr.easeInBounce(e*2)*.5:Wr.easeOutBounce(e*2-1)*.5+.5};function lw(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function H3(e){return lw(e)?e:new ma(e)}function xd(e){return lw(e)?e:new ma(e).saturate(.5).darken(.1).hexString()}const jR=["x","y","borderWidth","radius","tension"],UR=["color","borderColor","backgroundColor"];function KR(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:UR},numbers:{type:"number",properties:jR}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function $R(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const V3=new Map;function qR(e,t){t=t||{};const i=e+JSON.stringify(t);let s=V3.get(i);return s||(s=new Intl.NumberFormat(e,t),V3.set(i,s)),s}function qf(e,t,i){return qR(t,i).format(e)}const cw={values(e){return Xe(e)?e:""+e},numeric(e,t,i){if(e===0)return"0";const s=this.chart.options.locale;let n,o=e;if(i.length>1){const c=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(c<1e-4||c>1e15)&&(n="scientific"),o=YR(e,i)}const r=op(Math.abs(o)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),qf(e,s,l)},logarithmic(e,t,i){if(e===0)return"0";const s=i[t].significand||e/Math.pow(10,Math.floor(op(e)));return[1,2,3,5,10,15].includes(s)||t>.8*i.length?cw.numeric.call(this,e,t,i):""}};function YR(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e)),i}var uw={formatters:cw};function QR(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,i)=>i.lineWidth,tickColor:(t,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:uw.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Mn=Object.create(null),ap=Object.create(null);function zr(e,t){if(!t)return e;const i=t.split(".");for(let s=0,n=i.length;s<n;++s){const o=i[s];e=e[o]||(e[o]=Object.create(null))}return e}function Fd(e,t,i){return typeof t=="string"?Ca(zr(e,t),i):Ca(zr(e,""),t)}class XR{constructor(t,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>xd(n.backgroundColor),this.hoverBorderColor=(s,n)=>xd(n.borderColor),this.hoverColor=(s,n)=>xd(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(i)}set(t,i){return Fd(this,t,i)}get(t){return zr(this,t)}describe(t,i){return Fd(ap,t,i)}override(t,i){return Fd(Mn,t,i)}route(t,i,s,n){const o=zr(this,t),r=zr(this,s),a="_"+i;Object.defineProperties(o,{[a]:{value:o[i],writable:!0},[i]:{enumerable:!0,get(){const l=this[a],c=r[n];return pe(l)?Object.assign({},c,l):Ce(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(i=>i(this))}}var je=new XR({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[KR,$R,QR]);function JR(e){return!e||Ee(e.size)||Ee(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function W3(e,t,i,s,n){let o=t[n];return o||(o=t[n]=e.measureText(n).width,i.push(n)),o>s&&(s=o),s}function Zs(e,t,i){const s=e.currentDevicePixelRatio,n=i!==0?Math.max(i/2,.5):0;return Math.round((t-n)*s)/s+n}function z3(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function j3(e,t,i,s){dw(e,t,i,s,null)}function dw(e,t,i,s,n){let o,r,a,l,c,u,d,h;const p=t.pointStyle,g=t.rotation,v=t.radius;let S=(g||0)*AR;if(p&&typeof p=="object"&&(o=p.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){e.save(),e.translate(i,s),e.rotate(S),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),e.restore();return}if(!(isNaN(v)||v<=0)){switch(e.beginPath(),p){default:n?e.ellipse(i,s,n/2,v,0,0,Ke):e.arc(i,s,v,0,Ke),e.closePath();break;case"triangle":u=n?n/2:v,e.moveTo(i+Math.sin(S)*u,s-Math.cos(S)*v),S+=L3,e.lineTo(i+Math.sin(S)*u,s-Math.cos(S)*v),S+=L3,e.lineTo(i+Math.sin(S)*u,s-Math.cos(S)*v),e.closePath();break;case"rectRounded":c=v*.516,l=v-c,r=Math.cos(S+Xs)*l,d=Math.cos(S+Xs)*(n?n/2-c:l),a=Math.sin(S+Xs)*l,h=Math.sin(S+Xs)*(n?n/2-c:l),e.arc(i-d,s-a,c,S-Ze,S-Ye),e.arc(i+h,s-r,c,S-Ye,S),e.arc(i+d,s+a,c,S,S+Ye),e.arc(i-h,s+r,c,S+Ye,S+Ze),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*v,u=n?n/2:l,e.rect(i-u,s-l,2*u,2*l);break}S+=Xs;case"rectRot":d=Math.cos(S)*(n?n/2:v),r=Math.cos(S)*v,a=Math.sin(S)*v,h=Math.sin(S)*(n?n/2:v),e.moveTo(i-d,s-a),e.lineTo(i+h,s-r),e.lineTo(i+d,s+a),e.lineTo(i-h,s+r),e.closePath();break;case"crossRot":S+=Xs;case"cross":d=Math.cos(S)*(n?n/2:v),r=Math.cos(S)*v,a=Math.sin(S)*v,h=Math.sin(S)*(n?n/2:v),e.moveTo(i-d,s-a),e.lineTo(i+d,s+a),e.moveTo(i+h,s-r),e.lineTo(i-h,s+r);break;case"star":d=Math.cos(S)*(n?n/2:v),r=Math.cos(S)*v,a=Math.sin(S)*v,h=Math.sin(S)*(n?n/2:v),e.moveTo(i-d,s-a),e.lineTo(i+d,s+a),e.moveTo(i+h,s-r),e.lineTo(i-h,s+r),S+=Xs,d=Math.cos(S)*(n?n/2:v),r=Math.cos(S)*v,a=Math.sin(S)*v,h=Math.sin(S)*(n?n/2:v),e.moveTo(i-d,s-a),e.lineTo(i+d,s+a),e.moveTo(i+h,s-r),e.lineTo(i-h,s+r);break;case"line":r=n?n/2:Math.cos(S)*v,a=Math.sin(S)*v,e.moveTo(i-r,s-a),e.lineTo(i+r,s+a);break;case"dash":e.moveTo(i,s),e.lineTo(i+Math.cos(S)*(n?n/2:v),s+Math.sin(S)*v);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function hw(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function Yf(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Qf(e){e.restore()}function ZR(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Ee(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function e7(e,t,i,s,n){if(n.strikethrough||n.underline){const o=e.measureText(s),r=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=i-o.actualBoundingBoxAscent,c=i+o.actualBoundingBoxDescent,u=n.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=n.decorationWidth||2,e.moveTo(r,u),e.lineTo(a,u),e.stroke()}}function t7(e,t){const i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function Vc(e,t,i,s,n,o={}){const r=Xe(t)?t:[t],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(e.save(),e.font=n.string,ZR(e,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&t7(e,o.backdrop),a&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),Ee(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(c,i,s,o.maxWidth)),e.fillText(c,i,s,o.maxWidth),e7(e,i,s,c,o),s+=Number(n.lineHeight);e.restore()}function Wc(e,t){const{x:i,y:s,w:n,h:o,radius:r}=t;e.arc(i+r.topLeft,s+r.topLeft,r.topLeft,1.5*Ze,Ze,!0),e.lineTo(i,s+o-r.bottomLeft),e.arc(i+r.bottomLeft,s+o-r.bottomLeft,r.bottomLeft,Ze,Ye,!0),e.lineTo(i+n-r.bottomRight,s+o),e.arc(i+n-r.bottomRight,s+o-r.bottomRight,r.bottomRight,Ye,0,!0),e.lineTo(i+n,s+r.topRight),e.arc(i+n-r.topRight,s+r.topRight,r.topRight,0,-Ye,!0),e.lineTo(i+r.topLeft,s)}const i7=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,s7=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function n7(e,t){const i=(""+e).match(i7);if(!i||i[1]==="normal")return t*1.2;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100;break}return t*e}const o7=e=>+e||0;function Xf(e,t){const i={},s=pe(t),n=s?Object.keys(t):t,o=pe(e)?s?r=>Ce(e[r],e[t[r]]):r=>e[r]:()=>e;for(const r of n)i[r]=o7(o(r));return i}function pw(e){return Xf(e,{top:"y",right:"x",bottom:"y",left:"x"})}function co(e){return Xf(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Ci(e){const t=pw(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function kt(e,t){e=e||{},t=t||je.font;let i=Ce(e.size,t.size);typeof i=="string"&&(i=parseInt(i,10));let s=Ce(e.style,t.style);s&&!(""+s).match(s7)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:Ce(e.family,t.family),lineHeight:n7(Ce(e.lineHeight,t.lineHeight),i),size:i,style:s,weight:Ce(e.weight,t.weight),string:""};return n.string=JR(n),n}function gl(e,t,i,s){let n,o,r;for(n=0,o=e.length;n<o;++n)if(r=e[n],r!==void 0&&r!==void 0)return r}function r7(e,t,i){const{min:s,max:n}=e,o=ew(t,(n-s)/2),r=(a,l)=>i&&a===0?0:a+l;return{min:r(s,-Math.abs(o)),max:r(n,o)}}function Ho(e,t){return Object.assign(Object.create(e),t)}function Jf(e,t=[""],i,s,n=()=>e[0]){const o=i||e;typeof s>"u"&&(s=Cw("_fallback",e));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:o,_fallback:s,_getTarget:n,override:a=>Jf([a,...e],t,o,s)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return gw(a,l,()=>f7(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return K3(a).includes(l)},ownKeys(a){return K3(a)},set(a,l,c){const u=a._storage||(a._storage=n());return a[l]=u[l]=c,delete a._keys,!0}})}function ko(e,t,i,s){const n={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:fw(e,s),setContext:o=>ko(e,o,i,s),override:o=>ko(e.override(o),t,i,s)};return new Proxy(n,{deleteProperty(o,r){return delete o[r],delete e[r],!0},get(o,r,a){return gw(o,r,()=>l7(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(o,r){return Reflect.has(e,r)},ownKeys(){return Reflect.ownKeys(e)},set(o,r,a){return e[r]=a,delete o[r],!0}})}function fw(e,t={scriptable:!0,indexable:!0}){const{_scriptable:i=t.scriptable,_indexable:s=t.indexable,_allKeys:n=t.allKeys}=e;return{allKeys:n,scriptable:i,indexable:s,isScriptable:Hs(i)?i:()=>i,isIndexable:Hs(s)?s:()=>s}}const a7=(e,t)=>e?e+Kf(t):t,Zf=(e,t)=>pe(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function gw(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=i();return e[t]=s,s}function l7(e,t,i){const{_proxy:s,_context:n,_subProxy:o,_descriptors:r}=e;let a=s[t];return Hs(a)&&r.isScriptable(t)&&(a=c7(t,a,e,i)),Xe(a)&&a.length&&(a=u7(t,a,e,r.isIndexable)),Zf(t,a)&&(a=ko(a,n,o&&o[t],r)),a}function c7(e,t,i,s){const{_proxy:n,_context:o,_subProxy:r,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(o,r||s);return a.delete(e),Zf(e,l)&&(l=eg(n._scopes,n,e,l)),l}function u7(e,t,i,s){const{_proxy:n,_context:o,_subProxy:r,_descriptors:a}=i;if(typeof o.index<"u"&&s(e))return t[o.index%t.length];if(pe(t[0])){const l=t,c=n._scopes.filter(u=>u!==l);t=[];for(const u of l){const d=eg(c,n,e,u);t.push(ko(d,o,r&&r[e],a))}}return t}function mw(e,t,i){return Hs(e)?e(t,i):e}const d7=(e,t)=>e===!0?t:typeof e=="string"?kn(t,e):void 0;function h7(e,t,i,s,n){for(const o of t){const r=d7(i,o);if(r){e.add(r);const a=mw(r._fallback,i,n);if(typeof a<"u"&&a!==i&&a!==s)return a}else if(r===!1&&typeof s<"u"&&i!==s)return null}return!1}function eg(e,t,i,s){const n=t._rootScopes,o=mw(t._fallback,i,s),r=[...e,...n],a=new Set;a.add(s);let l=U3(a,r,i,o||i,s);return l===null||typeof o<"u"&&o!==i&&(l=U3(a,r,o,l,s),l===null)?!1:Jf(Array.from(a),[""],n,o,()=>p7(t,i,s))}function U3(e,t,i,s,n){for(;i;)i=h7(e,t,i,s,n);return i}function p7(e,t,i){const s=e._getTarget();t in s||(s[t]={});const n=s[t];return Xe(n)&&pe(i)?i:n||{}}function f7(e,t,i,s){let n;for(const o of t)if(n=Cw(a7(o,e),i),typeof n<"u")return Zf(e,n)?eg(i,s,e,n):n}function Cw(e,t){for(const i of t){if(!i)continue;const s=i[e];if(typeof s<"u")return s}}function K3(e){let t=e._keys;return t||(t=e._keys=g7(e._scopes)),t}function g7(e){const t=new Set;for(const i of e)for(const s of Object.keys(i).filter(n=>!n.startsWith("_")))t.add(s);return Array.from(t)}function tg(){return typeof window<"u"&&typeof document<"u"}function ig(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function zc(e,t,i){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[i])):s=e,s}const Iu=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function m7(e,t){return Iu(e).getPropertyValue(t)}const C7=["top","right","bottom","left"];function Cn(e,t,i){const s={};i=i?"-"+i:"";for(let n=0;n<4;n++){const o=C7[n];s[o]=parseFloat(e[t+"-"+o+i])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const v7=(e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot);function S7(e,t){const i=e.touches,s=i&&i.length?i[0]:e,{offsetX:n,offsetY:o}=s;let r=!1,a,l;if(v7(n,o,e.target))a=n,l=o;else{const c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function nn(e,t){if("native"in e)return e;const{canvas:i,currentDevicePixelRatio:s}=t,n=Iu(i),o=n.boxSizing==="border-box",r=Cn(n,"padding"),a=Cn(n,"border","width"),{x:l,y:c,box:u}=S7(e,i),d=r.left+(u&&a.left),h=r.top+(u&&a.top);let{width:p,height:g}=t;return o&&(p-=r.width+a.width,g-=r.height+a.height),{x:Math.round((l-d)/p*i.width/s),y:Math.round((c-h)/g*i.height/s)}}function w7(e,t,i){let s,n;if(t===void 0||i===void 0){const o=e&&ig(e);if(!o)t=e.clientWidth,i=e.clientHeight;else{const r=o.getBoundingClientRect(),a=Iu(o),l=Cn(a,"border","width"),c=Cn(a,"padding");t=r.width-c.width-l.width,i=r.height-c.height-l.height,s=zc(a.maxWidth,o,"clientWidth"),n=zc(a.maxHeight,o,"clientHeight")}}return{width:t,height:i,maxWidth:s||_c,maxHeight:n||_c}}const ml=e=>Math.round(e*10)/10;function y7(e,t,i,s){const n=Iu(e),o=Cn(n,"margin"),r=zc(n.maxWidth,e,"clientWidth")||_c,a=zc(n.maxHeight,e,"clientHeight")||_c,l=w7(e,t,i);let{width:c,height:u}=l;if(n.boxSizing==="content-box"){const h=Cn(n,"border","width"),p=Cn(n,"padding");c-=p.width+h.width,u-=p.height+h.height}return c=Math.max(0,c-o.width),u=Math.max(0,s?c/s:u-o.height),c=ml(Math.min(c,r,l.maxWidth)),u=ml(Math.min(u,a,l.maxHeight)),c&&!u&&(u=ml(c/2)),(t!==void 0||i!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=ml(Math.floor(u*s))),{width:c,height:u}}function $3(e,t,i){const s=t||1,n=Math.floor(e.height*s),o=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const r=e.canvas;return r.style&&(i||!r.style.height&&!r.style.width)&&(r.style.height=`${e.height}px`,r.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||r.height!==n||r.width!==o?(e.currentDevicePixelRatio=s,r.height=n,r.width=o,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const R7=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};tg()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function q3(e,t){const i=m7(e,t),s=i&&i.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const b7=function(e,t){return{x(i){return e+e+t-i},setWidth(i){t=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,s){return i-s},leftForLtr(i,s){return i-s}}},P7=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function uo(e,t,i){return e?b7(t,i):P7()}function vw(e,t){let i,s;(t==="ltr"||t==="rtl")&&(i=e.canvas.style,s=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=s)}function Sw(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class x7{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,i,s,n){const o=i.listeners[n],r=i.duration;o.forEach(a=>a({chart:t,initial:i.initial,numSteps:r,currentStep:Math.min(s-i.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=ow.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let i=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;const o=s.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(o[r]=o[o.length-1],o.pop());a&&(n.draw(),this._notify(n,s,t,"progress")),o.length||(s.running=!1,this._notify(n,s,t,"complete"),s.initial=!1),i+=o.length}),this._lastDate=t,i===0&&(this._running=!1)}_getAnims(t){const i=this._charts;let s=i.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(t,s)),s}listen(t,i,s){this._getAnims(t).listeners[i].push(s)}add(t,i){!i||!i.length||this._getAnims(t).items.push(...i)}has(t){return this._getAnims(t).items.length>0}start(t){const i=this._charts.get(t);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const i=this._charts.get(t);return!(!i||!i.running||!i.items.length)}stop(t){const i=this._charts.get(t);if(!i||!i.items.length)return;const s=i.items;let n=s.length-1;for(;n>=0;--n)s[n].cancel();i.items=[],this._notify(t,i,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Gi=new x7;const Y3="transparent",F7={boolean(e,t,i){return i>.5?t:e},color(e,t,i){const s=H3(e||Y3),n=s.valid&&H3(t||Y3);return n&&n.valid?n.mix(s,i).hexString():t},number(e,t,i){return e+(t-e)*i}};class E7{constructor(t,i,s,n){const o=i[s];n=gl([t.to,n,o,t.from]);const r=gl([t.from,o,n]);this._active=!0,this._fn=t.fn||F7[t.type||typeof r],this._easing=Wr[t.easing]||Wr.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=i,this._prop=s,this._from=r,this._to=n,this._promises=void 0}active(){return this._active}update(t,i,s){if(this._active){this._notify(!1);const n=this._target[this._prop],o=s-this._start,r=this._duration-o;this._start=s,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=gl([t.to,i,n,t.from]),this._from=gl([t.from,n,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const i=t-this._start,s=this._duration,n=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||i<s),!this._active){this._target[n]=a,this._notify(!0);return}if(i<0){this._target[n]=o;return}l=i/s%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(o,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((i,s)=>{t.push({res:i,rej:s})})}_notify(t){const i=t?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][i]()}}class ww{constructor(t,i){this._chart=t,this._properties=new Map,this.configure(i)}configure(t){if(!pe(t))return;const i=Object.keys(je.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const o=t[n];if(!pe(o))return;const r={};for(const a of i)r[a]=o[a];(Xe(o.properties)&&o.properties||[n]).forEach(a=>{(a===n||!s.has(a))&&s.set(a,r)})})}_animateOptions(t,i){const s=i.options,n=M7(t,s);if(!n)return[];const o=this._createAnimations(n,s);return s.$shared&&k7(t.options.$animations,s).then(()=>{t.options=s},()=>{}),o}_createAnimations(t,i){const s=this._properties,n=[],o=t.$animations||(t.$animations={}),r=Object.keys(i),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){n.push(...this._animateOptions(t,i));continue}const u=i[c];let d=o[c];const h=s.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){t[c]=u;continue}o[c]=d=new E7(h,t,c,u),n.push(d)}return n}update(t,i){if(this._properties.size===0){Object.assign(t,i);return}const s=this._createAnimations(t,i);if(s.length)return Gi.add(this._chart,s),!0}}function k7(e,t){const i=[],s=Object.keys(t);for(let n=0;n<s.length;n++){const o=e[s[n]];o&&o.active()&&i.push(o.wait())}return Promise.all(i)}function M7(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function Q3(e,t){const i=e&&e.options||{},s=i.reverse,n=i.min===void 0?t:0,o=i.max===void 0?t:0;return{start:s?o:n,end:s?n:o}}function D7(e,t,i){if(i===!1)return!1;const s=Q3(e,i),n=Q3(t,i);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}function T7(e){let t,i,s,n;return pe(e)?(t=e.top,i=e.right,s=e.bottom,n=e.left):t=i=s=n=e,{top:t,right:i,bottom:s,left:n,disabled:e===!1}}function yw(e,t){const i=[],s=e._getSortedDatasetMetas(t);let n,o;for(n=0,o=s.length;n<o;++n)i.push(s[n].index);return i}function X3(e,t,i,s={}){const n=e.keys,o=s.mode==="single";let r,a,l,c;if(t===null)return;let u=!1;for(r=0,a=n.length;r<a;++r){if(l=+n[r],l===i){if(u=!0,s.all)continue;break}c=e.values[l],oi(c)&&(o||t===0||Bs(t)===Bs(c))&&(t+=c)}return!u&&!s.all?0:t}function A7(e,t){const{iScale:i,vScale:s}=t,n=i.axis==="x"?"x":"y",o=s.axis==="x"?"x":"y",r=Object.keys(e),a=new Array(r.length);let l,c,u;for(l=0,c=r.length;l<c;++l)u=r[l],a[l]={[n]:u,[o]:e[u]};return a}function Ed(e,t){const i=e&&e.options.stacked;return i||i===void 0&&t.stack!==void 0}function I7(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}function L7(e){const{min:t,max:i,minDefined:s,maxDefined:n}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:n?i:Number.POSITIVE_INFINITY}}function O7(e,t,i){const s=e[t]||(e[t]={});return s[i]||(s[i]={})}function J3(e,t,i,s){for(const n of t.getMatchingVisibleMetas(s).reverse()){const o=e[n.index];if(i&&o>0||!i&&o<0)return n.index}return null}function Z3(e,t){const{chart:i,_cachedMeta:s}=e,n=i._stacks||(i._stacks={}),{iScale:o,vScale:r,index:a}=s,l=o.axis,c=r.axis,u=I7(o,r,s),d=t.length;let h;for(let p=0;p<d;++p){const g=t[p],{[l]:v,[c]:S}=g,m=g._stacks||(g._stacks={});h=m[c]=O7(n,u,v),h[a]=S,h._top=J3(h,r,!0,s.type),h._bottom=J3(h,r,!1,s.type);const C=h._visualValues||(h._visualValues={});C[a]=S}}function kd(e,t){const i=e.scales;return Object.keys(i).filter(s=>i[s].axis===t).shift()}function B7(e,t){return Ho(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function N7(e,t,i){return Ho(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}function ar(e,t){const i=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const n of t){const o=n._stacks;if(!o||o[s]===void 0||o[s][i]===void 0)return;delete o[s][i],o[s]._visualValues!==void 0&&o[s]._visualValues[i]!==void 0&&delete o[s]._visualValues[i]}}}const Md=e=>e==="reset"||e==="none",eC=(e,t)=>t?e:Object.assign({},e),_7=(e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:yw(i,!0),values:null};class ho{constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Ed(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ar(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,i=this._cachedMeta,s=this.getDataset(),n=(d,h,p,g)=>d==="x"?h:d==="r"?g:p,o=i.xAxisID=Ce(s.xAxisID,kd(t,"x")),r=i.yAxisID=Ce(s.yAxisID,kd(t,"y")),a=i.rAxisID=Ce(s.rAxisID,kd(t,"r")),l=i.indexAxis,c=i.iAxisID=n(l,o,r,a),u=i.vAxisID=n(l,r,o,a);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(r),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(c),i.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&N3(this._data,this),t._stacked&&ar(t)}_dataCheck(){const t=this.getDataset(),i=t.data||(t.data=[]),s=this._data;if(pe(i)){const n=this._cachedMeta;this._data=A7(i,n)}else if(s!==i){if(s){N3(s,this);const n=this._cachedMeta;ar(n),n._parsed=[]}i&&Object.isExtensible(i)&&VR(i,this),this._syncList=[],this._data=i}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const i=this._cachedMeta,s=this.getDataset();let n=!1;this._dataCheck();const o=i._stacked;i._stacked=Ed(i.vScale,i),i.stack!==s.stack&&(n=!0,ar(i),i.stack=s.stack),this._resyncElements(t),(n||o!==i._stacked)&&(Z3(this,i._parsed),i._stacked=Ed(i.vScale,i))}configure(){const t=this.chart.config,i=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){const{_cachedMeta:s,_data:n}=this,{iScale:o,_stacked:r}=s,a=o.axis;let l=t===0&&i===n.length?!0:s._sorted,c=t>0&&s._parsed[t-1],u,d,h;if(this._parsing===!1)s._parsed=n,s._sorted=!0,h=n;else{Xe(n[t])?h=this.parseArrayData(s,n,t,i):pe(n[t])?h=this.parseObjectData(s,n,t,i):h=this.parsePrimitiveData(s,n,t,i);const p=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<i;++u)s._parsed[u+t]=d=h[u],l&&(p()&&(l=!1),c=d);s._sorted=l}r&&Z3(this,h)}parsePrimitiveData(t,i,s,n){const{iScale:o,vScale:r}=t,a=o.axis,l=r.axis,c=o.getLabels(),u=o===r,d=new Array(n);let h,p,g;for(h=0,p=n;h<p;++h)g=h+s,d[h]={[a]:u||o.parse(c[g],g),[l]:r.parse(i[g],g)};return d}parseArrayData(t,i,s,n){const{xScale:o,yScale:r}=t,a=new Array(n);let l,c,u,d;for(l=0,c=n;l<c;++l)u=l+s,d=i[u],a[l]={x:o.parse(d[0],u),y:r.parse(d[1],u)};return a}parseObjectData(t,i,s,n){const{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(n);let u,d,h,p;for(u=0,d=n;u<d;++u)h=u+s,p=i[h],c[u]={x:o.parse(kn(p,a),h),y:r.parse(kn(p,l),h)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,s){const n=this.chart,o=this._cachedMeta,r=i[t.axis],a={keys:yw(n,!0),values:i._stacks[t.axis]._visualValues};return X3(a,r,o.index,{mode:s})}updateRangeFromParsed(t,i,s,n){const o=s[i.axis];let r=o===null?NaN:o;const a=n&&s._stacks[i.axis];n&&a&&(n.values=a,r=X3(n,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,i){const s=this._cachedMeta,n=s._parsed,o=s._sorted&&t===s.iScale,r=n.length,a=this._getOtherScale(t),l=_7(i,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=L7(a);let h,p;function g(){p=n[h];const v=p[a.axis];return!oi(p[t.axis])||u>v||d<v}for(h=0;h<r&&!(!g()&&(this.updateRangeFromParsed(c,t,p,l),o));++h);if(o){for(h=r-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(c,t,p,l);break}}return c}getAllParsedValues(t){const i=this._cachedMeta._parsed,s=[];let n,o,r;for(n=0,o=i.length;n<o;++n)r=i[n][t.axis],oi(r)&&s.push(r);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const i=this._cachedMeta,s=i.iScale,n=i.vScale,o=this.getParsed(t);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(t){const i=this._cachedMeta;this.update(t||"default"),i._clip=T7(Ce(this.options.clip,D7(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,i=this.chart,s=this._cachedMeta,n=s.data||[],o=i.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||n.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,o,a,l),u=a;u<a+l;++u){const d=n[u];d.hidden||(d.active&&c?r.push(d):d.draw(t,o))}for(u=0;u<r.length;++u)r[u].draw(t,o)}getStyle(t,i){const s=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,i,s){const n=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const r=this._cachedMeta.data[t];o=r.$context||(r.$context=N7(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=n.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=B7(this.chart.getContext(),this.index)),o.dataset=n,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=s,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",s){const n=i==="active",o=this._cachedDataOpts,r=t+"-"+i,a=o[r],l=this.enableOptionSharing&&va(s);if(a)return eC(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),d=n?[`${t}Hover`,"hover",t,""]:[t,""],h=c.getOptionScopes(this.getDataset(),u),p=Object.keys(je.elements[t]),g=()=>this.getContext(s,n,i),v=c.resolveNamedOptions(h,p,g,d);return v.$shared&&(v.$shared=l,o[r]=Object.freeze(eC(v,l))),v}_resolveAnimations(t,i,s){const n=this.chart,o=this._cachedDataOpts,r=`animation-${i}`,a=o[r];if(a)return a;let l;if(n.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,i),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(t,s,i))}const c=new ww(n,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||Md(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){const s=this.resolveDataElementOptions(t,i),n=this._sharedOptions,o=this.getSharedOptions(s),r=this.includeOptions(i,o)||o!==n;return this.updateSharedOptions(o,i,s),{sharedOptions:o,includeOptions:r}}updateElement(t,i,s,n){Md(n)?Object.assign(t,s):this._resolveAnimations(i,n).update(t,s)}updateSharedOptions(t,i,s){t&&!Md(i)&&this._resolveAnimations(void 0,i).update(t,s)}_setStyle(t,i,s,n){t.active=n;const o=this.getStyle(i,n);this._resolveAnimations(i,s,n).update(t,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,i,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const i=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const n=s.length,o=i.length,r=Math.min(o,n);r&&this.parse(0,r),o>n?this._insertElements(n,o-n,t):o<n&&this._removeElements(o,n-o)}_insertElements(t,i,s=!0){const n=this._cachedMeta,o=n.data,r=t+i;let a;const l=c=>{for(c.length+=i,a=c.length-1;a>=r;a--)c[a]=c[a-i]};for(l(o),a=t;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(n._parsed),this.parse(t,i),s&&this.updateElements(o,t,i,"reset")}updateElements(t,i,s,n){}_removeElements(t,i){const s=this._cachedMeta;if(this._parsing){const n=s._parsed.splice(t,i);s._stacked&&ar(s,n)}s.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[i,s,n]=t;this[i](s,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}se(ho,"defaults",{}),se(ho,"datasetElementType",null),se(ho,"dataElementType",null);function G7(e,t){if(!e._cache.$bar){const i=e.getMatchingVisibleMetas(t);let s=[];for(let n=0,o=i.length;n<o;n++)s=s.concat(i[n].controller.getAllParsedValues(e));e._cache.$bar=nw(s.sort((n,o)=>n-o))}return e._cache.$bar}function H7(e){const t=e.iScale,i=G7(t,e.type);let s=t._length,n,o,r,a;const l=()=>{r===32767||r===-32768||(va(a)&&(s=Math.min(s,Math.abs(r-a)||s)),a=r)};for(n=0,o=i.length;n<o;++n)r=t.getPixelForValue(i[n]),l();for(a=void 0,n=0,o=t.ticks.length;n<o;++n)r=t.getPixelForTick(n),l();return s}function V7(e,t,i,s){const n=i.barThickness;let o,r;return Ee(n)?(o=t.min*i.categoryPercentage,r=i.barPercentage):(o=n*s,r=1),{chunk:o/s,ratio:r,start:t.pixels[e]-o/2}}function W7(e,t,i,s){const n=t.pixels,o=n[e];let r=e>0?n[e-1]:null,a=e<n.length-1?n[e+1]:null;const l=i.categoryPercentage;r===null&&(r=o-(a===null?t.end-t.start:a-o)),a===null&&(a=o+o-r);const c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/s,ratio:i.barPercentage,start:c}}function z7(e,t,i,s){const n=i.parse(e[0],s),o=i.parse(e[1],s),r=Math.min(n,o),a=Math.max(n,o);let l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),t[i.axis]=c,t._custom={barStart:l,barEnd:c,start:n,end:o,min:r,max:a}}function Rw(e,t,i,s){return Xe(e)?z7(e,t,i,s):t[i.axis]=i.parse(e,s),t}function tC(e,t,i,s){const n=e.iScale,o=e.vScale,r=n.getLabels(),a=n===o,l=[];let c,u,d,h;for(c=i,u=i+s;c<u;++c)h=t[c],d={},d[n.axis]=a||n.parse(r[c],c),l.push(Rw(h,d,o,c));return l}function Dd(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function j7(e,t,i){return e!==0?Bs(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}function U7(e){let t,i,s,n,o;return e.horizontal?(t=e.base>e.x,i="left",s="right"):(t=e.base<e.y,i="bottom",s="top"),t?(n="end",o="start"):(n="start",o="end"),{start:i,end:s,reverse:t,top:n,bottom:o}}function K7(e,t,i,s){let n=t.borderSkipped;const o={};if(!n){e.borderSkipped=o;return}if(n===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:c,bottom:u}=U7(e);n==="middle"&&i&&(e.enableBorderRadius=!0,(i._top||0)===s?n=c:(i._bottom||0)===s?n=u:(o[iC(u,r,a,l)]=!0,n=c)),o[iC(n,r,a,l)]=!0,e.borderSkipped=o}function iC(e,t,i,s){return s?(e=$7(e,t,i),e=sC(e,i,t)):e=sC(e,t,i),e}function $7(e,t,i){return e===t?i:e===i?t:e}function sC(e,t,i){return e==="start"?t:e==="end"?i:e}function q7(e,{inflateAmount:t},i){e.inflateAmount=t==="auto"?i===1?.33:0:t}class Ql extends ho{parsePrimitiveData(t,i,s,n){return tC(t,i,s,n)}parseArrayData(t,i,s,n){return tC(t,i,s,n)}parseObjectData(t,i,s,n){const{iScale:o,vScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?a:l,u=r.axis==="x"?a:l,d=[];let h,p,g,v;for(h=s,p=s+n;h<p;++h)v=i[h],g={},g[o.axis]=o.parse(kn(v,c),h),d.push(Rw(kn(v,u),g,r,h));return d}updateRangeFromParsed(t,i,s,n){super.updateRangeFromParsed(t,i,s,n);const o=s._custom;o&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const i=this._cachedMeta,{iScale:s,vScale:n}=i,o=this.getParsed(t),r=o._custom,a=Dd(r)?"["+r.start+", "+r.end+"]":""+n.getLabelForValue(o[n.axis]);return{label:""+s.getLabelForValue(o[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,s,n){const o=n==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(i,n);for(let p=i;p<i+s;p++){const g=this.getParsed(p),v=o||Ee(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),S=this._calculateBarIndexPixels(p,u),m=(g._stacks||{})[a.axis],C={horizontal:c,base:v.base,enableBorderRadius:!m||Dd(g._custom)||r===m._top||r===m._bottom,x:c?v.head:S.center,y:c?S.center:v.head,height:c?S.size:Math.abs(v.size),width:c?Math.abs(v.size):S.size};h&&(C.options=d||this.resolveDataElementOptions(p,t[p].active?"active":n));const w=C.options||t[p].options;K7(C,w,m,r),q7(C,w,u.ratio),this.updateElement(t[p],p,C,n)}}_getStacks(t,i){const{iScale:s}=this._cachedMeta,n=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),o=s.options.stacked,r=[],a=this._cachedMeta.controller.getParsed(i),l=a&&a[s.axis],c=u=>{const d=u._parsed.find(p=>p[s.axis]===l),h=d&&d[u.vScale.axis];if(Ee(h)||isNaN(h))return!0};for(const u of n)if(!(i!==void 0&&c(u))&&((o===!1||r.indexOf(u.stack)===-1||o===void 0&&u.stack===void 0)&&r.push(u.stack),u.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,s){const n=this._getStacks(t,s),o=i!==void 0?n.indexOf(i):-1;return o===-1?n.length-1:o}_getRuler(){const t=this.options,i=this._cachedMeta,s=i.iScale,n=[];let o,r;for(o=0,r=i.data.length;o<r;++o)n.push(s.getPixelForValue(this.getParsed(o)[s.axis],o));const a=t.barThickness;return{min:a||H7(i),pixels:n,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:i,_stacked:s,index:n},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(t),c=l._custom,u=Dd(c);let d=l[i.axis],h=0,p=s?this.applyStack(i,l,s):d,g,v;p!==d&&(h=p-d,p=d),u&&(d=c.barStart,p=c.barEnd-c.barStart,d!==0&&Bs(d)!==Bs(c.barEnd)&&(h=0),h+=d);const S=!Ee(o)&&!u?o:h;let m=i.getPixelForValue(S);if(this.chart.getDataVisibility(t)?g=i.getPixelForValue(h+p):g=m,v=g-m,Math.abs(v)<r){v=j7(v,i,a)*r,d===a&&(m-=v/2);const C=i.getPixelForDecimal(0),w=i.getPixelForDecimal(1),R=Math.min(C,w),b=Math.max(C,w);m=Math.max(Math.min(m,b),R),g=m+v,s&&!u&&(l._stacks[i.axis]._visualValues[n]=i.getValueForPixel(g)-i.getValueForPixel(m))}if(m===i.getPixelForValue(a)){const C=Bs(v)*i.getLineWidthForValue(a)/2;m+=C,v-=C}return{size:v,base:m,head:g,center:g+v/2}}_calculateBarIndexPixels(t,i){const s=i.scale,n=this.options,o=n.skipNull,r=Ce(n.maxBarThickness,1/0);let a,l;if(i.grouped){const c=o?this._getStackCount(t):i.stackCount,u=n.barThickness==="flex"?W7(t,i,n,c):V7(t,i,n,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);a=u.start+u.chunk*d+u.chunk/2,l=Math.min(r,u.chunk*u.ratio)}else a=s.getPixelForValue(this.getParsed(t)[s.axis],t),l=Math.min(r,i.min*i.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,i=t.vScale,s=t.data,n=s.length;let o=0;for(;o<n;++o)this.getParsed(o)[i.axis]!==null&&!s[o].hidden&&s[o].draw(this._ctx)}}se(Ql,"id","bar"),se(Ql,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),se(Ql,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Y7(e,t,i){let s=1,n=1,o=0,r=0;if(t<Ke){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),p=(w,R,b)=>Hc(w,a,l,!0)?1:Math.max(R,R*i,b,b*i),g=(w,R,b)=>Hc(w,a,l,!0)?-1:Math.min(R,R*i,b,b*i),v=p(0,c,d),S=p(Ye,u,h),m=g(Ze,c,d),C=g(Ze+Ye,u,h);s=(v-m)/2,n=(S-C)/2,o=-(v+m)/2,r=-(S+C)/2}return{ratioX:s,ratioY:n,offsetX:o,offsetY:r}}class Pr extends ho{constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){const s=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=s;else{let o=l=>+s[l];if(pe(s[t])){const{key:l="value"}=this._parsing;o=c=>+kn(s[c],l)}let r,a;for(r=t,a=t+i;r<a;++r)n._parsed[r]=o(r)}}_getRotation(){return $i(this.options.rotation-90)}_getCircumference(){return $i(this.options.circumference)}_getRotationExtents(){let t=Ke,i=-Ke;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const n=this.chart.getDatasetMeta(s).controller,o=n._getRotation(),r=n._getCircumference();t=Math.min(t,o),i=Math.max(i,o+r)}return{rotation:t,circumference:i-t}}update(t){const i=this.chart,{chartArea:s}=i,n=this._cachedMeta,o=n.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-r)/2,0),l=Math.min(FR(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:h,ratioY:p,offsetX:g,offsetY:v}=Y7(d,u,l),S=(s.width-r)/h,m=(s.height-r)/p,C=Math.max(Math.min(S,m)/2,0),w=ew(this.options.radius,C),R=Math.max(w*l,0),b=(w-R)/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=v*w,n.total=this.calculateTotal(),this.outerRadius=w-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,i){const s=this.options,n=this._cachedMeta,o=this._getCircumference();return i&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*o/Ke)}updateElements(t,i,s,n){const o=n==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,h=o&&c.animateScale,p=h?0:this.innerRadius,g=h?0:this.outerRadius,{sharedOptions:v,includeOptions:S}=this._getSharedOptions(i,n);let m=this._getRotation(),C;for(C=0;C<i;++C)m+=this._circumference(C,o);for(C=i;C<i+s;++C){const w=this._circumference(C,o),R=t[C],b={x:u+this.offsetX,y:d+this.offsetY,startAngle:m,endAngle:m+w,circumference:w,outerRadius:g,innerRadius:p};S&&(b.options=v||this.resolveDataElementOptions(C,R.active?"active":n)),m+=w,this.updateElement(R,C,b,n)}}calculateTotal(){const t=this._cachedMeta,i=t.data;let s=0,n;for(n=0;n<i.length;n++){const o=t._parsed[n];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(n)&&!i[n].hidden&&(s+=Math.abs(o))}return s}calculateCircumference(t){const i=this._cachedMeta.total;return i>0&&!isNaN(t)?Ke*(Math.abs(t)/i):0}getLabelAndValue(t){const i=this._cachedMeta,s=this.chart,n=s.data.labels||[],o=qf(i._parsed[t],s.options.locale);return{label:n[t]||"",value:o}}getMaxBorderWidth(t){let i=0;const s=this.chart;let n,o,r,a,l;if(!t){for(n=0,o=s.data.datasets.length;n<o;++n)if(s.isDatasetVisible(n)){r=s.getDatasetMeta(n),t=r.data,a=r.controller;break}}if(!t)return 0;for(n=0,o=t.length;n<o;++n)l=a.resolveDataElementOptions(n),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let s=0,n=t.length;s<n;++s){const o=this.resolveDataElementOptions(s);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(i+=this._getRingWeight(s));return i}_getRingWeight(t){return Math.max(Ce(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}se(Pr,"id","doughnut"),se(Pr,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),se(Pr,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),se(Pr,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const i=t.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:s,color:n}}=t.legend.options;return i.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,i,s){s.chart.toggleDataVisibility(i.index),s.chart.update()}}}});class lp extends Pr{}se(lp,"id","pie"),se(lp,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function en(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class sg{constructor(t){se(this,"options");this.options=t||{}}static override(t){Object.assign(sg.prototype,t)}init(){}formats(){return en()}parse(){return en()}format(){return en()}add(){return en()}diff(){return en()}startOf(){return en()}endOf(){return en()}}var Q7={_date:sg};function X7(e,t,i,s){const{controller:n,data:o,_sorted:r}=e,a=n._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&r&&o.length){const l=a._reversePixels?GR:rp;if(s){if(n._sharedOptions){const c=o[0],u=typeof c.getRange=="function"&&c.getRange(t);if(u){const d=l(o,t,i-u),h=l(o,t,i+u);return{lo:d.lo,hi:h.hi}}}}else return l(o,t,i)}return{lo:0,hi:o.length-1}}function _a(e,t,i,s,n){const o=e.getSortedVisibleDatasetMetas(),r=i[t];for(let a=0,l=o.length;a<l;++a){const{index:c,data:u}=o[a],{lo:d,hi:h}=X7(o[a],t,r,n);for(let p=d;p<=h;++p){const g=u[p];g.skip||s(g,c,p)}}}function J7(e){const t=e.indexOf("x")!==-1,i=e.indexOf("y")!==-1;return function(s,n){const o=t?Math.abs(s.x-n.x):0,r=i?Math.abs(s.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function Td(e,t,i,s,n){const o=[];return!n&&!e.isPointInArea(t)||_a(e,i,t,function(a,l,c){!n&&!hw(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function Z7(e,t,i,s){let n=[];function o(r,a,l){const{startAngle:c,endAngle:u}=r.getProps(["startAngle","endAngle"],s),{angle:d}=iw(r,{x:t.x,y:t.y});Hc(d,c,u)&&n.push({element:r,datasetIndex:a,index:l})}return _a(e,i,t,o),n}function eb(e,t,i,s,n,o){let r=[];const a=J7(i);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const p=u.inRange(t.x,t.y,n);if(s&&!p)return;const g=u.getCenterPoint(n);if(!(!!o||e.isPointInArea(g))&&!p)return;const S=a(t,g);S<l?(r=[{element:u,datasetIndex:d,index:h}],l=S):S===l&&r.push({element:u,datasetIndex:d,index:h})}return _a(e,i,t,c),r}function Ad(e,t,i,s,n,o){return!o&&!e.isPointInArea(t)?[]:i==="r"&&!s?Z7(e,t,i,n):eb(e,t,i,s,n,o)}function nC(e,t,i,s,n){const o=[],r=i==="x"?"inXRange":"inYRange";let a=!1;return _a(e,i,t,(l,c,u)=>{l[r]&&l[r](t[i],n)&&(o.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,n))}),s&&!a?[]:o}var tb={evaluateInteractionItems:_a,modes:{index(e,t,i,s){const n=nn(t,e),o=i.axis||"x",r=i.includeInvisible||!1,a=i.intersect?Td(e,n,o,s,r):Ad(e,n,o,!1,s,r),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,i,s){const n=nn(t,e),o=i.axis||"xy",r=i.includeInvisible||!1;let a=i.intersect?Td(e,n,o,s,r):Ad(e,n,o,!1,s,r);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,i,s){const n=nn(t,e),o=i.axis||"xy",r=i.includeInvisible||!1;return Td(e,n,o,s,r)},nearest(e,t,i,s){const n=nn(t,e),o=i.axis||"xy",r=i.includeInvisible||!1;return Ad(e,n,o,i.intersect,s,r)},x(e,t,i,s){const n=nn(t,e);return nC(e,n,"x",i.intersect,s)},y(e,t,i,s){const n=nn(t,e);return nC(e,n,"y",i.intersect,s)}}};const bw=["left","top","right","bottom"];function lr(e,t){return e.filter(i=>i.pos===t)}function oC(e,t){return e.filter(i=>bw.indexOf(i.pos)===-1&&i.box.axis===t)}function cr(e,t){return e.sort((i,s)=>{const n=t?s:i,o=t?i:s;return n.weight===o.weight?n.index-o.index:n.weight-o.weight})}function ib(e){const t=[];let i,s,n,o,r,a;for(i=0,s=(e||[]).length;i<s;++i)n=e[i],{position:o,options:{stack:r,stackWeight:a=1}}=n,t.push({index:i,box:n,pos:o,horizontal:n.isHorizontal(),weight:n.weight,stack:r&&o+r,stackWeight:a});return t}function sb(e){const t={};for(const i of e){const{stack:s,pos:n,stackWeight:o}=i;if(!s||!bw.includes(n))continue;const r=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function nb(e,t){const i=sb(e),{vBoxMaxWidth:s,hBoxMaxHeight:n}=t;let o,r,a;for(o=0,r=e.length;o<r;++o){a=e[o];const{fullSize:l}=a.box,c=i[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&t.availableWidth,a.height=n):(a.width=s,a.height=u?u*n:l&&t.availableHeight)}return i}function ob(e){const t=ib(e),i=cr(t.filter(c=>c.box.fullSize),!0),s=cr(lr(t,"left"),!0),n=cr(lr(t,"right")),o=cr(lr(t,"top"),!0),r=cr(lr(t,"bottom")),a=oC(t,"x"),l=oC(t,"y");return{fullSize:i,leftAndTop:s.concat(o),rightAndBottom:n.concat(l).concat(r).concat(a),chartArea:lr(t,"chartArea"),vertical:s.concat(n).concat(l),horizontal:o.concat(r).concat(a)}}function rC(e,t,i,s){return Math.max(e[i],t[i])+Math.max(e[s],t[s])}function Pw(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function rb(e,t,i,s){const{pos:n,box:o}=i,r=e.maxPadding;if(!pe(n)){i.size&&(e[n]-=i.size);const d=s[i.stack]||{size:0,count:1};d.size=Math.max(d.size,i.horizontal?o.height:o.width),i.size=d.size/d.count,e[n]+=i.size}o.getPadding&&Pw(r,o.getPadding());const a=Math.max(0,t.outerWidth-rC(r,e,"left","right")),l=Math.max(0,t.outerHeight-rC(r,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:c,other:u}:{same:u,other:c}}function ab(e){const t=e.maxPadding;function i(s){const n=Math.max(t[s]-e[s],0);return e[s]+=n,n}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}function lb(e,t){const i=t.maxPadding;function s(n){const o={left:0,top:0,right:0,bottom:0};return n.forEach(r=>{o[r]=Math.max(t[r],i[r])}),o}return s(e?["left","right"]:["top","bottom"])}function xr(e,t,i,s){const n=[];let o,r,a,l,c,u;for(o=0,r=e.length,c=0;o<r;++o){a=e[o],l=a.box,l.update(a.width||t.w,a.height||t.h,lb(a.horizontal,t));const{same:d,other:h}=rb(t,i,a,s);c|=d&&n.length,u=u||h,l.fullSize||n.push(a)}return c&&xr(n,t,i,s)||u}function Cl(e,t,i,s,n){e.top=i,e.left=t,e.right=t+s,e.bottom=i+n,e.width=s,e.height=n}function aC(e,t,i,s){const n=i.padding;let{x:o,y:r}=t;for(const a of e){const l=a.box,c=s[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=t.w*u,h=c.size||l.height;va(c.start)&&(r=c.start),l.fullSize?Cl(l,n.left,r,i.outerWidth-n.right-n.left,h):Cl(l,t.left+c.placed,r,d,h),c.start=r,c.placed+=d,r=l.bottom}else{const d=t.h*u,h=c.size||l.width;va(c.start)&&(o=c.start),l.fullSize?Cl(l,o,n.top,h,i.outerHeight-n.bottom-n.top):Cl(l,o,t.top+c.placed,h,d),c.start=o,c.placed+=d,o=l.right}}t.x=o,t.y=r}var Ps={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(i){t.draw(i)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;i!==-1&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,s){if(!e)return;const n=Ci(e.options.layout.padding),o=Math.max(t-n.width,0),r=Math.max(i-n.height,0),a=ob(e.boxes),l=a.vertical,c=a.horizontal;ve(e.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=l.reduce((v,S)=>S.box.options&&S.box.options.display===!1?v:v+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:i,padding:n,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/u,hBoxMaxHeight:r/2}),h=Object.assign({},n);Pw(h,Ci(s));const p=Object.assign({maxPadding:h,w:o,h:r,x:n.left,y:n.top},n),g=nb(l.concat(c),d);xr(a.fullSize,p,d,g),xr(l,p,d,g),xr(c,p,d,g)&&xr(l,p,d,g),ab(p),aC(a.leftAndTop,p,d,g),p.x+=p.w,p.y+=p.h,aC(a.rightAndBottom,p,d,g),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},ve(a.chartArea,v=>{const S=v.box;Object.assign(S,e.chartArea),S.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class xw{acquireContext(t,i){}releaseContext(t){return!1}addEventListener(t,i,s){}removeEventListener(t,i,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,i,s,n){return i=Math.max(0,i||t.width),s=s||t.height,{width:i,height:Math.max(0,n?Math.floor(i/n):s)}}isAttached(t){return!0}updateConfig(t){}}class cb extends xw{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Xl="$chartjs",ub={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},lC=e=>e===null||e==="";function db(e,t){const i=e.style,s=e.getAttribute("height"),n=e.getAttribute("width");if(e[Xl]={initial:{height:s,width:n,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",lC(n)){const o=q3(e,"width");o!==void 0&&(e.width=o)}if(lC(s))if(e.style.height==="")e.height=e.width/(t||2);else{const o=q3(e,"height");o!==void 0&&(e.height=o)}return e}const Fw=R7?{passive:!0}:!1;function hb(e,t,i){e&&e.addEventListener(t,i,Fw)}function pb(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,Fw)}function fb(e,t){const i=ub[e.type]||e.type,{x:s,y:n}=nn(e,t);return{type:i,chart:t,native:e,x:s!==void 0?s:null,y:n!==void 0?n:null}}function jc(e,t){for(const i of e)if(i===t||i.contains(t))return!0}function gb(e,t,i){const s=e.canvas,n=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||jc(a.addedNodes,s),r=r&&!jc(a.removedNodes,s);r&&i()});return n.observe(document,{childList:!0,subtree:!0}),n}function mb(e,t,i){const s=e.canvas,n=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||jc(a.removedNodes,s),r=r&&!jc(a.addedNodes,s);r&&i()});return n.observe(document,{childList:!0,subtree:!0}),n}const Sa=new Map;let cC=0;function Ew(){const e=window.devicePixelRatio;e!==cC&&(cC=e,Sa.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function Cb(e,t){Sa.size||window.addEventListener("resize",Ew),Sa.set(e,t)}function vb(e){Sa.delete(e),Sa.size||window.removeEventListener("resize",Ew)}function Sb(e,t,i){const s=e.canvas,n=s&&ig(s);if(!n)return;const o=rw((a,l)=>{const c=n.clientWidth;i(a,l),c<n.clientWidth&&i()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||o(c,u)});return r.observe(n),Cb(e,o),r}function Id(e,t,i){i&&i.disconnect(),t==="resize"&&vb(e)}function wb(e,t,i){const s=e.canvas,n=rw(o=>{e.ctx!==null&&i(fb(o,e))},e);return hb(s,t,n),n}class yb extends xw{acquireContext(t,i){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(db(t,i),s):null}releaseContext(t){const i=t.canvas;if(!i[Xl])return!1;const s=i[Xl].initial;["height","width"].forEach(o=>{const r=s[o];Ee(r)?i.removeAttribute(o):i.setAttribute(o,r)});const n=s.style||{};return Object.keys(n).forEach(o=>{i.style[o]=n[o]}),i.width=i.width,delete i[Xl],!0}addEventListener(t,i,s){this.removeEventListener(t,i);const n=t.$proxies||(t.$proxies={}),r={attach:gb,detach:mb,resize:Sb}[i]||wb;n[i]=r(t,i,s)}removeEventListener(t,i){const s=t.$proxies||(t.$proxies={}),n=s[i];if(!n)return;({attach:Id,detach:Id,resize:Id}[i]||pb)(t,i,n),s[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,i,s,n){return y7(t,i,s,n)}isAttached(t){const i=t&&ig(t);return!!(i&&i.isConnected)}}function Rb(e){return!tg()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?cb:yb}var Il;let Vo=(Il=class{constructor(){se(this,"x");se(this,"y");se(this,"active",!1);se(this,"options");se(this,"$animations")}tooltipPosition(t){const{x:i,y:s}=this.getProps(["x","y"],t);return{x:i,y:s}}hasValue(){return Gc(this.x)&&Gc(this.y)}getProps(t,i){const s=this.$animations;if(!i||!s)return this;const n={};return t.forEach(o=>{n[o]=s[o]&&s[o].active()?s[o]._to:this[o]}),n}},se(Il,"defaults",{}),se(Il,"defaultRoutes"),Il);function bb(e,t){const i=e.options.ticks,s=Pb(e),n=Math.min(i.maxTicksLimit||s,s),o=i.major.enabled?Fb(t):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>n)return Eb(t,c,o,r/n),c;const u=xb(o,t,n);if(r>0){let d,h;const p=r>1?Math.round((l-a)/(r-1)):null;for(vl(t,c,u,Ee(p)?0:a-p,a),d=0,h=r-1;d<h;d++)vl(t,c,u,o[d],o[d+1]);return vl(t,c,u,l,Ee(p)?t.length:l+p),c}return vl(t,c,u),c}function Pb(e){const t=e.options.offset,i=e._tickSize(),s=e._length/i+(t?0:1),n=e._maxLength/i;return Math.floor(Math.min(s,n))}function xb(e,t,i){const s=kb(e),n=t.length/i;if(!s)return Math.max(n,1);const o=IR(s);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>n)return l}return Math.max(n,1)}function Fb(e){const t=[];let i,s;for(i=0,s=e.length;i<s;i++)e[i].major&&t.push(i);return t}function Eb(e,t,i,s){let n=0,o=i[0],r;for(s=Math.ceil(s),r=0;r<e.length;r++)r===o&&(t.push(e[r]),n++,o=i[n*s])}function vl(e,t,i,s,n){const o=Ce(s,0),r=Math.min(Ce(n,e.length),e.length);let a=0,l,c,u;for(i=Math.ceil(i),n&&(l=n-s,i=l/Math.floor(l/i)),u=o;u<0;)a++,u=Math.round(o+a*i);for(c=Math.max(o,0);c<r;c++)c===u&&(t.push(e[c]),a++,u=Math.round(o+a*i))}function kb(e){const t=e.length;let i,s;if(t<2)return!1;for(s=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==s)return!1;return s}const Mb=e=>e==="left"?"right":e==="right"?"left":e,uC=(e,t,i)=>t==="top"||t==="left"?e[t]+i:e[t]-i,dC=(e,t)=>Math.min(t||e,e);function hC(e,t){const i=[],s=e.length/t,n=e.length;let o=0;for(;o<n;o+=s)i.push(e[Math.floor(o)]);return i}function Db(e,t,i){const s=e.ticks.length,n=Math.min(t,s-1),o=e._startPixel,r=e._endPixel,a=1e-6;let l=e.getPixelForTick(n),c;if(!(i&&(s===1?c=Math.max(l-o,r-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(n-1))/2,l+=n<t?c:-c,l<o-a||l>r+a)))return l}function Tb(e,t){ve(e,i=>{const s=i.gc,n=s.length/2;let o;if(n>t){for(o=0;o<n;++o)delete i.data[s[o]];s.splice(0,n)}})}function ur(e){return e.drawTicks?e.tickLength:0}function pC(e,t){if(!e.display)return 0;const i=kt(e.font,t),s=Ci(e.padding);return(Xe(e.text)?e.text.length:1)*i.lineHeight+s.height}function Ab(e,t){return Ho(e,{scale:t,type:"scale"})}function Ib(e,t,i){return Ho(e,{tick:i,index:t,type:"tick"})}function Lb(e,t,i){let s=aw(e);return(i&&t!=="right"||!i&&t==="right")&&(s=Mb(s)),s}function Ob(e,t,i,s){const{top:n,left:o,bottom:r,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let d=0,h,p,g;const v=r-n,S=a-o;if(e.isHorizontal()){if(p=Bt(s,o,a),pe(i)){const m=Object.keys(i)[0],C=i[m];g=u[m].getPixelForValue(C)+v-t}else i==="center"?g=(c.bottom+c.top)/2+v-t:g=uC(e,i,t);h=a-o}else{if(pe(i)){const m=Object.keys(i)[0],C=i[m];p=u[m].getPixelForValue(C)-S+t}else i==="center"?p=(c.left+c.right)/2-S+t:p=uC(e,i,t);g=Bt(s,r,n),d=i==="left"?-Ye:Ye}return{titleX:p,titleY:g,maxWidth:h,rotation:d}}class Wo extends Vo{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,i){return t}getUserBounds(){let{_userMin:t,_userMax:i,_suggestedMin:s,_suggestedMax:n}=this;return t=yi(t,Number.POSITIVE_INFINITY),i=yi(i,Number.NEGATIVE_INFINITY),s=yi(s,Number.POSITIVE_INFINITY),n=yi(n,Number.NEGATIVE_INFINITY),{min:yi(t,s),max:yi(i,n),minDefined:oi(t),maxDefined:oi(i)}}getMinMax(t){let{min:i,max:s,minDefined:n,maxDefined:o}=this.getUserBounds(),r;if(n&&o)return{min:i,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,t),n||(i=Math.min(i,r.min)),o||(s=Math.max(s,r.max));return i=o&&i>s?s:i,s=n&&i>s?i:s,{min:yi(i,yi(s,i)),max:yi(s,yi(i,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Fe(this.options.beforeUpdate,[this])}update(t,i,s){const{beginAtZero:n,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=i,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=r7(this,o,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?hC(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=bb(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,i,s;this.isHorizontal()?(i=this.left,s=this.right):(i=this.top,s=this.bottom,t=!t),this._startPixel=i,this._endPixel=s,this._reversePixels=t,this._length=s-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Fe(this.options.afterUpdate,[this])}beforeSetDimensions(){Fe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Fe(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Fe(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Fe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const i=this.options.ticks;let s,n,o;for(s=0,n=t.length;s<n;s++)o=t[s],o.label=Fe(i.callback,[o.value,s,t],this)}afterTickToLabelConversion(){Fe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Fe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,i=t.ticks,s=dC(this.ticks.length,t.ticks.maxTicksLimit),n=i.minRotation||0,o=i.maxRotation;let r=n,a,l,c;if(!this._isVisible()||!i.display||n>=o||s<=1||!this.isHorizontal()){this.labelRotation=n;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,p=Et(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/s:p/(s-1),d+6>a&&(a=p/(s-(t.offset?.5:1)),l=this.maxHeight-ur(t.grid)-i.padding-pC(t.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),r=BR(Math.min(Math.asin(Et((u.highest.height+6)/a,-1,1)),Math.asin(Et(l/c,-1,1))-Math.asin(Et(h/c,-1,1)))),r=Math.max(n,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){Fe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Fe(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:i,options:{ticks:s,title:n,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=pC(n,i.options.font);if(a?(t.width=this.maxWidth,t.height=ur(o)+l):(t.height=this.maxHeight,t.width=ur(o)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),p=s.padding*2,g=$i(this.labelRotation),v=Math.cos(g),S=Math.sin(g);if(a){const m=s.mirror?0:S*d.width+v*h.height;t.height=Math.min(this.maxHeight,t.height+m+p)}else{const m=s.mirror?0:v*d.width+S*h.height;t.width=Math.min(this.maxWidth,t.width+m+p)}this._calculatePadding(c,u,S,v)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,i,s,n){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,p=0;l?c?(h=n*t.width,p=s*i.height):(h=s*t.height,p=n*i.width):o==="start"?p=i.width:o==="end"?h=t.width:o!=="inner"&&(h=t.width/2,p=i.width/2),this.paddingLeft=Math.max((h-u+r)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+r)*this.width/(this.width-d),0)}else{let u=i.height/2,d=t.height/2;o==="start"?(u=0,d=t.height):o==="end"&&(u=i.height,d=0),this.paddingTop=u+r,this.paddingBottom=d+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Fe(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:i}=this.options;return i==="top"||i==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let i,s;for(i=0,s=t.length;i<s;i++)Ee(t[i].label)&&(t.splice(i,1),s--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const i=this.options.ticks.sampleSize;let s=this.ticks;i<s.length&&(s=hC(s,i)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,i,s){const{ctx:n,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(i/dC(i,s));let c=0,u=0,d,h,p,g,v,S,m,C,w,R,b;for(d=0;d<i;d+=l){if(g=t[d].label,v=this._resolveTickFontOptions(d),n.font=S=v.string,m=o[S]=o[S]||{data:{},gc:[]},C=v.lineHeight,w=R=0,!Ee(g)&&!Xe(g))w=W3(n,m.data,m.gc,w,g),R=C;else if(Xe(g))for(h=0,p=g.length;h<p;++h)b=g[h],!Ee(b)&&!Xe(b)&&(w=W3(n,m.data,m.gc,w,b),R+=C);r.push(w),a.push(R),c=Math.max(w,c),u=Math.max(R,u)}Tb(o,i);const P=r.indexOf(c),x=a.indexOf(u),F=k=>({width:r[k]||0,height:a[k]||0});return{first:F(0),last:F(i-1),widest:F(P),highest:F(x),widths:r,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,i){return NaN}getValueForPixel(t){}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const i=this._startPixel+t*this._length;return _R(this._alignToPixels?Zs(this.chart,i,0):i)}getDecimalForPixel(t){const i=(t-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:i}=this;return t<0&&i<0?i:t>0&&i>0?t:0}getContext(t){const i=this.ticks||[];if(t>=0&&t<i.length){const s=i[t];return s.$context||(s.$context=Ib(this.getContext(),t,s))}return this.$context||(this.$context=Ab(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,i=$i(this.labelRotation),s=Math.abs(Math.cos(i)),n=Math.abs(Math.sin(i)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*s>a*n?a/s:l/n:l*n<a*s?l/s:a/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const i=this.axis,s=this.chart,n=this.options,{grid:o,position:r,border:a}=n,l=o.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=ur(o),p=[],g=a.setContext(this.getContext()),v=g.display?g.width:0,S=v/2,m=function(U){return Zs(s,U,v)};let C,w,R,b,P,x,F,k,E,T,O,z;if(r==="top")C=m(this.bottom),x=this.bottom-h,k=C-S,T=m(t.top)+S,z=t.bottom;else if(r==="bottom")C=m(this.top),T=t.top,z=m(t.bottom)-S,x=C+S,k=this.top+h;else if(r==="left")C=m(this.right),P=this.right-h,F=C-S,E=m(t.left)+S,O=t.right;else if(r==="right")C=m(this.left),E=t.left,O=m(t.right)-S,P=C+S,F=this.left+h;else if(i==="x"){if(r==="center")C=m((t.top+t.bottom)/2+.5);else if(pe(r)){const U=Object.keys(r)[0],q=r[U];C=m(this.chart.scales[U].getPixelForValue(q))}T=t.top,z=t.bottom,x=C+S,k=x+h}else if(i==="y"){if(r==="center")C=m((t.left+t.right)/2);else if(pe(r)){const U=Object.keys(r)[0],q=r[U];C=m(this.chart.scales[U].getPixelForValue(q))}P=C-S,F=P-h,E=t.left,O=t.right}const X=Ce(n.ticks.maxTicksLimit,d),j=Math.max(1,Math.ceil(d/X));for(w=0;w<d;w+=j){const U=this.getContext(w),q=o.setContext(U),L=a.setContext(U),_=q.lineWidth,V=q.color,Z=L.dash||[],Y=L.dashOffset,de=q.tickWidth,K=q.tickColor,W=q.tickBorderDash||[],J=q.tickBorderDashOffset;R=Db(this,w,l),R!==void 0&&(b=Zs(s,R,_),c?P=F=E=O=b:x=k=T=z=b,p.push({tx1:P,ty1:x,tx2:F,ty2:k,x1:E,y1:T,x2:O,y2:z,width:_,color:V,borderDash:Z,borderDashOffset:Y,tickWidth:de,tickColor:K,tickBorderDash:W,tickBorderDashOffset:J}))}return this._ticksLength=d,this._borderValue=C,p}_computeLabelItems(t){const i=this.axis,s=this.options,{position:n,ticks:o}=s,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=o,h=ur(s.grid),p=h+u,g=d?-u:p,v=-$i(this.labelRotation),S=[];let m,C,w,R,b,P,x,F,k,E,T,O,z="middle";if(n==="top")P=this.bottom-g,x=this._getXAxisLabelAlignment();else if(n==="bottom")P=this.top+g,x=this._getXAxisLabelAlignment();else if(n==="left"){const j=this._getYAxisLabelAlignment(h);x=j.textAlign,b=j.x}else if(n==="right"){const j=this._getYAxisLabelAlignment(h);x=j.textAlign,b=j.x}else if(i==="x"){if(n==="center")P=(t.top+t.bottom)/2+p;else if(pe(n)){const j=Object.keys(n)[0],U=n[j];P=this.chart.scales[j].getPixelForValue(U)+p}x=this._getXAxisLabelAlignment()}else if(i==="y"){if(n==="center")b=(t.left+t.right)/2-p;else if(pe(n)){const j=Object.keys(n)[0],U=n[j];b=this.chart.scales[j].getPixelForValue(U)}x=this._getYAxisLabelAlignment(h).textAlign}i==="y"&&(l==="start"?z="top":l==="end"&&(z="bottom"));const X=this._getLabelSizes();for(m=0,C=a.length;m<C;++m){w=a[m],R=w.label;const j=o.setContext(this.getContext(m));F=this.getPixelForTick(m)+o.labelOffset,k=this._resolveTickFontOptions(m),E=k.lineHeight,T=Xe(R)?R.length:1;const U=T/2,q=j.color,L=j.textStrokeColor,_=j.textStrokeWidth;let V=x;r?(b=F,x==="inner"&&(m===C-1?V=this.options.reverse?"left":"right":m===0?V=this.options.reverse?"right":"left":V="center"),n==="top"?c==="near"||v!==0?O=-T*E+E/2:c==="center"?O=-X.highest.height/2-U*E+E:O=-X.highest.height+E/2:c==="near"||v!==0?O=E/2:c==="center"?O=X.highest.height/2-U*E:O=X.highest.height-T*E,d&&(O*=-1),v!==0&&!j.showLabelBackdrop&&(b+=E/2*Math.sin(v))):(P=F,O=(1-T)*E/2);let Z;if(j.showLabelBackdrop){const Y=Ci(j.backdropPadding),de=X.heights[m],K=X.widths[m];let W=O-Y.top,J=0-Y.left;switch(z){case"middle":W-=de/2;break;case"bottom":W-=de;break}switch(x){case"center":J-=K/2;break;case"right":J-=K;break;case"inner":m===C-1?J-=K:m>0&&(J-=K/2);break}Z={left:J,top:W,width:K+Y.width,height:de+Y.height,color:j.backdropColor}}S.push({label:R,font:k,textOffset:O,options:{rotation:v,color:q,strokeColor:L,strokeWidth:_,textAlign:V,textBaseline:z,translation:[b,P],backdrop:Z}})}return S}_getXAxisLabelAlignment(){const{position:t,ticks:i}=this.options;if(-$i(this.labelRotation))return t==="top"?"left":"right";let n="center";return i.align==="start"?n="left":i.align==="end"?n="right":i.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:i,ticks:{crossAlign:s,mirror:n,padding:o}}=this.options,r=this._getLabelSizes(),a=t+o,l=r.widest.width;let c,u;return i==="left"?n?(u=this.right+o,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):i==="right"?n?(u=this.left+o,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:i},left:s,top:n,width:o,height:r}=this;i&&(t.save(),t.fillStyle=i,t.fillRect(s,n,o,r),t.restore())}getLineWidthForValue(t){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const n=this.ticks.findIndex(o=>o.value===t);return n>=0?i.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const i=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(i.display)for(o=0,r=n.length;o<r;++o){const l=n[o];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:i,options:{border:s,grid:n}}=this,o=s.setContext(this.getContext()),r=s.display?o.width:0;if(!r)return;const a=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=Zs(t,this.left,r)-r/2,u=Zs(t,this.right,a)+a/2,d=h=l):(d=Zs(t,this.top,r)-r/2,h=Zs(t,this.bottom,a)+a/2,c=u=l),i.save(),i.lineWidth=o.width,i.strokeStyle=o.color,i.beginPath(),i.moveTo(c,d),i.lineTo(u,h),i.stroke(),i.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,n=this._computeLabelArea();n&&Yf(s,n);const o=this.getLabelItems(t);for(const r of o){const a=r.options,l=r.font,c=r.label,u=r.textOffset;Vc(s,c,0,u,l,a)}n&&Qf(s)}drawTitle(){const{ctx:t,options:{position:i,title:s,reverse:n}}=this;if(!s.display)return;const o=kt(s.font),r=Ci(s.padding),a=s.align;let l=o.lineHeight/2;i==="bottom"||i==="center"||pe(i)?(l+=r.bottom,Xe(s.text)&&(l+=o.lineHeight*(s.text.length-1))):l+=r.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=Ob(this,l,i,a);Vc(t,s.text,0,0,o,{color:s.color,maxWidth:d,rotation:h,textAlign:Lb(a,i,n),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,i=t.ticks&&t.ticks.z||0,s=Ce(t.grid&&t.grid.z,-1),n=Ce(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Wo.prototype.draw?[{z:i,draw:o=>{this.draw(o)}}]:[{z:s,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:i,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const i=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[];let o,r;for(o=0,r=i.length;o<r;++o){const a=i[o];a[s]===this.id&&(!t||a.type===t)&&n.push(a)}return n}_resolveTickFontOptions(t){const i=this.options.ticks.setContext(this.getContext(t));return kt(i.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Sl{constructor(t,i,s){this.type=t,this.scope=i,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const i=Object.getPrototypeOf(t);let s;_b(i)&&(s=this.register(i));const n=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in n||(n[o]=t,Bb(t,r,s),this.override&&je.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const i=this.items,s=t.id,n=this.scope;s in i&&delete i[s],n&&s in je[n]&&(delete je[n][s],this.override&&delete Mn[s])}}function Bb(e,t,i){const s=Ca(Object.create(null),[i?je.get(i):{},je.get(t),e.defaults]);je.set(t,s),e.defaultRoutes&&Nb(t,e.defaultRoutes),e.descriptors&&je.describe(t,e.descriptors)}function Nb(e,t){Object.keys(t).forEach(i=>{const s=i.split("."),n=s.pop(),o=[e].concat(s).join("."),r=t[i].split("."),a=r.pop(),l=r.join(".");je.route(o,n,l,a)})}function _b(e){return"id"in e&&"defaults"in e}class Gb{constructor(){this.controllers=new Sl(ho,"datasets",!0),this.elements=new Sl(Vo,"elements"),this.plugins=new Sl(Object,"plugins"),this.scales=new Sl(Wo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,i,s){[...i].forEach(n=>{const o=s||this._getRegistryForType(n);s||o.isForType(n)||o===this.plugins&&n.id?this._exec(t,o,n):ve(n,r=>{const a=s||this._getRegistryForType(r);this._exec(t,a,r)})})}_exec(t,i,s){const n=Kf(t);Fe(s["before"+n],[],s),i[t](s),Fe(s["after"+n],[],s)}_getRegistryForType(t){for(let i=0;i<this._typedRegistries.length;i++){const s=this._typedRegistries[i];if(s.isForType(t))return s}return this.plugins}_get(t,i,s){const n=i.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return n}}var xi=new Gb;class Hb{constructor(){this._init=[]}notify(t,i,s,n){i==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=n?this._descriptors(t).filter(n):this._descriptors(t),r=this._notify(o,t,i,s);return i==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,i,s,n){n=n||{};for(const o of t){const r=o.plugin,a=r[s],l=[i,n,o.options];if(Fe(a,l,r)===!1&&n.cancelable)return!1}return!0}invalidate(){Ee(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),i}_createDescriptors(t,i){const s=t&&t.config,n=Ce(s.options&&s.options.plugins,{}),o=Vb(s);return n===!1&&!i?[]:zb(t,o,n,i)}_notifyStateChanges(t){const i=this._oldCache||[],s=this._cache,n=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(n(i,s),t,"stop"),this._notify(n(s,i),t,"start")}}function Vb(e){const t={},i=[],s=Object.keys(xi.plugins.items);for(let o=0;o<s.length;o++)i.push(xi.getPlugin(s[o]));const n=e.plugins||[];for(let o=0;o<n.length;o++){const r=n[o];i.indexOf(r)===-1&&(i.push(r),t[r.id]=!0)}return{plugins:i,localIds:t}}function Wb(e,t){return!t&&e===!1?null:e===!0?{}:e}function zb(e,{plugins:t,localIds:i},s,n){const o=[],r=e.getContext();for(const a of t){const l=a.id,c=Wb(s[l],n);c!==null&&o.push({plugin:a,options:jb(e.config,{plugin:a,local:i[l]},c,r)})}return o}function jb(e,{plugin:t,local:i},s,n){const o=e.pluginScopeKeys(t),r=e.getOptionScopes(s,o);return i&&t.defaults&&r.push(t.defaults),e.createResolver(r,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function cp(e,t){const i=je.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function Ub(e,t){let i=e;return e==="_index_"?i=t:e==="_value_"&&(i=t==="x"?"y":"x"),i}function Kb(e,t){return e===t?"_index_":"_value_"}function fC(e){if(e==="x"||e==="y"||e==="r")return e}function $b(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function up(e,...t){if(fC(e))return e;for(const i of t){const s=i.axis||$b(i.position)||e.length>1&&fC(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function gC(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function qb(e,t){if(t.data&&t.data.datasets){const i=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(i.length)return gC(e,"x",i[0])||gC(e,"y",i[0])}return{}}function Yb(e,t){const i=Mn[e.type]||{scales:{}},s=t.scales||{},n=cp(e.type,t),o=Object.create(null);return Object.keys(s).forEach(r=>{const a=s[r];if(!pe(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=up(r,a,qb(r,e),je.scales[a.type]),c=Kb(l,n),u=i.scales||{};o[r]=Vr(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(r=>{const a=r.type||e.type,l=r.indexAxis||cp(a,t),u=(Mn[a]||{}).scales||{};Object.keys(u).forEach(d=>{const h=Ub(d,l),p=r[h+"AxisID"]||h;o[p]=o[p]||Object.create(null),Vr(o[p],[{axis:h},s[p],u[d]])})}),Object.keys(o).forEach(r=>{const a=o[r];Vr(a,[je.scales[a.type],je.scale])}),o}function kw(e){const t=e.options||(e.options={});t.plugins=Ce(t.plugins,{}),t.scales=Yb(e,t)}function Mw(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function Qb(e){return e=e||{},e.data=Mw(e.data),kw(e),e}const mC=new Map,Dw=new Set;function wl(e,t){let i=mC.get(e);return i||(i=t(),mC.set(e,i),Dw.add(i)),i}const dr=(e,t,i)=>{const s=kn(t,i);s!==void 0&&e.add(s)};class Xb{constructor(t){this._config=Qb(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Mw(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),kw(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return wl(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,i){return wl(`${t}.transition.${i}`,()=>[[`datasets.${t}.transitions.${i}`,`transitions.${i}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,i){return wl(`${t}-${i}`,()=>[[`datasets.${t}.elements.${i}`,`datasets.${t}`,`elements.${i}`,""]])}pluginScopeKeys(t){const i=t.id,s=this.type;return wl(`${s}-plugin-${i}`,()=>[[`plugins.${i}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,i){const s=this._scopeCache;let n=s.get(t);return(!n||i)&&(n=new Map,s.set(t,n)),n}getOptionScopes(t,i,s){const{options:n,type:o}=this,r=this._cachedScopes(t,s),a=r.get(i);if(a)return a;const l=new Set;i.forEach(u=>{t&&(l.add(t),u.forEach(d=>dr(l,t,d))),u.forEach(d=>dr(l,n,d)),u.forEach(d=>dr(l,Mn[o]||{},d)),u.forEach(d=>dr(l,je,d)),u.forEach(d=>dr(l,ap,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Dw.has(i)&&r.set(i,c),c}chartOptionScopes(){const{options:t,type:i}=this;return[t,Mn[i]||{},je.datasets[i]||{},{type:i},je,ap]}resolveNamedOptions(t,i,s,n=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=CC(this._resolverCache,t,n);let l=r;if(Zb(r,i)){o.$shared=!1,s=Hs(s)?s():s;const c=this.createResolver(t,s,a);l=ko(r,s,c)}for(const c of i)o[c]=l[c];return o}createResolver(t,i,s=[""],n){const{resolver:o}=CC(this._resolverCache,t,s);return pe(i)?ko(o,i,void 0,n):o}}function CC(e,t,i){let s=e.get(t);s||(s=new Map,e.set(t,s));const n=i.join();let o=s.get(n);return o||(o={resolver:Jf(t,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},s.set(n,o)),o}const Jb=e=>pe(e)&&Object.getOwnPropertyNames(e).some(t=>Hs(e[t]));function Zb(e,t){const{isScriptable:i,isIndexable:s}=fw(e);for(const n of t){const o=i(n),r=s(n),a=(r||o)&&e[n];if(o&&(Hs(a)||Jb(a))||r&&Xe(a))return!0}return!1}var eP="4.4.7";const tP=["top","bottom","left","right","chartArea"];function vC(e,t){return e==="top"||e==="bottom"||tP.indexOf(e)===-1&&t==="x"}function SC(e,t){return function(i,s){return i[e]===s[e]?i[t]-s[t]:i[e]-s[e]}}function wC(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),Fe(i&&i.onComplete,[e],t)}function iP(e){const t=e.chart,i=t.options.animation;Fe(i&&i.onProgress,[e],t)}function Tw(e){return tg()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Jl={},yC=e=>{const t=Tw(e);return Object.values(Jl).filter(i=>i.canvas===t).pop()};function sP(e,t,i){const s=Object.keys(e);for(const n of s){const o=+n;if(o>=t){const r=e[n];delete e[n],(i>0||o>t)&&(e[o+i]=r)}}}function nP(e,t,i,s){return!i||e.type==="mouseout"?null:s?t:e}function yl(e,t,i){return e.options.clip?e[i]:t[i]}function oP(e,t){const{xScale:i,yScale:s}=e;return i&&s?{left:yl(i,t,"left"),right:yl(i,t,"right"),top:yl(s,t,"top"),bottom:yl(s,t,"bottom")}:t}var ds;let Lu=(ds=class{static register(...t){xi.add(...t),RC()}static unregister(...t){xi.remove(...t),RC()}constructor(t,i){const s=this.config=new Xb(i),n=Tw(t),o=yC(n);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||Rb(n)),this.platform.updateConfig(s);const a=this.platform.acquireContext(n,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=xR(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Hb,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=WR(d=>this.update(d),r.resizeDelay||0),this._dataChanges=[],Jl[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Gi.listen(this,"complete",wC),Gi.listen(this,"progress",iP),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:i},width:s,height:n,_aspectRatio:o}=this;return Ee(t)?i&&o?o:n?s/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return xi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return z3(this.canvas,this.ctx),this}stop(){return Gi.stop(this),this}resize(t,i){Gi.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){const s=this.options,n=this.canvas,o=s.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(n,t,i,o),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,$3(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),Fe(s.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};ve(i,(s,n)=>{s.id=n})}buildOrUpdateScales(){const t=this.options,i=t.scales,s=this.scales,n=Object.keys(s).reduce((r,a)=>(r[a]=!1,r),{});let o=[];i&&(o=o.concat(Object.keys(i).map(r=>{const a=i[r],l=up(r,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ve(o,r=>{const a=r.options,l=a.id,c=up(l,a),u=Ce(a.type,r.dtype);(a.position===void 0||vC(a.position,c)!==vC(r.dposition))&&(a.position=r.dposition),n[l]=!0;let d=null;if(l in s&&s[l].type===u)d=s[l];else{const h=xi.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,t)}),ve(n,(r,a)=>{r||delete s[a]}),ve(s,r=>{Ps.configure(this,r,r.options),Ps.addBox(this,r)})}_updateMetasets(){const t=this._metasets,i=this.data.datasets.length,s=t.length;if(t.sort((n,o)=>n.index-o.index),s>i){for(let n=i;n<s;++n)this._destroyDatasetMeta(n);t.splice(i,s-i)}this._sortedMetasets=t.slice(0).sort(SC("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((s,n)=>{i.filter(o=>o===s._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],i=this.data.datasets;let s,n;for(this._removeUnreferencedMetasets(),s=0,n=i.length;s<n;s++){const o=i[s];let r=this.getDatasetMeta(s);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(s),r=this.getDatasetMeta(s)),r.type=a,r.indexAxis=o.indexAxis||cp(a,this.options),r.order=o.order||0,r.index=s,r.label=""+o.label,r.visible=this.isDatasetVisible(s),r.controller)r.controller.updateIndex(s),r.controller.linkScales();else{const l=xi.getController(a),{datasetElementType:c,dataElementType:u}=je.datasets[a];Object.assign(l,{dataElementType:xi.getElement(u),datasetElementType:c&&xi.getElement(c)}),r.controller=new l(this,s),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){ve(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const i=this.config;i.update();const s=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!n&&o.indexOf(d)===-1;d.buildOrUpdateElements(h),r=Math.max(+d.getMaxOverflow(),r)}r=this._minPadding=s.layout.autoPadding?r:0,this._updateLayout(r),n||ve(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(SC("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ve(this.scales,t=>{Ps.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,i=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!I3(i,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(const{method:s,start:n,count:o}of i){const r=s==="_removeElements"?-o:o;sP(t,n,r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const i=this.data.datasets.length,s=o=>new Set(t.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),n=s(0);for(let o=1;o<i;o++)if(!I3(n,s(o)))return;return Array.from(n).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ps.update(this,this.width,this.height,t);const i=this.chartArea,s=i.width<=0||i.height<=0;this._layers=[],ve(this.boxes,n=>{s&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,o)=>{n._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,s=this.data.datasets.length;i<s;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,s=this.data.datasets.length;i<s;++i)this._updateDataset(i,Hs(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){const s=this.getDatasetMeta(t),n={meta:s,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(s.controller._update(i),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Gi.has(this)?this.attached&&!Gi.running(this)&&Gi.start(this):(this.draw(),wC({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const i=this._sortedMetasets,s=[];let n,o;for(n=0,o=i.length;n<o;++n){const r=i[n];(!t||r.visible)&&s.push(r)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const i=this.ctx,s=t._clip,n=!s.disabled,o=oP(t,this.chartArea),r={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(n&&Yf(i,{left:s.left===!1?0:o.left-s.left,right:s.right===!1?this.width:o.right+s.right,top:s.top===!1?0:o.top-s.top,bottom:s.bottom===!1?this.height:o.bottom+s.bottom}),t.controller.draw(),n&&Qf(i),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return hw(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,s,n){const o=tb.modes[i];return typeof o=="function"?o(this,t,s,n):[]}getDatasetMeta(t){const i=this.data.datasets[t],s=this._metasets;let n=s.filter(o=>o&&o._dataset===i).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=Ho(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const i=this.data.datasets[t];if(!i)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!i.hidden}setDatasetVisibility(t,i){const s=this.getDatasetMeta(t);s.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,s){const n=s?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,n);va(i)?(o.data[i].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),r.update(o,{visible:s}),this.update(a=>a.datasetIndex===t?n:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){const i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),Gi.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),z3(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete Jl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,i=this.platform,s=(o,r)=>{i.addEventListener(this,o,r),t[o]=r},n=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};ve(this.options.events,o=>s(o,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,i=this.platform,s=(l,c)=>{i.addEventListener(this,l,c),t[l]=c},n=(l,c)=>{t[l]&&(i.removeEventListener(this,l,c),delete t[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{n("attach",a),this.attached=!0,this.resize(),s("resize",o),s("detach",r)};r=()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),s("attach",a)},i.isAttached(this.canvas)?a():r()}unbindEvents(){ve(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},ve(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,s){const n=s?"set":"remove";let o,r,a,l;for(i==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){r=t[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[n+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const i=this._active||[],s=t.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!Bc(s,i)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,i))}notifyPlugins(t,i,s){return this._plugins.notify(this,t,i,s)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,s){const n=this.options.hover,o=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),r=o(i,t),a=s?t:o(t,i);r.length&&this.updateHoverStyle(r,n.mode,!1),a.length&&n.mode&&this.updateHoverStyle(a,n.mode,!0)}_eventHandler(t,i){const s={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},n=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,n)===!1)return;const o=this._handleEvent(t,i,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(o||s.changed)&&this.render(),this}_handleEvent(t,i,s){const{_active:n=[],options:o}=this,r=i,a=this._getActiveElements(t,n,s,r),l=TR(t),c=nP(t,this._lastEvent,s,l);s&&(this._lastEvent=null,Fe(o.onHover,[t,a,this],this),l&&Fe(o.onClick,[t,a,this],this));const u=!Bc(a,n);return(u||i)&&(this._active=a,this._updateHoverStyles(a,n,i)),this._lastEvent=c,u}_getActiveElements(t,i,s,n){if(t.type==="mouseout")return[];if(!s)return i;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,n)}},se(ds,"defaults",je),se(ds,"instances",Jl),se(ds,"overrides",Mn),se(ds,"registry",xi),se(ds,"version",eP),se(ds,"getChart",yC),ds);function RC(){return ve(Lu.instances,e=>e._plugins.invalidate())}function rP(e,t,i){const{startAngle:s,pixelMargin:n,x:o,y:r,outerRadius:a,innerRadius:l}=t;let c=n/a;e.beginPath(),e.arc(o,r,a,s-c,i+c),l>n?(c=n/l,e.arc(o,r,l,i+c,s-c,!0)):e.arc(o,r,n,i+Ye,s-Ye),e.closePath(),e.clip()}function aP(e){return Xf(e,["outerStart","outerEnd","innerStart","innerEnd"])}function lP(e,t,i,s){const n=aP(e.options.borderRadius),o=(i-t)/2,r=Math.min(o,s*t/2),a=l=>{const c=(i-Math.min(o,l))*s/2;return Et(l,0,Math.min(o,c))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:Et(n.innerStart,0,r),innerEnd:Et(n.innerEnd,0,r)}}function Vn(e,t,i,s){return{x:i+e*Math.cos(t),y:s+e*Math.sin(t)}}function Uc(e,t,i,s,n,o){const{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+s+i-c,0),h=u>0?u+s+i+c:0;let p=0;const g=n-l;if(s){const j=u>0?u-s:0,U=d>0?d-s:0,q=(j+U)/2,L=q!==0?g*q/(q+s):g;p=(g-L)/2}const v=Math.max(.001,g*d-i/Ze)/d,S=(g-v)/2,m=l+S+p,C=n-S-p,{outerStart:w,outerEnd:R,innerStart:b,innerEnd:P}=lP(t,h,d,C-m),x=d-w,F=d-R,k=m+w/x,E=C-R/F,T=h+b,O=h+P,z=m+b/T,X=C-P/O;if(e.beginPath(),o){const j=(k+E)/2;if(e.arc(r,a,d,k,j),e.arc(r,a,d,j,E),R>0){const _=Vn(F,E,r,a);e.arc(_.x,_.y,R,E,C+Ye)}const U=Vn(O,C,r,a);if(e.lineTo(U.x,U.y),P>0){const _=Vn(O,X,r,a);e.arc(_.x,_.y,P,C+Ye,X+Math.PI)}const q=(C-P/h+(m+b/h))/2;if(e.arc(r,a,h,C-P/h,q,!0),e.arc(r,a,h,q,m+b/h,!0),b>0){const _=Vn(T,z,r,a);e.arc(_.x,_.y,b,z+Math.PI,m-Ye)}const L=Vn(x,m,r,a);if(e.lineTo(L.x,L.y),w>0){const _=Vn(x,k,r,a);e.arc(_.x,_.y,w,m-Ye,k)}}else{e.moveTo(r,a);const j=Math.cos(k)*d+r,U=Math.sin(k)*d+a;e.lineTo(j,U);const q=Math.cos(E)*d+r,L=Math.sin(E)*d+a;e.lineTo(q,L)}e.closePath()}function cP(e,t,i,s,n){const{fullCircles:o,startAngle:r,circumference:a}=t;let l=t.endAngle;if(o){Uc(e,t,i,s,l,n);for(let c=0;c<o;++c)e.fill();isNaN(a)||(l=r+(a%Ke||Ke))}return Uc(e,t,i,s,l,n),e.fill(),l}function uP(e,t,i,s,n){const{fullCircles:o,startAngle:r,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=l,p=l.borderAlign==="inner";if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=h,p?(e.lineWidth=c*2,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let g=t.endAngle;if(o){Uc(e,t,i,s,g,n);for(let v=0;v<o;++v)e.stroke();isNaN(a)||(g=r+(a%Ke||Ke))}p&&rP(e,t,g),o||(Uc(e,t,i,s,g,n),e.stroke())}class Fr extends Vo{constructor(i){super();se(this,"circumference");se(this,"endAngle");se(this,"fullCircles");se(this,"innerRadius");se(this,"outerRadius");se(this,"pixelMargin");se(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,i&&Object.assign(this,i)}inRange(i,s,n){const o=this.getProps(["x","y"],n),{angle:r,distance:a}=iw(o,{x:i,y:s}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),p=(this.options.spacing+this.options.borderWidth)/2,g=Ce(h,c-l),v=Hc(r,l,c)&&l!==c,S=g>=Ke||v,m=pn(a,u+p,d+p);return S&&m}getCenterPoint(i){const{x:s,y:n,startAngle:o,endAngle:r,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],i),{offset:c,spacing:u}=this.options,d=(o+r)/2,h=(a+l+u+c)/2;return{x:s+Math.cos(d)*h,y:n+Math.sin(d)*h}}tooltipPosition(i){return this.getCenterPoint(i)}draw(i){const{options:s,circumference:n}=this,o=(s.offset||0)/4,r=(s.spacing||0)/2,a=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=n>Ke?Math.floor(n/Ke):0,n===0||this.innerRadius<0||this.outerRadius<0)return;i.save();const l=(this.startAngle+this.endAngle)/2;i.translate(Math.cos(l)*o,Math.sin(l)*o);const c=1-Math.sin(Math.min(Ze,n||0)),u=o*c;i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,cP(i,this,u,r,a),uP(i,this,u,r,a),i.restore()}}se(Fr,"id","arc"),se(Fr,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),se(Fr,"defaultRoutes",{backgroundColor:"backgroundColor"}),se(Fr,"descriptors",{_scriptable:!0,_indexable:i=>i!=="borderDash"});function Aw(e,t){const{x:i,y:s,base:n,width:o,height:r}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,d;return e.horizontal?(d=r/2,a=Math.min(i,n),l=Math.max(i,n),c=s-d,u=s+d):(d=o/2,a=i-d,l=i+d,c=Math.min(s,n),u=Math.max(s,n)),{left:a,top:c,right:l,bottom:u}}function xs(e,t,i,s){return e?0:Et(t,i,s)}function dP(e,t,i){const s=e.options.borderWidth,n=e.borderSkipped,o=pw(s);return{t:xs(n.top,o.top,0,i),r:xs(n.right,o.right,0,t),b:xs(n.bottom,o.bottom,0,i),l:xs(n.left,o.left,0,t)}}function hP(e,t,i){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),n=e.options.borderRadius,o=co(n),r=Math.min(t,i),a=e.borderSkipped,l=s||pe(n);return{topLeft:xs(!l||a.top||a.left,o.topLeft,0,r),topRight:xs(!l||a.top||a.right,o.topRight,0,r),bottomLeft:xs(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:xs(!l||a.bottom||a.right,o.bottomRight,0,r)}}function pP(e){const t=Aw(e),i=t.right-t.left,s=t.bottom-t.top,n=dP(e,i/2,s/2),o=hP(e,i/2,s/2);return{outer:{x:t.left,y:t.top,w:i,h:s,radius:o},inner:{x:t.left+n.l,y:t.top+n.t,w:i-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,o.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(n.b,n.r))}}}}function Ld(e,t,i,s){const n=t===null,o=i===null,a=e&&!(n&&o)&&Aw(e,s);return a&&(n||pn(t,a.left,a.right))&&(o||pn(i,a.top,a.bottom))}function fP(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function gP(e,t){e.rect(t.x,t.y,t.w,t.h)}function Od(e,t,i={}){const s=e.x!==i.x?-t:0,n=e.y!==i.y?-t:0,o=(e.x+e.w!==i.x+i.w?t:0)-s,r=(e.y+e.h!==i.y+i.h?t:0)-n;return{x:e.x+s,y:e.y+n,w:e.w+o,h:e.h+r,radius:e.radius}}class Zl extends Vo{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:i,options:{borderColor:s,backgroundColor:n}}=this,{inner:o,outer:r}=pP(this),a=fP(r.radius)?Wc:gP;t.save(),(r.w!==o.w||r.h!==o.h)&&(t.beginPath(),a(t,Od(r,i,o)),t.clip(),a(t,Od(o,-i,r)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,Od(o,i)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,i,s){return Ld(this,t,i,s)}inXRange(t,i){return Ld(this,t,null,i)}inYRange(t,i){return Ld(this,null,t,i)}getCenterPoint(t){const{x:i,y:s,base:n,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(i+n)/2:i,y:o?s:(s+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}se(Zl,"id","bar"),se(Zl,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),se(Zl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const bC=(e,t)=>{let{boxHeight:i=t,boxWidth:s=t}=e;return e.usePointStyle&&(i=Math.min(i,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:i,itemHeight:Math.max(t,i)}},mP=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class PC extends Vo{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i,s){this.maxWidth=t,this.maxHeight=i,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let i=Fe(t.generateLabels,[this.chart],this)||[];t.filter&&(i=i.filter(s=>t.filter(s,this.chart.data))),t.sort&&(i=i.sort((s,n)=>t.sort(s,n,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:t,ctx:i}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,n=kt(s.font),o=n.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=bC(s,o);let c,u;i.font=n.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(r,o,a,l)+10):(u=this.maxHeight,c=this._fitCols(r,n,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,i,s,n){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=n+a;let d=t;o.textAlign="left",o.textBaseline="middle";let h=-1,p=-u;return this.legendItems.forEach((g,v)=>{const S=s+i/2+o.measureText(g.text).width;(v===0||c[c.length-1]+S+2*a>r)&&(d+=u,c[c.length-(v>0?0:1)]=0,p+=u,h++),l[v]={left:0,top:p,row:h,width:S,height:n},c[c.length-1]+=S+a}),d}_fitCols(t,i,s,n){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=r-t;let d=a,h=0,p=0,g=0,v=0;return this.legendItems.forEach((S,m)=>{const{itemWidth:C,itemHeight:w}=CP(s,i,o,S,n);m>0&&p+w+2*a>u&&(d+=h+a,c.push({width:h,height:p}),g+=h+a,v++,h=p=0),l[m]={left:g,top:p,col:v,width:C,height:w},h=Math.max(h,C),p+=w+a}),d+=h,c.push({width:h,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:s,labels:{padding:n},rtl:o}}=this,r=uo(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=Bt(s,this.left+n,this.right-this.lineWidths[a]);for(const c of i)a!==c.row&&(a=c.row,l=Bt(s,this.left+n,this.right-this.lineWidths[a])),c.top+=this.top+t+n,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+n}else{let a=0,l=Bt(s,this.top+t+n,this.bottom-this.columnSizes[a].height);for(const c of i)c.col!==a&&(a=c.col,l=Bt(s,this.top+t+n,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+n,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Yf(t,this),this._draw(),Qf(t)}}_draw(){const{options:t,columnSizes:i,lineWidths:s,ctx:n}=this,{align:o,labels:r}=t,a=je.color,l=uo(t.rtl,this.left,this.width),c=kt(r.font),{padding:u}=r,d=c.size,h=d/2;let p;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=c.string;const{boxWidth:g,boxHeight:v,itemHeight:S}=bC(r,d),m=function(P,x,F){if(isNaN(g)||g<=0||isNaN(v)||v<0)return;n.save();const k=Ce(F.lineWidth,1);if(n.fillStyle=Ce(F.fillStyle,a),n.lineCap=Ce(F.lineCap,"butt"),n.lineDashOffset=Ce(F.lineDashOffset,0),n.lineJoin=Ce(F.lineJoin,"miter"),n.lineWidth=k,n.strokeStyle=Ce(F.strokeStyle,a),n.setLineDash(Ce(F.lineDash,[])),r.usePointStyle){const E={radius:v*Math.SQRT2/2,pointStyle:F.pointStyle,rotation:F.rotation,borderWidth:k},T=l.xPlus(P,g/2),O=x+h;dw(n,E,T,O,r.pointStyleWidth&&g)}else{const E=x+Math.max((d-v)/2,0),T=l.leftForLtr(P,g),O=co(F.borderRadius);n.beginPath(),Object.values(O).some(z=>z!==0)?Wc(n,{x:T,y:E,w:g,h:v,radius:O}):n.rect(T,E,g,v),n.fill(),k!==0&&n.stroke()}n.restore()},C=function(P,x,F){Vc(n,F.text,P,x+S/2,c,{strikethrough:F.hidden,textAlign:l.textAlign(F.textAlign)})},w=this.isHorizontal(),R=this._computeTitleHeight();w?p={x:Bt(o,this.left+u,this.right-s[0]),y:this.top+u+R,line:0}:p={x:this.left+u,y:Bt(o,this.top+R+u,this.bottom-i[0].height),line:0},vw(this.ctx,t.textDirection);const b=S+u;this.legendItems.forEach((P,x)=>{n.strokeStyle=P.fontColor,n.fillStyle=P.fontColor;const F=n.measureText(P.text).width,k=l.textAlign(P.textAlign||(P.textAlign=r.textAlign)),E=g+h+F;let T=p.x,O=p.y;l.setWidth(this.width),w?x>0&&T+E+u>this.right&&(O=p.y+=b,p.line++,T=p.x=Bt(o,this.left+u,this.right-s[p.line])):x>0&&O+b>this.bottom&&(T=p.x=T+i[p.line].width+u,p.line++,O=p.y=Bt(o,this.top+R+u,this.bottom-i[p.line].height));const z=l.x(T);if(m(z,O,P),T=zR(k,T+g+h,w?T+E:this.right,t.rtl),C(l.x(T),O,P),w)p.x+=E+u;else if(typeof P.text!="string"){const X=c.lineHeight;p.y+=Iw(P,X)+u}else p.y+=b}),Sw(this.ctx,t.textDirection)}drawTitle(){const t=this.options,i=t.title,s=kt(i.font),n=Ci(i.padding);if(!i.display)return;const o=uo(t.rtl,this.left,this.width),r=this.ctx,a=i.position,l=s.size/2,c=n.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Bt(t.align,d,this.right-h);else{const g=this.columnSizes.reduce((v,S)=>Math.max(v,S.height),0);u=c+Bt(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const p=Bt(a,d,d+h);r.textAlign=o.textAlign(aw(a)),r.textBaseline="middle",r.strokeStyle=i.color,r.fillStyle=i.color,r.font=s.string,Vc(r,i.text,p,u,s)}_computeTitleHeight(){const t=this.options.title,i=kt(t.font),s=Ci(t.padding);return t.display?i.lineHeight+s.height:0}_getLegendItemAt(t,i){let s,n,o;if(pn(t,this.left,this.right)&&pn(i,this.top,this.bottom)){for(o=this.legendHitBoxes,s=0;s<o.length;++s)if(n=o[s],pn(t,n.left,n.left+n.width)&&pn(i,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(t){const i=this.options;if(!wP(t.type,i))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,o=mP(n,s);n&&!o&&Fe(i.onLeave,[t,n,this],this),this._hoveredItem=s,s&&!o&&Fe(i.onHover,[t,s,this],this)}else s&&Fe(i.onClick,[t,s,this],this)}}function CP(e,t,i,s,n){const o=vP(s,e,t,i),r=SP(n,s,t.lineHeight);return{itemWidth:o,itemHeight:r}}function vP(e,t,i,s){let n=e.text;return n&&typeof n!="string"&&(n=n.reduce((o,r)=>o.length>r.length?o:r)),t+i.size/2+s.measureText(n).width}function SP(e,t,i){let s=e;return typeof t.text!="string"&&(s=Iw(t,i)),s}function Iw(e,t){const i=e.text?e.text.length:0;return t*i}function wP(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var yP={id:"legend",_element:PC,start(e,t,i){const s=e.legend=new PC({ctx:e.ctx,options:i,chart:e});Ps.configure(e,s,i),Ps.addBox(e,s)},stop(e){Ps.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const s=e.legend;Ps.configure(e,s,i),s.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const s=t.datasetIndex,n=i.chart;n.isDatasetVisible(s)?(n.hide(s),t.hidden=!0):(n.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:s,textAlign:n,color:o,useBorderRadius:r,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(i?0:void 0),u=Ci(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:n||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};const Er={average(e){if(!e.length)return!1;let t,i,s=new Set,n=0,o=0;for(t=0,i=e.length;t<i;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),n+=l.y,++o}}return o===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:n/o}},nearest(e,t){if(!e.length)return!1;let i=t.x,s=t.y,n=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=e.length;o<r;++o){const l=e[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=NR(t,c);u<n&&(n=u,a=l)}}if(a){const l=a.tooltipPosition();i=l.x,s=l.y}return{x:i,y:s}}};function bi(e,t){return t&&(Xe(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Hi(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function RP(e,t){const{element:i,datasetIndex:s,index:n}=t,o=e.getDatasetMeta(s).controller,{label:r,value:a}=o.getLabelAndValue(n);return{chart:e,label:r,parsed:o.getParsed(n),raw:e.data.datasets[s].data[n],formattedValue:a,dataset:o.getDataset(),dataIndex:n,datasetIndex:s,element:i}}function xC(e,t){const i=e.chart.ctx,{body:s,footer:n,title:o}=e,{boxWidth:r,boxHeight:a}=t,l=kt(t.bodyFont),c=kt(t.titleFont),u=kt(t.footerFont),d=o.length,h=n.length,p=s.length,g=Ci(t.padding);let v=g.height,S=0,m=s.reduce((R,b)=>R+b.before.length+b.lines.length+b.after.length,0);if(m+=e.beforeBody.length+e.afterBody.length,d&&(v+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),m){const R=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=p*R+(m-p)*l.lineHeight+(m-1)*t.bodySpacing}h&&(v+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let C=0;const w=function(R){S=Math.max(S,i.measureText(R).width+C)};return i.save(),i.font=c.string,ve(e.title,w),i.font=l.string,ve(e.beforeBody.concat(e.afterBody),w),C=t.displayColors?r+2+t.boxPadding:0,ve(s,R=>{ve(R.before,w),ve(R.lines,w),ve(R.after,w)}),C=0,i.font=u.string,ve(e.footer,w),i.restore(),S+=g.width,{width:S,height:v}}function bP(e,t){const{y:i,height:s}=t;return i<s/2?"top":i>e.height-s/2?"bottom":"center"}function PP(e,t,i,s){const{x:n,width:o}=s,r=i.caretSize+i.caretPadding;if(e==="left"&&n+o+r>t.width||e==="right"&&n-o-r<0)return!0}function xP(e,t,i,s){const{x:n,width:o}=i,{width:r,chartArea:{left:a,right:l}}=e;let c="center";return s==="center"?c=n<=(a+l)/2?"left":"right":n<=o/2?c="left":n>=r-o/2&&(c="right"),PP(c,e,t,i)&&(c="center"),c}function FC(e,t,i){const s=i.yAlign||t.yAlign||bP(e,i);return{xAlign:i.xAlign||t.xAlign||xP(e,t,i,s),yAlign:s}}function FP(e,t){let{x:i,width:s}=e;return t==="right"?i-=s:t==="center"&&(i-=s/2),i}function EP(e,t,i){let{y:s,height:n}=e;return t==="top"?s+=i:t==="bottom"?s-=n+i:s-=n/2,s}function EC(e,t,i,s){const{caretSize:n,caretPadding:o,cornerRadius:r}=e,{xAlign:a,yAlign:l}=i,c=n+o,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=co(r);let g=FP(t,a);const v=EP(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,h)+n:a==="right"&&(g+=Math.max(d,p)+n),{x:Et(g,0,s.width-t.width),y:Et(v,0,s.height-t.height)}}function Rl(e,t,i){const s=Ci(i.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function kC(e){return bi([],Hi(e))}function kP(e,t,i){return Ho(e,{tooltip:t,tooltipItems:i,type:"tooltip"})}function MC(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}const Lw={beforeTitle:_i,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,s=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return i[t.dataIndex]}return""},afterTitle:_i,beforeBody:_i,beforeLabel:_i,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return Ee(i)||(t+=i),t},labelColor(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:_i,afterBody:_i,beforeFooter:_i,footer:_i,afterFooter:_i};function Rt(e,t,i,s){const n=e[t].call(i,s);return typeof n>"u"?Lw[t].call(i,s):n}class dp extends Vo{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const i=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&i.options.animation&&s.animations,o=new ww(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=kP(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){const{callbacks:s}=i,n=Rt(s,"beforeTitle",this,t),o=Rt(s,"title",this,t),r=Rt(s,"afterTitle",this,t);let a=[];return a=bi(a,Hi(n)),a=bi(a,Hi(o)),a=bi(a,Hi(r)),a}getBeforeBody(t,i){return kC(Rt(i.callbacks,"beforeBody",this,t))}getBody(t,i){const{callbacks:s}=i,n=[];return ve(t,o=>{const r={before:[],lines:[],after:[]},a=MC(s,o);bi(r.before,Hi(Rt(a,"beforeLabel",this,o))),bi(r.lines,Rt(a,"label",this,o)),bi(r.after,Hi(Rt(a,"afterLabel",this,o))),n.push(r)}),n}getAfterBody(t,i){return kC(Rt(i.callbacks,"afterBody",this,t))}getFooter(t,i){const{callbacks:s}=i,n=Rt(s,"beforeFooter",this,t),o=Rt(s,"footer",this,t),r=Rt(s,"afterFooter",this,t);let a=[];return a=bi(a,Hi(n)),a=bi(a,Hi(o)),a=bi(a,Hi(r)),a}_createItems(t){const i=this._active,s=this.chart.data,n=[],o=[],r=[];let a=[],l,c;for(l=0,c=i.length;l<c;++l)a.push(RP(this.chart,i[l]));return t.filter&&(a=a.filter((u,d,h)=>t.filter(u,d,h,s))),t.itemSort&&(a=a.sort((u,d)=>t.itemSort(u,d,s))),ve(a,u=>{const d=MC(t.callbacks,u);n.push(Rt(d,"labelColor",this,u)),o.push(Rt(d,"labelPointStyle",this,u)),r.push(Rt(d,"labelTextColor",this,u))}),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(t,i){const s=this.options.setContext(this.getContext()),n=this._active;let o,r=[];if(!n.length)this.opacity!==0&&(o={opacity:0});else{const a=Er[s.position].call(this,n,this._eventPosition);r=this._createItems(s),this.title=this.getTitle(r,s),this.beforeBody=this.getBeforeBody(r,s),this.body=this.getBody(r,s),this.afterBody=this.getAfterBody(r,s),this.footer=this.getFooter(r,s);const l=this._size=xC(this,s),c=Object.assign({},a,l),u=FC(this.chart,s,c),d=EC(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,s,n){const o=this.getCaretPosition(t,s,n);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,s){const{xAlign:n,yAlign:o}=this,{caretSize:r,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=co(a),{x:h,y:p}=t,{width:g,height:v}=i;let S,m,C,w,R,b;return o==="center"?(R=p+v/2,n==="left"?(S=h,m=S-r,w=R+r,b=R-r):(S=h+g,m=S+r,w=R-r,b=R+r),C=S):(n==="left"?m=h+Math.max(l,u)+r:n==="right"?m=h+g-Math.max(c,d)-r:m=this.caretX,o==="top"?(w=p,R=w-r,S=m-r,C=m+r):(w=p+v,R=w+r,S=m+r,C=m-r),b=w),{x1:S,x2:m,x3:C,y1:w,y2:R,y3:b}}drawTitle(t,i,s){const n=this.title,o=n.length;let r,a,l;if(o){const c=uo(s.rtl,this.x,this.width);for(t.x=Rl(this,s.titleAlign,s),i.textAlign=c.textAlign(s.titleAlign),i.textBaseline="middle",r=kt(s.titleFont),a=s.titleSpacing,i.fillStyle=s.titleColor,i.font=r.string,l=0;l<o;++l)i.fillText(n[l],c.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,l+1===o&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,i,s,n,o){const r=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=o,u=kt(o.bodyFont),d=Rl(this,"left",o),h=n.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,g=i.y+p;if(o.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},S=n.leftForLtr(h,c)+c/2,m=g+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,j3(t,v,S,m),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,j3(t,v,S,m)}else{t.lineWidth=pe(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const v=n.leftForLtr(h,c),S=n.leftForLtr(n.xPlus(h,1),c-2),m=co(r.borderRadius);Object.values(m).some(C=>C!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Wc(t,{x:v,y:g,w:c,h:l,radius:m}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),Wc(t,{x:S,y:g+1,w:c-2,h:l-2,radius:m}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(v,g,c,l),t.strokeRect(v,g,c,l),t.fillStyle=r.backgroundColor,t.fillRect(S,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,i,s){const{body:n}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,d=kt(s.bodyFont);let h=d.lineHeight,p=0;const g=uo(s.rtl,this.x,this.width),v=function(F){i.fillText(F,g.x(t.x+p),t.y+h/2),t.y+=h+o},S=g.textAlign(r);let m,C,w,R,b,P,x;for(i.textAlign=r,i.textBaseline="middle",i.font=d.string,t.x=Rl(this,S,s),i.fillStyle=s.bodyColor,ve(this.beforeBody,v),p=a&&S!=="right"?r==="center"?c/2+u:c+2+u:0,R=0,P=n.length;R<P;++R){for(m=n[R],C=this.labelTextColors[R],i.fillStyle=C,ve(m.before,v),w=m.lines,a&&w.length&&(this._drawColorBox(i,t,R,g,s),h=Math.max(d.lineHeight,l)),b=0,x=w.length;b<x;++b)v(w[b]),h=d.lineHeight;ve(m.after,v)}p=0,h=d.lineHeight,ve(this.afterBody,v),t.y-=o}drawFooter(t,i,s){const n=this.footer,o=n.length;let r,a;if(o){const l=uo(s.rtl,this.x,this.width);for(t.x=Rl(this,s.footerAlign,s),t.y+=s.footerMarginTop,i.textAlign=l.textAlign(s.footerAlign),i.textBaseline="middle",r=kt(s.footerFont),i.fillStyle=s.footerColor,i.font=r.string,a=0;a<o;++a)i.fillText(n[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+s.footerSpacing}}drawBackground(t,i,s,n){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=t,{width:c,height:u}=s,{topLeft:d,topRight:h,bottomLeft:p,bottomRight:g}=co(n.cornerRadius);i.fillStyle=n.backgroundColor,i.strokeStyle=n.borderColor,i.lineWidth=n.borderWidth,i.beginPath(),i.moveTo(a+d,l),r==="top"&&this.drawCaret(t,i,s,n),i.lineTo(a+c-h,l),i.quadraticCurveTo(a+c,l,a+c,l+h),r==="center"&&o==="right"&&this.drawCaret(t,i,s,n),i.lineTo(a+c,l+u-g),i.quadraticCurveTo(a+c,l+u,a+c-g,l+u),r==="bottom"&&this.drawCaret(t,i,s,n),i.lineTo(a+p,l+u),i.quadraticCurveTo(a,l+u,a,l+u-p),r==="center"&&o==="left"&&this.drawCaret(t,i,s,n),i.lineTo(a,l+d),i.quadraticCurveTo(a,l,a+d,l),i.closePath(),i.fill(),n.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){const i=this.chart,s=this.$animations,n=s&&s.x,o=s&&s.y;if(n||o){const r=Er[t.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=xC(this,t),l=Object.assign({},r,this._size),c=FC(i,t,l),u=EC(t,l,c,i);(n._to!==u.x||o._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const i=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(i);const n={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const r=Ci(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(o,t,n,i),vw(t,i.textDirection),o.y+=r.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),Sw(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){const s=this._active,n=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!Bc(s,n),r=this._positionChanged(n,i);(o||r)&&(this._active=n,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,s=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,o=this._active||[],r=this._getActiveElements(t,o,i,s),a=this._positionChanged(r,t),l=i||!Bc(r,o)||a;return l&&(this._active=r,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,s,n){const o=this.options;if(t.type==="mouseout")return[];if(!n)return i.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const r=this.chart.getElementsAtEventForMode(t,o.mode,o,s);return o.reverse&&r.reverse(),r}_positionChanged(t,i){const{caretX:s,caretY:n,options:o}=this,r=Er[o.position].call(this,t,i);return r!==!1&&(s!==r.x||n!==r.y)}}se(dp,"positioners",Er);var MP={id:"tooltip",_element:dp,positioners:Er,afterInit(e,t,i){i&&(e.tooltip=new dp({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const i={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Lw},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const DP=(e,t,i,s)=>(typeof t=="string"?(i=e.push(t)-1,s.unshift({index:i,label:t})):isNaN(t)&&(i=null),i);function TP(e,t,i,s){const n=e.indexOf(t);if(n===-1)return DP(e,t,i,s);const o=e.lastIndexOf(t);return n!==o?i:n}const AP=(e,t)=>e===null?null:Et(Math.round(e),0,t);function DC(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class hp extends Wo{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const i=this._addedLabels;if(i.length){const s=this.getLabels();for(const{index:n,label:o}of i)s[n]===o&&s.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(Ee(t))return null;const s=this.getLabels();return i=isFinite(i)&&s[i]===t?i:TP(s,t,Ce(i,t),this._addedLabels),AP(i,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),i||(n=this.getLabels().length-1)),this.min=s,this.max=n}buildTicks(){const t=this.min,i=this.max,s=this.options.offset,n=[];let o=this.getLabels();o=t===0&&i===o.length-1?o:o.slice(t,i+1),this._valueRange=Math.max(o.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let r=t;r<=i;r++)n.push({value:r});return n}getLabelForValue(t){return DC.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}se(hp,"id","category"),se(hp,"defaults",{ticks:{callback:DC}});function IP(e,t){const i=[],{bounds:n,step:o,min:r,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=e,p=o||1,g=u-1,{min:v,max:S}=t,m=!Ee(r),C=!Ee(a),w=!Ee(c),R=(S-v)/(d+1);let b=O3((S-v)/g/p)*p,P,x,F,k;if(b<1e-14&&!m&&!C)return[{value:v},{value:S}];k=Math.ceil(S/b)-Math.floor(v/b),k>g&&(b=O3(k*b/g/p)*p),Ee(l)||(P=Math.pow(10,l),b=Math.ceil(b*P)/P),n==="ticks"?(x=Math.floor(v/b)*b,F=Math.ceil(S/b)*b):(x=v,F=S),m&&C&&o&&LR((a-r)/o,b/1e3)?(k=Math.round(Math.min((a-r)/b,u)),b=(a-r)/k,x=r,F=a):w?(x=m?r:x,F=C?a:F,k=c-1,b=(F-x)/k):(k=(F-x)/b,Yl(k,Math.round(k),b/1e3)?k=Math.round(k):k=Math.ceil(k));const E=Math.max(B3(b),B3(x));P=Math.pow(10,Ee(l)?E:l),x=Math.round(x*P)/P,F=Math.round(F*P)/P;let T=0;for(m&&(h&&x!==r?(i.push({value:r}),x<r&&T++,Yl(Math.round((x+T*b)*P)/P,r,TC(r,R,e))&&T++):x<r&&T++);T<k;++T){const O=Math.round((x+T*b)*P)/P;if(C&&O>a)break;i.push({value:O})}return C&&h&&F!==a?i.length&&Yl(i[i.length-1].value,a,TC(a,R,e))?i[i.length-1].value=a:i.push({value:a}):(!C||F===a)&&i.push({value:F}),i}function TC(e,t,{horizontal:i,minRotation:s}){const n=$i(s),o=(i?Math.sin(n):Math.cos(n))||.001,r=.75*t*(""+e).length;return Math.min(t/o,r)}class LP extends Wo{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,i){return Ee(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:i,maxDefined:s}=this.getUserBounds();let{min:n,max:o}=this;const r=l=>n=i?n:l,a=l=>o=s?o:l;if(t){const l=Bs(n),c=Bs(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(n===o){let l=o===0?1:Math.abs(o*.05);a(o+l),t||r(n-l)}this.min=n,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:i,stepSize:s}=t,n;return s?(n=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),i=i||11),i&&(n=Math.min(i,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,i=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const n={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},o=this._range||this,r=IP(n,o);return t.bounds==="ticks"&&OR(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let i=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const n=(s-i)/Math.max(t.length-1,1)/2;i-=n,s+=n}this._startValue=i,this._endValue=s,this._valueRange=s-i}getLabelForValue(t){return qf(t,this.chart.options.locale,this.options.ticks.format)}}class pp extends LP{determineDataLimits(){const{min:t,max:i}=this.getMinMax(!0);this.min=oi(t)?t:0,this.max=oi(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),i=t?this.width:this.height,s=$i(this.options.ticks.minRotation),n=(t?Math.sin(s):Math.cos(s))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,o.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}se(pp,"id","linear"),se(pp,"defaults",{ticks:{callback:uw.formatters.numeric}});const Ou={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},xt=Object.keys(Ou);function AC(e,t){return e-t}function IC(e,t){if(Ee(t))return null;const i=e._adapter,{parser:s,round:n,isoWeekday:o}=e._parseOpts;let r=t;return typeof s=="function"&&(r=s(r)),oi(r)||(r=typeof s=="string"?i.parse(r,s):i.parse(r)),r===null?null:(n&&(r=n==="week"&&(Gc(o)||o===!0)?i.startOf(r,"isoWeek",o):i.startOf(r,n)),+r)}function LC(e,t,i,s){const n=xt.length;for(let o=xt.indexOf(e);o<n-1;++o){const r=Ou[xt[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((i-t)/(a*r.size))<=s)return xt[o]}return xt[n-1]}function OP(e,t,i,s,n){for(let o=xt.length-1;o>=xt.indexOf(i);o--){const r=xt[o];if(Ou[r].common&&e._adapter.diff(n,s,r)>=t-1)return r}return xt[i?xt.indexOf(i):0]}function BP(e){for(let t=xt.indexOf(e)+1,i=xt.length;t<i;++t)if(Ou[xt[t]].common)return xt[t]}function OC(e,t,i){if(!i)e[t]=!0;else if(i.length){const{lo:s,hi:n}=$f(i,t),o=i[s]>=t?i[s]:i[n];e[o]=!0}}function NP(e,t,i,s){const n=e._adapter,o=+n.startOf(t[0].value,s),r=t[t.length-1].value;let a,l;for(a=o;a<=r;a=+n.add(a,1,s))l=i[a],l>=0&&(t[l].major=!0);return t}function BC(e,t,i){const s=[],n={},o=t.length;let r,a;for(r=0;r<o;++r)a=t[r],n[a]=r,s.push({value:a,major:!1});return o===0||!i?s:NP(e,s,n,i)}class Kc extends Wo{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){const s=t.time||(t.time={}),n=this._adapter=new Q7._date(t.adapters.date);n.init(i),Vr(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:IC(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,i=this._adapter,s=t.time.unit||"day";let{min:n,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(n=Math.min(n,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),n=oi(n)&&!isNaN(n)?n:+i.startOf(Date.now(),s),o=oi(o)&&!isNaN(o)?o:+i.endOf(Date.now(),s)+1,this.min=Math.min(n,o-1),this.max=Math.max(n+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],s=t[t.length-1]),{min:i,max:s}}buildTicks(){const t=this.options,i=t.time,s=t.ticks,n=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const o=this.min,r=this.max,a=HR(n,o,r);return this._unit=i.unit||(s.autoSkip?LC(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):OP(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:BP(this._unit),this.initOffsets(n),t.reverse&&a.reverse(),BC(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,s=0,n,o;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?i=1-n:i=(this.getDecimalForValue(t[1])-n)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?s=o:s=(o-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;i=Et(i,0,r),s=Et(s,0,r),this._offsets={start:i,end:s,factor:1/(i+1+s)}}_generate(){const t=this._adapter,i=this.min,s=this.max,n=this.options,o=n.time,r=o.unit||LC(o.minUnit,i,s,this._getLabelCapacity(i)),a=Ce(n.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=Gc(l)||l===!0,u={};let d=i,h,p;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":r),t.diff(s,i,r)>1e5*a)throw new Error(i+" and "+s+" are too far apart with stepSize of "+a+" "+r);const g=n.ticks.source==="data"&&this.getDataTimestamps();for(h=d,p=0;h<s;h=+t.add(h,a,r),p++)OC(u,h,g);return(h===s||n.bounds==="ticks"||p===1)&&OC(u,h,g),Object.keys(u).sort(AC).map(v=>+v)}getLabelForValue(t){const i=this._adapter,s=this.options.time;return s.tooltipFormat?i.format(t,s.tooltipFormat):i.format(t,s.displayFormats.datetime)}format(t,i){const n=this.options.time.displayFormats,o=this._unit,r=i||n[o];return this._adapter.format(t,r)}_tickFormatFunction(t,i,s,n){const o=this.options,r=o.ticks.callback;if(r)return Fe(r,[t,i,s],this);const a=o.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=s[i],p=c&&d&&h&&h.major;return this._adapter.format(t,n||(p?d:u))}generateTickLabels(t){let i,s,n;for(i=0,s=t.length;i<s;++i)n=t[i],n.label=this._tickFormatFunction(n.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const i=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+s)*i.factor)}getValueForPixel(t){const i=this._offsets,s=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const i=this.options.ticks,s=this.ctx.measureText(t).width,n=$i(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(n),r=Math.sin(n),a=this._resolveTickFontOptions(0).size;return{w:s*o+a*r,h:s*r+a*o}}_getLabelCapacity(t){const i=this.options.time,s=i.displayFormats,n=s[i.unit]||s.millisecond,o=this._tickFormatFunction(t,0,BC(this,[t],this._majorUnit),n),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],i,s;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(i=0,s=n.length;i<s;++i)t=t.concat(n[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let i,s;if(t.length)return t;const n=this.getLabels();for(i=0,s=n.length;i<s;++i)t.push(IC(this,n[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return nw(t.sort(AC))}}se(Kc,"id","time"),se(Kc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function bl(e,t,i){let s=0,n=e.length-1,o,r,a,l;i?(t>=e[s].pos&&t<=e[n].pos&&({lo:s,hi:n}=rp(e,"pos",t)),{pos:o,time:a}=e[s],{pos:r,time:l}=e[n]):(t>=e[s].time&&t<=e[n].time&&({lo:s,hi:n}=rp(e,"time",t)),{time:o,pos:a}=e[s],{time:r,pos:l}=e[n]);const c=r-o;return c?a+(l-a)*(t-o)/c:a}class NC extends Kc{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(t);this._minPos=bl(i,this.min),this._tableRange=bl(i,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:i,max:s}=this,n=[],o=[];let r,a,l,c,u;for(r=0,a=t.length;r<a;++r)c=t[r],c>=i&&c<=s&&n.push(c);if(n.length<2)return[{time:i,pos:0},{time:s,pos:1}];for(r=0,a=n.length;r<a;++r)u=n[r+1],l=n[r-1],c=n[r],Math.round((u+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_generate(){const t=this.min,i=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(i)||s.length===1)&&s.push(i),s.sort((n,o)=>n-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const i=this.getDataTimestamps(),s=this.getLabelTimestamps();return i.length&&s.length?t=this.normalize(i.concat(s)):t=i.length?i:s,t=this._cache.all=t,t}getDecimalForValue(t){return(bl(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const i=this._offsets,s=this.getDecimalForPixel(t)/i.factor-i.end;return bl(this._table,s*this._tableRange+this._minPos,!0)}}se(NC,"id","timeseries"),se(NC,"defaults",Kc.defaults);const Ow="label";function _C(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function _P(e,t){const i=e.options;i&&t&&Object.assign(i,t)}function Bw(e,t){e.labels=t}function Nw(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ow;const s=[];e.datasets=t.map(n=>{const o=e.datasets.find(r=>r[i]===n[i]);return!o||!n.data||s.includes(o)?{...n}:(s.push(o),Object.assign(o,n),o)})}function GP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ow;const i={labels:[],datasets:[]};return Bw(i,e.labels),Nw(i,e.datasets,t),i}function HP(e,t){const{height:i=150,width:s=300,redraw:n=!1,datasetIdKey:o,type:r,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...h}=e,p=y.useRef(null),g=y.useRef(),v=()=>{p.current&&(g.current=new Lu(p.current,{type:r,data:GP(a,o),options:l&&{...l},plugins:c}),_C(t,g.current))},S=()=>{_C(t,null),g.current&&(g.current.destroy(),g.current=null)};return y.useEffect(()=>{!n&&g.current&&l&&_P(g.current,l)},[n,l]),y.useEffect(()=>{!n&&g.current&&Bw(g.current.config.data,a.labels)},[n,a.labels]),y.useEffect(()=>{!n&&g.current&&a.datasets&&Nw(g.current.config.data,a.datasets,o)},[n,a.datasets]),y.useEffect(()=>{g.current&&(n?(S(),setTimeout(v)):g.current.update(d))},[n,l,a.labels,a.datasets,d]),y.useEffect(()=>{g.current&&(S(),setTimeout(v))},[r]),y.useEffect(()=>(v(),()=>S()),[]),B.createElement("canvas",Object.assign({ref:p,role:"img",height:i,width:s},h),u)}const VP=y.forwardRef(HP);function _w(e,t){return Lu.register(t),y.forwardRef((i,s)=>B.createElement(VP,Object.assign({},i,{ref:s,type:e})))}const Pl=_w("bar",Ql),WP=_w("pie",lp);var zo=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const s=t?this.allAsyncListeners:this.allSyncListeners;let n=s.get(e);return!n&&i&&(n=new Set,s.set(e,n)),n}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){const s=this.getListeners(e,i,!1);s&&(s.delete(t),s.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){const t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const i=e.type;if(t&&"event"in e){const a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}const s=(a,l)=>a.forEach(c=>{if(!l.has(c))return;const u=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>c(e)):()=>c(e);t?this.dispatchAsync(u):u()}),n=this.getListeners(i,t,!1)??new Set,o=new Set(n);o.size>0&&s(o,n),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(a=>{const l=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>a(i,e)):()=>a(i,e);t?this.dispatchAsync(l):l()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}},Gw=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(Gw||{}),GC={};function ng(e,t){GC[t]||(e(),GC[t]=!0)}function hi(e,...t){console.log("AG Grid: "+e,...t)}function I(e,...t){ng(()=>console.warn("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function ge(e,...t){ng(()=>console.error("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function og(e){return!!(e&&e.constructor&&e.call&&e.apply)}function zP(e){jP(e,400)}var Bd=[],Nd=!1;function HC(e){Bd.push(e),!Nd&&(Nd=!0,window.setTimeout(()=>{const t=Bd.slice();Bd.length=0,Nd=!1,t.forEach(i=>i())},0))}function jP(e,t=0){e.length>0&&window.setTimeout(()=>e.forEach(i=>i()),t)}function mt(e,t){let i;return function(...s){const n=this;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(n,s)},t)}}function VC(e,t){let i=0;return function(...s){const n=this,o=new Date().getTime();o-i<t||(i=o,e.apply(n,s))}}function UP(e,t,i=100,s){const n=new Date().getTime();let o=null,r=!1;const a=()=>{const l=new Date().getTime()-n>i;(e()||l)&&(t(),r=!0,o!=null&&(window.clearInterval(o),o=null),l&&s&&I(s))};a(),r||(o=window.setInterval(a,10))}function KP(...e){return t=>e.reduce((i,s)=>s(i),t)}function Yi(e){return e==null||e===""?null:e}function N(e,t=!1){return e!=null&&(e!==""||t)}function le(e){return!N(e)}function Vt(e){return e==null||e.length===0}function fp(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function vn(e){if(e===void 0)return;if(e===null||e==="")return null;if(typeof e=="number")return isNaN(e)?void 0:e;const t=parseInt(e,10);return isNaN(t)?void 0:t}function gp(e){if(e!==void 0)return e===null||e===""?!1:mp(e)}function mp(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}function wa(e,t){const i=e?JSON.stringify(e):null,s=t?JSON.stringify(t):null;return i===s}function $P(e,t,i=!1){const s=e==null,n=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),s&&n)return 0;if(s)return-1;if(n)return 1;function o(r,a){return r>a?1:r<a?-1:0}if(typeof e!="string"||!i)return o(e,t);try{return e.localeCompare(t)}catch{return o(e,t)}}function ec(e){if(e instanceof Set||e instanceof Map){const t=[];return e.forEach(i=>t.push(i)),t}return Object.values(e)}function Hw(e,t){return e.get("rowModelType")===t}function ke(e){return Hw(e,"clientSide")}function Oi(e){return Hw(e,"serverSide")}function it(e,t){return e.get("domLayout")===t}function $c(e){return Qc(e)!==void 0}function qc(e){return!e.get("suppressAsyncEvents")}function Vw(e){return typeof e.get("getRowHeight")=="function"}function qP(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function Vs(e,t,i=!1,s){if(s==null&&(s=e.environment.getDefaultRowHeight()),Vw(e)){if(i)return{height:s,estimated:!0};const r={node:t,data:t.data},a=e.getCallback("getRowHeight")(r);if(Cp(a))return a===0&&I("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,a),estimated:!1}}if(t.detail&&e.get("masterDetail"))return YP(e);const n=e.get("rowHeight");return{height:n&&Cp(n)?n:s,estimated:!1}}function YP(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return Cp(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function Sn(e){const{environment:t}=e,i=e.get("rowHeight");if(!i||le(i))return t.getDefaultRowHeight();const s=t.refreshRowHeightVariable();return s!==-1?s:(I("row height must be a number if not using standard row model"),t.getDefaultRowHeight())}function Cp(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function ya(e,t,i){const s=t[e.getDomDataKey()];return s?s[i]:void 0}function Dn(e,t,i,s){const n=e.getDomDataKey();let o=t[n];le(o)&&(o={},t[n]=o),o[i]=s}function Ge(e){let t=null;const i=e.get("getDocument");return i&&N(i)?t=i():e.eGridDiv&&(t=e.eGridDiv.ownerDocument),t&&N(t)?t:document}function Ww(e){return Ge(e).defaultView||window}function Ra(e){return e.eGridDiv.getRootNode()}function Ie(e){return Ra(e).activeElement}function zw(e){const t=Ge(e),i=Ie(e);return i===null||i===t.body}function po(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function Bu(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||it(e,"print"))}function Ei(e){const t=e.get("autoGroupColumnDef");return!(t!=null&&t.comparator)&&!e.get("treeData")}function vp(e){const t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function jw(e){const t=e.get("grandTotalRow");if(t)return t;if(e.get("groupIncludeTotalFooter"))return"bottom"}function Uw(e){const t=e.get("groupTotalRow");if(typeof t=="function")return e.getCallback("groupTotalRow");if(t)return()=>t;const i=e.get("groupIncludeFooter");if(typeof i=="function"){const s=e.getCallback("groupIncludeFooter");return n=>s(n)?"bottom":void 0}return()=>i?"bottom":void 0}function Kw(e){return e.exists("groupDisplayType")?e.get("groupDisplayType")==="multipleColumns":e.get("groupHideOpenParents")}function Nu(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function jo(e){const t=e.getCallback("getRowId");return t===void 0?t:i=>{let s=t(i);return typeof s!="string"&&(I("The getRowId callback must return a string. The ID ",s," is being cast to a string."),s=String(s)),s}}function Mo(e){return(e==null?void 0:e.checkboxes)??!0}function Yc(e){return(e==null?void 0:e.mode)==="multiRow"&&(e.headerCheckbox??!0)}function QP(e){return(e==null?void 0:e.hideDisabledCheckboxes)??!1}function XP(e){return typeof e.get("rowSelection")!="string"}function JP(e){return e.get("cellSelection")!==void 0}function ZP(e){const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?(t==null?void 0:t.suppressMultiRanges)??!1:!1:e.get("suppressMultiRangeSelection")}function is(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function ex(e){var s;const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?((s=t.handle)==null?void 0:s.mode)==="range":!1:e.get("enableRangeHandle")}function WC(e){var s;const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?((s=t.handle)==null?void 0:s.mode)==="fill":!1:e.get("enableFillHandle")}function $w(e){const t=e.get("rowSelection")??"single";if(typeof t=="string"){const i=e.get("suppressRowClickSelection"),s=e.get("suppressRowDeselection");return i&&s?!1:i?"enableDeselection":s?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function tx(e){const t=$w(e);return t===!0||t==="enableSelection"}function zC(e){const t=$w(e);return t===!0||t==="enableDeselection"}function rg(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t==null?void 0:t.isRowSelectable}function Qc(e){const t=e.get("rowSelection");if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}return t==null?void 0:t.mode}function qw(e){return Qc(e)==="multiRow"}function ix(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):(t==null?void 0:t.enableSelectionWithoutKeys)??!1}function ag(e){const t=e.get("rowSelection");if(typeof t=="string"){const i=e.get("groupSelectsChildren"),s=e.get("groupSelectsFiltered");return i&&s?"filteredDescendants":i?"descendants":"self"}return(t==null?void 0:t.mode)==="multiRow"?t.groupSelects:void 0}function Tn(e){const t=ag(e);return t==="descendants"||t==="filteredDescendants"}function _d(e){return e.isModuleRegistered("@ag-grid-enterprise/set-filter")&&!e.get("suppressSetFilterByDefault")}function ae(e){if(!(!e||!e.length))return e[e.length-1]}function $s(e,t,i){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((s,n)=>i?i(s,t[n]):t[n]===s)}function sx(e){return e.sort((t,i)=>t-i)}function Yw(e,t){const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.pop())}function Ct(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function nx(e,t){for(let i=0;i<t.length;i++)Yw(e,t[i])}function ox(e,t){for(let i=0;i<t.length;i++)Ct(e,t[i])}function Xc(e,t,i){e.splice(i,0,t)}function Qw(e,t,i){ox(e,t),t.slice().reverse().forEach(s=>Xc(e,s,i))}function wn(e,t){return e.indexOf(t)>-1}function rx(e){return(e==null?void 0:e.flatMap(t=>t))??[]}function jC(e,t){t==null||e==null||t.forEach(i=>e.push(i))}var Xw="__ag_Grid_Stop_Propagation",ax=["touchstart","touchend","touchmove","touchcancel","scroll"],Gd={};function Do(e){e[Xw]=!0}function Qi(e){return e[Xw]===!0}var Jw=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return i=>{if(typeof Gd[i]=="boolean")return Gd[i];const s=document.createElement(e[i]||"div");return i="on"+i,Gd[i]=i in s}})();function Sp(e,t,i){let s=t;for(;s;){const n=ya(e,s,i);if(n)return n;s=s.parentElement}return null}function lx(e,t){return!t||!e?!1:ux(t).indexOf(e)>=0}function cx(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}function ux(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():cx(t)}function dx(e,t,i,s){const o=wn(ax,i)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,i,s,o)}var D=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new zo),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.localEventService&&this.localEventService.removeEventListener(e,t,i)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const s in t){const n=t[s];n&&i.push(this._setupListener(e,s,n))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;e instanceof HTMLElement?dx(this.getFrameworkOverrides(),e,t,i):e.addEventListener(t,i);const s=()=>(e.removeEventListener(t,i),null);return this.destroyFunctions.push(s),()=>(s(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==s),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);const i=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==i),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,s=n=>{if(n.changeSet){if(n.changeSet&&n.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=n.changeSet.id}const o={type:"gridPropertyChanged",changeSet:n.changeSet,source:n.source};t(o)};e.forEach(n=>this.setupGridOptionListener(n,s))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function ft(e){return e instanceof tc}var tc=class extends D{constructor(e,t,i,s){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=ty(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=i,this.level=s}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{Ws(t)?e.push(t):ft(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const s=this.findChildrenRemovingPadding();for(let o=0,r=s.length;o<r;o++){const a=s[o];if(!a.isVisible())continue;const l=a.getColumnGroupShow();l==="open"?(e=!0,i=!0):l==="closed"?(t=!0,i=!0):(e=!0,t=!0)}const n=e&&t&&i;this.expandable!==n&&(this.expandable=n,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{i.forEach(s=>{ft(s)&&s.isPadding()?t(s.children):e.push(s)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},Zw="ag-Grid-ControlsColumn",hx=class extends D{constructor(){super(...arguments),this.beanName="controlsColService"}createControlsCols(){const{gos:e}=this,t=e.get("rowSelection");if(!t||typeof t!="object")return[];const i=Mo(t),s=Yc(t);if(i||s){const n=e.get("selectionColumnDef"),r={maxWidth:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:e.get("enableRtl")?"right":"left",comparator(l,c,u,d){const h=u.isSelected(),p=d.isSelected();return h&&p?0:h?1:-1},editable:!1,suppressFillHandle:!0,...n,colId:`${Zw}`},a=new dg(r,null,r.colId,!1);return this.createBean(a),[a]}return[]}},_u="ag-Grid-AutoColumn";function lg(e){const t=[],i=s=>{for(let n=0;n<s.length;n++){const o=s[n];Ws(o)?t.push(o):ft(o)&&i(o.getChildren())}};return i(e),t}function ji(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}function ms(e,t,i){const s={};if(!t)return;ss(null,t,o=>{s[o.getInstanceId()]=o}),i&&ss(null,i,o=>{s[o.getInstanceId()]=null});const n=Object.values(s).filter(o=>o!=null);e.destroyBeans(n)}function wp(e){return e.getId().startsWith(_u)}function Ga(e){return e.getColId().startsWith(Zw)}function ic(e){let t=[];return e instanceof Array?e.some(s=>typeof s!="string")?I("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):I("colDef.type should be of type 'string' | 'string[]'"),t}var cg=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=i=>{this.frameworkOverrides.wrapOutgoing(()=>e(i))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(i,s)=>{this.frameworkOverrides.wrapOutgoing(()=>e(i,s))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){return this.wrappedListeners.get(e)??e}unwrapGlobal(e){return this.wrappedGlobalListeners.get(e)??e}},ug=new Set(["__proto__","constructor","prototype"]);function di(e,t){if(e!=null){if(Array.isArray(e)){for(let i=0;i<e.length;i++)t(i.toString(),e[i]);return}for(const[i,s]of Object.entries(e))t(i,s)}}function ey(e){const t={},i=Object.keys(e);for(let s=0;s<i.length;s++){if(ug.has(i[s]))continue;const n=i[s],o=e[n];t[n]=o}return t}function yp(e,t){if(!e)return;const i=e,s={};return Object.keys(i).forEach(n=>{if(t&&t.indexOf(n)>=0||ug.has(n))return;const o=i[n];bp(o)&&o.constructor===Object?s[n]=yp(o):s[n]=o}),s}function Rp(e){if(!e)return[];const t=Object;if(typeof t.values=="function")return t.values(e);const i=[];for(const s in e)e.hasOwnProperty(s)&&e.propertyIsEnumerable(s)&&i.push(e[s]);return i}function gt(e,t,i=!0,s=!1){N(t)&&di(t,(n,o)=>{if(ug.has(n))return;let r=e[n];r!==o&&(s&&r==null&&o!=null&&typeof o=="object"&&o.constructor===Object&&(r={},e[n]=r),bp(o)&&bp(r)&&!Array.isArray(r)?gt(r,o,i,s):(i||o!==void 0)&&(e[n]=o))})}function jr(e,t,i){if(!t||!e)return;if(!i)return e[t];const s=t.split(".");let n=e;for(let o=0;o<s.length;o++){if(n==null)return;n=n[s[o]]}return n}function bp(e){return typeof e=="object"&&e!==null}var px={resizable:!0,sortable:!0},fx=0;function ty(){return fx++}function Ws(e){return e instanceof dg}var dg=class extends D{constructor(e,t,i,s){super(),this.isColumn=!0,this.instanceId=ty(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new zo,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=s,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);const t=e.sortIndex,i=e.initialSortIndex;t!==void 0?t!==null&&(this.sortIndex=t):i!==null&&(this.sortIndex=i);const s=e.hide,n=e.initialHide;s!==void 0?this.visible=!s:this.visible=!n,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const o=e.flex,r=e.initialFlex;o!==void 0?this.flex=o:r!==void 0&&(this.flex=r)}setColDef(e,t,i){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",i))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=N(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=N(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.gos.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=N(this.colDef.tooltipField)||N(this.colDef.tooltipValueGetter)||N(this.colDef.tooltipComponent)}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=vn(e.width),s=vn(e.initialWidth);return i!=null?t=i:s!=null?t=s:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(le(this.colDef)||le(this.colDef.showRowGroup))return!1;const t=this.colDef.showRowGroup===!0,i=this.colDef.showRowGroup===e;return t||i}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}addEventListener(e,t){var s;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new cg(this.frameworkOverrides));const i=((s=this.frameworkEventListenerService)==null?void 0:s.wrap(t))??t;this.columnEventService.addEventListener(e,i)}removeEventListener(e,t){var s;const i=((s=this.frameworkEventListenerService)==null?void 0:s.unwrap(t))??t;this.columnEventService.removeEventListener(e,i)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){const t=this.createColumnFunctionCallbackParams(e),i=this.colDef.suppressNavigable;return i(t)}return!1}isCellEditable(e){if(e.group){if(this.gos.get("treeData")){if(!e.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1}return this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){const t=this.gos.get("rowSelection");if(t&&typeof t!="string"){const i=Ga(this)&&Mo(t);return this.isColumnFunc(e,i)}else return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??px[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const i=this.createColumnFunctionCallbackParams(e);return t(i)}return!1}setHighlighted(e){this.highlighted!==e&&(this.highlighted=e,this.columnEventService.dispatchEvent(this.createColumnEvent("headerHighlightChanged","uiColumnMoved")))}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return le(this.sort)}isSorting(){return N(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,i){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));const s=this.createColumnEvent("filterChanged",t);i&&gt(s,i),this.columnEventService.dispatchEvent(s)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const i=e===!0;this.visible!==i&&(this.visible=i,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(le(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(le(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t,i=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}},gx={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},mx=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=fp(e);let i=0;for(;;){let s;if(e?(s=e,i!==0&&(s+="_"+i)):t?(s=t,i!==0&&(s+="_"+i)):s=i,!this.existingKeys[s])return this.existingKeys[s]=!0,String(s);i++}}},Cx=class extends D{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,i,s){const n=new mx,{existingCols:o,existingGroups:r,existingColKeys:a}=this.extractExistingTreeData(i);n.addExistingKeys(a);const l=this.recursivelyCreateColumns(e,0,t,o,n,r,s),c=this.findMaxDept(l,0),u=this.balanceColumnTree(l,0,c,n);return ss(null,u,(h,p)=>{ft(h)&&h.setupExpandable(),h.setOriginalParent(p)}),{columnTree:u,treeDept:c}}extractExistingTreeData(e){const t=[],i=[],s=[];return e&&ss(null,e,n=>{if(ft(n)){const o=n;i.push(o)}else{const o=n;s.push(o.getId()),t.push(o)}}),{existingCols:t,existingGroups:i,existingColKeys:s}}balanceTreeForAutoCols(e,t){const i=[],s=this.findDepth(t);return e.forEach(n=>{let o=n;for(let r=s-1;r>=0;r--){const a=new tc(null,`FAKE_PATH_${n.getId()}}_${r}`,!0,r);this.createBean(a),a.setChildren([o]),o.setOriginalParent(a),o=a}s===0&&n.setOriginalParent(null),i.push(o)}),[i,s]}findDepth(e){let t=0,i=e;for(;i&&i[0]&&ft(i[0]);)t++,i=i[0].getChildren();return t}balanceColumnTree(e,t,i,s){const n=[];for(let o=0;o<e.length;o++){const r=e[o];if(ft(r)){const a=r,l=this.balanceColumnTree(a.getChildren(),t+1,i,s);a.setChildren(l),n.push(a)}else{let a,l;for(let c=i-1;c>=t;c--){const u=s.getUniqueKey(null,null),d=this.createMergedColGroupDef(null),h=new tc(d,u,!0,t);this.createBean(h),l&&l.setChildren([h]),l=h,a||(a=l)}if(a&&l)if(n.push(a),e.some(u=>ft(u))){l.setChildren([r]);continue}else{l.setChildren(e);break}n.push(r)}}return n}findMaxDept(e,t){let i=t;for(let s=0;s<e.length;s++){const n=e[s];if(ft(n)){const o=n,r=this.findMaxDept(o.getChildren(),t+1);i<r&&(i=r)}}return i}recursivelyCreateColumns(e,t,i,s,n,o,r){if(!e)return[];const a=new Array(e.length);for(let l=0;l<a.length;l++){const c=e[l];this.isColumnGroup(c)?a[l]=this.createColumnGroup(i,c,t,s,n,o,r):a[l]=this.createColumn(i,c,s,n,r)}return a}createColumnGroup(e,t,i,s,n,o,r){const a=this.createMergedColGroupDef(t),l=n.getUniqueKey(a.groupId||null,null),c=new tc(a,l,!1,i);this.createBean(c);const u=this.findExistingGroup(t,o);u&&o.splice(u.idx,1);const d=u==null?void 0:u.group;d&&c.setExpanded(d.isExpanded());const h=this.recursivelyCreateColumns(a.children,i+1,e,s,n,o,r);return c.setChildren(h),c}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,i,s,n){var a;const o=this.findExistingColumn(t,i);o&&(i==null||i.splice(o.idx,1));let r=o==null?void 0:o.column;if(r){const l=this.addColumnDefaultAndTypes(t,r.getColId());r.setColDef(l,t,n),this.applyColumnState(r,l,n)}else{const l=s.getUniqueKey(t.colId,t.field),c=this.addColumnDefaultAndTypes(t,l);r=new dg(c,t,l,e),this.createBean(r)}return(a=this.dataTypeService)==null||a.addColumnListeners(r),r}applyColumnState(e,t,i){const s=vn(t.flex);if(s!==void 0&&e.setFlex(s),e.getFlex()<=0){const a=vn(t.width);if(a!=null)e.setActualWidth(a,i);else{const l=e.getActualWidth();e.setActualWidth(l,i)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,i):e.setSort(void 0,i));const o=vn(t.sortIndex);o!==void 0&&e.setSortIndex(o);const r=gp(t.hide);r!==void 0&&e.setVisible(!r,i),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let i=0;i<t.length;i++){const s=t[i].getUserProvidedColDef();if(!s)continue;if(e.colId!=null){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(e.field!=null){if(s.field===e.field)return{idx:i,column:t[i]};continue}if(s===e)return{idx:i,column:t[i]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let s=0;s<t.length;s++){const n=t[s];if(n.getColGroupDef()&&n.getId()===e.groupId)return{idx:s,group:n}}}addColumnDefaultAndTypes(e,t){var a;const i={},s=this.gos.get("defaultColDef");gt(i,s,!1,!0);const n=this.updateColDefAndGetColumnType(i,e,t);n&&this.assignColumnTypes(n,i),gt(i,e,!1,!0);const o=this.gos.get("autoGroupColumnDef"),r=Ei(this.gos);return e.rowGroup&&o&&r&&gt(i,{sort:o.sort,initialSort:o.initialSort},!1,!0),(a=this.dataTypeService)==null||a.validateColDef(i),i}updateColDefAndGetColumnType(e,t,i){var o;const s=(o=this.dataTypeService)==null?void 0:o.updateColDefAndGetColumnType(e,t,i),n=t.type??s??e.type;return e.type=n,n?ic(n):void 0}assignColumnTypes(e,t){if(!e.length)return;const i=Object.assign({},gx),s=this.gos.get("columnTypes")||{};di(s,(n,o)=>{n in i?I(`the column type '${n}' is a default column type and cannot be overridden.`):(o.type&&I("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[n]=o)}),e.forEach(n=>{const o=i[n.trim()];o?gt(t,o,!1,!0):I("colDef.type '"+n+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};function ss(e,t,i){if(t)for(let s=0;s<t.length;s++){const n=t[s];ft(n)&&ss(n,n.getChildren(),i),i(n,e)}}var vx=class extends D{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.ctrlsService=e.ctrlsService,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.controlsColService=e.controlsColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){const e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.refreshAll(an(t.source))),this.addManagedPropertyListener("rowSelection",t=>{this.onSelectionOptionsChanged(t.currentValue,t.previousValue,an(t.source))}),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(an(t.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],t=>this.recreateColumnDefs(an(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),an(t.source))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e){var c,u,d;const t=this.colDefs?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire();const i=(c=this.colDefCols)==null?void 0:c.list,s=(u=this.colDefCols)==null?void 0:u.tree,n=this.columnFactory.createColumnTree(this.colDefs,!0,s,e);ms(this.context,(d=this.colDefCols)==null?void 0:d.tree,n.columnTree);const o=n.columnTree,r=n.treeDept,a=lg(o),l={};a.forEach(h=>l[h.getId()]=h),this.colDefCols={tree:o,treeDepth:r,list:a,map:l},this.funcColsService.extractCols(e,i),this.ready=!0,this.refreshCols(!0),this.visibleColsService.refresh(e),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(e),t&&(this.changeEventsDispatching=!0,t(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(e),e==="gridInitializing"&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(e){var n,o,r;if(!this.colDefCols)return;const t=(n=this.cols)==null?void 0:n.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.createControlsCols(),this.addControlsCols();const i=qP(this.gos,this.showingPivotResult);(!e||i)&&this.restoreColOrder(),this.positionLockedCols(),(o=this.showRowGroupColsService)==null||o.refresh(),(r=this.quickFilterService)==null||r.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!$s(t,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){const e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=e!=null,e){const{map:t,list:i,tree:s,treeDepth:n}=e;this.cols={list:i.slice(),map:{...t},tree:s.slice(),treeDepth:n},e.list.some(r=>{var a;return((a=this.cols)==null?void 0:a.map[r.getColId()])!==void 0})||(this.lastPivotOrder=null)}else{const{map:t,list:i,tree:s,treeDepth:n}=this.colDefCols;this.cols={list:i.slice(),map:{...t},tree:s.slice(),treeDepth:n}}}getColsToShow(){const e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns();return this.cols.list.filter(s=>{const n=wp(s);if(e){const o=t&&wn(t,s);return n||o}else return n||s.isVisible()})}addAutoCols(){this.autoCols!=null&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),UC(this.cols))}createAutoCols(){var g;const e=Nu(this.gos,this.pivotMode),t=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),i=this.funcColsService.getRowGroupColumns(),n=!(i.length>0||this.gos.get("treeData"))||t||e,o=()=>{this.autoCols&&(ms(this.context,this.autoCols.tree),this.autoCols=null)};if(n||!this.autoColService){o();return}const r=this.autoColService.createAutoCols(i)??[],a=$C(r,((g=this.autoCols)==null?void 0:g.list)||null),l=this.cols.treeDepth,u=(this.autoCols?this.autoCols.treeDepth:-1)==l;if(a&&u)return;o();const[d,h]=this.columnFactory.balanceTreeForAutoCols(r,this.cols.tree);this.autoCols={list:r,tree:d,treeDepth:h,map:{}};const p=v=>{if(!v)return null;const S=v.filter(m=>!wp(m));return[...r,...S]};this.lastOrder=p(this.lastOrder),this.lastPivotOrder=p(this.lastPivotOrder)}createControlsCols(){var c,u,d;const e=()=>{var h;ms(this.context,(h=this.controlsCols)==null?void 0:h.tree),this.controlsCols=null};this.controlsColService||e();const t=this.cols.treeDepth,s=(((c=this.controlsCols)==null?void 0:c.treeDepth)??-1)==t,n=((u=this.controlsColService)==null?void 0:u.createControlsCols())??[];if($C(n,((d=this.controlsCols)==null?void 0:d.list)??[])&&s)return;e();const[r,a]=this.columnFactory.balanceTreeForAutoCols(n,this.cols.tree);this.controlsCols={list:n,tree:r,treeDepth:a,map:{}};const l=h=>{if(!h)return null;const p=h.filter(g=>!Ga(g));return[...n,...p]};this.lastOrder=l(this.lastOrder),this.lastPivotOrder=l(this.lastPivotOrder)}addControlsCols(){this.controlsCols!=null&&(this.cols.list=this.controlsCols.list.concat(this.cols.list),this.cols.tree=this.controlsCols.tree.concat(this.cols.tree),UC(this.cols))}refreshAll(e){this.isReady()&&(this.refreshCols(!1),this.visibleColsService.refresh(e))}setColsVisible(e,t=!1,i){this.columnApplyStateService.applyColumnState({state:e.map(s=>({colId:typeof s=="string"?s:s.getColId(),hide:!t}))},i)}setColsPinned(e,t,i){if(!this.cols||Vt(e))return;if(it(this.gos,"print")){I("Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let s;t===!0||t==="left"?s="left":t==="right"?s="right":s=null;const n=[];e.forEach(o=>{if(!o)return;const r=this.getCol(o);r&&r.getPinned()!==s&&(r.setPinned(s),n.push(r))}),n.length&&(this.visibleColsService.refresh(i),this.eventDispatcher.columnPinned(n,i)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,i){let s;ft(e)?s=e.getId():s=e||"",this.columnGroupStateService.setColumnGroupState([{groupId:s,open:t}],i)}getProvidedColGroup(e){var i;let t=null;return ss(null,(i=this.cols)==null?void 0:i.tree,s=>{ft(s)&&s.getId()===e&&(t=s)}),t}isColGroupLocked(e){const t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;const s=this.funcColsService.getRowGroupColumns().findIndex(n=>n.getColId()===e.getColId());return t>s}isSuppressAutoCol(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some(e=>e.isVisible()&&e.isAutoHeight()),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,ke(this.gos)||Oi(this.gos)||I("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){const e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;const t=new Map(e.map((l,c)=>[l,c]));if(!this.cols.list.some(l=>t.has(l)))return;const s=new Map(this.cols.list.map(l=>[l,!0])),n=e.filter(l=>s.has(l)),o=new Map(n.map(l=>[l,!0])),r=this.cols.list.filter(l=>!o.has(l)),a=n.slice();r.forEach(l=>{let c=l.getOriginalParent();if(!c){a.push(l);return}const u=[];for(;!u.length&&c;)c.getLeafColumns().forEach(g=>{const v=a.indexOf(g)>=0,S=u.indexOf(g)<0;v&&S&&u.push(g)}),c=c.getOriginalParent();if(!u.length){a.push(l);return}const d=u.map(p=>a.indexOf(p)),h=Math.max(...d);Xc(a,l,h+1)}),this.cols.list=a}sortColsLikeKeys(e){if(this.cols==null)return;let t=[];const i={};e.forEach(n=>{if(i[n])return;const o=this.cols.map[n];o&&(t.push(o),i[n]=!0)});let s=0;if(this.cols.list.forEach(n=>{const o=n.getColId();if(i[o]!=null)return;o.startsWith(_u)?Xc(t,n,s++):t.push(n)}),t=this.columnMoveService.placeLockedColumns(t),!this.columnMoveService.doesMovePassMarryChildren(t)){I("Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.cols.list=t}sortColsLikeCols(e){!e||e.length<=1||e.filter(i=>this.cols.list.indexOf(i)<0).length>0||e.sort((i,s)=>{const n=this.cols.list.indexOf(i),o=this.cols.list.indexOf(s);return n-o})}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const s=this.columnFactory.addColumnDefaultAndTypes(i,e.getColId());return e.setColDef(s,i,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,i){var s;Qw((s=this.cols)==null?void 0:s.list,e,t),this.visibleColsService.refresh(i)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){var e,t;this.showingPivotResult?this.lastPivotOrder=(e=this.cols)==null?void 0:e.list:this.lastOrder=(t=this.cols)==null?void 0:t.list}getColumnDefs(){if(!this.colDefCols)return;const e=this.colDefCols.list.slice();this.showingPivotResult?e.sort((s,n)=>this.lastOrder.indexOf(s)-this.lastOrder.indexOf(n)):this.lastOrder&&e.sort((s,n)=>this.cols.list.indexOf(s)-this.cols.list.indexOf(n));const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,i)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){var e;return((e=this.colDefCols)==null?void 0:e.treeDepth)>0}setColSpanActive(){this.colSpanActive=this.cols.list.some(e=>e.getColDef().colSpan!=null)}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,this.ready&&(this.refreshCols(!1),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return e&&this.gos.get("treeData")?(I("Pivot mode not available with treeData."),!1):!0}isPivotActive(){const e=this.funcColsService.getPivotColumns();return this.pivotMode&&!Vt(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(e))}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){var e,t,i;ms(this.context,(e=this.colDefCols)==null?void 0:e.tree),ms(this.context,(t=this.autoCols)==null?void 0:t.tree),ms(this.context,(i=this.controlsCols)==null?void 0:i.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){var e;return(e=this.colDefCols)!=null&&e.list?this.colDefCols.list:null}getCols(){var e;return((e=this.cols)==null?void 0:e.list)??[]}getAllCols(){var i,s,n;const e=this.pivotResultColsService.getPivotResultCols(),t=e==null?void 0:e.list;return[((i=this.colDefCols)==null?void 0:i.list)??[],((s=this.autoCols)==null?void 0:s.list)??[],((n=this.controlsCols)==null?void 0:n.list)??[],t??[]].flat()}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){var t;return(t=this.colDefCols)!=null&&t.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(t==null)return null;const{map:i,list:s}=t;if(typeof e=="string"&&i[e])return i[e];for(let n=0;n<s.length;n++)if(KC(s[n],e))return s[n];return this.getAutoCol(e)}getAutoCol(e){var t;return((t=this.autoCols)==null?void 0:t.list.find(i=>KC(i,e)))??null}getAutoCols(){var e;return((e=this.autoCols)==null?void 0:e.list)??null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&(e.isColumn?this.eventDispatcher.headerHeight(e):this.eventDispatcher.groupHeaderHeight(e))}getGroupRowsHeight(){const e=[],t=this.ctrlsService.getHeaderRowContainerCtrls();for(const i of t){if(!i)continue;const s=i.getGroupRowCount()||0;for(let n=0;n<s;n++){const o=i.getGroupRowCtrlAtIndex(n),r=e[n];if(o){const a=this.getColumnGroupHeaderRowHeight(o);(r==null||a>r)&&(e[n]=a)}}}return e}getColumnGroupHeaderRowHeight(e){const t=this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight();let i=0;const s=e.getHeaderCtrls();for(const n of s){const o=n.getColumn();if(o.isAutoHeaderHeight()){const r=o.getAutoHeaderHeight();r!=null&&r>i&&(i=r)}}return Math.max(t,i)}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),i=this.visibleColsService.getAllCols().filter(s=>s.isAutoHeaderHeight()).map(s=>s.getAutoHeaderHeight()||0);return Math.max(e,...i)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if((e==null?void 0:e.type)!=="fitCellContents")return;const{colIds:t,skipHeader:i}=e;setTimeout(()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",i)})}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}onSelectionOptionsChanged(e,t,i){const s=t&&typeof t!="string"?Mo(t):void 0,n=e&&typeof e!="string"?Mo(e):void 0,o=s!==n,r=t&&typeof t!="string"?Yc(t):void 0,a=e&&typeof e!="string"?Yc(e):void 0;(o||r!==a)&&this.refreshAll(i)}};function an(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function UC(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function KC(e,t){const i=e===t,s=e.getColDef()===t,n=e.getColId()==t;return i||s||n}function $C(e,t){return $s(e,t,(i,s)=>i.getColId()===s.getColId())}var Sx=class extends D{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeCols(e));return}const{colKeys:t,skipHeader:i,skipHeaderGroups:s,stopAtGroup:n,source:o="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>this.autoSizeCols(e));return}this.timesDelayed=0;const r=[];let a=-1;const l=i??this.gos.get("skipHeaderOnAutoSize"),c=s??l;for(;a!==0;){a=0;const u=[];t.forEach(d=>{if(!d)return;const h=this.columnModel.getCol(d);if(!h||r.indexOf(h)>=0)return;const p=this.autoWidthCalculator.getPreferredWidthForColumn(h,l);if(p>0){const g=this.normaliseColumnWidth(h,p);h.setActualWidth(g,o),r.push(h),a++}u.push(h)}),u.length&&this.visibleColsService.refresh(o)}c||this.autoSizeColumnGroupsByColumns(t,o,n),this.eventDispatcher.columnResized(r,!0,"autosizeColumns")}autoSizeColumn(e,t,i){e&&this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const s=new Set;this.columnModel.getColsForKeys(e).forEach(a=>{let l=a.getParent();for(;l&&l!=i;)l.isPadding()||s.add(l),l=l.getParent()});let o;const r=[];for(const a of s){for(const l of this.ctrlsService.getHeaderRowContainerCtrls())if(o=l.getHeaderCtrlForColumn(a),o)break;o&&o.resizeLeafColumnsToFit(t)}return r}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeAllColumns(e,t));return}const i=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:i,skipHeader:t,source:e})}normaliseColumnWidth(e,t){const i=e.getMinWidth();t<i&&(t=i);const s=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=s),t}},wx=class extends D{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>Ct(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>Ct(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>Ct(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupCols.slice(0);const i=this.columnModel.getColDefCol(t);return i?[i]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return Vt(this.rowGroupCols)}setColumnAggFunc(e,t,i){if(!e)return;const s=this.columnModel.getColDefCol(e);s&&(s.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[s],i))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,(i,s)=>this.setRowGroupActive(i,s,t),t)}setRowGroupActive(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,i),!e&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.columnModel.setColsVisible([t],!0,i))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,i=>this.setRowGroupActive(!0,i,t),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,i=>this.setRowGroupActive(!1,i,t),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,i=>i.setPivotActive(!0,t),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,(i,s)=>{s.setPivotActive(i,t)},t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,i=>i.setPivotActive(!1,t),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,(i,s)=>this.setValueActive(i,s,t),t)}setValueActive(e,t,i){if(e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc()&&this.aggFuncService)){const s=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(s)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,i=>this.setValueActive(!0,i,t),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,i=>this.setValueActive(!1,i,t),"columnValueChanged",t)}moveRowGroupColumn(e,t,i){if(this.isRowGroupEmpty())return;const s=this.rowGroupCols[e],n=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,s),this.eventDispatcher.rowGroupChanged(n,i)}setColList(e,t,i,s,n,o,r){if(!this.columnModel.getCols())return;const a=new Map;t.forEach((c,u)=>a.set(c,u)),t.length=0,N(e)&&e.forEach(c=>{const u=this.columnModel.getColDefCol(c);u&&t.push(u)}),t.forEach((c,u)=>{const d=a.get(c);if(d===void 0){a.set(c,0);return}s&&d!==u||a.delete(c)}),(this.columnModel.getColDefCols()||[]).forEach(c=>{const u=t.indexOf(c)>=0;o(u,c)}),n&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(r),this.eventDispatcher.columnChanged(i,[...a.keys()],r)}updateColList(e,t,i,s,n,o,r){if(!e||Vt(e))return;let a=!1;const l=new Set;e.forEach(c=>{if(!c)return;const u=this.columnModel.getColDefCol(c);if(u){if(l.add(u),i){if(t.indexOf(u)>=0)return;t.push(u)}else{const d=t.indexOf(u);if(d<0)return;for(let h=d+1;h<t.length;h++)l.add(t[h]);Ct(t,u)}n(u),a=!0}}),a&&(s&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(r),this.eventDispatcher.genericColumnEvent(o,Array.from(l),r))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,(i,s)=>i.setValueActive(s,e),()=>{},()=>{},i=>{const s=i.aggFunc;if(s===null||s==="")return null;if(s!==void 0)return!!s},i=>i.initialAggFunc!=null&&i.initialAggFunc!=""),this.valueCols.forEach(i=>{const s=i.getColDef();s.aggFunc!=null&&s.aggFunc!=""?i.setAggFunc(s.aggFunc):i.getAggFunc()||i.setAggFunc(s.initialAggFunc)})}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,(i,s)=>i.setRowGroupActive(s,e),i=>i.rowGroupIndex,i=>i.initialRowGroupIndex,i=>i.rowGroup,i=>i.initialRowGroup)}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,(i,s)=>i.setPivotActive(s,e),i=>i.pivotIndex,i=>i.initialPivotIndex,i=>i.pivot,i=>i.initialPivot)}extractColsCommon(e=[],t=[],i,s,n,o,r){const a=[],l=[];(this.columnModel.getColDefCols()||[]).forEach(h=>{const p=e.indexOf(h)<0,g=h.getColDef(),v=gp(o(g)),S=gp(r(g)),m=vn(s(g)),C=vn(n(g));let w;v!==void 0?w=v:m!==void 0?m===null?w=!1:w=m>=0:p?S!==void 0?w=S:C!==void 0?w=C!=null&&C>=0:w=!1:w=t.indexOf(h)>=0,w&&((p?m!=null||C!=null:m!=null)?a.push(h):l.push(h))});const u=h=>{const p=s(h.getColDef()),g=n(h.getColDef());return p??g};a.sort((h,p)=>{const g=u(h),v=u(p);return g===v?0:g<v?-1:1});const d=[].concat(a);return t.forEach(h=>{l.indexOf(h)>=0&&d.push(h)}),l.forEach(h=>{d.indexOf(h)<0&&d.push(h)}),t.forEach(h=>{d.indexOf(h)<0&&i(h,!1)}),d.forEach(h=>{t.indexOf(h)<0&&i(h,!0)}),d}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},s=(n,o,r,a,l,c)=>{const u=this.columnModel.getColDefCols();if(!o.length||!u)return[];const d=Object.keys(n),h=new Set(d),p=new Set(d),g=new Set(o.map(P=>{const x=P.getColId();return p.delete(x),x}).concat(d)),v=[],S={};let m=0;for(let P=0;P<u.length;P++){const x=u[P].getColId();g.has(x)&&(v.push(x),S[x]=m++)}let C=1e3,w=!1,R=0;const b=P=>{const x=S[P];for(let F=R;F<x;F++){const k=v[F];p.has(k)&&(n[k][l]=C++,p.delete(k))}R=x};o.forEach(P=>{const x=P.getColId();if(h.has(x))b(x),n[x][l]=C++;else{const F=P.getColDef();(F[l]===null||F[l]===void 0&&F[c]==null)&&(w||(F[r]||F[r]===void 0&&F[a]?b(x):(p.forEach(T=>{n[T][l]=C+S[T]}),C+=v.length,w=!0)),i[x]||(i[x]={colId:x}),i[x][l]=C++)}})};return s(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),s(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}},yx=class extends D{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){const i=this.columnModel.getColDefCols()||[];if(Vt(i))return!1;if(e&&e.state&&!e.state.forEach)return I("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const s=this.funcColsService.getModifyColumnsNoEventsCallbacks(),n=(a,l,c)=>{const u=this.compareColumnStatesAndDispatchEvents(t),d=l.slice(),h={},p={},g=[],v=[];let S=0;const m=this.funcColsService.getRowGroupColumns().slice(),C=this.funcColsService.getPivotColumns().slice();a.forEach(P=>{const x=P.colId||"";if(x.startsWith(_u)){g.push(P),v.push(P);return}const k=c(x);k?(this.syncColumnWithStateItem(k,P,e.defaultState,h,p,!1,t,s),Ct(d,k)):(v.push(P),S+=1)});const w=P=>this.syncColumnWithStateItem(P,null,e.defaultState,h,p,!1,t,s);d.forEach(w),this.funcColsService.sortRowGroupColumns(qC.bind(this,h,m)),this.funcColsService.sortPivotColumns(qC.bind(this,p,C)),this.columnModel.refreshCols(!1);const b=(this.columnModel.getAutoCols()||[]).slice();return g.forEach(P=>{const x=this.columnModel.getAutoCol(P.colId);Ct(b,x),this.syncColumnWithStateItem(x,P,e.defaultState,null,null,!0,t,s)}),b.forEach(w),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),u(),{unmatchedAndAutoStates:v,unmatchedCount:S}};this.columnAnimationService.start();let{unmatchedAndAutoStates:o,unmatchedCount:r}=n(e.state||[],i,a=>this.columnModel.getColDefCol(a));if(o.length>0||N(e.defaultState)){const a=this.pivotResultColsService.getPivotResultCols(),l=a==null?void 0:a.list;r=n(o,l||[],c=>this.pivotResultColsService.getPivotResultCol(c)).unmatchedCount}return this.columnAnimationService.finish(),r===0}resetColumnState(e){const t=this.columnModel.getColDefCols();if(Vt(t))return;const i=this.columnModel.getColDefColTree(),s=lg(i),n=[];let o=1e3,r=1e3,a=[];const l=this.columnModel.getAutoCols();l&&(a=a.concat(l)),s&&(a=a.concat(s)),a.forEach(c=>{const u=this.getColumnStateFromColDef(c);le(u.rowGroupIndex)&&u.rowGroup&&(u.rowGroupIndex=o++),le(u.pivotIndex)&&u.pivot&&(u.pivotIndex=r++),n.push(u)}),this.applyColumnState({state:n,applyOrder:!0},e)}getColumnStateFromColDef(e){const t=(g,v)=>g??v??null,i=e.getColDef(),s=t(i.sort,i.initialSort),n=t(i.sortIndex,i.initialSortIndex),o=t(i.hide,i.initialHide),r=t(i.pinned,i.initialPinned),a=t(i.width,i.initialWidth),l=t(i.flex,i.initialFlex);let c=t(i.rowGroupIndex,i.initialRowGroupIndex),u=t(i.rowGroup,i.initialRowGroup);c==null&&(u==null||u==!1)&&(c=null,u=null);let d=t(i.pivotIndex,i.initialPivotIndex),h=t(i.pivot,i.initialPivot);d==null&&(h==null||h==!1)&&(d=null,h=null);const p=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:s,sortIndex:n,hide:o,pinned:r,width:a,flex:l,rowGroup:u,rowGroupIndex:c,pivot:h,pivotIndex:d,aggFunc:p}}syncColumnWithStateItem(e,t,i,s,n,o,r,a){if(!e)return;const l=(R,b)=>{const P={value1:void 0,value2:void 0};let x=!1;return t&&(t[R]!==void 0&&(P.value1=t[R],x=!0),N(b)&&t[b]!==void 0&&(P.value2=t[b],x=!0)),!x&&i&&(i[R]!==void 0&&(P.value1=i[R]),N(b)&&i[b]!==void 0&&(P.value2=i[b])),P},c=l("hide").value1;c!==void 0&&e.setVisible(!c,r);const u=l("pinned").value1;u!==void 0&&e.setPinned(u);const d=e.getColDef().minWidth??this.gos.environment.getDefaultColumnMinWidth(),h=l("flex").value1;if(h!==void 0&&e.setFlex(h),h==null){const R=l("width").value1;R!=null&&d!=null&&R>=d&&e.setActualWidth(R,r)}const p=l("sort").value1;p!==void 0&&(p==="desc"||p==="asc"?e.setSort(p,r):e.setSort(void 0,r));const g=l("sortIndex").value1;if(g!==void 0&&e.setSortIndex(g),o||!e.isPrimary())return;const v=l("aggFunc").value1;v!==void 0&&(typeof v=="string"?(e.setAggFunc(v),e.isValueActive()||(e.setValueActive(!0,r),a.addValueCol(e))):(N(v)&&I("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,r),a.removeValueCol(e))));const{value1:S,value2:m}=l("rowGroup","rowGroupIndex");(S!==void 0||m!==void 0)&&(typeof m=="number"||S?(e.isRowGroupActive()||(e.setRowGroupActive(!0,r),a.addGroupCol(e)),s&&typeof m=="number"&&(s[e.getId()]=m)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,r),a.removeGroupCol(e)));const{value1:C,value2:w}=l("pivot","pivotIndex");(C!==void 0||w!==void 0)&&(typeof w=="number"||C?(e.isPivotActive()||(e.setPivotActive(!0,r),a.addPivotCol(e)),n&&typeof w=="number"&&(n[e.getId()]=w)):e.isPivotActive()&&(e.setPivotActive(!1,r),a.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;const t=[];e.state.forEach(i=>{i.colId!=null&&t.push(i.colId)}),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},i=this.columnGetStateService.getColumnState(),s={};return i.forEach(n=>{s[n.colId]=n}),()=>{const n=this.columnModel.getAllCols(),o=(v,S,m,C)=>{const w=S.map(C),R=m.map(C);if($s(w,R))return;const P=new Set(S);m.forEach(F=>{P.delete(F)||P.add(F)});const x=[...P];this.eventService.dispatchEvent({type:v,columns:x,column:x.length===1?x[0]:null,source:e})},r=v=>{const S=[];return n.forEach(m=>{const C=s[m.getColId()];C&&v(C,m)&&S.push(m)}),S},a=v=>v.getColId();o("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),a),o("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),a);const c=r((v,S)=>{const m=v.aggFunc!=null,C=m!=S.isValueActive(),w=m&&v.aggFunc!=S.getAggFunc();return C||w});c.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",c,e);const u=(v,S)=>v.width!=S.getActualWidth();this.eventDispatcher.columnResized(r(u),!0,e);const d=(v,S)=>v.pinned!=S.getPinned();this.eventDispatcher.columnPinned(r(d),e);const h=(v,S)=>v.hide==S.isVisible();this.eventDispatcher.columnVisible(r(h),e);const g=r((v,S)=>v.sort!=S.getSort()||v.sortIndex!=S.getSortIndex());g.length>0&&this.sortController.dispatchSortChangedEvents(e,g),this.normaliseColumnMovedEventForColumnState(i,e)}}normaliseColumnMovedEventForColumnState(e,t){const i=this.columnGetStateService.getColumnState(),s={};i.forEach(l=>s[l.colId]=l);const n={};e.forEach(l=>{s[l.colId]&&(n[l.colId]=!0)});const o=e.filter(l=>n[l.colId]),r=i.filter(l=>n[l.colId]),a=[];r.forEach((l,c)=>{const u=o&&o[c];if(u&&u.colId!==l.colId){const d=this.columnModel.getCol(u.colId);d&&a.push(d)}}),a.length&&this.eventDispatcher.columnMoved({movedColumns:a,source:t,finished:!0})}},qC=(e,t,i,s)=>{const n=e[i.getId()],o=e[s.getId()],r=n!=null,a=o!=null;if(r&&a)return n-o;if(r)return-1;if(a)return 1;const l=t.indexOf(i),c=t.indexOf(s),u=l>=0,d=c>=0;return u&&d?l-c:u?-1:1},Rx=class extends D{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,i){const s=this.columnModel.getCols();if(!s)return;const n=s[e];this.moveColumns([n],t,i)}moveColumns(e,t,i,s=!0){const n=this.columnModel.getCols();if(!n)return;if(t>n.length-e.length){I("tried to insert columns in invalid location, toIndex = ",t),I("remember that you should not count the moving columns when calculating the new index");return}this.columnAnimationService.start();const o=this.columnModel.getColsForKeys(e);this.doesMovePassRules(o,t)&&(this.columnModel.moveInCols(o,t,i),this.eventDispatcher.columnMoved({movedColumns:o,source:i,toIndex:t,finished:s})),this.columnAnimationService.finish()}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){const s=this.columnModel.getCols().slice();return Qw(s,e,t),s}doesMovePassLockedPositions(e){const t=o=>o?o==="left"||o===!0?-1:1:0,i=this.gos.get("enableRtl");let s=i?1:-1,n=!0;return e.forEach(o=>{const r=t(o.getColDef().lockPosition);i?r>s&&(n=!1):r<s&&(n=!1),s=r}),n}doesMovePassMarryChildren(e){let t=!0;const i=this.columnModel.getColTree();return ss(null,i,s=>{if(!ft(s))return;const n=s,o=n.getColGroupDef();if(!(o&&o.marryChildren))return;const a=[];n.getLeafColumns().forEach(h=>{const p=e.indexOf(h);a.push(p)});const l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),u=l-c,d=n.getLeafColumns().length-1;u>d&&(t=!1)}),t}placeLockedColumns(e){const t=[],i=[],s=[];return e.forEach(o=>{const r=o.getColDef().lockPosition;r==="right"?s.push(o):r==="left"||r===!0?t.push(o):i.push(o)}),this.gos.get("enableRtl")?[...s,...i,...t]:[...t,...i,...s]}},bx=/[&<>"']/g,Px={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ti(e,t){if(e==null)return null;const i=e.toString().toString();return t?i:i.replace(bx,s=>Px[s])}function xx(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,i=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ").map(n=>n.substring(0,1).toUpperCase()+(n.length>1?n.substring(1,n.length):"")).join(" ")}var Fx=class extends D{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;const s=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,s):s}getDisplayNameForProvidedColumnGroup(e,t,i){const s=t?t.getColGroupDef():null;return s?this.getHeaderName(s,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,s,n){const o=e.headerValueGetter;if(o){const r=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:i,providedColumnGroup:s,location:n});return typeof o=="function"?o(r):typeof o=="string"?this.expressionService.evaluate(o,r):(I("headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return xx(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;const i=e.getColDef().pivotValueColumn,s=N(i);let n=null,o;if(s){const r=this.funcColsService.getValueColumns(),a=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&r.length===1,l=e.getColDef().pivotTotalColumnIds!==void 0;if(a&&!l)return t;n=i?i.getAggFunc():null,o=!0}else{const r=e.isValueActive(),a=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();r&&a?(n=e.getAggFunc(),o=!0):o=!1}if(o){const r=typeof n=="string"?n:"func";return`${this.localeService.getLocaleTextFunc()(r,r)}(${t})`}return t}},Ex=class extends D{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){var e;ms(this.context,(e=this.pivotResultCols)==null?void 0:e.tree),super.destroy()}isPivotResultColsPresent(){return this.pivotResultCols!=null}lookupPivotResultCol(e,t){if(this.pivotResultCols==null)return null;const i=this.columnModel.getColDefCol(t);let s=null;return this.pivotResultCols.list.forEach(n=>{const o=n.getColDef().pivotKeys,r=n.getColDef().pivotValueColumn;$s(o,e)&&r===i&&(s=n)}),s}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){var i,s;if(this.columnModel.isReady()&&!(e==null&&this.pivotResultCols==null)){if(e){this.processPivotResultColDef(e);const n=this.columnFactory.createColumnTree(e,!1,((i=this.pivotResultCols)==null?void 0:i.tree)||this.previousPivotResultCols||void 0,t);ms(this.context,(s=this.pivotResultCols)==null?void 0:s.tree,n.columnTree);const o=n.columnTree,r=n.treeDept,a=lg(o),l={};this.pivotResultCols={tree:o,treeDepth:r,list:a,map:l},this.pivotResultCols.list.forEach(u=>this.pivotResultCols.map[u.getId()]=u);const c=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.columnModel.refreshCols(!c)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.columnModel.refreshCols(!1);this.visibleColsService.refresh(t)}}processPivotResultColDef(e){const t=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!t&&!i)return;const s=n=>{n.forEach(o=>{if(N(o.children)){const a=o;i&&i(a),s(a.children)}else t&&t(o)})};e&&s(e)}},kx=class extends D{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,i,s){const n=[];e.forEach(o=>{const r=this.columnModel.getColDefCol(o.key)||this.columnModel.getCol(o.key);if(!r)return;if(n.push({width:o.newWidth,ratios:[1],columns:[r]}),this.gos.get("colResizeDefault")==="shift"&&(t=!t),t){const l=this.visibleColsService.getColAfter(r);if(!l)return;const c=r.getActualWidth()-o.newWidth,u=l.getActualWidth()+c;n.push({width:u,ratios:[1],columns:[l]})}}),n.length!==0&&this.resizeColumnSets({resizeSets:n,finished:i,source:s})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:s}=e;if(!(!t||t.every(u=>this.checkMinAndMaxWidthsForSet(u)))){if(i){const u=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(u,i,s)}return}const o=[],r=[];t.forEach(u=>{const{width:d,columns:h,ratios:p}=u,g={},v={};h.forEach(C=>r.push(C));let S=!0,m=0;for(;S;){if(m++,m>1e3){ge("infinite loop in resizeColumnSets");break}S=!1;const C=[];let w=0,R=d;h.forEach((P,x)=>{if(v[P.getId()])R-=g[P.getId()];else{C.push(P);const k=p[x];w+=k}});const b=1/w;C.forEach((P,x)=>{const F=x===C.length-1;let k;F?k=R:(k=Math.round(p[x]*d*b),R-=k);const E=P.getMinWidth(),T=P.getMaxWidth();k<E?(k=E,v[P.getId()]=!0,S=!0):T>0&&k>T&&(k=T,v[P.getId()]=!0,S=!0),g[P.getId()]=k})}h.forEach(C=>{const w=g[C.getId()];C.getActualWidth()!==w&&(C.setActualWidth(w,s),o.push(C))})});const a=o.length>0;let l=[];a&&(l=this.refreshFlexedColumns({resizingCols:r,skipSetLeft:!0}),this.visibleColsService.setLeftValues(s),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());const c=r.concat(l);(a||i)&&this.eventDispatcher.columnResized(c,i,s,l)}checkMinAndMaxWidthsForSet(e){const{columns:t,width:i}=e;let s=0,n=0,o=!0;t.forEach(l=>{const c=l.getMinWidth();s+=c||0;const u=l.getMaxWidth();u>0?n+=u:o=!1});const r=i>=s,a=!o||i<=n;return r&&a}refreshFlexedColumns(e={}){const t=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];const i=this.visibleColsService.getCenterCols();let s=-1;if(e.resizingCols){const h=new Set(e.resizingCols);for(let p=i.length-1;p>=0;p--)if(h.has(i[p])){s=p;break}}let n=0,o=[],r=0,a=0;for(let h=0;h<i.length;h++)i[h].getFlex()&&h>s?(o.push(i[h]),a+=i[h].getFlex(),r+=i[h].getMinWidth()):n+=i[h].getActualWidth();if(!o.length)return[];let l=[];n+r>this.flexViewportWidth&&(o.forEach(h=>h.setActualWidth(h.getMinWidth(),t)),l=o,o=[]);const c=[];let u;e:for(;;){u=this.flexViewportWidth-n;const h=u/a;for(let p=0;p<o.length;p++){const g=o[p],v=h*g.getFlex();let S=0;const m=g.getMinWidth(),C=g.getMaxWidth();if(v<m?S=m:v>C&&(S=C),S){g.setActualWidth(S,t),Yw(o,g),a-=g.getFlex(),l.push(g),n+=g.getActualWidth();continue e}c[p]=Math.floor(v)}break}let d=u;return o.forEach((h,p)=>{const g=p<o.length-1?Math.min(c[p],d):Math.max(c[p],d);h.setActualWidth(g,t),l.push(h),d-=c[p]}),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(l,!0,t,o),o}sizeColumnsToFit(e,t="sizeColumnsToFit",i,s){var h;if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,i,s));return}const n={};s&&((h=s==null?void 0:s.columnLimits)==null||h.forEach(({key:p,...g})=>{n[typeof p=="string"?p:p.getColId()]=g}));const o=this.visibleColsService.getAllCols(),r=e===ji(o);if(e<=0||!o.length||r)return;const a=[],l=[];o.forEach(p=>{p.getColDef().suppressSizeToFit===!0?l.push(p):a.push(p)});const c=a.slice(0);let u=!1;const d=p=>{Ct(a,p),l.push(p)};for(a.forEach(p=>{p.resetActualWidth(t);const g=n==null?void 0:n[p.getId()],v=(g==null?void 0:g.minWidth)??(s==null?void 0:s.defaultMinWidth),S=(g==null?void 0:g.maxWidth)??(s==null?void 0:s.defaultMaxWidth),m=p.getActualWidth();typeof v=="number"&&m<v?p.setActualWidth(v,t,!0):typeof S=="number"&&m>S&&p.setActualWidth(S,t,!0)});!u;){u=!0;const p=e-ji(l);if(p<=0)a.forEach(g=>{var S;const v=((S=n==null?void 0:n[g.getId()])==null?void 0:S.minWidth)??(s==null?void 0:s.defaultMinWidth);if(typeof v=="number"){g.setActualWidth(v,t,!0);return}g.setMinimum(t)});else{const g=p/ji(a);let v=p;for(let S=a.length-1;S>=0;S--){const m=a[S],C=n==null?void 0:n[m.getId()],w=(C==null?void 0:C.minWidth)??(s==null?void 0:s.defaultMinWidth),R=(C==null?void 0:C.maxWidth)??(s==null?void 0:s.defaultMaxWidth),b=m.getMinWidth(),P=m.getMaxWidth(),x=typeof w=="number"&&w>b?w:b,F=typeof R=="number"&&R<P?R:P;let k=Math.round(m.getActualWidth()*g);k<x?(k=x,d(m),u=!1):k>F?(k=F,d(m),u=!1):S===0&&(k=v),m.setActualWidth(k,t,!0),v-=k}}}c.forEach(p=>{p.fireColumnWidthChangedEvent(t)}),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),!i&&this.eventDispatcher.columnResized(c,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){const{columnLimits:i,defaultMinWidth:s,defaultMaxWidth:n}=e,o=i==null?void 0:i.map(({colId:r,minWidth:a,maxWidth:l})=>({key:r,minWidth:a,maxWidth:l}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:s,defaultMaxWidth:n,columnLimits:o})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}};function iy(e,t){return e+"_"+t}function We(e){return e instanceof sy}var sy=class extends D{constructor(e,t,i,s){super(),this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.groupId=t,this.partId=i,this.providedColumnGroup=e,this.pinned=s}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return iy(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{We(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=ae(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){var e;return!!((e=this.getColGroupDef())!=null&&e.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{Ws(t)?e.push(t):We(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{Ws(t)?e.push(t):We(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(i=>{if(We(i)&&(!i.displayedChildren||!i.displayedChildren.length))return;switch(i.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(i);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(i);break;default:this.displayedChildren.push(i);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},ny=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return typeof t!="number"?i=0:i=t+1,this.existingIds[e]=i,i}},Mx=class extends D{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e,t=!1){t||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=Hd(this.treeLeft),this.columnsCenter=Hd(this.treeCenter),this.columnsRight=Hd(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter(i=>i.isAutoHeight()),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols(e)}updateBodyWidths(){const e=ji(this.columnsCenter),t=ji(this.columnsLeft),i=ji(this.columnsRight);this.bodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventService.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventService.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,i;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,i=this.columnsRight?ae(this.columnsRight):null):(t=this.columnsLeft?ae(this.columnsLeft):null,i=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach(s=>{s.setLastLeftPinned(s===t,e),s.setFirstRightPinned(s===i,e)})}buildTrees(){const e=this.columnModel.getColsToShow(),t=e.filter(o=>o.getPinned()=="left"),i=e.filter(o=>o.getPinned()=="right"),s=e.filter(o=>o.getPinned()!="left"&&o.getPinned()!="right"),n=new ny;this.treeLeft=this.createGroups({columns:t,idCreator:n,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:i,idCreator:n,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:s,idCreator:n,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){const e=this.columnModel.getCols(),t=[],i=[],s=[];for(const n of e){const o=n.getPinned();o?o===!0||o==="left"?t.push(n):s.push(n):i.push(n)}this.ariaOrderColumns=t.concat(i).concat(s)}getAriaColIndex(e){let t;return We(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{We(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;const i=this.columnModel.getCols().slice(0),s=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach(n=>{if(s){let o=ji(n);n.forEach(r=>{o-=r.getActualWidth(),r.setLeft(o,e)})}else{let o=0;n.forEach(r=>{r.setLeft(o,e),o+=r.getActualWidth()})}nx(i,n)}),i.forEach(n=>{n.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,i,s){const n=[];let o=null;for(let r=0;r<t.length;r++){const a=t[r],l=t.length-r,c=Math.min(a.getColSpan(e),l),u=[a];if(c>1){const h=c-1;for(let p=1;p<=h;p++)u.push(t[r+p]);r+=h}let d;i?(d=!1,u.forEach(h=>{i(h)&&(d=!0)})):d=!0,d&&(n.length===0&&o&&(s&&s(a))&&n.push(o),n.push(a)),o=a}return n}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){const t=this.getAllCols(),i=t.indexOf(e);return i>0?t[i-1]:null}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),s=e.getDisplayedLeafColumns(),n=t==="After"?ae(s):s[0],o=`getCol${t}`;for(;;){const r=this[o](n);if(!r)return null;const a=this.getColGroupAtLevel(r,i);if(a!==e)return a}}getColGroupAtLevel(e,t){let i=e.getParent(),s,n;for(;s=i.getProvidedColumnGroup().getLevel(),n=i.getPaddingLevel(),!(s+n<=t);)i=i.getParent();return i}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};ln(this.treeCenter,!1,e),ln(this.treeLeft,!1,e),ln(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){const e=this.getAllTrees();ln(e,!1,t=>{We(t)&&t.calculateDisplayedColumns()})}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const s=this[t[i]]();if(s.length)return e?ae(s):s[0]}return null}getColumnGroup(e,t){if(!e)return null;if(We(e))return e;const i=this.getAllTrees(),s=typeof t=="number";let n=null;return ln(i,!1,o=>{if(We(o)){const r=o;let a;s?a=e===r.getGroupId()&&t===r.getPartId():a=e===r.getGroupId(),a&&(n=r)}}),n}getColAfter(e){const t=this.getAllCols(),i=t.indexOf(e);return i<t.length-1?t[i+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return ji(this.columnsLeft)}getDisplayedColumnsRightWidth(){return ji(this.columnsRight)}isColAtEdge(e,t){const i=this.getAllCols();if(!i.length)return!1;const s=t==="first";let n;if(We(e)){const o=e.getDisplayedLeafColumns();if(!o.length)return!1;n=s?o[0]:ae(o)}else n=e;return(s?i[0]:ae(i))===n}createGroups(e){const{columns:t,idCreator:i,pinned:s,oldDisplayedGroups:n,isStandaloneStructure:o}=e,r=this.mapOldGroupsById(n),a=[];let l=t;for(;l.length;){const c=l;l=[];let u=0;const d=h=>{const p=u;u=h;const g=c[p],S=(We(g)?g.getProvidedColumnGroup():g).getOriginalParent();if(S==null){for(let C=p;C<h;C++)a.push(c[C]);return}const m=this.createColGroup(S,i,r,s,o);for(let C=p;C<h;C++)m.addChild(c[C]);l.push(m)};for(let h=1;h<c.length;h++){const p=c[h],v=(We(p)?p.getProvidedColumnGroup():p).getOriginalParent(),S=c[u],C=(We(S)?S.getProvidedColumnGroup():S).getOriginalParent();v!==C&&d(h)}u<c.length&&d(c.length)}return o||this.setupParentsIntoCols(a,null),a}createColGroup(e,t,i,s,n){const o=e.getGroupId(),r=t.getInstanceIdForKey(o),a=iy(o,r);let l=i[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),N(l)?l.reset():(l=new sy(e,o,r,s),n||this.createBean(l)),l}mapOldGroupsById(e){const t={},i=s=>{s.forEach(n=>{if(We(n)){const o=n;t[n.getUniqueId()]=o,i(o.getChildren())}})};return e&&i(e),t}setupParentsIntoCols(e,t){e.forEach(i=>{if(i.setParent(t),We(i)){const s=i;this.setupParentsIntoCols(s.getChildren(),s)}})}};function ln(e,t,i){if(e)for(let s=0;s<e.length;s++){const n=e[s];if(We(n)){const o=t?n.getDisplayedChildren():n.getChildren();ln(o,t,i)}i(n)}}function Hd(e){const t=[];return ln(e,!0,i=>{Ws(i)&&t.push(i)}),t}var oy=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],Dx=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged"],Tx=[...oy,...Dx],Ax={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0},at=class{};at.STRING_PROPERTIES=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];at.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","theme","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","cellSelection","selectionColumnDef"];at.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];at.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];at.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"];at.OTHER_PROPERTIES=["suppressStickyTotalRow","loadThemeGoogleFonts","rowSelection"];at.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];at.ALL_PROPERTIES=[...at.ARRAY_PROPERTIES,...at.OBJECT_PROPERTIES,...at.STRING_PROPERTIES,...at.NUMBER_PROPERTIES,...at.FUNCTION_PROPERTIES,...at.BOOLEAN_PROPERTIES,...at.OTHER_PROPERTIES];var ba=at,ei=class{static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}};ei.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";ei.PUBLIC_EVENTS=oy;ei.EVENT_CALLBACKS=Tx.map(e=>ei.getCallbackForEvent(e));ei.BOOLEAN_PROPERTIES=ba.BOOLEAN_PROPERTIES;ei.ALL_PROPERTIES=ba.ALL_PROPERTIES;ei.ALL_PROPERTIES_AND_CALLBACKS=[...ei.ALL_PROPERTIES,...ei.EVENT_CALLBACKS];ei.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(ei.ALL_PROPERTIES_AND_CALLBACKS);var Pa=ei;function Ix(e,t){typeof e!="object"&&(e={});const i={...e};return Pa.ALL_PROPERTIES_AND_CALLBACKS.forEach(n=>{const o=t[n];typeof o<"u"&&o!==Pa.VUE_OMITTED_PROPERTY&&(i[n]=o)}),i}function Lx(e,t){if(!e)return;const i={};let s=!1;if(Object.keys(e).filter(r=>Pa.ALL_PROPERTIES_AND_CALLBACKS_SET.has(r)).forEach(r=>{i[r]=e[r],s=!0}),!s)return;const n={type:"gridOptionsChanged",options:i};t.dispatchEvent(n);const o={type:"componentStateChanged"};di(i,(r,a)=>{o[r]=a}),t.dispatchEvent(o)}var Uo=class extends D{};function Ha(e,t,i){return i&&e.addDestroyFunc(()=>t.destroyBean(i)),i??e}var Va=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(s=>this.addCssClass(s));return}if(this.cssClassStates[e]!==!0&&e.length){const s=this.getGui();s&&s.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(s=>this.removeCssClass(s));return}if(this.cssClassStates[e]!==!1&&e.length){const s=this.getGui();s&&s.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const s=(e||"").split(" ");if(s.length>1){s.forEach(n=>this.addOrRemoveCssClass(n,t));return}}if(this.cssClassStates[e]!==t&&e.length){const s=this.getGui();s&&s.classList.toggle(e,t),this.cssClassStates[e]=t}}};function as(e,t,i){i==null||typeof i=="string"&&i==""?ry(e,t):Bi(e,t,i)}function Bi(e,t,i){e.setAttribute(ay(t),i.toString())}function ry(e,t){e.removeAttribute(ay(t))}function ay(e){return`aria-${e}`}function vi(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function Ox(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function Bx(e){return e.getAttribute("aria-label")}function To(e,t){as(e,"label",t)}function xa(e,t){as(e,"labelledby",t)}function ly(e,t){as(e,"live",t)}function Nx(e,t){as(e,"atomic",t)}function _x(e,t){as(e,"relevant",t)}function Gx(e,t){as(e,"disabled",t)}function cy(e,t){as(e,"hidden",t)}function Jc(e,t){Bi(e,"expanded",t)}function Hx(e,t){Bi(e,"setsize",t)}function Vx(e,t){Bi(e,"posinset",t)}function Wx(e,t){Bi(e,"rowcount",t)}function zx(e,t){Bi(e,"rowindex",t)}function jx(e,t){Bi(e,"colcount",t)}function uy(e,t){Bi(e,"colindex",t)}function Ux(e,t){Bi(e,"colspan",t)}function Kx(e,t){Bi(e,"sort",t)}function $x(e){ry(e,"sort")}function Zc(e,t){as(e,"selected",t)}function qx(e,t){as(e,"controls",t.id),xa(t,e.id)}function hg(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var Vd,xl,Wd,zd,jd,Ud,Pp,xp,Kd;function Ai(){return Vd===void 0&&(Vd=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),Vd}function dy(){if(xl===void 0)if(Ai()){const e=navigator.userAgent.match(/version\/(\d+)/i);e&&(xl=e[1]!=null?parseFloat(e[1]):0)}else xl=0;return xl}function pg(){if(Wd===void 0){const e=window;Wd=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Wd}function fg(){return zd===void 0&&(zd=/(firefox)/i.test(navigator.userAgent)),zd}function hy(){return jd===void 0&&(jd=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),jd}function qs(){return Ud===void 0&&(Ud=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),Ud}function YC(){return!Ai()||dy()>=15}function Fp(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return t===-1&&(i===null||i===""&&!fg())?null:t.toString()}function Yx(){if(Kd!==void 0)return Kd;if(!document.body)return-1;let e=1e6;const t=fg()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const s=e*2;if(i.style.height=s+"px",s>t||i.clientHeight!==s)break;e=s}return document.body.removeChild(i),Kd=e,e}function Qx(){var e,t;return((e=document.body)==null?void 0:e.clientWidth)??(window.innerHeight||((t=document.documentElement)==null?void 0:t.clientWidth)||-1)}function Xx(){var e,t;return((e=document.body)==null?void 0:e.clientHeight)??(window.innerHeight||((t=document.documentElement)==null?void 0:t.clientHeight)||-1)}function Jx(){return xp==null&&py(),xp}function py(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;i===0&&t.clientWidth===0&&(i=null),t.parentNode&&t.parentNode.removeChild(t),i!=null&&(xp=i,Pp=i===0)}function fy(){return Pp==null&&py(),Pp}var Fl,Zx="[tabindex], input, select, button, textarea, [href]",gy="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function gg(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,s=t.call(e,"input, select, button, textarea"),n=t.call(e,gy),o=Ii(e);return s&&!n&&o}function Ae(e,t,i={}){const{skipAriaHidden:s}=i;e.classList.toggle("ag-hidden",!t),s||cy(e,!t)}function eF(e,t,i={}){const{skipAriaHidden:s}=i;e.classList.toggle("ag-invisible",!t),s||cy(e,!t)}function Fa(e,t){const i="disabled",s=t?n=>n.setAttribute(i,""):n=>n.removeAttribute(i);s(e),Sy(e.querySelectorAll("input"),n=>s(n))}function fo(e,t,i){let s=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof i=="number"){if(++s>i)break}else if(e===i)break}return!1}function On(e){const{height:t,width:i,borderTopWidth:s,borderRightWidth:n,borderBottomWidth:o,borderLeftWidth:r,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:u,marginTop:d,marginRight:h,marginBottom:p,marginLeft:g,boxSizing:v}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(s||"0"),borderRightWidth:parseFloat(n||"0"),borderBottomWidth:parseFloat(o||"0"),borderLeftWidth:parseFloat(r||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(u||"0"),marginTop:parseFloat(d||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(g||"0"),boxSizing:v}}function mg(e){const t=On(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function Wa(e){const t=On(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function my(e){const{height:t,marginBottom:i,marginTop:s}=On(e);return Math.floor(t+i+s)}function eu(e){const{width:t,marginLeft:i,marginRight:s}=On(e);return Math.floor(t+i+s)}function Cy(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:s,borderRightWidth:n,borderBottomWidth:o}=On(e);return{top:t.top+(i||0),left:t.left+(s||0),right:t.right+(n||0),bottom:t.bottom+(o||0)}}function tu(){if(typeof Fl=="boolean")return Fl;const e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(e),e.scrollLeft=1,Fl=Math.floor(e.scrollLeft)===0,document.body.removeChild(e),Fl}function iu(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i),pg()&&!tu()&&(i=e.scrollWidth-e.getBoundingClientRect().width-i)),i}function su(e,t,i){i&&(tu()?t*=-1:(Ai()||pg())&&(t=e.scrollWidth-e.getBoundingClientRect().width-t)),e.scrollLeft=t}function zt(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function An(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function vy(e){return!!e.offsetParent}function Ii(e){const t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!vy(e)||window.getComputedStyle(e).visibility!=="visible")}function Ea(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function tF(e){return e.clientWidth<e.scrollWidth}function iF(e){return e.clientHeight<e.scrollHeight}function nu(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):gi(e,t)}function gi(e,t){t=Cg(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function Ur(e,t){t=Cg(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function Cg(e){return typeof e=="number"?`${e}px`:e}function vg(e){return e instanceof Node||e instanceof HTMLElement}function sF(e){if(e==null)return[];const t=[];return Sy(e,i=>t.push(i)),t}function nF(e,t){if(e)for(let i=0;i<e.length;i++){const s=e[i];t(s.name,s.value)}}function ti(e,t,i){i==null||i===""?e.removeAttribute(t):e.setAttribute(t,i.toString())}function Sy(e,t){if(e!=null)for(let i=0;i<e.length;i++)t(e[i])}var Ao=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},oF=1e3,rF=1e3,QC=100,wy=class on extends D{constructor(t,i,s,n){super(),this.parentComp=t,this.tooltipShowDelayOverride=i,this.tooltipHideDelayOverride=s,this.shouldDisplayTooltip=n,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(t){this.popupService=t.popupService,this.userComponentFactory=t.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const t=this.parentComp.getGui();this.tooltipTrigger===0&&this.addManagedListeners(t,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(t,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(t,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(t,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(t){const i=this.gos.get(t);return i<0&&I(`${t} should not be lower than 0`),Math.max(200,i)}getTooltipDelay(t){return t==="show"?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const t=this.gos.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!qs()&&(on.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},QC):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){var o;const i=t.relatedTarget,s=this.parentComp.getGui(),n=(o=this.tooltipComp)==null?void 0:o.getGui();this.isInteractingWithTooltip||s.contains(i)||this.interactionEnabled&&(n!=null&&n.contains(i))||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||on.isLocked)return;let i=0;t&&(i=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=1}isLastTooltipHiddenRecently(){const t=new Date().getTime(),i=on.lastTooltipHideTime;return t-i<oF}setToDoNothing(t){!t&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const t={...this.parentComp.getTooltipParams()};if(!N(t.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;const i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(i)}hideTooltip(t){!t&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),on.lastTooltipHideTime=new Date().getTime()),this.eventService.dispatchEvent({type:"tooltipHide",parentGui:this.parentComp.getGui()}),t&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(t,i){if(this.state!==2||this.tooltipInstanceCount!==t){this.destroyBean(i);return}const n=i.getGui();this.tooltipComp=i,n.classList.contains("ag-tooltip")||n.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&n.classList.add("ag-tooltip-animate"),this.interactionEnabled&&n.classList.add("ag-tooltip-interactive");const o=this.localeService.getLocaleTextFunc(),r=this.popupService.addPopup({eChild:n,ariaLabel:o("ariaLabelTooltip","Tooltip")});if(r&&(this.tooltipPopupDestroyFunc=r.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const a=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:a,columnMoved:a})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(n,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(Ge(this.gos),{keydown:a=>{n.contains(a==null?void 0:a.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(n,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventService.dispatchEvent({type:"tooltipShow",tooltipGui:n,parentGui:this.parentComp.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){var s;const t=(s=this.tooltipComp)==null?void 0:s.getGui(),i=Ie(this.gos);return!!t&&t.contains(i)}onTooltipFocusOut(t){const i=this.parentComp.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,i.contains(t.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent({...t,mouseEvent:this.lastMouseEvent}):this.popupService.positionPopupByComponent({...t,eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const t=this.tooltipPopupDestroyFunc,i=this.tooltipComp,s=this.tooltipTrigger===0?rF:0;window.setTimeout(()=>{t(),this.destroyBean(i)},s),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){on.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},QC)}unlockService(){on.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};wy.isLocked=!1;var aF=wy,Ko=class extends D{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){const t="title",i=this.ctrl.getGui();i&&(e!=null&&e!=""?i.setAttribute(t,e):i.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var t,i,s,n;if(this.tooltipManager!=null)return;const e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new aF(e,(i=(t=this.ctrl).getTooltipShowDelayOverride)==null?void 0:i.call(t),(n=(s=this.ctrl).getTooltipHideDelayOverride)==null?void 0:n.call(s),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){var n,o,r,a,l;const e=this.ctrl,t=(n=e.getColumn)==null?void 0:n.call(e),i=(o=e.getColDef)==null?void 0:o.call(e),s=(r=e.getRowNode)==null?void 0:r.call(e);return{location:e.getLocation(),colDef:i,column:t,rowIndex:(a=e.getRowIndex)==null?void 0:a.call(e),node:s,data:s==null?void 0:s.data,value:this.getTooltipText(),valueFormatted:(l=e.getValueFormatted)==null?void 0:l.call(e),hideTooltipCallback:()=>{var c;return(c=this.tooltipManager)==null?void 0:c.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},lF=new Ao,ee=null,ye=class yy extends D{constructor(t,i){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=lF.next(),this.cssClassManager=new Va(()=>this.eGui),this.componentSelectors=new Map((i??[]).map(s=>[s.selector,s])),t&&this.setTemplate(t)}preWireBeans(t){super.preWireBeans(t)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(t,i){t&&this.gos&&(this.applyElementsToComponent(t),this.createChildComponentsFromTags(t,i))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){const{newTooltipText:i,showDelayOverride:s,hideDelayOverride:n,location:o,shouldDisplayTooltip:r}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==i&&(this.tooltipText=i);const a=()=>this.tooltipText;i!=null&&(this.tooltipFeature=this.createBean(new Ko({getTooltipValue:a,getGui:()=>this.getGui(),getLocation:()=>o??"UNKNOWN",getColDef:t==null?void 0:t.getColDef,getColumn:t==null?void 0:t.getColumn,getTooltipShowDelayOverride:s!=null?()=>s:void 0,getTooltipHideDelayOverride:n!=null?()=>n:void 0,shouldDisplayTooltip:r})))}getDataRefAttribute(t){return t.getAttribute?t.getAttribute("data-ref"):null}applyElementsToComponent(t,i,s,n=null){if(i===void 0&&(i=this.getDataRefAttribute(t)),i){const o=this[i];if(o===ee)this[i]=n??t;else{const r=s&&s[i];!this.suppressDataRefValidation&&!r&&I(`Issue with data-ref: ${i} on ${this.constructor.name} with ${o}`)}}}createChildComponentsFromTags(t,i){sF(t.childNodes).forEach(n=>{if(!(n instanceof HTMLElement))return;const o=this.createComponentFromElement(n,r=>{r.getGui()&&this.copyAttributesFromNode(n,r.getGui())},i);if(o){if(o.addItems&&n.children.length){this.createChildComponentsFromTags(n,i);const r=Array.prototype.slice.call(n.children);o.addItems(r)}this.swapComponentForNode(o,t,n)}else n.childNodes&&this.createChildComponentsFromTags(n,i)})}createComponentFromElement(t,i,s){const n=t.nodeName,o=this.getDataRefAttribute(t),r=n.indexOf("AG-")===0,a=r?this.componentSelectors.get(n):null;let l=null;if(a){yy.elementGettingCreated=t;const c=s&&o?s[o]:void 0;l=new a.component(c),l.setParentComponent(this),this.createBean(l,null,i)}else r&&I(`Missing selector: ${n}`);return this.applyElementsToComponent(t,o,s,l),l}copyAttributesFromNode(t,i){nF(t.attributes,(s,n)=>i.setAttribute(s,n))}swapComponentForNode(t,i,s){const n=t.getGui();i.replaceChild(n,s),i.insertBefore(document.createComment(s.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t){const i=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(s=>s.setAttribute("tabindex",i.toString()))}setTemplate(t,i,s){const n=Ea(t);this.setTemplateFromElement(n,i,s)}setTemplateFromElement(t,i,s,n=!1){if(this.eGui=t,this.suppressDataRefValidation=n,i)for(let o=0;o<i.length;o++){const r=i[o];this.componentSelectors.set(r.selector,r)}this.wireTemplate(t,s)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,i){let s=i;return t==null?null:(s||(s=this.eGui),vg(t)?{element:t,parent:s}:{element:t.getGui(),parent:s})}prependChild(t,i){const{element:s,parent:n}=this.getContainerAndElement(t,i)||{};!s||!n||n.insertAdjacentElement("afterbegin",s)}appendChild(t,i){const{element:s,parent:n}=this.getContainerAndElement(t,i)||{};!s||!n||n.appendChild(s)}isDisplayed(){return this.displayed}setVisible(t,i={}){if(t!==this.visible){this.visible=t;const{skipAriaHidden:s}=i;eF(this.eGui,t,{skipAriaHidden:s})}}setDisplayed(t,i={}){if(t!==this.displayed){this.displayed=t;const{skipAriaHidden:s}=i;Ae(this.eGui,t,{skipAriaHidden:s});const n={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(n)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(t,i,s){this.eGui.addEventListener(t,i,s),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,i))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,i){this.cssClassManager.addOrRemoveCssClass(t,i)}},Ry={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"},cF=(()=>{const e=new Set(Object.values(Ry));return e.add("eye"),e})();function uF(e,t,i){const s=Gt(e,t,i);if(s){const{className:o}=s;if(typeof o=="string"&&o.indexOf("ag-icon")>-1||typeof o=="object"&&o["ag-icon"])return s}const n=document.createElement("span");return n.appendChild(s),n}function Gt(e,t,i,s){let n=null;const o=i&&i.getColDef().icons;if(o&&(n=o[e]),t&&!n){const r=t.get("icons");r&&(n=r[e])}if(n){let r;if(typeof n=="function")r=n();else if(typeof n=="string")r=n;else throw new Error("icon from grid options needs to be a string or a function");if(typeof r=="string")return Ea(r);if(vg(r))return r;I("iconRenderer should return back a string or a dom object")}else{const r=document.createElement("span");let a=Ry[e]??(cF.has(e)?e:void 0);return a||(I(`Did not find icon ${e}`),a=""),r.setAttribute("class",`ag-icon ag-icon-${a}`),r.setAttribute("unselectable","on"),vi(r,"presentation"),r}}var dF=class extends ye{constructor(){super(...arguments),this.dragSource=null,this.eIcon=ee,this.eLabel=ee}postConstruct(){const e=t=>uF(t,this.gos,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(`<div class="ag-dnd-ghost ag-unselectable">
                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>
            </div>`)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t=!1){var s,n;zt(this.eIcon);let i=null;e||(e=(s=this.dragSource)!=null&&s.getDefaultIconName?(n=this.dragSource)==null?void 0:n.getDefaultIconName():"notAllowed"),i=this.dropIconMap[e],this.eIcon.classList.toggle("ag-shake-left-to-right",t),!(i===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns"))&&i&&this.eIcon.appendChild(i)}setLabel(e){this.eLabel.textContent=Ti(e)}};function by(e,t,i){if(i===0)return!1;const s=Math.abs(e.clientX-t.clientX),n=Math.abs(e.clientY-t.clientY);return Math.max(s,n)<=i}var Ns=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new zo,this.eElement=e,this.preventMouseClick=t;const i=this.onTouchStart.bind(this),s=this.onTouchMove.bind(this),n=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",i,{passive:!0}),this.eElement.addEventListener("touchmove",s,{passive:!0}),this.eElement.addEventListener("touchend",n,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",i,{passive:!0}),this.eElement.removeEventListener("touchmove",s,{passive:!0}),this.eElement.removeEventListener("touchend",n,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout(()=>{const i=this.touchStart===t;if(this.touching&&i&&!this.moved){this.moved=!0;const s={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(s)}},500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!by(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const i={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(i),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};function hr(e,t){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${t} ag-hidden" aria-hidden="true"></span>`}var hF=`<span class="ag-sort-indicator-container">
        ${hr("Order","order")}
        ${hr("Asc","ascending-icon")}
        ${hr("Desc","descending-icon")}
        ${hr("Mixed","mixed-icon")}
        ${hr("None","none-icon")}
    </span>`,Sg=class extends ye{constructor(e){super(),this.eSortOrder=ee,this.eSortAsc=ee,this.eSortDesc=ee,this.eSortMixed=ee,this.eSortNone=ee,e||this.setTemplate(hF)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,i,s,n){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=s,this.eSortNone=n}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!this.column.isSortable()&&!this.column.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const i=this.updateIcons.bind(this),s=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:s,columnRowGroupChanged:s}),this.onSortChanged()}addInIcon(e,t,i){if(t==null)return;const s=Gt(e,this.gos,i);s&&t.appendChild(s)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const t=e==="asc";Ae(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){const t=e==="desc";Ae(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){const t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),i=e==null;Ae(this.eSortNone,!t&&i,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;Ei(this.gos)&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";Ae(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;const e=this.sortController.getColumnsWithSortingOrdered(),t=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,i=e.some(n=>this.sortController.getDisplaySortIndexForColumn(n)??!1),s=t>=0&&i;Ae(this.eSortOrder,s,{skipAriaHidden:!0}),t>=0?this.eSortOrder.textContent=(t+1).toString():zt(this.eSortOrder)}},pF={selector:"AG-SORT-INDICATOR",component:Sg},fF=`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>
        </div>
    </div>`,Ep=class extends ye{constructor(){super(...arguments),this.eFilter=ee,this.eFilterButton=ee,this.eSortIndicator=ee,this.eMenu=ee,this.eLabel=ee,this.eText=ee,this.eSortOrder=ee,this.eSortAsc=ee,this.eSortDesc=ee,this.eSortMixed=ee,this.eSortNone=ee,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){const t=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??fF;return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[pF]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const t=Ti(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,i){if(t==null)return;const s=Gt(e,this.gos,i);s&&t.appendChild(s)}setupTap(){const{gos:e}=this;if(e.get("suppressTouch"))return;const t=new Ns(this.getGui(),!0),i=this.shouldSuppressMenuHide(),s=i&&N(this.eMenu),n=s?new Ns(this.eMenu,!0):t;if(this.params.enableMenu){const o=s?"tap":"longTap",r=a=>this.params.showColumnMenuAfterMouseClick(a.touchStart);this.addManagedListeners(n,{[o]:r})}if(this.params.enableSorting){const o=r=>{var l,c;const a=r.touchStart.target;i&&((l=this.eMenu)!=null&&l.contains(a)||(c=this.eFilterButton)!=null&&c.contains(a))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:o})}if(this.params.enableFilterButton){const o=new Ns(this.eFilterButton,!0);this.addManagedListeners(o,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc(()=>o.destroy())}this.addDestroyFunc(()=>t.destroy()),s&&this.addDestroyFunc(()=>n.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){An(this.eMenu),this.eMenu=void 0;return}const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){const t=this.params.column,i=this.menuService.isLegacyMenuEnabled();if(e&&!i){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new Sg(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=new Date().getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:t=>{const i=this.params.column.isMoving(),n=new Date().getTime()-this.lastMovingChanged<50;if(!(i||n)){const a=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.params.progressSort(a)}}});const e=()=>{const t=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",t==="asc"),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",t==="desc"),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!t),this.params.column.getColDef().showRowGroup){const i=this.funcColsService.getSourceColumnsForGroupColumn(this.params.column),n=!(i==null?void 0:i.every(o=>this.params.column.getSort()==o.getSort()));this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",n)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(e,t,i){if(!e)return An(t),!1;const s=this.params.column;return this.addInIcon("filter",t,s),this.addManagedListeners(s,{filterChanged:i}),i(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();Ae(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},gF=class extends ye{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=ee,this.agClosed=ee,this.agLabel=ee}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&I("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);const e=n=>{if(Qi(n))return;const o=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),o,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);const t=n=>{Do(n)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();const i=this.params.columnGroup.getProvidedColumnGroup(),s=this.updateIconVisibility.bind(this);this.addManagedListeners(i,{expandedChanged:s,expandableChanged:s})}addTouchAndClickListeners(e,t){const i=new Ns(e,!0);this.addManagedListeners(i,{tap:t}),this.addDestroyFunc(()=>i.destroy()),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const t=this.params.columnGroup.isExpanded();Ae(this.agOpened,t),Ae(this.agClosed,!t)}else Ae(this.agOpened,!1),Ae(this.agClosed,!1)}addInIcon(e,t){const i=Gt(e,this.gos,null);i&&t.appendChild(i)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){Ae(this.agOpened,!1),Ae(this.agClosed,!1);return}}setupLabel(){var i;const{displayName:e,columnGroup:t}=this.params;if(N(e)){const s=Ti(e,!0);this.agLabel.textContent=s}this.addOrRemoveCssClass("ag-sticky-label",!((i=t.getColGroupDef())!=null&&i.suppressStickyLabel))}},mF="↑",CF="↓",vF=class extends ye{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(i),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),s=e.formatValue(i),n=N(s)?s:i,o=t>=0;o?this.eDelta.textContent=mF+n:this.eDelta.textContent=CF+n,this.eDelta.classList.toggle("ag-value-change-delta-up",o),this.eDelta.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),zt(this.eDelta)}refresh(e,t=!1){var s;const i=e.value;if(i===this.lastValue||(N(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:N(e.value)?this.eValue.textContent=i:zt(this.eValue),(s=this.filterManager)!=null&&s.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof i=="number"&&typeof this.lastValue=="number"){const n=i-this.lastValue;this.showDelta(e,n)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0}},SF=class extends ye{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){var s;let i=e.value;return le(i)&&(i=""),i===this.lastValue||(s=this.filterManager)!=null&&s.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=i,N(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:N(e.value)?this.eCurrent.textContent=i:zt(this.eCurrent),!0)}},M=class{};M.BACKSPACE="Backspace";M.TAB="Tab";M.ENTER="Enter";M.ESCAPE="Escape";M.SPACE=" ";M.LEFT="ArrowLeft";M.UP="ArrowUp";M.RIGHT="ArrowRight";M.DOWN="ArrowDown";M.DELETE="Delete";M.F2="F2";M.PAGE_UP="PageUp";M.PAGE_DOWN="PageDown";M.PAGE_HOME="Home";M.PAGE_END="End";M.A="KeyA";M.C="KeyC";M.D="KeyD";M.V="KeyV";M.X="KeyX";M.Y="KeyY";M.Z="KeyZ";var wF=class extends ye{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:s,disabled:n}=this.config;n!=null&&this.setDisabled(n),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()}refreshLabel(){zt(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(Ae(this.eLabel,!1),vi(this.eLabel,"presentation")):(Ae(this.eLabel,!0),vi(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const i=this.getGui().classList;return i.toggle("ag-label-align-left",e==="left"),i.toggle("ag-label-align-right",e==="right"),i.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(nu(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return Fa(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},Py=class extends wF{constructor(e,t,i,s){super(e,t,i),this.className=s}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),i!=null&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();i==null||i==""||Bx(e)!==null?xa(e,""):xa(e,t??"")}setAriaLabel(e){return To(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return gi(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},fn=class extends Py{constructor(e,t,i="text",s="input"){super(e,(e==null?void 0:e.template)??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${s} data-ref="eInput" class="ag-input-field-input"></${s}>
                </div>
            </div>`,[],t),this.inputType=i,this.displayFieldTag=s,this.eLabel=ee,this.eWrapper=ee,this.eInput=ee}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName:e,inputWidth:t}=this.config;e!=null&&this.setInputName(e),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return nu(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return ti(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return To(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Fa(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)ti(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";ti(this.eInput,"autocomplete",t)}return this}},wg=class extends fn{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const s=this.getInputElement();this.eventService.dispatchEvent({type:"checkboxChanged",id:s.id,name:s.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}},yg={selector:"AG-CHECKBOX",component:wg},yF=class extends ye{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[yg]),this.eCheckbox=ee}init(e){this.refresh(e);const t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),ly(t,"polite"),this.addManagedListeners(t,{click:i=>{if(Do(i),this.eCheckbox.isDisabled())return;const s=this.eCheckbox.getValue();this.onCheckboxChanged(s)},dblclick:i=>{Do(i)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:i=>{if(i.key===M.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===Ie(this.gos)&&this.eCheckbox.toggle();const s=this.eCheckbox.getValue();this.onCheckboxChanged(s),i.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var a;let t,i=!0;if(e.node.group&&e.column)if(typeof e.value=="boolean")t=e.value;else{const l=e.column.getColId();l.startsWith(_u)?t=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[l]!==void 0?t=e.value??void 0:i=!1}else t=e.value??void 0;if(!i){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(t);const s=e.disabled!=null?e.disabled:!((a=e.column)!=null&&a.isCellEditable(e.node));this.eCheckbox.setDisabled(s);const n=this.localeService.getLocaleTextFunc(),o=hg(n,t),r=s?o:`${n("ariaToggleCellValue","Press SPACE to toggle cell value")} (${o})`;this.eCheckbox.setInputAriaLabel(r)}onCheckboxChanged(e){const{column:t,node:i,value:s}=this.params;this.eventService.dispatchEvent({type:"cellEditingStarted",column:t,colDef:t==null?void 0:t.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:s});const n=this.params.node.setDataValue(this.params.column,e,"edit");this.eventService.dispatchEvent({type:"cellEditingStopped",column:t,colDef:t==null?void 0:t.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:s,oldValue:s,newValue:e,valueChanged:n}),n||this.updateCheckbox(this.params)}},RF=class extends ye{constructor(){super(`<div class="ag-loading">
            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>
            <span class="ag-loading-text" data-ref="eLoadingText"></span>
        </div>`),this.eLoadingIcon=ee,this.eLoadingText=ee}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=Gt("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},bF=class extends ye{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){const t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>xa(e.eParentOfValue)),xa(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");To(this.getGui(),t)}setupLoading(e){const i=Ge(this.gos).createElement("div");i.classList.add("ag-skeleton-effect");const s=e.node.rowIndex;if(s!=null){const r=75+25*(s%2===0?Math.sin(s):Math.cos(s));i.style.width=`${r}%`}this.getGui().appendChild(i);const o=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");To(this.getGui(),o)}refresh(e){return!1}destroy(){super.destroy()}},xy=class extends ye{constructor(){super()}destroy(){super.destroy()}},PF=class extends xy{init(){var t;const e=Yi((t=this.gos.get("overlayLoadingTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){const i=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=i("loadingOoo","Loading...")})}}},xF=class extends xy{init(){var t;const e=Yi((t=this.gos.get("overlayNoRowsTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){const i=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=i("noRowsToShow","No Rows To Show")})}}},$o=class extends ye{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},FF=class extends $o{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=Ti(t,!0)}};function Fy(e){const{inputValue:t,allSuggestions:i,hideIrrelevant:s,filterByPercentageOfBestMatch:n,addSequentialWeight:o}=e;let r=i.map((c,u)=>({value:c,relevance:kF(t.toLowerCase(),c.toLocaleLowerCase(),o),idx:u}));if(r.sort((c,u)=>u.relevance-c.relevance),s&&(r=r.filter(c=>c.relevance!==0)),r.length>0&&n&&n>0){const u=r[0].relevance*n;r=r.filter(d=>u-d.relevance<0)}const a=[],l=[];for(const c of r)a.push(c.value),l.push(c.idx);return{values:a,indices:l}}function EF(e){const t=[],i=e.length;for(let s=1;s<=i;s++)for(let n=0;n<=i-s;n++){const o=n+s-1;t.push(e.slice(n,o+1))}return t}function kF(e,t,i=!1){const s=e.replace(/\s/g,""),n=t.replace(/\s/g,""),o=s.length,r=n.length,a=new Array(o+1).fill(null).map(()=>new Array(r+1).fill(0));for(let d=0;d<=o;d+=1)a[d][0]=d;for(let d=0;d<=r;d+=1)a[0][d]=d;for(let d=1;d<=o;d++)for(let h=1;h<=r;h++)s[d-1]===n[h-1]?a[d][h]=a[d-1][h-1]:a[d][h]=1+Math.min(a[d][h-1],Math.min(a[d-1][h],a[d-1][h-1]));const l=a[o][r];let u=Math.max(o,r)-l;if(i){const d=EF(s);for(let h=0;h<d.length;h++){const p=d[h];n.indexOf(p)!==-1&&(u+=1,u*=p.length)}}return u}var MF=class extends D{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agDragAndDropImage:dF,agColumnHeader:Ep,agColumnGroupHeader:gF,agSortIndicator:Sg,agAnimateShowChangeCellRenderer:vF,agAnimateSlideCellRenderer:SF,agLoadingCellRenderer:RF,agSkeletonCellRenderer:bF,agCheckboxCellRenderer:yF,agLoadingOverlay:PF,agNoRowsOverlay:xF,agTooltipComponent:FF},this.agGridDefaultParams={},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){const e=this.gos.get("components");e!=null&&di(e,(t,i)=>this.registerJsComponent(t,i))}registerDefaultComponent(e,t,i){this.agGridDefaults[e]=t,i&&(this.agGridDefaultParams[e]=i)}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){const i=(a,l,c)=>({componentFromFramework:l,component:a,params:c}),s=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(s!=null)return i(s,!0);const n=this.jsComps[t];if(n){const a=this.getFrameworkOverrides().isFrameworkComponent(n);return i(n,a)}const o=this.agGridDefaults[t];if(o)return i(o,!1,this.agGridDefaultParams[t]);const r=this.enterpriseAgDefaultCompsModule[t];return r?this.gos.assertModuleRegistered(r,`AG Grid '${e}' component: ${t}`):ng(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){const i=[...Object.keys(this.agGridDefaults).filter(n=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(n)),...Object.keys(this.jsComps)],s=Fy({inputValue:t,allSuggestions:i,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;I(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),s.length>0&&I(`         Did you mean: [${s.slice(0,3)}]?`),I(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},_e=class kr{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(i=>this.onDone(i),i=>this.onReject(i))}static all(t){return t.length?new kr(i=>{let s=t.length;const n=new Array(s);t.forEach((o,r)=>{o.then(a=>{n[r]=a,s--,s===0&&i(n)})})}):kr.resolve()}static resolve(t=null){return new kr(i=>i(t))}then(t){return new kr(i=>{this.status===1?i(t(this.resolution)):this.waiters.push(s=>i(t(s)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(i=>i(t))}onReject(t){}},DF={propertyName:"dateComponent",cellRenderer:!1},TF={propertyName:"dragAndDropImageComponent",cellRenderer:!1},AF={propertyName:"headerComponent",cellRenderer:!1},IF={propertyName:"headerGroupComponent",cellRenderer:!1},XC={propertyName:"cellRenderer",cellRenderer:!0},LF={propertyName:"cellRenderer",cellRenderer:!1},OF={propertyName:"loadingCellRenderer",cellRenderer:!0},BF={propertyName:"cellEditor",cellRenderer:!1},JC={propertyName:"innerRenderer",cellRenderer:!0},NF={propertyName:"loadingOverlayComponent",cellRenderer:!1},_F={propertyName:"noRowsOverlayComponent",cellRenderer:!1},GF={propertyName:"tooltipComponent",cellRenderer:!1},Rg={propertyName:"filter",cellRenderer:!1},HF={propertyName:"floatingFilterComponent",cellRenderer:!1},VF={propertyName:"toolPanel",cellRenderer:!1},WF={propertyName:"statusPanel",cellRenderer:!1},zF={propertyName:"fullWidthCellRenderer",cellRenderer:!0},jF={propertyName:"loadingCellRenderer",cellRenderer:!0},UF={propertyName:"groupRowRenderer",cellRenderer:!0},KF={propertyName:"detailCellRenderer",cellRenderer:!0},$F={propertyName:"menuItem",cellRenderer:!1},Ey=class ky extends D{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(t){this.agComponentUtils=t.agComponentUtils,this.componentMetadataProvider=t.componentMetadataProvider,this.userComponentRegistry=t.userComponentRegistry,this.frameworkComponentWrapper=t.frameworkComponentWrapper,this.gridOptions=t.gridOptions}getDragAndDropImageCompDetails(t){return this.getCompDetails(this.gridOptions,TF,"agDragAndDropImage",t,!0)}getHeaderCompDetails(t,i){return this.getCompDetails(t,AF,"agColumnHeader",i)}getHeaderGroupCompDetails(t){const i=t.columnGroup.getColGroupDef();return this.getCompDetails(i,IF,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,zF,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,jF,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,UF,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,KF,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,i){return this.getCompDetails(t,JC,null,i)}getFullWidthGroupRowInnerCellRenderer(t,i){return this.getCompDetails(t,JC,null,i)}getCellRendererDetails(t,i){return this.getCompDetails(t,XC,null,i)}getEditorRendererDetails(t,i){return this.getCompDetails(t,LF,null,i)}getLoadingCellRendererDetails(t,i){return this.getCompDetails(t,OF,"agSkeletonCellRenderer",i,!0)}getCellEditorDetails(t,i){return this.getCompDetails(t,BF,"agCellEditor",i,!0)}getFilterDetails(t,i,s){return this.getCompDetails(t,Rg,s,i,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,DF,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,NF,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,_F,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,GF,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,i){return this.getCompDetails(t,XC,null,i)}getFloatingFilterCompDetails(t,i,s){return this.getCompDetails(t,HF,s,i)}getToolPanelCompDetails(t,i){return this.getCompDetails(t,VF,null,i,!0)}getStatusPanelCompDetails(t,i){return this.getCompDetails(t,WF,null,i,!0)}getMenuItemCompDetails(t,i){return this.getCompDetails(t,$F,"agMenuItem",i,!0)}getCompDetails(t,i,s,n,o=!1){const{propertyName:r,cellRenderer:a}=i;let{compName:l,jsComp:c,fwComp:u,paramsFromSelector:d,popupFromSelector:h,popupPositionFromSelector:p}=ky.getCompKeys(this.frameworkOverrides,t,i,n),g;const v=w=>{const R=this.userComponentRegistry.retrieve(r,w);R&&(c=R.componentFromFramework?void 0:R.component,u=R.componentFromFramework?R.component:void 0,g=R.params)};if(l!=null&&v(l),c==null&&u==null&&s!=null&&v(s),c&&a&&!this.agComponentUtils.doesImplementIComponent(c)&&(c=this.agComponentUtils.adaptFunction(r,c)),!c&&!u){o&&ge(`Could not find component ${l}, did you forget to configure this component?`);return}const S=this.mergeParamsWithApplicationProvidedParams(t,i,n,d,g),m=c==null,C=c||u;return{componentFromFramework:m,componentClass:C,params:S,type:i,popupFromSelector:h,popupPositionFromSelector:p,newAgStackInstance:()=>this.newAgStackInstance(C,m,S,i)}}static getCompKeys(t,i,s,n){const{propertyName:o}=s;let r,a,l,c,u,d;if(i){const h=i,p=h[o+"Selector"],g=p?p(n):null,v=S=>{typeof S=="string"?r=S:S!=null&&S!==!0&&(t.isFrameworkComponent(S)?l=S:a=S)};g?(v(g.component),c=g.params,u=g.popup,d=g.popupPosition):v(h[o])}return{compName:r,jsComp:a,fwComp:l,paramsFromSelector:c,popupFromSelector:u,popupPositionFromSelector:d}}newAgStackInstance(t,i,s,n){const o=n.propertyName,r=!i;let a;if(r)a=new t;else{const c=this.componentMetadataProvider.retrieve(o);a=this.frameworkComponentWrapper.wrap(t,c.mandatoryMethodList,c.optionalMethodList,n)}const l=this.initComponent(a,s);return l==null?_e.resolve(a):l.then(()=>a)}mergeParamsWithApplicationProvidedParams(t,i,s,n=null,o){const r=this.gos.getGridCommonParams();gt(r,s),o&&gt(r,o);const a=t,l=a&&a[i.propertyName+"Params"];if(typeof l=="function"){const c=l(s);gt(r,c)}else typeof l=="object"&&gt(r,l);return gt(r,n),r}initComponent(t,i){if(this.createBean(t),t.init!=null)return t.init(i)}};function Kr(e){const t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var Gu=class fe{static register(t){fe.__register(t,!0,void 0)}static registerModules(t){fe.__registerModules(t,!0,void 0)}static __register(t,i,s){fe.runVersionChecks(t),s!==void 0?(fe.areGridScopedModules=!0,fe.gridModulesMap[s]===void 0&&(fe.gridModulesMap[s]={}),fe.gridModulesMap[s][t.moduleName]=t):fe.globalModulesMap[t.moduleName]=t,fe.setModuleBased(i)}static __unRegisterGridModules(t){delete fe.gridModulesMap[t]}static __registerModules(t,i,s){fe.setModuleBased(i),t&&t.forEach(n=>fe.__register(n,i,s))}static isValidModuleVersion(t){const[i,s]=t.version.split(".")||[],[n,o]=fe.currentModuleVersion.split(".")||[];return i===n&&s===o}static runVersionChecks(t){fe.currentModuleVersion||(fe.currentModuleVersion=t.version);const i=s=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${s} Please update all modules to the same version.`;if(t.version?fe.isValidModuleVersion(t)||ge(i(`'${t.moduleName}' is version ${t.version} but the other modules are version ${fe.currentModuleVersion}.`)):ge(i(`'${t.moduleName}' is incompatible.`)),t.validate){const s=t.validate();s.isValid||ge(`${s.message}`)}}static setModuleBased(t){fe.moduleBased===void 0?fe.moduleBased=t:fe.moduleBased!==t&&(ge("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),ge("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){fe.isBundled=!0}static __assertRegistered(t,i,s){var o;if(this.__isRegistered(t,s))return!0;let n;if(fe.isBundled)n=`AG Grid: unable to use ${i} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(fe.moduleBased||fe.moduleBased===void 0){const r=(o=Object.entries(Gw).find(([a,l])=>l===t))==null?void 0:o[0];n=`AG Grid: unable to use ${i} as the ${r} is not registered${fe.areGridScopedModules?` for gridId: ${s}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${r} } from '${t}';
    
    ModuleRegistry.registerModules([ ${r} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else n=`AG Grid: unable to use ${i} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return ge(n),!1}static __isRegistered(t,i){var s;return!!fe.globalModulesMap[t]||!!((s=fe.gridModulesMap[i])!=null&&s[t])}static __getRegisteredModules(t){return[...ec(fe.globalModulesMap),...ec(fe.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){return ec(fe.gridModulesMap[t]??{})||[]}static __isPackageBased(){return!fe.moduleBased}};Gu.globalModulesMap={};Gu.gridModulesMap={};Gu.areGridScopedModules=!1;var ki=Gu,qF=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){var t;Object.entries(e.providedBeanInstances).forEach(([i,s])=>{this.beans[i]=s}),e.beanClasses.forEach(i=>{const s=new i;s.beanName?this.beans[s.beanName]=s:console.error(`Bean ${i.name} is missing beanName`),this.createdBeans.push(s)}),(t=e.derivedBeans)==null||t.forEach(i=>{const{beanName:s,bean:n}=i(this);this.beans[s]=n,this.createdBeans.push(n)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(i=>{var s,n;(s=i.preWireBeans)==null||s.call(i,this.beans),(n=i.wireBeans)==null||n.call(i,this.beans)}),e.forEach(i=>{var s;return(s=i.preConstruct)==null?void 0:s.call(i)}),t&&e.forEach(t),e.forEach(i=>{var s;return(s=i.postConstruct)==null?void 0:s.call(i)})}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){var t;(t=e==null?void 0:e.destroy)==null||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},YF=class extends qF{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),ki.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}},My=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(My||{}),QF=class extends D{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment,this.userComponentFactory=e.userComponentFactory}addDragSource(e,t=!1){const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return!e||!e.comp?null:e.comp}removeDragSource(e){const t=this.dragSourceAndParamsList.find(i=>i.dragSource===e);t&&(this.dragService.removeDragSource(t.params),Ct(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){var i,s;this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),(s=(i=this.dragSource).onDragStarted)==null||s.call(i),this.createDragAndDropImageComponent()}onDragStop(e){var t,i,s;if((i=(t=this.dragSource)==null?void 0:t.onDragStopped)==null||i.call(t),(s=this.lastDropTarget)!=null&&s.onDragStop){const n=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(n)}this.clearDragAndDropProperties()}onDragCancel(){var e,t,i;(t=(e=this.dragSource)==null?void 0:e.onDragCancelled)==null||t.call(e),(i=this.lastDropTarget)!=null&&i.onDragCancel&&this.lastDropTarget.onDragCancel(this.createDropTargetEvent(this.lastDropTarget,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){var r,a,l,c;const i=this.getHorizontalDirection(e),s=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const n=this.dropTargets.filter(u=>this.isMouseOnDropTarget(e,u)),o=this.findCurrentDropTarget(e,n);if(o!==this.lastDropTarget){if(this.leaveLastTargetIfExists(e,i,s,t),this.lastDropTarget!==null&&o===null&&((a=(r=this.dragSource)==null?void 0:r.onGridExit)==null||a.call(r,this.dragItem)),this.lastDropTarget===null&&o!==null&&((c=(l=this.dragSource)==null?void 0:l.onGridEnter)==null||c.call(l,this.dragItem)),this.enterDragTargetIfExists(o,e,i,s,t),o&&this.dragAndDropImageComp){const{comp:u,promise:d}=this.dragAndDropImageComp;u?u.setIcon(o.getIconName?o.getIconName():null):d.then(h=>{h&&h.setIcon(o.getIconName?o.getIconName():null)})}this.lastDropTarget=o}else if(o&&o.onDragging){const u=this.createDropTargetEvent(o,e,i,s,t);o.onDragging(u)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}allContainersIntersect(e,t){for(const i of t){const{width:s,height:n,left:o,right:r,top:a,bottom:l}=i.getBoundingClientRect();if(s===0||n===0)return!1;const c=e.clientX>=o&&e.clientX<r,u=e.clientY>=a&&e.clientY<l;if(!c||!u)return!1}return!0}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let s=!1;for(const r of i)if(this.allContainersIntersect(e,r)){s=!0;break}const{eElement:n,type:o}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(n)?!1:s&&t.isInterestedIn(o,n)}findCurrentDropTarget(e,t){const i=t.length;if(i===0)return null;if(i===1)return t[0];const n=Ra(this.gos).elementsFromPoint(e.clientX,e.clientY);for(const o of n)for(const r of t)if(rx(this.getAllContainersFromDropTarget(r)).indexOf(o)!==-1)return r;return null}enterDragTargetIfExists(e,t,i,s,n){if(e&&e.onDragEnter){const o=this.createDropTargetEvent(e,t,i,s,n);e.onDragEnter(o)}}leaveLastTargetIfExists(e,t,i,s){if(!this.lastDropTarget)return;if(this.lastDropTarget.onDragLeave){const o=this.createDropTargetEvent(this.lastDropTarget,e,t,i,s);this.lastDropTarget.onDragLeave(o)}const n=this.getDragAndDropImageComponent();n&&n.setIcon(null)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(i=>i.external).find(i=>i.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){const i=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:s}=e;return i.contains(s)}getHorizontalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientX,i=e.clientX;return t===i?null:t>i?0:1}getVerticalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientY,i=e.clientY;return t===i?null:t>i?0:1}createDropTargetEvent(e,t,i,s,n){const o=e.getContainer(),r=o.getBoundingClientRect(),{dragItem:a,dragSource:l}=this,c=t.clientX-r.left,u=t.clientY-r.top;return this.gos.addGridCommonParams({event:t,x:c,y:u,vDirection:s,hDirection:i,dragSource:l,fromNudge:n,dragItem:a,dropZoneTarget:o})}positionDragAndDropImageComp(e){const t=this.getDragAndDropImageComponent();if(!t)return;const i=t.getGui(),n=i.getBoundingClientRect().height,o=Qx()-2,r=Xx()-2;if(!i.offsetParent)return;const l=Cy(i.offsetParent),{clientY:c,clientX:u}=e;let d=c-l.top-n/2,h=u-l.left-10;const p=Ge(this.gos),g=p.defaultView||window,v=g.pageYOffset||p.documentElement.scrollTop,S=g.pageXOffset||p.documentElement.scrollLeft;o>0&&h+i.clientWidth>o+S&&(h=o+S-i.clientWidth),h<0&&(h=0),r>0&&d+i.clientHeight>r+v&&(d=r+v-i.clientHeight),d<0&&(d=0),i.style.left=`${h}px`,i.style.top=`${d}px`}removeDragAndDropImageComponent(){if(this.dragAndDropImageComp){const{comp:e}=this.dragAndDropImageComp;if(e){const t=e.getGui();this.dragAndDropImageParent&&this.dragAndDropImageParent.removeChild(t),this.destroyBean(e)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e}=this;if(!e)return;const i=this.userComponentFactory.getDragAndDropImageCompDetails({dragSource:e}).newAgStackInstance();this.dragAndDropImageComp={promise:i},i.then(s=>{!s||!this.isAlive()||(this.processDragAndDropImageComponent(s),this.dragAndDropImageComp.comp=s)})}processDragAndDropImageComponent(e){const{dragSource:t,mouseEventService:i,environment:s}=this;if(!t)return;const n=e.getGui();n.style.setProperty("position","absolute"),n.style.setProperty("z-index","9999"),i.stampTopLevelGridCompWithGridInstance(n),s.applyThemeClasses(n),e.setIcon(null);let{dragItemName:o}=t;og(o)&&(o=o()),e.setLabel(o||""),n.style.top="20px",n.style.left="20px";const r=Ge(this.gos);let a=null,l=null;try{a=r.fullscreenElement}catch{}finally{a||(a=Ra(this.gos));const c=a.querySelector("body");c?l=c:a instanceof ShadowRoot?l=a:a instanceof Document?l=a==null?void 0:a.documentElement:l=a}this.dragAndDropImageParent=l,l?l.appendChild(n):I("Could not find document body, it is needed for drag and drop.")}},XF=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;const s=this.scrollContainer.getBoundingClientRect(),n=this.scrollByTick;this.tickLeft=e.clientX<s.left+n,this.tickRight=e.clientX>s.right-n,this.tickUp=e.clientY<s.top+n&&!i,this.tickDown=e.clientY>s.bottom-n&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},JF=class extends D{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){ke(this.gos)&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(this,e=>{const t=e.gridBodyCtrl;this.autoScrollService=new XF({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:i=>t.getScrollFeature().setVerticalScrollPosition(i),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){var s;return!!(this.funcColsService.getRowGroupColumns().length||((s=this.filterManager)==null?void 0:s.isAnyFilterPresent())||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const s=[...this.selectionService.getSelectedNodes()].sort((n,o)=>n.rowIndex==null||o.rowIndex==null?0:this.getRowIndexNumber(n)-this.getRowIndexNumber(o));if(s.indexOf(t)!==-1)return s}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;const t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const i=this.isFromThisGrid(e),s=this.gos.get("rowDragManaged"),n=e.dragItem.rowNodes;s&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!i?this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(n[0],t):this.moveRows(n,t))}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt(ae(t.split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel.getLastHighlightedRowNode(),i=t&&t.highlighted===1,s=this.mouseEventService.getNormalisedPosition(e).y,n=e.dragItem.rowNodes;let o=i?1:0;if(this.isFromThisGrid(e))n.forEach(r=>{r.rowTop<s&&(o-=1)}),this.moveRows(n,s,o);else{const r=jo(this.gos);let a=this.clientSideRowModel.getRowIndexAtPixel(s)+1;this.clientSideRowModel.getHighlightPosition(s)===0&&a--,this.clientSideRowModel.updateRowData({add:n.filter(l=>!this.clientSideRowModel.getRowNode((r==null?void 0:r({data:l.data,level:0,rowPinned:l.rowPinned}))??l.data.id)).map(l=>l.data),addIndex:a})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,i=0){var n;this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(this.focusService.clearFocusedCell(),(n=this.rangeService)==null||n.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){I("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){I("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=s=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",s))}),e.onDragLeave&&(t.onDragLeave=s=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",s))}),e.onDragging&&(t.onDragging=s=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",s))}),e.onDragStop&&(t.onDragStop=s=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",s))}),e.onDragCancel&&(t.onDragCancel=s=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",s))}));const i={isInterestedIn:s=>s===2,getIconName:()=>"move",external:!0,...t};this.dragAndDropService.addDropTarget(i),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(i))}getRowDropZone(e){const t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),s=this.onDragLeave.bind(this),n=this.onDragging.bind(this),o=this.onDragStop.bind(this),r=this.onDragCancel.bind(this);let a;return e?a={getContainer:t,onDragEnter:e.onDragEnter?l=>{i(l),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",l))}:i,onDragLeave:e.onDragLeave?l=>{s(l),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",l))}:s,onDragging:e.onDragging?l=>{n(l),e.onDragging(this.draggingToRowDragEvent("rowDragMove",l))}:n,onDragStop:e.onDragStop?l=>{o(l),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",l))}:o,onDragCancel:e.onDragCancel?l=>{r(l),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",l))}:r,fromGrid:!0}:a={getContainer:t,onDragEnter:i,onDragLeave:s,onDragging:n,onDragStop:o,onDragCancel:r,fromGrid:!0},a}draggingToRowDragEvent(e,t){const i=this.mouseEventService.getNormalisedPosition(t).y,s=i>this.pageBoundsService.getCurrentPageHeight();let n=-1,o;s||(n=this.rowModel.getRowIndexAtPixel(i),o=this.rowModel.getRow(n));let r;switch(t.vDirection){case 1:r="down";break;case 0:r="up";break;default:r=null;break}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:n,overNode:o,y:i,vDirection:r})}dispatchGridEvent(e,t){const i=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}},ZF=class extends D{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){const s=e.touchStartListener;t.removeEventListener("touchstart",s,{passive:!0})}}removeDragSource(e){const t=this.dragSources.find(i=>i.dragSource===e);t&&(this.removeListener(t),Ct(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:s,stopPropagationForTouch:n}=e;i.addEventListener("mousedown",t);let o=null;const r=this.gos.get("suppressTouch");s&&!r&&(o=a=>{gg(a.target)||(n&&a.stopPropagation(),this.onTouchStart(e,a))},i.addEventListener("touchstart",o,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:o,touchEnabled:!!s})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const i=t.touches[0];this.touchLastTime=i,this.touchStart=i;const s=l=>this.onTouchMove(l,e.eElement),n=l=>this.onTouchUp(l,e.eElement),o=l=>{l.cancelable&&l.preventDefault()},r=t.target,a=[{target:Ra(this.gos),type:"touchmove",listener:o,options:{passive:!1}},{target:r,type:"touchmove",listener:s,options:{passive:!0}},{target:r,type:"touchend",listener:n,options:{passive:!0}},{target:r,type:"touchcancel",listener:n,options:{passive:!0}}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){const i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||i._alreadyProcessedByDragService||(i._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const s=c=>this.onMouseMove(c,e.eElement),n=c=>this.onMouseUp(c,e.eElement),o=c=>c.preventDefault(),r=c=>{c.key===M.ESCAPE&&this.cancelDrag(e.eElement)},a=Ra(this.gos),l=[{target:a,type:"mousemove",listener:s},{target:a,type:"mouseup",listener:n},{target:a,type:"contextmenu",listener:o},{target:a,type:"keydown",listener:r}];this.addTemporaryEvents(l),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{const{target:i,type:s,listener:n,options:o}=t;i.addEventListener(s,n,o)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{const{target:i,type:s,listener:n,options:o}=t;i.removeEventListener(s,n,o)})})}isEventNearStartEvent(e,t){const{dragStartPixels:i}=this.currentDragParams,s=N(i)?i:4;return by(e,t,s)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){var s;if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventService.dispatchEvent({type:"dragStarted",target:i}),this.currentDragParams.onDragStart(t),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(t)}(s=this.currentDragParams)==null||s.onDragging(e)}onTouchMove(e,t){const i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){var i;Ai()&&((i=Ge(this.gos).getSelection())==null||i.removeAllRanges()),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const t=this.gos.get("enableCellTextSelection"),i=e.type==="mousemove";return t&&i&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){const t=e.target,i=t==null?void 0:t.tagName.toLocaleLowerCase();return!!(i!=null&&i.match("^a$|textarea|input|select|button"))}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){var t,i;this.eventService.dispatchEvent({type:"dragCancelled",target:e}),(i=(t=this.currentDragParams)==null?void 0:t.onDragCancel)==null||i.call(t),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(e=>e()),this.dragEndFunctions.length=0}},kp=class extends ye{constructor(e,t,i,s,n,o){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=s,this.dragStartPixels=n,this.suppressVisibilityChange=o,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Gt("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gos.get("rowDragManaged")?new tE(this,this.beans,this.rowNode,this.column):new eE(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];const t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){const e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&I("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:s=>{s==null||s.preventDefault()}})[0]);const i=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{var r;const s=this.getDragItem(),n=((r=s.rowNodes)==null?void 0:r.length)||1,o=this.getRowDragText(this.column);return o?o(s,n):n===1?this.cellValueFn():`${n} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},Dy=class extends D{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let i=!0,s=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),s=og(this.column.getColDef().rowDrag)),s?(this.parent.setDisplayed(!0,t),this.parent.setVisible(i,t)):(this.parent.setDisplayed(i,t),this.parent.setVisible(!0,t))}}},eE=class extends Dy{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},tE=class extends Dy{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),i=t&&t.shouldPreventRowMove(),s=this.gos.get("suppressRowDrag"),n=this.beans.dragAndDropService.hasExternalDropZones(),o=i&&!n||s;this.setDisplayedOrVisible(o)}},iE=new Set(["localEventService","__objectId","sticky","__autoHeights","checkAutoHeightsDebounced"]),za=class ps{constructor(t){this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=ps.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,i){var o;const s=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const n=this.createDataChangedEvent(t,s,i);(o=this.localEventService)==null||o.dispatchEvent(n)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,i,s){return{type:"dataChanged",node:this,oldData:i,newData:t,update:s}}getRowIndexString(){return this.rowIndex==null?(ge("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):this.rowPinned==="top"?ps.ID_PREFIX_TOP_PINNED+this.rowIndex:this.rowPinned==="bottom"?ps.ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const t=new ps(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,i){var r;const s=N(this.id)?this.createDaemonNode():null,n=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(i),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,s);const o=this.createDataChangedEvent(t,n,!1);(r=this.localEventService)==null||r.dispatchEvent(o)}checkRowSelectable(){const t=rg(this.beans.gos);this.setRowSelectable(t?t(this):!0)}setRowSelectable(t,i){if(this.selectable!==t){if(this.selectable=t,this.dispatchRowEvent("selectableChanged"),i)return;if(Tn(this.beans.gos)){const n=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:n??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){var s;const i=jo(this.beans.gos);if(i)if(this.data){const n=((s=this.parent)==null?void 0:s.getRoute())??[];this.id=i({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(ps.ID_PREFIX_ROW_GROUP)&&ge(`Row IDs cannot start with ${ps.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=t}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.dispatchRowEvent("topChanged"),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(t){this.hovered=t}isHovered(){return this.hovered}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.dispatchRowEvent("masterChanged"))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(t,i=!1){this.rowHeight=t,this.rowHeightEstimated=i,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(t,i){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[i.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=mt(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){var a;let t=!1,i=!0,s=0;const n=this.__autoHeights;if(n==null||(this.beans.visibleColsService.getAllAutoHeightCols().forEach(l=>{let c=n[l.getId()];if(c==null)if(this.beans.columnModel.isColSpanActive()){let u=[];switch(l.getPinned()){case"left":u=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":u=this.beans.visibleColsService.getRightColsForRow(this);break;case null:u=this.beans.columnViewportService.getColsWithinViewport(this);break}if(u.includes(l)){t=!0;return}c=-1}else{t=!0;return}else i=!1;c>s&&(s=c)}),t)||((i||s<10)&&(s=Vs(this.beans.gos,this).height),s==this.rowHeight))return;this.setRowHeight(s);const r=this.beans.rowModel;(a=r.onRowHeightChangedDebounced)==null||a.call(r)}setExpanded(t,i,s){if(this.expanded===t)return;this.expanded=t,this.dispatchRowEvent("expandedChanged");const n={...this.createGlobalRowEvent("rowGroupOpened"),expanded:t,event:i||null};this.beans.rowNodeEventThrottle.dispatchExpanded(n,s),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return this.beans.gos.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(t,i,s){const o=typeof t!="string"?t:this.beans.columnModel.getCol(t)??this.beans.columnModel.getColDefCol(t),r=this.beans.valueService.getValueForDisplay(o,this);if(this.beans.gos.get("readOnlyEdit"))return this.beans.eventService.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:o,colDef:o.getColDef(),data:this.data,node:this,oldValue:r,newValue:i,value:i,source:s}),!1;const a=this.beans.valueService.setValue(this,o,i,s);return this.dispatchCellChangedEvent(o,i,r),this.checkRowSelectable(),a}setGroupValue(t,i){const s=this.beans.columnModel.getCol(t);le(this.groupData)&&(this.groupData={});const n=s.getColId(),o=this.groupData[n];o!==i&&(this.groupData[n]=i,this.dispatchCellChangedEvent(s,i,o))}setAggData(t){const i=this.aggData;if(this.aggData=t,this.localEventService){const s=n=>{const o=this.aggData?this.aggData[n]:void 0,r=i?i[n]:void 0;if(o===r)return;const a=this.beans.columnModel.getCol(n);a&&this.dispatchCellChangedEvent(a,o,r)};for(const n in i)s(n);for(const n in t)(!i||!(n in i))&&s(n)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(Oi(this.beans.gos)){const s=this.beans.gos.get("treeData"),n=this.beans.gos.get("isServerSideGroup");t=!this.stub&&!this.footer&&(s?!!n&&n(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(t,i,s){var o;const n={type:"cellChanged",node:this,column:t,newValue:i,oldValue:s};(o=this.localEventService)==null||o.dispatchEvent(n)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(i=>i.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){var s;let t=!1,i=!1;if(!((s=this.childrenAfterGroup)!=null&&s.length))return this.selectable?this.selected:null;for(let n=0;n<this.childrenAfterGroup.length;n++){const o=this.childrenAfterGroup[n];let r=o.isSelected();if(!o.selectable){const a=o.calculateSelectedFromChildren();if(a===null)continue;r=a}switch(r){case!0:t=!0;break;case!1:i=!0;break;default:return}}if(!(t&&i))return t?!0:i?!1:this.selectable?this.selected:null}setSelectedInitialValue(t){this.selected=t}dispatchRowEvent(t){var i;(i=this.localEventService)==null||i.dispatchEvent({type:t,node:this})}selectThisNode(t,i,s="api"){const n=!this.selectable&&t,o=this.selected===t;if(n||o)return!1;this.selected=t,this.dispatchRowEvent("rowSelected");const r=this.sibling;return r&&r.footer&&r.localEventService&&r.dispatchRowEvent("rowSelected"),this.beans.eventService.dispatchEvent({...this.createGlobalRowEvent("rowSelected"),event:i||null,source:s}),!0}setSelected(t,i=!1,s="api"){if(typeof s=="boolean"){I("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:i,rangeSelect:!1,source:s})}setSelectedParams(t){return this.rowPinned?(I("cannot select pinned rows"),0):this.id===void 0?(I("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected({...t,nodes:[this.footer?this.sibling:this]})}isRowPinned(){return!!this.rowPinned}addEventListener(t,i){var n;this.localEventService||(this.localEventService=new zo),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new cg(this.beans.frameworkOverrides));const s=((n=this.frameworkEventListenerService)==null?void 0:n.wrap(i))??i;this.localEventService.addEventListener(t,s)}removeEventListener(t,i){var n;if(!this.localEventService)return;const s=((n=this.frameworkEventListenerService)==null?void 0:n.unwrap(i))??i;this.localEventService.removeEventListener(t,s),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}isFullWidthCell(){if(I("since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option."),this.detail)return!0;const t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const t=[];let i=this;for(;i&&i.key!=null;)t.push(i.key),i=i.parent;return t.reverse()}createFooter(){if(this.sibling)return;const t=new ps(this.beans);Object.keys(this).forEach(i=>{iE.has(i)||(t[i]=this[i])}),t.footer=!0,t.setRowTop(null),t.setRowIndex(null),t.oldRowTop=null,t.id="rowGroupFooter_"+this.id,t.sibling=this,this.sibling=t}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}setFirstChild(t){this.firstChild!==t&&(this.firstChild=t,this.dispatchRowEvent("firstChildChanged"))}setLastChild(t){this.lastChild!==t&&(this.lastChild=t,this.dispatchRowEvent("lastChildChanged"))}setChildIndex(t){this.childIndex!==t&&(this.childIndex=t,this.dispatchRowEvent("childIndexChanged"))}setDisplayed(t){this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}setDragging(t){this.dragging!==t&&(this.dragging=t,this.dispatchRowEvent("draggingChanged"))}setHighlighted(t){this.highlighted!==t&&(this.highlighted=t,this.dispatchRowEvent("rowHighlightChanged"))}setAllChildrenCount(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.dispatchRowEvent("allChildrenCountChanged"))}setRowIndex(t){this.rowIndex!==t&&(this.rowIndex=t,this.dispatchRowEvent("rowIndexChanged"))}setUiLevel(t){this.uiLevel!==t&&(this.uiLevel=t,this.dispatchRowEvent("uiLevelChanged"))}};za.ID_PREFIX_ROW_GROUP="row-group-";za.ID_PREFIX_TOP_PINNED="t-";za.ID_PREFIX_BOTTOM_PINNED="b-";za.OBJECT_ID_SEQUENCE=0;var Xi=za,sE=class extends D{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvancedFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:i})=>this.onAdvancedFilterEnabledChanged(i),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",i=>this.setAdvancedFilterModel(i.currentValue)),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e,t="api"){var i;if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}(i=this.columnFilterService)==null||i.setFilterModel(e,t)}getFilterModel(){var e;return((e=this.columnFilterService)==null?void 0:e.getFilterModel())??{}}isColumnFilterPresent(){var e;return!!((e=this.columnFilterService)!=null&&e.isColumnFilterPresent())}isAggregateFilterPresent(){var e;return!!((e=this.columnFilterService)!=null&&e.isAggregateFilterPresent())}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){var t,i;e?(t=this.columnFilterService)!=null&&t.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):(i=this.advancedFilterService)!=null&&i.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var e;return!!((e=this.advancedFilterService)!=null&&e.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){var e;(e=this.quickFilterService)==null||e.resetQuickFilterCache()}refreshFiltersForAggregations(){vp(this.gos)&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:i,columns:s=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):_e.resolve()).then(()=>{var o;const n={source:t,type:"filterChanged",columns:s};i&&gt(n,i),this.eventService.dispatchEvent(n),(o=this.columnFilterService)==null||o.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){var e;return!!((e=this.columnFilterService)!=null&&e.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var e;return!!((e=this.quickFilterService)!=null&&e.isQuickFilterPresent())}updateAggFiltering(){this.aggFiltering=!!vp(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}isFilterActive(e){var t;return!!((t=this.columnFilterService)!=null&&t.isFilterActive(e))}getOrCreateFilterWrapper(e){var t;return((t=this.columnFilterService)==null?void 0:t.getOrCreateFilterWrapper(e))??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){var t;return this.isAdvancedFilterEnabled()?!1:!!((t=this.columnFilterService)!=null&&t.isFilterAllowed(e))}getFloatingFilterCompDetails(e,t){var i;return(i=this.columnFilterService)==null?void 0:i.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){var t;return(t=this.columnFilterService)==null?void 0:t.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){var i;(i=this.columnFilterService)==null||i.destroyFilter(e,t)}areFilterCompsDifferent(e,t){var i;return!!((i=this.columnFilterService)!=null&&i.areFilterCompsDifferent(e,t))}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){var t;if(this.isAdvancedFilterEnabled()){if((t=this.dataTypeService)!=null&&t.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var e;return this.isAdvancedFilterEnabled()?!1:!!((e=this.columnFilterService)!=null&&e.hasFloatingFilters())}getFilterInstance(e,t){var i;if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}return(i=this.columnFilterService)==null?void 0:i.getFilterInstance(e,t)}getColumnFilterInstance(e){var t;return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):((t=this.columnFilterService)==null?void 0:t.getColumnFilterInstance(e))??Promise.resolve(void 0)}warnAdvancedFilters(){I("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){var t;(t=this.advancedFilterService)==null||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){var t;return(t=this.columnFilterService)==null?void 0:t.getColumnFilterModel(e)}setColumnFilterModel(e,t){var i;return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):((i=this.columnFilterService)==null?void 0:i.setColumnFilterModel(e,t))??Promise.resolve()}setColDefPropertiesForDataType(e,t,i){var s;(s=this.columnFilterService)==null||s.setColDefPropertiesForDataType(e,t,i)}},nE=class extends ye{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){var e;return((e=this.filterWrapper)==null?void 0:e.filterPromise)??null}afterInit(){var e,t;return((t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null?void 0:t.then(()=>{}))??_e.resolve()}afterGuiAttached(e){var t,i;(i=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null||i.then(s=>{var n;(n=s==null?void 0:s.afterGuiAttached)==null||n.call(s,e)})}afterGuiDetached(){var e,t;(t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null||t.then(i=>{var s;(s=i==null?void 0:i.afterGuiDetached)==null||s.call(i)})}createFilter(e){var s,n;const{column:t,source:i}=this;this.filterWrapper=((s=this.filterManager)==null?void 0:s.getOrCreateFilterWrapper(t))??null,(n=this.filterWrapper)!=null&&n.filterPromise&&this.filterWrapper.filterPromise.then(o=>{const r=o.getGui();N(r)||I(`getGui method from filter returned ${r}; it should be a DOM element.`),this.appendChild(r),e&&this.eventService.dispatchEvent({type:"filterOpened",column:t,source:i,eGui:this.getGui()})})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.columnModel.getColDefCol(this.column)&&(zt(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},Ty="ag-resizer-wrapper",cs=(e,t)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${t}"></div>`,oE=`<div class="${Ty}">
        ${cs("eTopLeft","topLeft")}
        ${cs("eTop","top")}
        ${cs("eTopRight","topRight")}
        ${cs("eRight","right")}
        ${cs("eBottomRight","bottomRight")}
        ${cs("eBottom","bottom")}
        ${cs("eBottomLeft","bottomLeft")}
        ${cs("eLeft","left")}
    </div>`,rE=class extends D{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,s=e/2-this.getHeight()/2;this.offsetElement(i,s)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:s,minHeight:n,height:o,x:r,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,c=0;const u=Ii(this.element);if(u){const d=this.findBoundaryElement(),h=window.getComputedStyle(d);if(h.minWidth!=null){const p=d.offsetWidth-this.element.offsetWidth;c=parseInt(h.minWidth,10)-p}if(h.minHeight!=null){const p=d.offsetHeight-this.element.offsetHeight;l=parseInt(h.minHeight,10)-p}}if(this.minHeight=n||l,this.minWidth=i||c,s&&this.setWidth(s),o&&this.setHeight(o),(!s||!o)&&this.refreshSize(),e)this.center();else if(r||a)this.offsetElement(r,a);else if(u&&t){let d=this.boundaryEl,h=!0;if(d||(d=this.findBoundaryElement(),h=!1),d){const p=parseFloat(d.style.top),g=parseFloat(d.style.left);h?this.offsetElement(isNaN(g)?0:g,isNaN(p)?0:p):this.setPosition(g,p)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{const s=!!e[t],n=this.getResizerElement(t),o={dragStartPixels:0,eElement:n,onDragStart:r=>this.onResizeStart(r,t),onDragging:this.onResize.bind(this),onDragStop:r=>this.onResizeEnd(r,t)};(s||!this.isAlive()&&!s)&&(s?(this.dragService.addDragSource(o),this.resizeListeners.push(o),n.style.pointerEvents="all"):n.style.pointerEvents="none",this.resizable[t]=s)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let s=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Ur(i,e),e=my(i),s=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const n=this.getAvailableHeight();n&&e>n&&(e=n)}this.getHeight()!==e&&(s?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?Ur(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const s=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:s.top,r=e?0:n.top;let a=0;if(t){const c=this.element.parentElement;if(c){const{bottom:u}=c.getBoundingClientRect();a=u-s.bottom}}return i+r-o-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let s=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)gi(t,e),e=eu(t),s=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:n}=this.offsetParent,o=i?this.position.x:this.element.getBoundingClientRect().left;n&&e+o>n&&(e=n-o)}this.getWidth()!==e&&(s?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?gi(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){const{forcePopupParentAsOffsetParent:i}=this.config,s=i?this.boundaryEl:this.element;s&&(this.popupService.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(s.style.left),parseFloat(s.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:s,anywhereWithin:n,topBuffer:o}=e,r=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!i,!!n,r)?0:r,c=this.shouldSkipY(t,!!s,o,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(e,t,i,s){const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:n.left;let l=a<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=r.right;return l?!0:(t?l=s<0&&e.clientX>a+o.left||s>0&&e.clientX<a+o.left:i?l=s<0&&e.clientX>r.right||s>0&&e.clientX<a+o.left:l=s<0&&e.clientX>r.right||s>0&&e.clientX<r.right,l)}shouldSkipY(e,t,i=0,s){const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:n.top;let l=a<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=r.bottom;return l?!0:(t?l=s<0&&e.clientY>a+o.top+i||s>0&&e.clientY<a+o.top:l=s<0&&e.clientY>r.bottom||s>0&&e.clientY<r.bottom,l)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const i=new DOMParser().parseFromString(oE,"text/html").body;e.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${Ty}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:s}=this.config;!i&&!s&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let s=0;s<e.length;s++){const n=e[s],o=!!n.style.flex&&n.style.flex!=="0 0 auto";if(n===this.element)continue;let r=this.minHeight||0,a=this.minWidth||0;if(o){const l=window.getComputedStyle(n);l.minHeight&&(r=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else r=n.offsetHeight,a=n.offsetWidth;t+=r,i+=a}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let s=0;s<i.length;s++){const n=i[s];n!==t&&(e?n.style.height=`${n.offsetHeight}px`:n.style.width=`${n.offsetWidth}px`,n.style.flex="0 0 auto",n===this.element&&(t=i[s+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:s,isRight:n,isBottom:o,isLeft:r}=this.currentResizer,a=n||r,l=o||s,{movementX:c,movementY:u}=this.calculateMouseMovement({e,isLeft:r,isTop:s}),d=this.position.x,h=this.position.y;let p=0,g=0;if(a&&c){const v=r?-1:1,S=this.getWidth(),m=S+c*v;let C=!1;r&&(p=S-m,(d+p<=0||m<=this.minWidth)&&(C=!0,p=0)),C||this.setWidth(m)}if(l&&u){const v=s?-1:1,S=this.getHeight(),m=S+u*v;let C=!1;s?(g=S-m,(h+g<=0||m<=this.minHeight)&&(C=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&S<m&&this.getMinSizeOfSiblings().height+m>this.element.parentElement.offsetHeight&&(C=!0),C||this.setHeight(m)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&p||g)&&this.offsetElement(d+p,h+g)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let s;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());const{movementX:n,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:s});this.offsetElement(t+n,i+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},Ay=class Iy extends D{constructor(t,i={}){super(),this.eFocusableElement=t,this.callbacks=i,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:s=>{if(s.defaultPrevented)return;const n=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,s.shiftKey);n&&(n.focus(),s.preventDefault())},...i}}wireBeans(t){this.focusService=t.focusService}postConstruct(){this.eFocusableElement.classList.add(Iy.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(t){this.addManagedElementListeners(t,{keydown:i=>{if(!(i.defaultPrevented||Qi(i))){if(this.callbacks.shouldStopEventPropagation(i)){Do(i);return}i.key===M.TAB?this.callbacks.onTabKeyDown(i):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(i)}}})}};Ay.FOCUS_MANAGED_CLASS="ag-focus-managed";var Bn=Ay,Ly={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function bg(e,t){return ou(e)?(e.debounceMs!=null&&I("debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}function ou(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var aE=class extends ye{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=ee,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new Bn(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new rE(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const i=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(i,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=ou(e),this.resetButtonsPanel(e)}updateParams(e){this.providedFilterParams=e,this.applyActive=ou(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(e,t){const{buttons:i,readOnly:s}=t??{},{buttons:n,readOnly:o}=e;if(s===o&&wa(i,n))return;const r=n&&n.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(zt(this.eButtonsPanel),this.buttonListeners.forEach(c=>c()),this.buttonListeners=[]):r&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!r){this.eButtonsPanel&&An(this.eButtonsPanel);return}const a=document.createDocumentFragment(),l=c=>{let u,d;switch(c){case"apply":u=this.translate("applyFilter"),d=g=>this.onBtApply(!1,!1,g);break;case"clear":u=this.translate("clearFilter"),d=()=>this.onBtClear();break;case"reset":u=this.translate("resetFilter"),d=()=>this.onBtReset();break;case"cancel":u=this.translate("cancelFilter"),d=g=>{this.onBtCancel(g)};break;default:I("Unknown button type specified");return}const p=Ea(`<button
                    type="${c==="apply"?"submit":"button"}"
                    data-ref="${c}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${u}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(p,{click:d})),a.append(p)};n.forEach(c=>l(c)),this.eButtonsPanel.append(a),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=bg(this.providedFilterParams,this.getDefaultDebounceMs()),t=mt(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const i=()=>{this.onUiChanged(!1,"prevent"),t==null||t()};e!=null?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const t=this.getModelFromUi();if(!this.isModelValid(t))return!1;const i=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(i,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,i){i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});const{closeOnApply:s}=this.providedFilterParams;s&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,i=t&&t.key;let s;(i==="Enter"||i==="Space")&&(s={keyboardEvent:t}),this.hidePopup(s),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const i=this.isModelValid(this.getModelFromUi()),s=this.queryForHtmlElement('[data-ref="applyFilterButton"]');s&&Fa(s,!i)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;const t=e==="floatingFilter"||e==="columnFilter",{positionableFeature:i,gos:s}=this;t?(i.restoreLastSize(),i.setResizable(s.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){const t=this.providedFilterParams;return this.providedFilterParams=e,this.resetButtonsPanel(e,t),!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,Ly[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},lE=class extends wg{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},cE=class extends ye{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case M.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const i=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(i)}break;case M.DOWN:case M.UP:e.preventDefault(),this.navigate(t);break;case M.PAGE_DOWN:case M.PAGE_UP:case M.PAGE_HOME:case M.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){const t=e===M.DOWN;let i;if(!this.highlightedEl)i=this.itemEls[t?0:this.itemEls.length-1];else{let n=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);n=Math.min(Math.max(n,0),this.itemEls.length-1),i=this.itemEls[n]}this.highlightItem(i)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;const t=this.itemEls.indexOf(this.highlightedEl),i=this.options.length-1,s=this.itemEls[0].clientHeight,n=Math.floor(this.getGui().clientHeight/s);let o=-1;e===M.PAGE_HOME?o=0:e===M.PAGE_END?o=i:e===M.PAGE_DOWN?o=Math.min(t+n,i):e===M.PAGE_UP&&(o=Math.max(t-n,0)),o!==-1&&this.highlightItem(this.itemEls[o])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){const{value:t,text:i}=e,s=i||t;return this.options.push({value:t,text:s}),this.renderOption(t,s),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{An(e)}),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,i)=>{Vx(t,i+1),Hx(t,e.length)})}renderOption(e,t){const i=Ge(this.gos),s=i.createElement("div");vi(s,"option"),s.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const n=i.createElement("span");s.appendChild(n),n.textContent=t,this.unFocusable||(s.tabIndex=-1),this.itemEls.push(s),this.addManagedListeners(s,{mouseover:()=>this.highlightItem(s),mousedown:o=>{o.preventDefault(),o.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new Ko({getTooltipValue:()=>t,getGui:()=>s,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>n.scrollWidth>n.clientWidth})),this.getGui().appendChild(s)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const i=this.options.findIndex(s=>s.value===e);if(i!==-1){const s=this.options[i];this.value=s.value,this.displayValue=s.text,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!Ii(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),Zc(this.highlightedEl,!0);const t=this.getGui(),{scrollTop:i,clientHeight:s}=t,{offsetTop:n,offsetHeight:o}=e;(n+o>i+s||n<i)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!Ii(this.highlightedEl)||(this.highlightedEl.classList.remove(this.activeClass),Zc(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},uE=class extends Py{constructor(e){if(super(e,(e==null?void 0:e.template)||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,(e==null?void 0:e.agComponents)||[],e==null?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=ee,this.eWrapper=ee,this.eDisplayField=ee,this.eIcon=ee,this.ariaRole=e==null?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:s,minPickerWidth:n,maxPickerWidth:o}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!s,i!=null&&this.setPickerMaxHeight(i),n!=null&&this.setPickerMinWidth(n),o!=null&&this.setPickerMaxWidth(o)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:s}=this.config;if(i){const n=Gt(i,this.gos);n&&this.eIcon.appendChild(n)}s!=null&&this.setInputWidth(s)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),Jc(e,!1),this.ariaRole&&vi(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(e==null?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case M.UP:case M.DOWN:case M.ENTER:case M.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case M.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:i,pickerAriaLabelValue:s,modalPicker:n=!0}=this.config,o={modal:n,eChild:e,closeOnEsc:!0,closedCallback:()=>{const h=zw(this.gos);this.beforeHidePicker(),h&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,s),anchorToElement:this.eWrapper};e.style.position="absolute";const r=this.popupService.addPopup(o),{maxPickerHeight:a,minPickerWidth:l,maxPickerWidth:c,variableWidth:u}=this;u?(l&&(e.style.minWidth=l),e.style.width=Cg(eu(this.eWrapper)),c&&(e.style.maxWidth=c)):nu(e,c??eu(this.eWrapper));const d=a??`${mg(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",d),this.alignPickerToComponent(),r.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:e}=this.config,{pickerGap:t}=this,i=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:i,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();Jc(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;(t=this.pickerComponent)!=null&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return nu(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},Pg=class extends uE{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox",...e})}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),i&&t==null&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new cE("select",!0)),this.listComponent.setParentComponent(this);const e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",t),qx(this.getAriaElement(),e),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){var i;const{key:t}=e;switch(t===M.TAB&&this.hidePicker(),t){case M.ENTER:case M.UP:case M.DOWN:case M.PAGE_UP:case M.PAGE_DOWN:case M.PAGE_HOME:case M.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(i=this.listComponent)==null||i.handleKeyDown(e):super.onKeyDown(e);break;case M.ESCAPE:super.onKeyDown(e);break;case M.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this}setValue(e,t,i){if(this.value===e||!this.listComponent)return this;if(i||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let n=this.listComponent.getDisplayValue();return n==null&&this.config.placeholder&&(n=this.config.placeholder),this.eDisplayField.textContent=n,this.setTooltip({newTooltipText:n??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},dE={selector:"AG-SELECT",component:Pg},Oy=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;const t=[["displayKey"],["displayName"],["predicate","test"]],i=s=>s.some(n=>e[n]!=null)?!0:(I(`ignoring FilterOptionDef as it doesn't contain one of '${s}'`),!1);if(!t.every(i)){this.filterOptions=this.filterOptions.filter(s=>s===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:I("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else I("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},By=class extends aE{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:s}=t;return s??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,i)=>{i===0?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const i=!e.operator,s=!t.operator;if(!i&&s||i&&!s)return!1;let o;if(i){const r=e,a=t;o=this.areSimpleModelsEqual(r,a)}else{const r=e,a=t;o=r.operator===a.operator&&$s(r.conditions,a.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return o}shouldRefresh(e){var o;const t=this.getModel(),i=t?t.conditions??[t]:null,s=((o=e.filterOptions)==null?void 0:o.map(r=>typeof r=="string"?r:r.displayKey))??this.getDefaultFilterOptions();return!(!(!i||i.every(r=>s.find(a=>a===r.type)!==void 0))||typeof e.maxNumConditions=="number"&&i&&i.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){const i=e;let s=i.conditions;s==null&&(s=[],I("Filter model is missing 'conditions'"));const n=this.validateAndUpdateConditions(s),o=this.getNumConditions();if(n<o)this.removeConditionsAndOperators(n);else if(n>o)for(let a=o;a<n;a++)this.createJoinOperatorPanel(),this.createOption();const r=i.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!r,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(r,!0)),s.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{const i=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),_e.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),I('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){const t=this.getModel();if(t==null)return!0;const{operator:i}=t,s=[];if(i){const o=t;s.push(...o.conditions??[])}else s.push(t);return s[i&&i==="OR"?"some":"every"](o=>this.individualConditionPasses(e,o))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new Oy,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(I('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(I('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(I('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new Pg);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const i=this.getNumConditions()-1;this.forEachPositionInput(i,s=>this.resetInput(s)),this.addChangedListeners(e,i)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const s=this.eJoinOperatorPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(t,s,n),this.resetJoinOperatorOr(i,s,n),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const s=this.createManagedBean(new lE);return e.push(s),s.addCssClass("ag-filter-condition-operator"),s.addCssClass(`ag-filter-condition-operator-${i}`),t.appendChild(s.getGui()),s}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(t=>{e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.localeService.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?e=i:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const i=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<i){this.removeConditionsAndOperators(i+1);const s=e+1,n=i-s;n>0&&this.removeConditionsAndOperators(s,n),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((s,n)=>{const o=this.isConditionDisabled(n,e);s.setDisabled(o||this.filterListOptions.length<=1),n===1&&(Fa(this.eJoinOperatorPanels[0],o),this.eJoinOperatorsAnd[0].setDisabled(o),this.eJoinOperatorsOr[0].setDisabled(o))}),this.eConditionBodies.forEach((s,n)=>{Ae(s,this.isConditionBodyVisible(n))});const i=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(s=>{s.setValue(!i,!0)}),this.eJoinOperatorsOr.forEach(s=>{s.setValue(i,!0)}),this.forEachInput((s,n,o,r)=>{this.setElementDisplayed(s,n<r),this.setElementDisabled(s,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);const i=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,i,t),this.removeComponents(this.eJoinOperatorsAnd,i,t),this.removeComponents(this.eJoinOperatorsOr,i,t)}removeElements(e,t,i){this.removeItems(e,t,i).forEach(n=>An(n))}removeComponents(e,t,i){this.removeItems(e,t,i).forEach(n=>{An(n.getGui()),this.destroyBean(n)})}removeItems(e,t,i){return i==null?e.splice(t):e.splice(t,i)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{const t=this.getInputs(0)[0];if(!t)return;t instanceof fn&&t.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,i=-1,s=!1;const n=this.getJoinOperator();for(let r=this.getNumConditions()-1;r>=0;r--)if(this.isConditionUiComplete(r))t===-1&&(t=r,i=r);else{const a=r>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(r-1),l=r<t;(a||l)&&(this.removeConditionsAndOperators(r,1),s=!0,l&&i--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(i,n),s&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getPlaceholderText(e,t){let i=this.translate(e);if(og(this.filterPlaceholder)){const s=this.filterPlaceholder,n=this.eTypes[t].getValue(),o=this.translate(n);i=s({filterOptionKey:n,filterOption:o,placeholder:i})}else typeof this.filterPlaceholder=="string"&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput((t,i,s,n)=>{if(!(t instanceof fn))return;const o=i===0&&n>1?"inRangeStart":i===0?"filterOoo":"inRangeEnd",r=i===0&&n>1?e("ariaFilterFromValue","Filter from value"):i===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(o,s)),t.setInputAriaLabel(r)})}setElementValue(e,t,i){e instanceof fn&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof ye&&Ae(e.getGui(),t)}setElementDisabled(e,t){e instanceof ye&&Fa(e.getGui(),t)}attachElementOnChange(e,t){e instanceof fn&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,i)=>{this.forEachPositionTypeInput(i,t,e)})}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const s=this.getNumberOfInputs(t),n=this.getInputs(e);for(let o=0;o<n.length;o++){const r=n[o];r!=null&&i(r,o,e,s)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(i=>i==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,i)=>this.resetJoinOperatorAnd(t,i,this.joinOperatorId+i)),this.eJoinOperatorsOr.forEach((t,i)=>this.resetJoinOperatorOr(t,i,this.joinOperatorId+i)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),_e.resolve()}resetType(e){const i=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(i).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),i)}resetJoinOperator(e,t,i,s,n){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(s),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t)),this.eJoinOperatorsOr.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e);this.forEachInput((s,n,o)=>{o===t&&this.setElementValue(s,i[n]!=null?i[n]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,i,s)=>{this.setElementValue(t,i===0&&s===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,i=>{this.attachElementOnChange(i,this.listener)}))}individualConditionPasses(e,t){const i=this.getCellValue(e.node),s=this.mapValuesFromModel(t),n=this.optionsFactory.getCustomOption(t.type),o=this.evaluateCustomFilter(n,s,i);return o??(i==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(s,i,t,e))}evaluateCustomFilter(e,t,i){if(e==null)return;const{predicate:s}=e;if(s!=null&&!t.some(n=>n==null))return s(t,i)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}},Ny=class extends By{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"notEqual":if(this.scalarFilterParams.includeBlanksInNotEqual)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const s=this.comparator(),n=e[0]!=null?s(e[0],t):0;switch(i.type){case"equals":return n===0;case"notEqual":return n!==0;case"greaterThan":return n>0;case"greaterThanOrEqual":return n>=0;case"lessThan":return n<0;case"lessThanOrEqual":return n<=0;case"inRange":{const o=s(e[1],t);return this.scalarFilterParams.inRangeInclusive?n>=0&&o<=0:n>0&&o<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return I('Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},hE=65,pE=67,fE=86,gE=68,mE=90,CE=89;function _y(e){var i;return e.altKey||e.ctrlKey||e.metaKey?!1:((i=e.key)==null?void 0:i.length)===1}function Mp(e,t,i,s,n){const o=s?s.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;const r=e.addGridCommonParams({event:t,editing:n,column:s,node:i,data:i.data,colDef:s.getColDef()});return!!(o&&o(r))}function vE(e,t,i,s){const n=s.getDefinition(),o=n&&n.suppressHeaderKeyboardEvent;if(!N(o))return!1;const r=e.addGridCommonParams({colDef:n,column:s,headerRowIndex:i,event:t});return!!o(r)}function SE(e){const{keyCode:t}=e;let i;switch(t){case hE:i=M.A;break;case pE:i=M.C;break;case fE:i=M.V;break;case gE:i=M.D;break;case mE:i=M.Z;break;case CE:i=M.Y;break;default:i=e.code}return i}function wE(e,t=!1){return e===M.DELETE?!0:!t&&e===M.BACKSPACE?hy():!1}var Nn=class extends fn{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=N(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=i=>{_y(i)&&i.key&&!e.test(i.key)&&i.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:i=>{var n;const s=(n=i.clipboardData)==null?void 0:n.getData("text");s&&s.split("").some(o=>!e.test(o))&&i.preventDefault()}})}},Hu={selector:"AG-INPUT-TEXT-FIELD",component:Nn},xg=class extends Nn{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{const n=parseFloat(this.eInput.value),o=isNaN(n)?"":this.normalizeValue(n.toString());this.value!==o&&this.setValue(o)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";const{precision:e,min:t,max:i,step:s}=this.config;typeof e=="number"&&this.setPrecision(e),typeof t=="number"&&this.setMin(t),typeof i=="number"&&this.setMax(i),typeof s=="number"&&this.setStep(s)}onWheel(e){Ie(this.gos)===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));const t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){const s=parseFloat(e).toFixed(this.precision);return parseFloat(s).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,ti(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,ti(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,ti(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(i=>super.setValue(i,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,i){if(N(i)){let s=this.isScientificNotation(i);if(s&&this.eInput.validity.valid)return e(i);if(!s){i=this.adjustPrecision(i);const n=this.normalizeValue(i);s=i!=n}if(s)return t(i)}return e(i)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},yE={selector:"AG-INPUT-NUMBER-FIELD",component:xg},Gy=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],Fg=class{constructor(e,t,i){this.localeService=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;const t=e.operator!=null,i=this.localeService.getLocaleTextFunc();if(t){const s=e,o=(s.conditions??[]).map(a=>this.getModelAsString(a)),r=s.operator==="AND"?"andCondition":"orCondition";return o.join(` ${i(r,Ly[r])} `)}else{if(e.type==="blank"||e.type==="notBlank")return i(e.type,e.type);{const s=e,n=this.optionsFactory.getCustomOption(s.type),{displayKey:o,displayName:r,numberOfInputs:a}=n||{};return o&&r&&a===0?(i(o,r),r):this.conditionToString(s,n)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},Hy=class extends Fg{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type=="inRange"||i===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function Dp(e){const{allowedCharPattern:t}=e??{};return t??null}var RE=class extends Ny{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(s))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new Hy(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return Gy}setElementValue(e,t,i){const s=!i&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,s)}createValueElement(){const e=Dp(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),vi(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,s){const n=this.createManagedBean(s?new Nn({allowedCharPattern:s}):new xg);n.addCssClass(`ag-filter-${i}`),n.addCssClass("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){const t=[];return this.forEachPositionInput(e,(i,s,n,o)=>{s<o&&t.push(this.processValue(this.stringToFloat(i.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=Yi(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValues(e);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},Vy=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],Wy=class extends Fg{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type=="inRange"||i===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}};function zy(e){const t=e&&e.trim();return t===""?e:t}var bE=class extends By{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:i})=>{if(i==null)return!1;switch(e){case"contains":return t.indexOf(i)>=0;case"notContains":return t.indexOf(i)<0;case"equals":return t===i;case"notEqual":return t!=i;case"startsWith":return t.indexOf(i)===0;case"endsWith":{const s=t.lastIndexOf(i);return s>=0&&s===t.length-i.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new Wy(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(I("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:i,filterText:s})=>e(t,i,s)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValuesWithSideEffects(e,!0);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const i=[];return this.forEachPositionInput(e,(s,n,o,r)=>{if(n<r){let a=Yi(s.getValue());t&&this.textFilterParams.trimInput&&(a=zy(a)??null,s.setValue(a,!0)),i.push(a)}}),i}getDefaultFilterOptions(){return Vy}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),vi(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){const s=this.createManagedBean(new Nn);s.addCssClass(`ag-filter-${i}`),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(s))}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,i,s){const n=e.map(h=>this.formatter(h))||[],o=this.formatter(t),{api:r,colDef:a,column:l,context:c,textFormatter:u}=this.textFilterParams;if(i.type==="blank")return this.isBlank(t);if(i.type==="notBlank")return!this.isBlank(t);const d={api:r,colDef:a,column:l,context:c,node:s.node,data:s.data,filterOption:i.type,value:o,textFormatter:u};return n.some(h=>this.matcher({...d,filterText:h}))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}};function jy(e){if(typeof e=="number")return e;if(typeof e=="string"){const t=parseInt(e);return isNaN(t)?void 0:t}}function Ri(e,t=Number.MAX_VALUE){return i=>{const s=jy(i);if(!(s==null||s<e||s>t))return s}}function $r(e,t){return e.toString().padStart(t,"0")}function PE(e,t){const i=[];for(let s=e;s<=t;s++)i.push(s);return i}function xE(e,t,i){return typeof e!="number"?"":e.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function ii(e,t=!0,i="-"){if(!e)return null;let s=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(n=>$r(n,2)).join(i);return t&&(s+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(n=>$r(n,2)).join(":")),s}var $d=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function qr(e,t="YYYY-MM-DD"){const i=$r(e.getFullYear(),4),s=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>s[e.getMonth()],MMM:()=>s[e.getMonth()].slice(0,3),MM:()=>$r(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${$d(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${$d(e.getDate())}`,DD:()=>$r(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>n[e.getDay()],ddd:()=>n[e.getDay()].slice(0,3),dd:()=>n[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${$d(e.getDay())}`,d:()=>`${e.getDay()}`},r=new RegExp(Object.keys(o).join("|"),"g");return t.replace(r,a=>a in o?o[a]():a)}function Mt(e){if(!e)return null;const[t,i]=e.split(" ");if(!t)return null;const s=t.split("-").map(d=>parseInt(d,10));if(s.filter(d=>!isNaN(d)).length!==3)return null;const[n,o,r]=s,a=new Date(n,o-1,r);if(a.getFullYear()!==n||a.getMonth()!==o-1||a.getDate()!==r)return null;if(!i||i==="00:00:00")return a;const[l,c,u]=i.split(":").map(d=>parseInt(d,10));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),u>=0&&u<60&&a.setSeconds(u),a}var Uy=class{constructor(e,t,i,s,n){this.alive=!0,this.context=e,this.eParent=s,t.getDateCompDetails(i).newAgStackInstance().then(a=>{if(!this.alive){e.destroyBean(a);return}this.dateComp=a,a&&(s.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),n==null||n(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){Ae(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){var i,s;let t=!1;(i=this.dateComp)!=null&&i.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(t=!0),!t&&((s=this.dateComp)!=null&&s.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&I("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},Ky=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],$y=class extends Fg{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){const{type:i}=e,{numberOfInputs:s}=t||{},n=i=="inRange"||s===2,o=Mt(e.dateFrom),r=Mt(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(n){const l=o!==null?qr(o,a):"null",c=r!==null?qr(r,a):"null";return`${l}-${c}`}return o!=null?qr(o,a):`${i}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},ZC=1e3,ev=1/0,FE=class extends Ny{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=ZC,this.maxValidYear=ev,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:i,type:s}=e||{};return[t&&Mt(t)||null,i&&Mt(i)||null].slice(0,this.getNumberOfInputs(s))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){const i=t;return t==null||i<e?-1:i>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(i,s)=>{if(e[i]!=null)if(isNaN(e[i]))I(`DateFilter ${i} is not a number`);else return e[i]==null?s:Number(e[i]);return s};this.minValidYear=t("minValidYear",ZC),this.maxValidYear=t("maxValidYear",ev),this.minValidYear>this.maxValidYear&&I("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:Mt(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:Mt(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&I("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new $y(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const t=new Uy(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return Ky}createValueElement(){const t=Ge(this.gos).createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t}createFromToElement(e,t,i,s){const o=Ge(this.gos).createElement("div");o.classList.add(`ag-filter-${s}`),o.classList.add(`ag-filter-date-${s}`),t.push(o),e.appendChild(o),i.push(this.createDateCompWrapper(o))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){this.removeItems(e,t,i).forEach(n=>n.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((i,s,n,o)=>{n!==e||!t||s>=o||(t=t&&this.isValidDateValue(i.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){const t=this.getConditionType(e),i={},s=this.getValues(e);return s.length>0&&(i.dateFrom=ii(s[0])),s.length>1&&(i.dateTo=ii(s[1])),{dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t,...i}}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(s=>{s.setInputPlaceholder(t),s.setInputAriaLabel(i)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(i,s,n,o)=>{s<o&&t.push(i.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}},Eg=class extends D{constructor(e,t,i,s){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=s,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?ae(this.colsSpanning):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const e=this.beans.gos.get("suppressColumnMoveAnimation"),t=N(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=e.getLeft(),i=e.getOldLeft(),s=this.modifyLeftForPrintLayout(e,i),n=this.modifyLeftForPrintLayout(e,t);this.setLeft(s),this.actualLeft=n,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!it(this.beans.gos,"print")||e.getPinned()==="left")return t;const s=this.beans.visibleColsService.getColsLeftWidth();if(e.getPinned()==="right"){const n=this.beans.visibleColsService.getBodyContainerWidth();return s+n+t}return s+t}setLeft(e){if(N(e)&&(this.eCell.style.left=`${e}px`),We(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&Ux(this.ariaEl,t.length)}}},EE="ag-column-first",kE="ag-column-last";function qy(e,t,i,s){return le(e)?[]:DE(e.headerClass,e,t,i,s)}function Yy(e,t,i){e.addOrRemoveCssClass(EE,i.isColAtEdge(t,"first")),e.addOrRemoveCssClass(kE,i.isColAtEdge(t,"last"))}function ME(e,t,i,s){return t.addGridCommonParams({colDef:e,column:i,columnGroup:s})}function DE(e,t,i,s,n){if(le(e))return[];let o;if(typeof e=="function"){const r=ME(t,i,s,n);o=e(r)}else o=e;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}var TE=0,Qy=class Xy extends D{constructor(t,i,s){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=t,this.parentRowCtrl=s,this.beans=i,this.instanceId=t.getUniqueId()+"-"+TE++}wireBeans(t){this.pinnedWidthService=t.pinnedWidthService,this.focusService=t.focusService,this.userComponentFactory=t.userComponentFactory,this.ctrlsService=t.ctrlsService,this.dragAndDropService=t.dragAndDropService,this.menuService=t.menuService}postConstruct(){const t=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],t),this.addManagedEventListeners({overlayExclusiveChanged:t})}shouldStopEventPropagation(t){const{headerRowIndex:i,column:s}=this.focusService.getFocusedHeader();return vE(this.gos,t,i,s)}getWrapperHasFocus(){return Ie(this.gos)===this.eGui}setGui(t,i){this.eGui=t,this.addDomData(i),i.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),i.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){this.eventService.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(t){const{wrapperElement:i,checkMeasuringCallback:s,compBean:n}=t,{animationFrameService:o,resizeObserverService:r,columnModel:a,gos:l}=this.beans,c=v=>{if(!this.isAlive()||!n.isAlive())return;const{paddingTop:S,paddingBottom:m,borderBottomWidth:C,borderTopWidth:w}=On(this.getGui()),R=S+m+C+w,P=i.offsetHeight+R;if(v<5){const x=Ge(l),F=!x||!x.contains(i),k=P==0;if(F||k){o.requestAnimationFrame(()=>c(v+1));return}}a.setColHeaderHeight(this.column,P)};let u=!1,d;const h=()=>{const v=this.column.isAutoHeaderHeight();v&&!u&&p(),!v&&u&&g()},p=()=>{u=!0,c(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),d=r.observeResize(i,()=>c(0))},g=()=>{u=!1,d&&d(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),d=void 0};h(),n.addDestroyFunc(()=>g()),n.addManagedListeners(this.column,{widthChanged:()=>u&&c(0)}),n.addManagedEventListeners({sortChanged:()=>{u&&window.setTimeout(()=>c(0))}}),s&&s(h)}onDisplayedColumnsChanged(){const{comp:t,column:i,beans:s,eGui:n}=this;!t||!i||!n||(Yy(t,i,s.visibleColsService),uy(n,s.visibleColsService.getAriaColIndex(i)))}addResizeAndMoveKeyboardListeners(t){this.resizeFeature&&t.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const t=this.focusService.isHeaderFocusSuppressed();this.eGui&&ti(this.eGui,"tabindex",t?null:"-1")}onGuiKeyDown(t){var r;const i=Ie(this.gos),s=t.key===M.LEFT||t.key===M.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),i!==this.eGui||!t.shiftKey&&!t.altKey||((this.isResizing||s)&&(t.preventDefault(),t.stopImmediatePropagation()),!s))return;const n=t.key===M.LEFT!==this.gos.get("enableRtl"),o=My[n?"Left":"Right"];if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const a=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(a,t.shiftKey),(r=this.resizeFeature)==null||r.toggleColumnResizing(!0)}else this.moveHeader(o)}getViewportAdjustedResizeDiff(t){let i=this.getResizeDiff(t);if(this.column.getPinned()){const n=this.pinnedWidthService.getPinnedLeftWidth(),o=this.pinnedWidthService.getPinnedRightWidth(),r=Wa(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(n+o+i>r)if(r>n+o)i=r-n-o;else return 0}return i}getResizeDiff(t){let i=t.key===M.LEFT!==this.gos.get("enableRtl");const s=this.column.getPinned(),n=this.gos.get("enableRtl");return s&&n!==(s==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{var t;(t=this.resizeFeature)==null||t.toggleColumnResizing(!1)},150))}handleKeyDown(t){const i=this.getWrapperHasFocus();switch(t.key){case M.PAGE_DOWN:case M.PAGE_UP:case M.PAGE_HOME:case M.PAGE_END:i&&t.preventDefault()}}addDomData(t){const i=Xy.DOM_DATA_KEY_HEADER_CTRL;Dn(this.gos,this.eGui,i,this),t.addDestroyFunc(()=>Dn(this.gos,this.eGui,i,null))}getGui(){return this.eGui}focus(t){return this.eGui?(this.lastFocusEvent=t||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,i,s){const n=t??i;this.gos.get("preventDefaultOnContextMenu")&&n.preventDefault(),this.menuService.isHeaderContextMenuEnabled(s)&&this.menuService.showHeaderContextMenu(s,t,i),this.dispatchColumnMouseEvent("columnHeaderContextMenu",s)}dispatchColumnMouseEvent(t,i){this.eventService.dispatchEvent({type:t,column:i})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null}};Qy.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var Vu=Qy,kg=class extends D{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},AE=class extends Vu{constructor(e,t,i){super(e,t,i),this.iconCreated=!1,this.column=e}setComp(e,t,i,s,n){this.comp=e,n=Ha(this,this.beans.context,n),this.eButtonShowMainFilter=i,this.eFloatingFilterBody=s,this.setGui(t,n),this.setupActive(),this.setupWidth(n),this.setupLeft(n),this.setupHover(n),this.setupFocus(n),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(n),this.setupUi(),n.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(n),n.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(n)}),n.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=Gt("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Bn(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();To(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(Ie(this.gos)===this.eGui)return;const s=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(s){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),s.focus();return}const n=this.findNextColumnWithFloatingFilter(e.shiftKey);n&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:n},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleColsService;let i=this.column;do if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case M.UP:case M.DOWN:t||e.preventDefault();case M.LEFT:case M.RIGHT:if(t)return;e.stopPropagation();case M.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case M.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const i=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),s=!!e.relatedTarget&&fo(e.relatedTarget,"ag-floating-filter");if(i&&s&&e.target===this.eGui){const o=this.lastFocusEvent,r=!!(o&&o.key===M.TAB);if(o&&r){const a=o.shiftKey;this.focusService.focusInto(this.eGui,a)}}const n=this.getRowIndex();this.beans.focusService.setFocusedHeader(n,this.column)}setupHover(e){e.createManagedBean(new kg([this.column],this.eGui));const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const i=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",i)};e.addManagedEventListeners({columnHoverChanged:t}),t()}setupLeft(e){const t=new Eg(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){var t;if(!this.active)return;const e=(t=this.beans.filterManager)==null?void 0:t.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{filterManager:t}=this.beans,i=s=>{if((s==null?void 0:s.source)==="filterDestroyed"&&!this.isAlive())return;const n=this.comp.getFloatingFilterComp();n&&n.then(o=>{if(o){const r=t==null?void 0:t.getCurrentFloatingFilterParentModel(this.column),a=s?{...s,columns:s.columns??[],source:s.source==="api"?"api":"columnFilter"}:null;o.onParentModelChanged(r,a)}})};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:i}),t!=null&&t.isFilterActive(this.column)&&i(null)}setupWidth(e){const t=()=>{const i=`${this.column.getActualWidth()}px`;this.comp.setWidth(i)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){var e;if(!this.suppressFilterButton&&this.comp){const t=!!((e=this.beans.filterManager)!=null&&e.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){var o;const t=this.active;this.setupActive();const i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const s=this.active?(o=this.beans.filterManager)==null?void 0:o.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,n=this.comp.getFloatingFilterComp();!n||!s?this.updateCompDetails(e,s,i):n.then(r=>{var a;!r||(a=this.beans.filterManager)!=null&&a.areFilterCompsDifferent(this.userCompDetails??null,s)?this.updateCompDetails(e,s,i):this.updateFloatingFilterParams(s)})}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){var i;if(!e)return;const t=e.params;(i=this.comp.getFloatingFilterComp())==null||i.then(s=>{let n=!1;s!=null&&s.refresh&&typeof s.refresh=="function"&&s.refresh(t)!==null&&(n=!0),!n&&(s!=null&&s.onParamsUpdated)&&typeof s.onParamsUpdated=="function"&&s.onParamsUpdated(t)!==null&&I("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};var ie="32.3.3";function IE(e){var t,i;return!!((t=e.filterManager)!=null&&t.isColumnFilterPresent())||!!((i=e.filterManager)!=null&&i.isAggregateFilterPresent())}function LE(e,t,i){var s;return(s=e.filterManager)==null?void 0:s.getFilterInstance(t,i)}function OE(e,t){var i;return((i=e.filterManager)==null?void 0:i.getColumnFilterInstance(t))??Promise.resolve(void 0)}function BE(e,t){var s;const i=e.columnModel.getColDefCol(t);if(i)return(s=e.filterManager)==null?void 0:s.destroyFilter(i,"api")}function NE(e,t){e.frameworkOverrides.wrapIncoming(()=>{var i;return(i=e.filterManager)==null?void 0:i.setFilterModel(t)})}function _E(e){var t;return((t=e.filterManager)==null?void 0:t.getFilterModel())??{}}function GE(e,t){var i;return((i=e.filterManager)==null?void 0:i.getColumnFilterModel(t))??null}function HE(e,t,i){var s;return((s=e.filterManager)==null?void 0:s.setColumnFilterModel(t,i))??Promise.resolve()}function VE(e,t){const i=e.columnModel.getCol(t);if(!i){ge(`column '${t}' not found`);return}e.menuService.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"})}function WE(e,t,i){if(t==null)return null;let s=null;const{compName:n,jsComp:o,fwComp:r}=Ey.getCompKeys(e,t,Rg);return n?s={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[n]:o==null&&r==null&&t.filter===!0&&(s=i()),s}var tv={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},iv=["january","february","march","april","may","june","july","august","september","october","november","december"],zE=class extends D{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){var e,t;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...((t=(e=this.gos.get("initialState"))==null?void 0:e.filter)==null?void 0:t.filterModel)??{}}}setFilterModel(e,t="api"){var n;if((n=this.dataTypeService)!=null&&n.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:t});return}const i=[],s=this.getFilterModel(!0);if(e){const o=new Set(Object.keys(e));this.allColumnFilters.forEach((r,a)=>{const l=e[a];i.push(this.setModelOnFilterWrapper(r.filterPromise,l)),o.delete(a)}),o.forEach(r=>{const a=this.columnModel.getColDefCol(r)||this.columnModel.getCol(r);if(!a){I("setFilterModel() - no column found for colId: "+r);return}if(!a.isFilterAllowed()){I("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+r);return}const l=this.getOrCreateFilterWrapper(a);if(!l){I("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+r);return}i.push(this.setModelOnFilterWrapper(l.filterPromise,e[r]))})}else this.allColumnFilters.forEach(o=>{i.push(this.setModelOnFilterWrapper(o.filterPromise,null))});_e.all(i).then(()=>{var a;const o=this.getFilterModel(!0),r=[];this.allColumnFilters.forEach((l,c)=>{const u=s?s[c]:null,d=o?o[c]:null;wa(u,d)||r.push(l.column)}),r.length>0&&((a=this.filterManager)==null||a.onFilterChanged({columns:r,source:t}))})}setModelOnFilterWrapper(e,t){return new _e(i=>{e.then(s=>{typeof s.setModel!="function"&&(I("filter missing setModel method, which is needed for setFilterModel"),i()),(s.setModel(t)||_e.resolve()).then(()=>i())})})}getFilterModel(e){const t={},{allColumnFilters:i,initialFilterModel:s}=this;return i.forEach((n,o)=>{const r=this.getModelFromFilterWrapper(n);N(r)&&(t[o]=r)}),e||Object.entries(s).forEach(([n,o])=>{var r;N(o)&&!i.has(n)&&((r=this.columnModel.getCol(n))!=null&&r.isFilterAllowed())&&(t[n]=o)}),t}getModelFromFilterWrapper(e){const{filter:t}=e;return t?typeof t.getModel!="function"?(I("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return this.allColumnFilters.size?(this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){const e=o=>o?o.isFilterActive?o.isFilterActive():(I("Filter is missing isFilterActive() method"),!1):!1,t=!!vp(this.gos),i=o=>{if(!o.isPrimary())return!0;const a=!this.columnModel.isPivotActive();return!o.isValueActive()||!a?!1:this.columnModel.isPivotMode()?!0:t},s=[],n=[];return this.forEachColumnFilter((o,r)=>{e(o)&&(i(r.column)?s.push(o):n.push(o))}).then(()=>{this.activeAggregateFilters=s,this.activeColumnFilters=n})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((i,s)=>s.column.setFilterActive(i.isFilterActive(),e,t))}forEachColumnFilter(e){return _e.all(Array.from(this.allColumnFilters.values()).map(t=>t.filterPromise.then(i=>e(i,t))))}doColumnFiltersPass(e,t,i){const{data:s,aggData:n}=e,o=i?this.activeAggregateFilters:this.activeColumnFilters,r=i?n:s;for(let a=0;a<o.length;a++){const l=o[a];if(!(l==null||l===t)){if(typeof l.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:e,data:r}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){const t=()=>{var i;return(i=this.filterManager)==null?void 0:i.onFilterChanged(e)};this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(e={}){const{filterInstance:t,additionalEventAttributes:i}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",i).then(()=>{this.allColumnFilters.forEach(s=>{s.filterPromise&&s.filterPromise.then(n=>{n&&n!==t&&n.onAnyFilterChanged&&n.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(t=>{t.onNewRowsLoaded&&t.onNewRowsLoaded()}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,i)=>{const s=i?this.columnModel.getCol(i):e;return s?this.valueService.getValue(s,t,!0):void 0}}isFilterActive(e){const{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():this.getModelFromInitialState(e)!=null}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){var i;let t;if(_d(this.gos))t="agSetColumnFilter";else{const s=(i=this.dataTypeService)==null?void 0:i.getBaseDataType(e);s==="number"?t="agNumberColumnFilter":s==="date"||s==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){var i;let t;if(_d(this.gos))t="agSetColumnFloatingFilter";else{const s=(i=this.dataTypeService)==null?void 0:i.getBaseDataType(e);s==="number"?t="agNumberColumnFloatingFilter":s==="date"||s==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){const i=this.getDefaultFilter(e),s=e.getColDef();let n;const o={...this.createFilterParams(e,s),filterModifiedCallback:()=>this.filterModifiedCallbackFactory(n,e)(),filterChangedCallback:a=>this.filterChangedCallbackFactory(n,e)(a),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(n,a):!0},r=this.userComponentFactory.getFilterDetails(s,o,i);return r?{filterPromise:()=>{const a=r.newAgStackInstance();return a!=null&&a.then(l=>{n=l,t&&(t.filter=l)}),a},compDetails:r}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:ey(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){const t={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:i,compDetails:s}=this.createFilterInstance(e,t);return t.filterPromise=(i==null?void 0:i())??null,t.compDetails=s,t}onColumnsChanged(){var i;const e=[];this.allColumnFilters.forEach((s,n)=>{let o;s.column.isPrimary()?o=this.columnModel.getColDefCol(n):o=this.columnModel.getCol(n),!(o&&o===s.column)&&(e.push(s.column),this.disposeFilterWrapper(s,"columnChanged"),this.disposeColumnListener(n))});const t=e.every(s=>s.getColDef().filter==="agGroupColumnFilter");e.length>0&&!t?(i=this.filterManager)==null||i.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){const e=this.columnModel.getAutoCols();e==null||e.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const{filter:i}=this.allColumnFilters.get(e.getColId())??{};return i&&typeof(i==null?void 0:i.isFilterAllowed)=="function"?i.isFilterAllowed():!0}getFloatingFilterCompDetails(e,t){const i=l=>{var u;const c=(u=this.getOrCreateFilterWrapper(e))==null?void 0:u.filterPromise;c!=null&&c.then(d=>{l(Kr(d))})},s=e.getColDef(),n={...this.createFilterParams(e,s),filterChangedCallback:()=>i(l=>this.filterChangedCallbackFactory(l,e)())},o=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(s,Rg,n);let r=WE(this.frameworkOverrides,s,()=>this.getDefaultFloatingFilter(e));r==null&&(r="agReadOnlyFloatingFilter");const a={column:e,filterParams:o,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:i,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(s,a,r)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){var n;const i=e.getColId(),s=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],s&&(this.disposeFilterWrapper(s,t),(n=this.filterManager)==null||n.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(i=>{this.destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventService.dispatchEvent({type:"filterDestroyed",source:t,column:e.column})})}filterModifiedCallbackFactory(e,t){return()=>{this.eventService.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return i=>{const s=(i==null?void 0:i.source)??"columnFilter",n={filter:e,additionalEventAttributes:i,columns:[t],source:s};this.callOnFilterChangedOutsideRenderCycle(n)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const i=t.column,{compDetails:s}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,s)){this.destroyFilter(i,"paramsUpdated");return}const n=i.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(i,"paramsUpdated");return}t.filterPromise.then(o=>{(o!=null&&o.refresh?o.refresh({...this.createFilterParams(i,i.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(o,i),filterChangedCallback:this.filterChangedCallbackFactory(o,i),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(o,a):!0,...n}):!0)===!1&&this.destroyFilter(i,"paramsUpdated")})}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:s}=t;return!(i===s||(i==null?void 0:i.render)&&(s==null?void 0:s.render)&&i.render===s.render)}hasFloatingFilters(){return this.columnModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then(i=>{const s=Kr(i);t(s)})}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(i=>{t(Kr(i))})})}getFilterInstanceImpl(e){var s;const t=this.columnModel.getColDefCol(e);return t?((s=this.getOrCreateFilterWrapper(t))==null?void 0:s.filterPromise)??_e.resolve(null):_e.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:i})=>{this.setColumnFilterModel(e,t).then(()=>i())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){var o;if((o=this.dataTypeService)!=null&&o.isPendingInference()){let r=()=>{};const a=new Promise(l=>{r=l});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:r}),a}const i=this.columnModel.getColDefCol(e),s=i?this.getOrCreateFilterWrapper(i):null;return s?(r=>new Promise(a=>{r.then(l=>a(l))}))(this.setModelOnFilterWrapper(s.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){const t=this.columnModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,i){const s=_d(this.gos),n=this.localeService.getLocaleTextFunc(),o=r=>{const{filterParams:a}=e;e.filterParams=typeof a=="object"?{...a,...r}:r};switch(t.baseDataType){case"number":{s&&o({comparator:(r,a)=>{const l=r==null?0:parseInt(r),c=a==null?0:parseInt(a);return l===c?0:l>c?1:-1}});break}case"boolean":{o(s?{valueFormatter:r=>N(r.value)?n(String(r.value),r.value?"True":"False"):n("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(r,a)=>a,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(r,a)=>a===!1,numberOfInputs:0}]});break}case"date":{s&&o({valueFormatter:r=>{const a=i(r);return N(a)?a:n("blanks","(Blanks)")},treeList:!0,treeListFormatter:(r,a)=>{if(a===1&&r!=null){const l=iv[Number(r)-1];return n(l,tv[l])}return r??n("blanks","(Blanks)")}});break}case"dateString":{const r=t.dateParser;o(s?{valueFormatter:a=>{const l=i(a);return N(l)?l:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:a=>{const l=r(a??void 0);return l?[String(l.getFullYear()),String(l.getMonth()+1),String(l.getDate())]:null},treeListFormatter:(a,l)=>{if(l===1&&a!=null){const c=iv[Number(a)-1];return n(c,tv[c])}return a??n("blanks","(Blanks)")}}:{comparator:(a,l)=>{const c=r(l);return l==null||c<a?-1:c>a?1:0}});break}case"object":{s?o({valueFormatter:r=>{const a=i(r);return N(a)?a:n("blanks","(Blanks)")}}):e.filterValueGetter=r=>i({column:r.column,node:r.node,value:this.valueService.getValue(r.column,r.node)});break}}}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};function jE(e){var t;return!!((t=e.filterManager)!=null&&t.isAnyFilterPresent())}function UE(e,t="api"){var i;(i=e.filterManager)==null||i.onFilterChanged({source:t})}var KE=class extends ye{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>
            </div>`,[Hu]),this.eFloatingFilterText=ee}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}},Jy=class extends ye{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e==null?void 0:e.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}const t=e.operator;let i;t?i=e.conditions[0]:i=e,this.lastType=i.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const i=e;return this.isTypeEditable(i.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new Oy,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(i)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const t=this.optionsFactory.getCustomOption(e),{numberOfInputs:i}=t||{};return i==null||i==1}isTypeEditable(e){const t=["inRange","empty","blank","notBlank"];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();return`${t} ${i("ariaFilterInput","Filter Input")}`}},$E=class extends Jy{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>
                <div data-ref="eDateWrapper" style="display: flex;"></div>
            </div>`,[Hu]),this.eReadOnlyText=ee,this.eDateWrapper=ee}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return Ky}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new $y(this.filterParams,this.localeService,this.optionsFactory);const t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){const i=e;this.dateComp.setDate(Mt(i.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Ae(this.eDateWrapper,e),Ae(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=this.dateComp.getDate(),t=ii(e);this.params.parentFilterInstance(i=>{if(i){const s=Mt(t);i.onFloatingFilterChanged(this.getLastType()||null,s)}})}getDateComponentParams(){const e=bg(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:mt(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new Uy(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){const e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}},qE=class extends ye{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>
            </div>`,[Hu]),this.eDateInput=ee}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:i=>{i.target===Ie(this.gos)&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&Ai(),t.type=i?"date":"text";const{minValidYear:s,maxValidYear:n,minValidDate:o,maxValidDate:r}=e.filterParams||{};if(o&&s&&I("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),r&&n&&I("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),o&&r){const[a,l]=[o,r].map(c=>c instanceof Date?c:Mt(c));a&&l&&a.getTime()>l.getTime()&&I("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}o?o instanceof Date?t.min=qr(o):t.min=o:s&&(t.min=`${s}-01-01`),r?r instanceof Date?t.max=qr(r):t.max=r:n&&(t.max=`${n}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return Mt(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(ii(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:pg()||fg()||Ai()&&dy()>=14.1}},Zy=class extends D{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=ee,this.valueChangedListener=()=>{}}setupGui(e){var s;this.eFloatingFilterTextInput=this.createManagedBean(new Nn((s=this.params)==null?void 0:s.config));const t=this.eFloatingFilterTextInput.getGui();e.appendChild(t);const i=n=>this.valueChangedListener(n);this.addManagedListeners(t,{input:i,keydown:i})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},e1=class extends Jy{constructor(){super(...arguments),this.eFloatingFilterInputContainer=ee}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;const t=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=ou(this.params.filterParams),!this.isReadOnly()){const i=bg(this.params.filterParams,this.getDefaultDebounceMs()),s=mt(this.syncUpWithParentFilter.bind(this),i);this.floatingFilterInputService.setValueChangedListener(s)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const t=this.floatingFilterInputService.getValue();zt(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){const t=e.key===M.ENTER;if(this.applyActive&&!t)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=zy(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance(s=>{s&&s.onFloatingFilterChanged(this.getLastType()||null,i||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}},YE=class extends D{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new xg),this.eFloatingFilterTextInput=this.createManagedBean(new Nn),this.eFloatingFilterTextInput.setDisabled(!0);const t=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,s=>this.valueChangedListener(s)),this.setupListeners(i,s=>this.valueChangedListener(s))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},QE=class extends e1{init(e){var t;super.init(e),this.filterModelFormatter=new Hy(this.localeService,this.optionsFactory,(t=e.filterParams)==null?void 0:t.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){Dp(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return Gy}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=Dp(e.filterParams),this.allowedCharPattern?this.createManagedBean(new Zy({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new YE)}},XE=class extends e1{init(e){super.init(e),this.filterModelFormatter=new Wy(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return Vy}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new Zy)}};function JE(e){var t;return!!((t=e.filterManager)!=null&&t.isQuickFilterPresent())}function ZE(e){return e.gos.get("quickFilterText")}function ek(e){var t;(t=e.filterManager)==null||t.resetQuickFilterCache()}var tk=class extends D{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){const e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}refreshQuickFilterCols(){var n;const e=this.columnModel.isPivotMode(),t=this.columnModel.getAutoCols(),i=this.columnModel.getColDefCols();let s=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?(n=this.pivotResultColsService.getPivotResultCols())==null?void 0:n.list:i)??[];t&&(s=s.concat(t)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?s:s.filter(o=>o.isVisible()||o.isRowGroupActive())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(i=>t?this.doesRowPassQuickFilterCache(e,i):this.doesRowPassQuickFilterNoCache(e,i))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return N(e)?ke(this.gos)?e.toUpperCase():(I("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){I(`Grid option quickFilterText only supports string inputs, received: ${typeof e}`);return}const t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some(i=>{const s=this.getQuickFilterTextForColumn(i,e);return N(s)&&s.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let i;e?(this.checkGenerateQuickFilterAggregateText(t),i=t.quickFilterAggregateText):i=this.getQuickFilterAggregateText(t);const{quickFilterParts:s,matcher:n}=this;return n(s,i)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let i=this.valueService.getValue(e,t,!0);const s=e.getColDef();if(s.getQuickFilterText){const n=this.gos.addGridCommonParams({value:i,node:t,data:t.data,column:e,colDef:s});i=s.getQuickFilterText(n)}return N(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(e){const t=[];return this.colsForQuickFilter.forEach(i=>{const s=this.getQuickFilterTextForColumn(i,e);N(s)&&t.push(s)}),t.join(`
`)}},Mg={version:ie,moduleName:"@ag-grid-community/filter-core",beans:[sE]},ik={version:ie,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:jE,onFilterChanged:UE},dependantModules:[Mg]},Dg={version:ie,moduleName:"@ag-grid-community/column-filter",beans:[zE],dependantModules:[Mg]},sk={version:ie,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:IE,getFilterInstance:LE,getColumnFilterInstance:OE,destroyFilter:BE,setFilterModel:NE,getFilterModel:_E,getColumnFilterModel:GE,setColumnFilterModel:HE,showColumnFilter:VE},dependantModules:[Dg,ik]},t1={version:ie,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:AE}],dependantModules:[Dg]},nk={version:ie,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:KE}],dependantModules:[t1]},ok={version:ie,moduleName:"@ag-grid-community/simple-filter",dependantModules:[Dg],userComponents:[{name:"agTextColumnFilter",classImp:bE},{name:"agNumberColumnFilter",classImp:RE},{name:"agDateColumnFilter",classImp:FE},{name:"agDateInput",classImp:qE}]},rk={version:ie,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[ok,t1],userComponents:[{name:"agTextColumnFloatingFilter",classImp:XE},{name:"agNumberColumnFloatingFilter",classImp:QE},{name:"agDateColumnFloatingFilter",classImp:$E}]},i1={version:ie,moduleName:"@ag-grid-community/quick-filter-core",beans:[tk],dependantModules:[Mg]},ak={version:ie,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:JE,getQuickFilter:ZE,resetQuickFilter:ek},dependantModules:[i1]},lk={version:ie,moduleName:"@ag-grid-community/quick-filter",dependantModules:[i1,ak]},ck={version:ie,moduleName:"@ag-grid-community/filter",dependantModules:[rk,nk,lk,sk]},Tp=(e=>(e.COLUMN_GROUP="group",e.COLUMN="column",e.FLOATING_FILTER="filter",e))(Tp||{}),uk=class extends D{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(this,t=>{this.gridBodyCon=t.gridBodyCtrl});const e=Ge(this.gos);this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){var e;return((e=this.ctrlsService.getHeaderRowContainerCtrl())==null?void 0:e.getRowCount())??0}getHeaderPositionForColumn(e,t){let i;if(typeof e=="string"?(i=this.columnModel.getCol(e),i||(i=this.visibleColService.getColumnGroup(e))):i=e,!i)return null;const s=this.ctrlsService.getHeaderRowContainerCtrl(),n=s==null?void 0:s.getAllCtrls(),o=ae(n||[]).getType()==="filter",r=this.getHeaderRowCount()-1;let a=-1,l=i;for(;l;)a++,l=l.getParent();let c=a;return t&&o&&c===r-1&&c++,c===-1?null:{headerRowIndex:c,column:i}}navigateVertically(e,t,i){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;const{headerRowIndex:s}=t,n=t.column,o=this.getHeaderRowCount(),r=e===0;let{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:c}=r?this.headerPositionUtils.getColumnVisibleParent(n,s):this.headerPositionUtils.getColumnVisibleChild(n,s),u=!1;return a<0&&(a=0,l=n,u=!0),a>=o?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):c!==void 0&&(this.currentHeaderRowWithoutSpan=c),!u&&!l?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:i})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,i){const s=this.focusService.getFocusedHeader(),n=e===2,o=this.gos.get("enableRtl");let r,a;if(this.currentHeaderRowWithoutSpan!==-1?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,n!==o?(a="Before",r=this.headerPositionUtils.findHeader(s,a)):(a="After",r=this.headerPositionUtils.findHeader(s,a)),r||!t)return this.focusService.focusHeaderPosition({headerPosition:r,direction:a,fromTab:t,allowUserOverride:!0,event:i});if(t){const l=this.gos.getCallback("tabToNextHeader");if(l)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:r,direction:a})}return this.focusNextHeaderRow(s,a,i)}focusNextHeaderRow(e,t,i){const s=e.headerRowIndex;let n=null,o;if(t==="Before"?s>0&&(o=s-1,this.currentHeaderRowWithoutSpan-=1,n=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"end")):(o=s+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),n=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"start")),!n)return!1;const{column:r,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(n.column,n==null?void 0:n.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:r,headerRowIndex:a},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if(We(e)){const s=e.getDisplayedLeafColumns();i=t==="Before"?ae(s):s[0]}else i=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}},dk=class extends D{wireBeans(e){this.animationFrameService=e.animationFrameService,this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,i){this.comp=e,this.eGui=t,this.createManagedBean(new Bn(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();const s=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:s}),this.mockContextMenuForIPad(s),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>this.animationFrameService.requestAnimationFrame(()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){var o;const{columnModel:e}=this;let t=0;const i=this.columnModel.getGroupRowsHeight().reduce((r,a)=>r+a,0),s=this.columnModel.getColumnHeaderRowHeight();if((o=this.filterManager)!=null&&o.hasFloatingFilters()&&(t+=e.getFloatingFiltersHeight()),t+=i,t+=s,this.headerHeight===t)return;this.headerHeight=t;const n=`${t+1}px`;this.comp.setHeightAndMinHeight(n),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const t=this.visibleColsService.getAllCols().some(i=>i.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey,s=i!==t?2:3;(this.headerNavigationService.navigateHorizontally(s,!0,e)||!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case M.LEFT:t=2;case M.RIGHT:{N(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case M.UP:t=0;case M.DOWN:{N(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e;!t&&this.eGui.contains(Ie(this.gos))||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,i){var n;if(!e&&!i||!this.menuService.isHeaderContextMenuEnabled())return;const{target:s}=e??t;(s===this.eGui||s===((n=this.ctrlsService.getHeaderRowContainerCtrl())==null?void 0:n.getViewportElement()))&&this.menuService.showHeaderContextMenu(void 0,e,i)}mockContextMenuForIPad(e){if(!qs())return;const t=new Ns(this.eGui),i=s=>{e(void 0,s.touchStart,s.touchEvent)};this.addManagedListeners(t,{longTap:i}),this.addDestroyFunc(()=>t.destroy())}},Tg=class extends D{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=it(this.gos,"print"),t=this.visibleColsService.getBodyContainerWidth(),i=this.visibleColsService.getColsLeftWidth(),s=this.visibleColsService.getDisplayedColumnsRightWidth();let n;e?n=t+i+s:(n=t,this.addSpacer&&(this.gos.get("enableRtl")?i:s)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(n+=this.scrollVisibleService.getScrollbarWidth())),this.callback(n)}},hk=class extends D{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach(i=>{i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function s1(e){const{isFromHeader:t,fromLeft:i,xPosition:s,fromEnter:n,fakeEvent:o,pinned:r,gos:a,columnModel:l,columnMoveService:c,visibleColsService:u}=e;let{allMovingColumns:d}=e;if(t){const b=[];d.forEach(P=>{var k;let x=null,F=P.getParent();for(;F!=null&&F.getDisplayedLeafColumns().length===1;)x=F,F=F.getParent();x!=null?(!!((k=x.getColGroupDef())!=null&&k.marryChildren)?x.getProvidedColumnGroup().getLeafColumns():x.getLeafColumns()).forEach(O=>{b.includes(O)||b.push(O)}):b.includes(P)||b.push(P)}),d=b}const h=d.slice();l.sortColsLikeCols(h);const p=mk({movingCols:h,draggingRight:i,xPosition:s,pinned:r,gos:a,columnModel:l,visibleColsService:u}),g=pk(h,l);if(p.length===0)return;const v=p[0];let S=g!==null&&!n;if(t&&(S=g!==null),S&&!o&&(!i&&v>=g||i&&v<=g))return;const m=u.getAllCols(),C=[];let w=null;for(let b=0;b<p.length;b++){const P=p[b],x=c.getProposedColumnOrder(h,P);if(!c.doesOrderPassRules(x))continue;const F=x.filter(E=>m.includes(E));if(w===null)w=F;else if(!$s(F,w))break;const k=fk(x);C.push({move:P,fragCount:k})}if(C.length===0)return;C.sort((b,P)=>b.fragCount-P.fragCount);const R=C[0].move;if(!(R>l.getCols().length-d.length))return{columns:d,toIndex:R}}function Ag(e){const{columns:t,toIndex:i}=s1(e)||{},{finished:s,columnMoveService:n}=e;return!t||i==null?null:(n.moveColumns(t,i,"uiColumnMoved",s),s?null:{columns:t,toIndex:i})}function pk(e,t){const i=t.getCols(),s=sx(e.map(l=>i.indexOf(l))),n=s[0];return ae(s)-n!==s.length-1?null:n}function fk(e){function t(s){const n=[];let o=s.getOriginalParent();for(;o!=null;)n.push(o),o=o.getOriginalParent();return n}let i=0;for(let s=0;s<e.length-1;s++){let n=t(e[s]),o=t(e[s+1]);[n,o]=n.length>o.length?[n,o]:[o,n],n.forEach(r=>{o.indexOf(r)===-1&&i++})}return i}function gk(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}function mk(e){const{movingCols:t,draggingRight:i,xPosition:s,pinned:n,gos:o,columnModel:r,visibleColsService:a}=e;if(o.get("suppressMovableColumns")||t.some(w=>w.getColDef().suppressMovable))return[];const c=gk(a,n),u=r.getCols(),d=c.filter(w=>wn(t,w)),h=c.filter(w=>!wn(t,w)),p=u.filter(w=>!wn(t,w));let g=0,v=s;if(i){let w=0;d.forEach(R=>w+=R.getActualWidth()),v-=w}if(v>0){for(let w=0;w<h.length;w++){const R=h[w];if(v-=R.getActualWidth(),v<0)break;g++}i&&g++}let S;if(g>0){const w=h[g-1];S=p.indexOf(w)+1}else S=p.indexOf(h[0]),S===-1&&(S=0);const m=[S],C=(w,R)=>w-R;if(i){let w=S+1;const R=u.length-1;for(;w<=R;)m.push(w),w++;m.sort(C)}else{let w=S;const R=u.length-1;let b=u[w];for(;w<=R&&c.indexOf(b)<0;)w++,m.push(w),b=u[w];w=S-1;const P=0;for(;w>=P;)m.push(w),w--;m.sort(C).reverse()}return m}function ru(e){var c;const{pinned:t,fromKeyboard:i,gos:s,ctrlsService:n,useHeaderRow:o,skipScrollPadding:r}=e;let a=(c=n.getHeaderRowContainerCtrl(t))==null?void 0:c.getViewportElement(),{x:l}=e;return a?(i&&(l-=a.getBoundingClientRect().left),s.get("enableRtl")&&(o&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),t==null&&!r&&(l+=n.get("center").getCenterViewportScrollLeft()),l):0}function go(e,t){for(const i of e)i.setMoving(t,"uiColumnMoved")}var sv=7,Ap=100,El=Ap/2,Ck=5,vk=100,Sk=class extends D{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!N(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){var t;const e=((t=this.lastDraggingEvent)==null?void 0:t.dragItem.columns)??[];for(const i of e){const s=i.getPinned();if(i.getColDef().lockPinned){if(s==this.pinned)return"move";continue}if(s===this.pinned||!this.pinned)return"move";if(!s&&this.pinned)return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem.columns;if(e.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{const s=e.dragItem.visibleState,n=(t||[]).filter(o=>s[o.getId()]);this.setColumnsVisible(n,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(t,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,s=!1){const n=this.gos.get("suppressMoveWhenColumnDragging");if(s&&!n){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!s&&le(e.hDirection))return;const{pinned:o,gos:r,ctrlsService:a}=this,l=ru({x:e.x,pinned:o,gos:r,ctrlsService:a});t||this.checkCenterForScrolling(l),n?this.handleColumnDragWhileSuppressingMovement(e,t,i,l,s):this.handleColumnDragWhileAllowingMovement(e,t,i,l,s)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(!e)return;const s=e.filter(n=>!n.getColDef().lockVisible);this.columnModel.setColsVisible(s,t,i)}finishColumnMoving(){if(this.clearHighlighted(),!this.lastMovedInfo)return;const{columns:e,toIndex:t}=this.lastMovedInfo;this.columnMoveService.moveColumns(e,t,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,i,s,n){const o=this.getAllMovingColumns(e,!0);if(n){const r=this.isAttemptingToPin(o);r&&this.attemptToPinColumns(o,void 0,!0);const{fromLeft:a,xPosition:l}=this.getNormalisedXPositionInfo(o,r)||{};if(a==null||l==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:l,fromEnter:t,fakeEvent:i,fromLeft:a})}else{if(!this.dragAndDropService.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,s)}}handleColumnDragWhileAllowingMovement(e,t,i,s,n){const o=this.getAllMovingColumns(e),r=this.normaliseDirection(e.hDirection)===1,a=e.dragSource.type===1,l=this.getMoveColumnParams({allMovingColumns:o,isFromHeader:a,xPosition:s,fromLeft:r,fromEnter:t,fakeEvent:i}),c=Ag({...l,finished:n});c&&(this.lastMovedInfo=c)}getAllMovingColumns(e,t=!1){const i=e.dragSource.getDragItem();let s=null;t?(s=i.columnsInSplit,s||(s=i.columns)):s=i.columns;const n=o=>o.getColDef().lockPinned?o.getPinned()==this.pinned:!0;return s?s.filter(n):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:i,xPosition:s,fromLeft:n,fromEnter:o,fakeEvent:r}=e,{pinned:a,gos:l,columnModel:c,columnMoveService:u,visibleColsService:d}=this;return{allMovingColumns:t,isFromHeader:i,fromLeft:n,xPosition:s,pinned:a,fromEnter:o,fakeEvent:r,gos:l,columnModel:c,columnMoveService:u,visibleColsService:d}}findFirstAndLastMovingColumns(e){const t=e.length;let i,s;for(let n=0;n<=t;n++){if(!i){const o=e[n];o.getLeft()!=null&&(i=o)}if(!s){const o=e[t-1-n];o.getLeft()!=null&&(s=o)}if(i&&s)break}return{firstMovingCol:i,lastMovingCol:s}}highlightHoveredColumn(e,t){var u;const{gos:i,columnModel:s}=this,n=i.get("enableRtl"),o=s.getCols().filter(d=>d.isVisible()&&d.getPinned()===this.pinned);let r=null,a=null,l=null;for(const d of o){if(a=d.getActualWidth(),r=this.getNormalisedColumnLeft(d,0,n),r!=null){const h=r+a;if(r<=t&&h>=t){l=d;break}}r=null,a=null}if(l)e.indexOf(l)!==-1&&(l=null);else{for(let d=o.length-1;d>=0;d--){const h=o[d],p=o[d].getParent();if(!p){l=h;break}const g=p==null?void 0:p.getDisplayedLeafColumns();if(g.length){l=ae(g);break}}if(!l)return;r=this.getNormalisedColumnLeft(l,0,n),a=l.getActualWidth()}if(((u=this.lastHighlightedColumn)==null?void 0:u.column)!==l&&this.clearHighlighted(),l==null||r==null||a==null)return;let c;t-r<a/2!==n?c=0:c=1,l.setHighlighted(c),this.lastHighlightedColumn={column:l,position:c}}getNormalisedXPositionInfo(e,t){const{gos:i,visibleColsService:s}=this,n=i.get("enableRtl"),{firstMovingCol:o,column:r,position:a}=this.getColumnMoveAndTargetInfo(e,t,n);if(!o||!r||a==null)return;const l=s.getAllCols(),c=l.indexOf(o),u=l.indexOf(r),d=a===0!==n,h=c<u||c===u&&!d;let p=0;if(d?h&&(p-=1):h||(p+=1),u+p===c)return;const g=l[u+p];if(!g)return;const v=this.getNormalisedColumnLeft(g,20,n);return{fromLeft:h,xPosition:v}}getColumnMoveAndTargetInfo(e,t,i){const s=this.lastHighlightedColumn||{},{firstMovingCol:n,lastMovingCol:o}=this.findFirstAndLastMovingColumns(e);if(!n||!o||s.column||!t)return{firstMovingCol:n,...s};const a=this.getPinDirection()==="left";return{firstMovingCol:n,position:a?1:0,column:a!==i?n:o}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0}return e}getNormalisedColumnLeft(e,t,i){const{gos:s,ctrlsService:n}=this,o=e.getLeft();if(o==null)return null;const r=e.getActualWidth();return ru({x:i?o+r-t:o+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:s,ctrlsService:n})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>sv;return t&&i||e.some(s=>s.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:i,fromEnter:s,fakeEvent:n,fromLeft:o}=e,r=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:o,fromEnter:s,fakeEvent:n}),{columns:a,toIndex:l}=s1(r)||{};a&&l!=null&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){this.lastHighlightedColumn&&(this.lastHighlightedColumn.column.setHighlighted(null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.ctrlsService.get("center"),i=t.getCenterViewportScrollLeft(),s=i+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<i+El,this.needToMoveLeft=e>s-El):(this.needToMoveLeft=e<i+El,this.needToMoveRight=e>s-El),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){var e;this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),vk),(e=this.dragAndDropService.getDragAndDropImageComponent())==null||e.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){var e;this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,(e=this.dragAndDropService.getDragAndDropImageComponent())==null||e.setIcon(this.getIconName()))}moveInterval(){var s,n;let e;this.intervalCount++,e=10+this.intervalCount*Ck,e>Ap&&(e=Ap);let t=null;const i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{if(this.failedMoveAttempts++,this.failedMoveAttempts<=sv+1)return;if((s=this.dragAndDropService.getDragAndDropImageComponent())==null||s.setIcon("pinned"),!this.gos.get("suppressMoveWhenColumnDragging")){const o=(n=this.lastDraggingEvent)==null?void 0:n.dragItem.columns;this.attemptToPinColumns(o,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,i=!1){const s=(e||[]).filter(n=>!n.getColDef().lockPinned);return s.length?(i&&(t=this.getPinDirection()),this.columnModel.setColsPinned(s,t,"uiColumnDragged"),i&&this.dragAndDropService.nudge(),s.length):0}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}},wk=class extends D{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(this,e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]];break}}),this.moveColumnFeature=this.createManagedBean(new Sk(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new hk(this.pinned)),this.dragAndDropService.addDropTarget(this),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},yk=class extends D{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,s,n){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=s,this.ctrl=n}postConstruct(){const e=[];let t,i;const s=()=>{if(Ae(this.eResize,t),!t)return;const r=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(r),i){const a=this.gos.get("skipHeaderOnAutoSize"),l=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",a)};this.eResize.addEventListener("dblclick",l);const c=new Ns(this.eResize);c.addEventListener("doubleTap",l),e.push(()=>{this.eResize.removeEventListener("dblclick",l),c.removeEventListener("doubleTap",l),c.destroy()})}},n=()=>{e.forEach(r=>r()),e.length=0},o=()=>{const r=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(r!==t||a!==i)&&(t=r,i=a,n(),s())};o(),this.addDestroyFunc(n),this.ctrl.setRefreshFunction("resize",o)}onResizing(e,t){const{column:i,lastResizeAmount:s,resizeStartWidth:n}=this,o=this.normaliseResizeAmount(t),r=n+o,a=[{key:i,newWidth:r}];if(this.column.getPinned()){const l=this.pinnedWidthService.getPinnedLeftWidth(),c=this.pinnedWidthService.getPinnedRightWidth(),u=Wa(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(l+c+(o-s)>u)return}this.lastResizeAmount=o,this.columnSizeService.setColumnWidths(a,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i=this.pinned!=="left",s=this.pinned==="right";return this.gos.get("enableRtl")?i&&(t*=-1):s&&(t*=-1),t}},Rk=class extends D{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(Ie(this.gos))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new wg),this.cbSelectAll.addCssClass("ag-header-select-all"),vi(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);const t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),i=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),s=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${s} (${i})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(e("ariaHeaderSelection","Column with Header Selection")),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return qw(this.gos)?!0:(I(`${e} is only available if using 'multiRow' selection mode.`),!1)}checkRightRowModelType(e){return ke(this.gos)||Oi(this.gos)?!0:(I(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${this.rowModel.getType()}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),i=this.isCurrentPageOnly();let s="uiSelectAll";i?s="uiSelectAllCurrentPage":t&&(s="uiSelectAllFiltered");const n={source:s,justFiltered:t,justCurrentPage:i};e?this.selectionService.selectAllRowNodes(n):this.selectionService.deselectAllRowNodes(n)}isCheckboxSelection(){const e=this.gos.get("rowSelection"),t=typeof e=="object"&&Yc(e)&&Ga(this.column),i=this.column.getColDef().headerCheckboxSelection;let s=!1;return t?s=!0:typeof i=="function"?s=i(this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()})):s=!!i,s&&this.checkRightRowModelType(t?"headerCheckbox":"headerCheckboxSelection")&&this.checkSelectionType(t?"headerCheckbox":"headerCheckboxSelection")}isFilteredOnly(){const e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="filtered":!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){const e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="currentPage":!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},bk=class extends Vu{constructor(e,t,i){super(e,t,i),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,i,s,n){this.comp=e,n=Ha(this,this.beans.context,n),this.setGui(t,n),this.updateState(),this.setupWidth(n),this.setupMovingCss(n),this.setupMenuClass(n),this.setupSortableClass(n),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:s,checkMeasuringCallback:r=>this.setRefreshFunction("measuring",r),compBean:n}),this.addColumnHoverListener(n),this.setupFilterClass(n),this.setupClassesFromColDef(),this.setupTooltip(n),this.addActiveHeaderMouseListeners(n),this.setupSelectAll(n),this.setupUserComp(n),this.refreshAria(),this.resizeFeature=n.createManagedBean(new yk(this.getPinned(),this.column,i,e,this)),n.createManagedBean(new kg([this.column],t)),n.createManagedBean(new Eg(this.column,t,this.beans)),n.createManagedBean(new Bn(t,{shouldStopEventPropagation:r=>this.shouldStopEventPropagation(r),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(n),n.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],()=>this.refresh(n)),n.addManagedListeners(this.column,{colDefChanged:()=>this.refresh(n)}),n.addManagedListeners(this.column,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const o=()=>this.checkDisplayName(n);n.addManagedEventListeners({columnValueChanged:o,columnRowGroupChanged:o,columnPivotChanged:o,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),n.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){if(!this.column.isResizable())return;const i=this.column.getActualWidth(),s=this.column.getMinWidth(),n=this.column.getMaxWidth(),o=Math.min(Math.max(i+e,s),n);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:o}],t,!0,"uiColumnResized")}moveHeader(e){const{eGui:t,beans:i,column:s,ctrlsService:n}=this,{gos:o,columnModel:r,columnMoveService:a,visibleColsService:l}=i,c=this.getPinned(),u=t.getBoundingClientRect().left,d=s.getActualWidth(),h=o.get("enableRtl"),g=ru({x:e===0!==h?u-20:u+d+20,pinned:c,fromKeyboard:!0,gos:o,ctrlsService:n}),v=this.focusService.getFocusedHeader();Ag({allMovingColumns:[s],isFromHeader:!0,fromLeft:e===1,xPosition:g,pinned:c,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:r,columnMoveService:a,visibleColsService:l,finished:!0}),n.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(s,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&v&&this.restoreFocus(v)}restoreFocus(e){this.focusService.focusHeaderPosition({headerPosition:{...e,column:this.column}})}setupUserComp(e){const t=this.lookupUserCompDetails(e);this.setCompDetails(t)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(e){const t=this.createParams(e),i=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(i,t)}createParams(e){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:i=>{this.menuService.showColumnMenu({column:this.column,buttonElement:i,positionBy:"button"})},showColumnMenuAfterMouseClick:i=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:i,positionBy:"mouse"})},showFilter:i=>{this.menuService.showFilterMenu({column:this.column,buttonElement:i,containerType:"columnFilter",positionBy:"button"})},progressSort:i=>{this.beans.sortController.progressSort(this.column,!!i,"uiColumnSorted")},setSort:(i,s)=>{this.beans.sortController.setSortForColumn(this.column,i,!!s,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(i,s)=>{this.setupTooltip(e,i,s)}})}setupSelectAll(e){this.selectAllFeature=e.createManagedBean(new Rk(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===M.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===M.ENTER&&this.onEnterKeyDown(e),e.key===M.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){const t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();!i||!(i instanceof Ep)||i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const s=this.gos.get("tooltipShowMode")==="whenTruncated",n=this.eGui,o=this.column.getColDef();!i&&s&&!o.headerComponent&&(i=()=>{const l=n.querySelector(".ag-header-cell-text");return l?l.scrollWidth>l.clientWidth:!0});const r={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>n,getLocation:()=>"header",getTooltipValue:()=>t??this.column.getColDef().headerTooltip,shouldDisplayTooltip:i},a=e.createManagedBean(new Ko(r));this.setRefreshFunction("tooltip",()=>a.refreshToolTip())}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),i=qy(t,this.gos,this.column,null),s=this.userHeaderClasses;this.userHeaderClasses=new Set(i),i.forEach(n=>{s.has(n)?s.delete(n):this.comp.addOrRemoveCssClass(n,!0)}),s.forEach(n=>this.comp.addOrRemoveCssClass(n,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const{column:t,beans:i,displayName:s,dragAndDropService:n,gos:o}=this,{columnModel:r}=i;let a=!this.gos.get("suppressDragLeaveHidesColumns");const l=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:s,onDragStarted:()=>{a=!o.get("suppressDragLeaveHidesColumns"),go([t],!0)},onDragStopped:()=>go([t],!1),onDragCancelled:()=>go([t],!1),onGridEnter:c=>{var u;if(a){const d=((u=c==null?void 0:c.columns)==null?void 0:u.filter(h=>!h.getColDef().lockVisible))||[];r.setColsVisible(d,!0,"uiColumnMoved")}},onGridExit:c=>{var u;if(a){const d=((u=c==null?void 0:c.columns)==null?void 0:u.filter(h=>!h.getColDef().lockVisible))||[];r.setColsVisible(d,!1,"uiColumnMoved")}}};n.addDragSource(l,!0)}createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(e){this.updateState(),this.refreshHeaderComp(e),this.refreshAria(),Object.values(this.refreshFunctions).forEach(t=>t())}refreshHeaderComp(e){const t=this.lookupUserCompDetails(e);(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==t.componentClass?this.attemptHeaderCompRefresh(t.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(e){this.displayName!==this.calculateDisplayName()&&this.refresh(e)}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const i=this.column.getActualWidth();this.comp.setWidth(`${i}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const i=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",i),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,i=e===1;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,beans:s}=this,n=this.beans.columnModel.getGroupRowsHeight(),o=n.reduce((d,h)=>d+=h,0)===0;if(i.addOrRemoveCssClass("ag-header-parent-hidden",o),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),i.addOrRemoveCssClass("ag-header-span-total",!1);return}const{numberOfParents:r,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",r>0);const{columnModel:l}=s,c=l.getColumnHeaderRowHeight();if(r===0){i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${c}px`);return}i.addOrRemoveCssClass("ag-header-span-total",a);let u=0;for(let d=0;d<r;d++)u+=n[n.length-1-d];e.style.setProperty("top",`${-u}px`),e.style.setProperty("height",`${c+u}px`)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(Ox(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(Ie(this.beans.gos)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,i)=>t==="filter"?-1:i.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnouncementService.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const i=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",i)};e.addManagedEventListeners({columnHoverChanged:t}),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(e){const t=n=>this.handleMouseOverChange(n.type==="mouseenter"),i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),s=n=>this.handleContextMenuMouseEvent(n,void 0,this.column);e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:i,contextmenu:s})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return t instanceof Ep?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy()}},Pk=class extends D{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,s){super(),this.eResize=t,this.comp=e,this.pinned=i,this.columnGroup=s}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){const t=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const i=[];this.columnGroup.getDisplayedLeafColumns().forEach(n=>{n.getColDef().suppressAutoSize||i.push(n.getColId())}),i.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:i,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){const t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,i="uiColumnResized"){const s=this.normaliseDragChange(t),n=this.resizeStartWidth+s;this.resizeColumnsFromLocalValues(n,i,e)}getInitialValues(e){const t=this.getColumnsToResize(),i=this.getInitialSizeOfColumns(t),s=this.getSizeRatiosOfColumns(t,i),n={columnsToResize:t,resizeStartWidth:i,resizeRatios:s};let o=null;if(e&&(o=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),o){const r=o.getDisplayedLeafColumns(),a=n.groupAfterColumns=r.filter(c=>c.isResizable()),l=n.groupAfterStartWidth=this.getInitialSizeOfColumns(a);n.groupAfterRatios=this.getSizeRatiosOfColumns(a,l)}else n.groupAfterColumns=void 0,n.groupAfterStartWidth=void 0,n.groupAfterRatios=void 0;return n}storeLocalValues(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:s,groupAfterColumns:n,groupAfterStartWidth:o,groupAfterRatios:r}=e;this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=s,this.resizeTakeFromCols=n,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=r}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){const t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t,i=!0){if(!this.resizeCols||!this.resizeRatios)return;const s={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(s,e,t,i)}resizeColumns(e,t,i,s=!0){const{columnsToResize:n,resizeStartWidth:o,resizeRatios:r,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,u=[];if(u.push({columns:n,ratios:r,width:t}),a){const d=t-o;u.push({columns:a,ratios:c,width:l-d})}this.columnSizeService.resizeColumnSets({resizeSets:u,finished:s,source:i}),s&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(i=>i.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},xk=class extends D{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}},Fk=class extends Vu{constructor(e,t,i){super(e,t,i),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const s=this.getGui();this.setDragSource(s)}},this.column=e}setComp(e,t,i,s,n){this.comp=e,n=Ha(this,this.beans.context,n),this.setGui(t,n),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(n),this.setupExpandable(n),this.setupTooltip(n),this.setupAutoHeight({wrapperElement:s,compBean:n}),this.setupUserComp(n),this.addHeaderMouseListeners(n),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const o=this.getParentRowCtrl().getPinned(),r=this.column.getProvidedColumnGroup().getLeafColumns();n.createManagedBean(new kg(r,t)),n.createManagedBean(new Eg(this.column,t,this.beans)),n.createManagedBean(new xk(e,this.column)),this.resizeFeature=n.createManagedBean(new Pk(e,i,o,this.column)),n.createManagedBean(new Bn(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(n,r),n.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(n),n.addDestroyFunc(()=>this.clearComponent())}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");i!=null?i===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),i=t[0]===e,s=ae(t)===e;if(!i&&!s)return;const n=e.getHighlighted(),o=!!this.getParentRowCtrl().findHeaderCellCtrl(l=>l.getColumnGroupChild().isMoving());let r=!1,a=!1;if(o){const l=this.beans.gos.get("enableRtl"),c=n===1,u=n===0;i&&(l?a=c:r=u),s&&(l?r=u:a=c)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",r),this.comp.addOrRemoveCssClass("ag-header-highlight-after",a)}getColumn(){return this.column}resizeHeader(e,t){if(!this.resizeFeature)return;const i=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){const{beans:t,eGui:i,column:s,ctrlsService:n}=this,{gos:o,columnModel:r,columnMoveService:a,visibleColsService:l}=t,c=o.get("enableRtl"),u=e===0,d=this.getPinned(),h=i.getBoundingClientRect(),p=h.left,g=h.width,v=ru({x:u!==c?p-20:p+g+20,pinned:d,fromKeyboard:!0,gos:o,ctrlsService:n}),S=s.getGroupId(),m=this.focusService.getFocusedHeader();Ag({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,fromLeft:e===1,xPosition:v,pinned:d,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:r,columnMoveService:a,visibleColsService:l,finished:!0});const C=s.getDisplayedLeafColumns(),w=u?C[0]:ae(C);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(w,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&m&&this.restoreFocus(S,s,m)}restoreFocus(e,t,i){const s=t.getLeafColumns();if(!s.length)return;const n=s[0].getParent();if(!n)return;const o=this.findGroupWidthId(n,e);o&&this.focusService.focusHeaderPosition({headerPosition:{...i,column:o}})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(e){const t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:s=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),s,"gridInitializing")},setTooltip:(s,n)=>{this.setupTooltip(e,s,n)}}),i=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(i)}addHeaderMouseListeners(e){const t=n=>this.handleMouseOverChange(n.type==="mouseenter"),i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),s=n=>this.handleContextMenuMouseEvent(n,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:i,contextmenu:s})}handleMouseOverChange(e){this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const s=this.column.getColGroupDef(),n=this.gos.get("tooltipShowMode")==="whenTruncated",o=this.eGui;!i&&n&&!(s!=null&&s.headerGroupComponent)&&(i=()=>{const a=o.querySelector(".ag-header-group-text");return a?a.scrollWidth>a.clientWidth:!0});const r={getColumn:()=>this.column,getGui:()=>o,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(s&&s.headerTooltip),shouldDisplayTooltip:i};s&&(r.getColDef=()=>s),e.createManagedBean(new Ko(r))}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const e=this.column.getColGroupDef(),t=qy(e,this.gos,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(s=>s.isSpanHeaderHeight())&&t.push("ag-header-span-height")):(t.push("ag-header-group-cell-with-group"),e!=null&&e.wrapHeaderText&&t.push("ag-header-cell-wrap-text")),t.forEach(i=>this.comp.addOrRemoveCssClass(i,!0))}setupMovingCss(e){const i=this.column.getProvidedColumnGroup().getLeafColumns(),s=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());i.forEach(n=>{e.addManagedListeners(n,{movingChanged:s})}),s()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===M.ENTER){const i=this.column,s=!i.isExpanded();this.beans.columnModel.setColumnGroupOpened(i.getProvidedColumnGroup(),s,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;const{beans:t,column:i,displayName:s,gos:n,dragAndDropService:o}=this,{columnModel:r}=t,a=i.getProvidedColumnGroup().getLeafColumns();let l=!n.get("suppressDragLeaveHidesColumns");const c=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>l?"hide":"notAllowed",dragItemName:s,getDragItem:()=>this.getDragItemForGroup(i),onDragStarted:()=>{l=!n.get("suppressDragLeaveHidesColumns"),go(a,!0)},onDragStopped:()=>go(a,!1),onDragCancelled:()=>go(a,!1),onGridEnter:u=>{if(l){const{columns:d=[],visibleState:h}=u??{},p=d.filter(g=>!g.getColDef().lockVisible&&(!h||h[g.getColId()]));r.setColsVisible(p,!0,"uiColumnMoved")}},onGridExit:u=>{var d;if(l){const h=((d=u==null?void 0:u.columns)==null?void 0:d.filter(p=>!p.getColDef().lockVisible))||[];r.setColsVisible(h,!1,"uiColumnMoved")}}};o.addDragSource(c,!0)}getDragItemForGroup(e){const t=e.getProvidedColumnGroup().getLeafColumns(),i={};t.forEach(r=>i[r.getId()]=r.isVisible());const s=[];this.beans.visibleColsService.getAllCols().forEach(r=>{t.indexOf(r)>=0&&(s.push(r),Ct(t,r))}),t.forEach(r=>s.push(r));const n=[],o=e.getLeafColumns();for(const r of s)o.indexOf(r)!==-1&&n.push(r);return{columns:s,columnsInSplit:n,visibleState:i}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(i=>{(i.getColDef().suppressMovable||i.getColDef().lockPosition)&&(e=!0)}),e||this.gos.get("suppressMovableColumns")}destroy(){super.destroy()}},Ek=0,qd=class extends D{constructor(e,t,i){super(),this.instanceId=Ek++,this.rowIndex=e,this.pinned=t,this.type=i;const s=i=="group"?"ag-header-row-column-group":i=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${s}`}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=it(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(e=>e.getGui()!=null):!1}setComp(e,t,i=!0){this.comp=e,t=Ha(this,this.beans.context,t),i&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this);e.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:i=>this.onVirtualColumnsChanged(i.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),e.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return ec(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=it(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleColsService:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{columnModel:e,filterManager:t}=this.beans,i=[],s=e.getGroupRowsHeight(),n=e.getColumnHeaderRowHeight();i.push(...s),i.push(n),t!=null&&t.hasFloatingFilters()&&i.push(e.getFloatingFiltersHeight());let o=0;for(let a=0;a<this.rowIndex;a++)o+=i[a];const r=i[this.rowIndex];return{topOffset:o,rowHeight:r}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){const t=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const s of t)this.recycleAndCreateHeaderCtrls(s,e);const i=s=>{const{focusService:n,visibleColsService:o}=this.beans;return n.isHeaderWrapperFocused(s)?o.isVisible(s.getColumnGroupChild()):!1};if(e)for(const[s,n]of e)i(n)?this.headerCellCtrls.set(s,n):this.destroyBean(n);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){var e;return Array.from(((e=this.headerCellCtrls)==null?void 0:e.values())??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;const i=e.getUniqueId();let s;if(t&&(s=t.get(i),t.delete(i)),s&&s.getColumnGroupChild()!=e&&(this.destroyBean(s),s=void 0),s==null)switch(this.type){case"filter":{s=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break}case"group":s=this.createBean(new Fk(e,this.beans,this));break;default:s=this.createBean(new bk(e,this.beans,this));break}this.headerCellCtrls.set(i,s)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[];const t=this.getActualDepth(),{columnViewportService:i}=this.beans;return["left",null,"right"].forEach(s=>{const n=i.getHeadersToRender(s,t);e=e.concat(n)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;const t=this.getHeaderCellCtrls();let i;return typeof e=="function"?i=t.find(e):i=t.find(s=>s.getColumnGroupChild()==e),i}focusHeader(e,t){const i=this.findHeaderCellCtrl(e);return i?i.focus(t):!1}destroy(){var e;(e=this.headerCellCtrls)==null||e.forEach(t=>{this.destroyBean(t)}),this.headerCellCtrls=void 0,super.destroy()}},kk=class extends D{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);const i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:i,advancedFilterEnabledChanged:i});const s=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;this.ctrlsService.register(s,this),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const t=new Ao,i=this.focusService.getFocusHeaderToUseAfterRefresh(),s=()=>{const a=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let l=0;l<a;l++){const c=this.createBean(new qd(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(c)}},n=()=>{const a=t.next(),l=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==a);(l||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),l&&(this.columnsRowCtrl=this.createBean(new qd(a,this.pinned,"column")))},o=()=>{var c;this.includeFloatingFilter=!!((c=this.filterManager)!=null&&c.hasFloatingFilters())&&!this.hidden;const a=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){a();return}const l=t.next();if(this.filtersRowCtrl){const u=this.filtersRowCtrl.getRowIndex()!==l;(!e||u)&&a()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new qd(l,this.pinned,"filter")))};s(),n(),o();const r=this.getAllCtrls();this.comp.setCtrls(r),this.restoreFocusOnHeader(i)}getHeaderCtrlForColumn(e){var t;if(Ws(e))return(t=this.columnsRowCtrl)==null?void 0:t.getHeaderCellCtrl(e);if(this.groupsRowCtrls.length!==0)for(let i=0;i<this.groupsRowCtrls.length;i++){const s=this.groupsRowCtrls[i].getHeaderCellCtrl(e);if(s)return s}}getHtmlElementForColumnHeader(e){const t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){const i=this.getAllCtrls()[e];return i?i.getType():void 0}focusHeader(e,t,i){const n=this.getAllCtrls()[e];return n?n.focusHeader(t,i):!1}getViewportElement(){return this.eViewport}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){const t=new wk(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;const{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){var t;const e=((t=this.filterManager)==null?void 0:t.hasFloatingFilters())&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new Tg(e=>this.comp.setCenterWidth(`${e}px`),!0))}setupPinnedWidth(){if(this.pinned==null)return;const e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;const i=()=>{const s=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(s==null)return;const n=s==0,o=this.hidden!==n,r=this.gos.get("enableRtl"),a=this.scrollVisibleService.getScrollbarWidth(),c=this.scrollVisibleService.isVerticalScrollShowing()&&(r&&e||!r&&t)?s+a:s;this.comp.setPinnedContainerWidth(`${c}px`),this.comp.setDisplayed(!n),o&&(this.hidden=n,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:i,rightPinnedWidthChanged:i,scrollVisibilityChanged:i,scrollbarWidthChanged:i})}},Ig=class extends D{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},i=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(i,t)}getDomLayout(){const e=this.gos.get("domLayout")??"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(I(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},Mk=class extends ye{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=ee,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null,this.elToFocusAfter=null}wireBeans(e){this.overlayService=e.overlayService,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}handleKeyDown(e){if(e.key!==M.TAB||e.defaultPrevented||Qi(e)||this.focusService.findNextFocusableElement(this.eOverlayWrapper,!1,e.shiftKey))return;let i=!1;e.shiftKey?i=this.focusService.focusGridView(ae(this.visibleColsService.getAllCols()),!0,!1):i=this.focusService.focusNextGridCoreContainer(!1),i&&e.preventDefault()}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList;i.toggle("ag-layout-auto-height",t.autoHeight),i.toggle("ag-layout-normal",t.normal),i.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new Ig(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i,s){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),i&&this.focusService.isGridFocused()){const n=Ie(this.gos);n&&!zw(this.gos)&&(this.elToFocusAfter=n)}e.then(n=>{if(this.activePromise!==e){this.activeOverlay!==n&&(this.destroyBean(n),n=null);return}if(this.activePromise=null,!n)return;if(this.activeOverlay!==n&&(this.eOverlayWrapper.appendChild(n.getGui()),this.activeOverlay=n,s)){const r=n;this.updateListenerDestroyFunc=this.addManagedPropertyListener(s,({currentValue:a})=>{var l;(l=r.refresh)==null||l.call(r,this.gos.addGridCommonParams({...a??{}}))})}const o=this.focusService;i&&o.isGridFocused()&&o.focusInto(this.eOverlayWrapper)})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){var s;this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.focusService.isGridFocused()&&(t=null);const i=this.updateListenerDestroyFunc;i&&(i(),this.updateListenerDestroyFunc=null),this.destroyBean(e),zt(this.eOverlayWrapper),(s=t==null?void 0:t.focus)==null||s.call(t,{preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.overlayService.setOverlayWrapperComp(void 0),super.destroy()}},n1=class extends ye{constructor(e,t){super(),this.direction=t,this.eViewport=ee,this.eContainer=ee,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",hy()||qs())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=fy(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),i=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)}})}attemptSettingScrollPosition(e){const t=this.getViewportElement();UP(()=>Ii(t),()=>this.setScrollPosition(e),100)}getViewportElement(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}},Dk=class extends n1{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=ee,this.eRightSpacer=ee}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new Tg(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let t=this.visibleColsService.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,s=this.scrollVisibleService.getScrollbarWidth();i&&(t+=s),gi(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=s);let n=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(n+=s),gi(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=s)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),s=e&&this.scrollVisibleService.getScrollbarWidth()||0,o=i?0:s===0&&t?16:s;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Ur(this.getGui(),o),Ur(this.eViewport,o),Ur(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return iu(this.getViewportElement(),this.enableRtl)}setScrollPosition(e){Ii(this.getViewportElement())||this.attemptSettingScrollPosition(e),su(this.getViewportElement(),e,this.enableRtl)}},o1=class extends D{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},Tk=class extends n1{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new o1(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,i=e&&this.scrollVisibleService.getScrollbarWidth()||0,s=i===0&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),gi(this.getGui(),s),gi(this.eViewport,s),gi(this.eContainer,s),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,i=e.getGridBodyCtrl().getBodyViewportElement(),s=this.getScrollPosition(),n=i.scrollTop;s!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.getViewportElement().scrollTop}setScrollPosition(e,t){!t&&!Ii(this.getViewportElement())&&this.attemptSettingScrollPosition(e),this.getViewportElement().scrollTop=e}},Ip=(e=>(e.FakeHScrollbar="fakeHScrollComp",e.Header="centerHeader",e.PinnedTop="topCenter",e.PinnedBottom="bottomCenter",e.StickyTop="stickyTopCenter",e.StickyBottom="stickyBottomCenter",e))(Ip||{}),Ak=class extends D{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=mt(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=mt(()=>this.lastScrollSource[0]=null,500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this,"Viewport")});for(const e of Object.values(Ip)){const t=this.ctrlsService.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsService.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?mt(this.onVScroll.bind(this,"Viewport"),100):this.onVScroll.bind(this,"Viewport"),s=t?mt(this.onVScroll.bind(this,"fakeVScrollComp"),100):this.onVScroll.bind(this,"fakeVScrollComp");this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,s)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...Object.values(Ip),"Viewport"]){if(this.lastScrollSource[1]===t)continue;const i=this.getViewportForSource(t);su(i,e,this.enableRtl)}}getViewportForSource(e){return e==="Viewport"?this.centerRowsCtrl.getViewportElement():this.ctrlsService.get(e).getViewportElement()}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;const s=iu(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(s),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;e==="Viewport"?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e==="Viewport"?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{this.eventService.dispatchEvent({...t,type:"bodyScrollEnd"})},100)}shouldBlockScrollUpdate(e,t,i=!1){return i&&!qs()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=mg(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&tu()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll("Viewport")}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){const s=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl&&tu()?e=e>0?0:s:e=Math.min(Math.max(e,0),s)),su(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const i=this.rowModel.getRowCount();let s=-1;for(let n=0;n<i;n++){const o=this.rowModel.getRow(n);if(typeof e=="function"){if(o&&e(o)){s=n;break}}else if(e===o||e===o.data){s=n;break}}s>=0&&this.ensureIndexVisible(s,t)}ensureIndexVisible(e,t){if(it(this.gos,"print"))return;const i=this.rowModel.getRowCount();if(typeof e!="number"||e<0||e>=i){I("Invalid row index for ensureIndexVisible: "+e);return}const n=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{var u;n||(u=this.paginationService)==null||u.goToPageWithIndex(e);const o=this.ctrlsService.getGridBodyCtrl(),r=o.getStickyTopHeight(),a=o.getStickyBottomHeight(),l=this.rowModel.getRow(e);let c;do{const d=l.rowTop,h=l.rowHeight,p=this.pageBoundsService.getPixelOffset(),g=l.rowTop-p,v=g+l.rowHeight,S=this.getVScrollPosition(),m=this.heightScaler.getDivStretchOffset(),C=S.top+m,w=S.bottom+m,R=w-C,b=this.heightScaler.getScrollPositionForPixel(g),P=this.heightScaler.getScrollPositionForPixel(v-R),x=Math.min((b+P)/2,g),F=C+r>g,k=w-a<v;let E=null;t==="top"?E=b:t==="bottom"?E=P:t==="middle"?E=x:F?E=b-r:k&&(E=P+a),E!==null&&(this.setVerticalScrollPosition(E),this.rowRenderer.redraw({afterScroll:!0})),c=d!==l.rowTop||h!==l.rowHeight}while(c);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){const i=this.columnModel.getCol(e);if(!i||i.isPinned()||!this.visibleColsService.isColDisplayed(i))return;const s=this.getPositionedHorizontalScroll(i,t);this.getFrameworkOverrides().wrapIncoming(()=>{s!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(s),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:s}=this.isColumnOutsideViewport(e),n=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),r=this.enableRtl;let a=(r?i:s)||n,l=r?s:i;t!=="auto"&&(a=t==="start",l=t==="end");const c=t==="middle";if(a||l||c){const{colLeft:u,colMiddle:d,colRight:h}=this.getColumnBounds(e);return c?d-o/2:a?r?h:u:r?u-o:h-o}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:s,colRight:n}=this.getColumnBounds(e),o=this.enableRtl,r=o?t>n:i<n,a=o?i<s:t>s;return{columnBeforeStart:r,columnAfterEnd:a}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleColsService.getBodyContainerWidth(),s=e.getActualWidth(),n=e.getLeft(),o=t?-1:1,r=t?i-n:n,a=r+s*o,l=r+s/2*o;return{colLeft:r,colMiddle:l,colRight:a}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),i=t,s=e+t;return{start:i,end:s,width:e}}},Ik=class extends D{wireBeans(e){this.animationFrameService=e.animationFrameService,this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const e=()=>{this.animationFrameService.requestAnimationFrame(()=>{this.onCenterViewportResized()})};this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleService.onCentreViewportResized(),this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=Wa(e);if(t<=50)return;let i=this.getPinnedColumnsOverflowingViewport(t-50);const s=this.gos.getCallback("processUnpinnedColumns");i.length&&(s&&(i=s({columns:i,viewportWidth:t})),this.columnModel.setColsPinned(i,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){const t=this.pinnedWidthService.getPinnedRightWidth(),i=this.pinnedWidthService.getPinnedLeftWidth(),s=t+i;if(s<e)return[];const n=[...this.visibleColsService.getLeftCols()],o=[...this.visibleColsService.getRightCols()];let r=0,a=0;const l=0,c=[];let u=s-l-e;for(;(a<n.length||r<o.length)&&u>0;){if(r<o.length){const d=o[r++];u-=d.getActualWidth(),c.push(d)}if(a<n.length&&u>0){const d=n[a++];u-=d.getActualWidth(),c.push(d)}}return c}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=mg(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventService.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},Lk=class extends D{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{is(this.gos)?this.enableFeature():this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),is(this.gos)&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},Ok=class extends ye{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[yg]),this.eCheckbox=ee}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),i=hg(e,t),[s,n]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],o=e(s,n);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${o} (${i})`)}onClicked(e,t,i){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:i.shiftKey,groupSelectsFiltered:t,event:i,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:s=>Do(s),click:s=>{Do(s);const n=ag(this.gos)==="filteredDescendants",o=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(o,n)?this.onClicked(!0,n,s||{})===0&&this.onClicked(!1,n,s):o?this.onClicked(!1,n,s):this.onClicked(!0,n,s||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),rg(this.gos)||typeof this.getIsVisible()=="function"){const s=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:s}),this.addManagedListeners(this.rowNode,{dataChanged:s,cellChanged:s}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&ke(this.gos)}showOrHideSelect(){var n,o,r;let e=this.rowNode.selectable;const t=this.getIsVisible();if(e)if(typeof t=="function"){const a=(n=this.overrides)==null?void 0:n.callbackParams;if(!this.column)e=t({...a,node:this.rowNode,data:this.rowNode.data});else{const l=this.column.createColumnFunctionCallbackParams(this.rowNode);e=t({...a,...l})}}else e=t??!1;const i=this.gos.get("rowSelection");if(i&&typeof i!="string"?!QP(i):(o=this.column)==null?void 0:o.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!e),this.setVisible(!0),this.setDisplayed(!0);return}if((r=this.overrides)!=null&&r.removeHidden){this.setDisplayed(e);return}this.setVisible(e)}getIsVisible(){var t,i;if(this.overrides)return this.overrides.isVisible;const e=this.gos.get("rowSelection");return e&&typeof e!="string"?Mo(e):(i=(t=this.column)==null?void 0:t.getColDef())==null?void 0:i.checkboxSelection}},Bk=class extends ye{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(Gt("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);const i=()=>{try{const s=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",s),e.dataTransfer.setData("text/plain",s)}catch{}};if(t){const s=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e});t(s)}else i()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},Nk=class extends D{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),{cellClassRules:t}=e,i=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,i,s=>this.cellComp.addOrRemoveCssClass(s,!0),s=>this.cellComp.addOrRemoveCssClass(s,!1)),this.cellClassRules=t}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){const i=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),s=e.cellStyle;t=s(i)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){const e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!0))}destroy(){super.destroy()}},_k=class extends D{constructor(e,t,i,s,n){super(),this.cellCtrl=e,this.beans=t,this.rowNode=s,this.rowCtrl=n}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case M.ENTER:this.onEnterKeyDown(e);break;case M.F2:this.onF2KeyDown(e);break;case M.ESCAPE:this.onEscapeKeyDown(e);break;case M.TAB:this.onTabKeyDown(e);break;case M.BACKSPACE:case M.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case M.DOWN:case M.UP:case M.RIGHT:case M.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:s,rowNode:n}=this,{gos:o,rangeService:r,eventService:a}=s;if(!i.isEditing()){if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),wE(e,o.get("enableCellEditingOnBackspace"))){if(r&&is(o))r.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const l=i.getColumn(),c=this.beans.valueService.getDeleteValue(l,n);n.setDataValue(l,c,"cellClear")}}else i.startRowOrCellEdit(e,t);a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){const t=e.shiftKey?M.UP:M.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(M.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(M.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const s=e.key;s===" "?this.onSpaceKeyDown(e):this.cellCtrl.startRowOrCellEdit(s,e)&&e.preventDefault()}onSpaceKeyDown(e){const{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&$c(t)){const i=this.rowNode.isSelected(),s=!i,n=ag(t)==="filteredDescendants",o=this.rowNode.setSelectedParams({newValue:s,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"});i===void 0&&o===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"})}e.preventDefault()}destroy(){super.destroy()}},Gk=class extends D{constructor(e,t,i){super(),this.cellCtrl=e,this.beans=t,this.column=i}onMouseEvent(e,t){if(!Qi(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}const{eventService:t,rangeService:i,gos:s}=this.beans,n=e.ctrlKey||e.metaKey;i&&n&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);const o=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(o);const r=this.column.getColDef();r.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{r.onCellClicked(o)})},0),(s.get("singleClickEdit")||r.singleClickEdit)&&!s.get("suppressClickEdit")&&!(e.shiftKey&&(i==null?void 0:i.getCellRanges().length)!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!qs()||Jw("dblclick"))return!1;const e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:s}=this,{eventService:n,frameworkOverrides:o,gos:r}=i,a=t.getColDef(),l=s.createEvent(e,"cellDoubleClicked");n.dispatchEvent(l),typeof a.onCellDoubleClicked=="function"&&window.setTimeout(()=>{o.wrapOutgoing(()=>{a.onCellDoubleClicked(l)})},0),!r.get("singleClickEdit")&&!r.get("suppressClickEdit")&&s.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:s}=e,n=e.target,{cellCtrl:o,beans:r}=this,{eventService:a,rangeService:l,focusService:c,gos:u}=r;if(this.isRightClickInExistingRange(e))return;const d=l&&l.getCellRanges().length!=0;if(!s||!d){const p=u.get("enableCellTextSelection")&&e.defaultPrevented,g=(Ai()||p)&&!o.isEditing()&&!gg(n);o.focusCell(g)}if(s&&d&&!c.isCellFocused(o.getCellPosition())){e.preventDefault();const h=c.getFocusedCell();if(h){const{column:p,rowIndex:g,rowPinned:v}=h,S=r.rowRenderer.getRowByPosition({rowIndex:g,rowPinned:v}),m=S==null?void 0:S.getCellCtrl(p);m!=null&&m.isEditing()&&m.stopEditing(),c.setFocusedCell({column:p,rowIndex:g,rowPinned:v,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(n)){if(l){const h=this.cellCtrl.getCellPosition();if(s)l.extendLatestRangeToCell(h);else{const p=t||i;l.setRangeToCell(h,p)}}a.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeService:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),s=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&s)return!0}return!1}containsWidget(e){return fo(e,"ag-selection-checkbox",3)}onMouseOut(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),this.beans.columnHoverService.clearMouseOver())}onMouseOver(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),this.beans.columnHoverService.setMouseOver([this.column]))}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.getGui(),i=t.contains(e.target),s=t.contains(e.relatedTarget);return i&&s}destroy(){super.destroy()}},Hk=class extends D{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();$s(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let i=this.column;const s=this.column.getPinned();for(let n=0;i&&n<e&&(t.push(i),i=this.beans.visibleColsService.getColAfter(i),!(!i||le(i)||s!==i.getPinned()));n++);}return t}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=ae(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;const t=this.beans.visibleColsService.getColsLeftWidth();if(this.column.getPinned()==="right"){const i=this.beans.visibleColsService.getBodyContainerWidth();return t+i+(e||0)}return t+(e||0)}applyRowSpan(e){if(this.rowSpan===1&&!e)return;const i=Sn(this.beans.gos)*this.rowSpan;this.eGui.style.height=`${i}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},pr="ag-cell-range-selected",Vk="ag-cell-range-chart",Wk="ag-cell-range-single-cell",zk="ag-cell-range-chart-category",jk="ag-cell-range-handle",Uk="ag-cell-range-top",Kk="ag-cell-range-right",$k="ag-cell-range-bottom",qk="ag-cell-range-left",Yk=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onCellSelectionChanged()}onCellSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(pr,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${pr}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${pr}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${pr}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${pr}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(Vk,this.hasChartRange),Zc(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(Wk,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),i=!t&&e.top,s=!t&&e.right,n=!t&&e.bottom,o=!t&&e.left;this.cellComp.addOrRemoveCssClass(Uk,i),this.cellComp.addOrRemoveCssClass(Kk,s),this.cellComp.addOrRemoveCssClass($k,n),this.cellComp.addOrRemoveCssClass(qk,o)}isSingleCell(){const{rangeService:e}=this.beans;return this.rangeCount===1&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every(i=>wn([1,0],i.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gos.get("enableRtl");let t=!1,i=!1,s=!1,n=!1;const o=this.cellCtrl.getCellPosition().column,r=this.beans.visibleColsService;let a,l;e?(a=r.getColAfter(o),l=r.getColBefore(o)):(a=r.getColBefore(o),l=r.getColAfter(o));const c=this.rangeService.getCellRanges().filter(u=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),u));a||(n=!0),l||(i=!0);for(let u=0;u<c.length&&!(t&&i&&s&&n);u++){const d=c[u],h=this.rangeService.getRangeStartRow(d),p=this.rangeService.getRangeEndRow(d);!t&&this.beans.rowPositionUtils.sameRow(h,this.cellCtrl.getCellPosition())&&(t=!0),!s&&this.beans.rowPositionUtils.sameRow(p,this.cellCtrl.getCellPosition())&&(s=!0),!n&&a&&d.columns.indexOf(a)<0&&(n=!0),!i&&l&&d.columns.indexOf(l)<0&&(i=!0)}return{top:t,right:i,bottom:s,left:n}}refreshHandle(){if(this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(jk,!!this.selectionHandle)}shouldHaveSelectionHandle(){const e=this.beans.gos,t=this.rangeService.getCellRanges(),i=t.length;if(this.rangeCount<1||i<1)return!1;const s=ae(t),n=this.cellCtrl.getCellPosition(),o=WC(e)&&!this.cellCtrl.isSuppressFillHandle(),r=ex(e);let a=i===1&&!this.cellCtrl.isEditing()&&(o||r);if(this.hasChartRange){const c=t[0].type===1&&this.rangeService.isCellInSpecificRange(n,t[0]);this.cellComp.addOrRemoveCssClass(zk,c),a=s.type===0}return a&&s.endRow!=null&&this.rangeService.isContiguousRange(s)&&this.rangeService.isBottomRightCell(s,n)}addSelectionHandle(){const e=ae(this.rangeService.getCellRanges()).type,i=WC(this.beans.gos)&&le(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(i)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},Qk="ag-cell",Xk="ag-cell-auto-height",Jk="ag-cell-normal-height",Zk="ag-cell-focus",eM="ag-cell-first-right-pinned",tM="ag-cell-last-left-pinned",iM="ag-cell-not-inline-editing",sM="ag-column-hover",nM="ag-cell-wrap-text",oM=0,r1=class Lp extends D{constructor(t,i,s,n){super(),this.column=t,this.rowNode=i,this.beans=s,this.rowCtrl=n,this.cellRangeFeature=void 0,this.cellPositionFeature=void 0,this.cellCustomStyleFeature=void 0,this.tooltipFeature=void 0,this.cellMouseListenerFeature=void 0,this.cellKeyboardListenerFeature=void 0,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],this.instanceId=t.getId()+"-"+oM++,this.colIdSanitised=Ti(this.column.getId()),this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusService.clearRestoreFocus()}addFeatures(){this.cellPositionFeature=new Hk(this,this.beans),this.cellCustomStyleFeature=new Nk(this,this.beans),this.cellMouseListenerFeature=new Gk(this,this.beans,this.column),this.cellKeyboardListenerFeature=new _k(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature(),this.beans.rangeService&&is(this.beans.gos)&&(this.cellRangeFeature=new Yk(this.beans,this))}removeFeatures(){const t=this.beans.context;this.cellPositionFeature=t.destroyBean(this.cellPositionFeature),this.cellCustomStyleFeature=t.destroyBean(this.cellCustomStyleFeature),this.cellMouseListenerFeature=t.destroyBean(this.cellMouseListenerFeature),this.cellKeyboardListenerFeature=t.destroyBean(this.cellKeyboardListenerFeature),this.cellRangeFeature=t.destroyBean(this.cellRangeFeature),this.disableTooltipFeature()}enableTooltipFeature(t,i){const s=()=>{const r=this.column.getColDef(),a=this.rowNode.data;if(r.tooltipField&&N(a))return jr(a,r.tooltipField,this.column.isTooltipFieldContainsDots());const l=r.tooltipValueGetter;return l?l(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},n=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!i&&n&&!this.isCellRenderer()&&(i=()=>{const r=this.getGui(),a=r.children.length===0?r:r.querySelector(".ag-cell-value");return a?a.scrollWidth>a.clientWidth:!0});const o={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:s,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:i};this.tooltipFeature=new Ko(o,this.beans)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(t,i,s,n,o,r){var a,l,c,u;this.cellComp=t,this.eGui=i,this.printLayout=n,r??(r=this),this.addDomData(r),this.addFeatures(),r.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(s,r),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(a=this.cellPositionFeature)==null||a.setComp(i),(l=this.cellCustomStyleFeature)==null||l.setComp(t),(c=this.tooltipFeature)==null||c.refreshToolTip(),(u=this.cellKeyboardListenerFeature)==null||u.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,i),o&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(d=>d()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t,i){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!t)return;const s=t.parentElement,n=Vs(this.beans.gos,this.rowNode).height,o=l=>{if(this.editing||!this.isAlive()||!i.isAlive())return;const{paddingTop:c,paddingBottom:u,borderBottomWidth:d,borderTopWidth:h}=On(s),p=c+u+d+h,v=t.offsetHeight+p;if(l<5){const m=Ge(this.beans.gos),C=!m||!m.contains(t),w=v==0;if(C||w){window.setTimeout(()=>o(l+1),0);return}}const S=Math.max(v,n);this.rowNode.setRowAutoHeight(S,this.column)},r=()=>o(0);r();const a=this.beans.resizeObserverService.observeResize(t,r);i.addDestroyFunc(()=>{a(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(t=!1){var h;const{beans:i,column:s,rowNode:n,cellRangeFeature:o,cellComp:r}=this,{userComponentFactory:a,animationFrameService:l}=i,c=this.getValueToDisplay();let u;if(n.stub&&((h=n.groupData)==null?void 0:h[this.column.getId()])==null){const p=this.createCellRendererParams();u=a.getLoadingCellRendererDetails(s.getColDef(),p)}else if(this.isCellRenderer()){const p=this.createCellRendererParams();u=a.getCellRendererDetails(s.getColDef(),p)}r.setRenderDetails(u,c,t),l.requestAnimationFrame(()=>o==null?void 0:o.refreshHandle())}setupControlComps(){const t=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(t)),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return this.rowNode.rowPinned!=null?!1:typeof t=="function"||t===!0}isCheckboxSelection(t){const{rowSelection:i}=this.beans.gridOptions;return t.checkboxSelection||Ga(this.column)&&i&&typeof i!="string"&&Mo(i)}refreshShouldDestroy(){const t=this.column.getColDef(),i=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(t)),s=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),n=this.includeDndSource!=this.isIncludeControl(t.dndSource),o=this.isAutoHeight!=this.column.isAutoHeight();return i||s||n||o}startEditing(t=null,i=!1,s=null){const{editService:n}=this.beans;return!this.isCellEditable()||this.editing||!n?!0:this.cellComp?n.startEditing(this,t,i,s):(this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,i,s)}),!0)}setEditing(t,i){this.editCompDetails=i,this.editing!==t&&(this.editing=t)}stopRowOrCellEdit(t=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(t):this.stopEditing(t)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(t=!1){this.onCellEditorAttachedFuncs=[];const{editService:i}=this.beans;return!this.editing||!i?!1:i.stopEditing(this,t)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.beans.valueService.getValueForDisplay(this.column,this.rowNode),setValue:i=>this.beans.valueService.setValue(this.rowNode,this.column,i),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(i,s,n,o)=>this.registerRowDragger(i,s,o),setTooltip:(i,s)=>{var n;this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(i,s),(n=this.tooltipFeature)==null||n.refreshToolTip()}})}setFocusOutOnEditor(){var t;this.editing&&((t=this.beans.editService)==null||t.setFocusOutOnEditor(this))}setFocusInOnEditor(){var t;this.editing&&((t=this.beans.editService)==null||t.setFocusInOnEditor(this))}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){var i;this.refreshShouldDestroy()?(i=this.rowCtrl)==null||i.recreateCell(this):this.refreshCell(t)}refreshCell(t){var u,d,h,p,g;if(this.suppressRefreshCell||this.editing)return;const i=this.column.getColDef(),s=t!=null&&!!t.newData,n=t!=null&&!!t.suppressFlash||!!i.suppressCellFlash,o=i.field==null&&i.valueGetter==null&&i.showRowGroup==null,r=t&&t.forceRefresh||o||s,a=!!this.cellComp,l=this.updateAndFormatValue(a),c=r||l;if(a){if(c){this.showValue(s);const v=(u=this.beans.filterManager)==null?void 0:u.isSuppressFlashingCellsBecauseFiltering();!n&&!v&&(this.beans.gos.get("enableCellChangeFlash")||i.enableCellChangeFlash)&&this.flashCell(),(d=this.cellCustomStyleFeature)==null||d.applyUserStyles(),(h=this.cellCustomStyleFeature)==null||h.applyClassesFromColDef()}(p=this.tooltipFeature)==null||p.refreshToolTip(),(g=this.cellCustomStyleFeature)==null||g.applyCellClassRules()}}stopEditingAndFocus(t=!1,i=!1){var s;(s=this.beans.editService)==null||s.stopEditingAndFocus(this,t,i)}flashCell(t){const i=(t==null?void 0:t.flashDuration)??(t==null?void 0:t.flashDelay),s=(t==null?void 0:t.fadeDuration)??(t==null?void 0:t.fadeDelay);this.animateCell("data-changed",i,s)}animateCell(t,i,s){if(!this.cellComp)return;const{gos:n}=this.beans;if(i||(i=n.get("cellFlashDuration")),i===0)return;N(s)||(s=n.get("cellFadeDuration"));const o=`ag-cell-${t}`,r=`ag-cell-${t}-animation`;this.cellComp.addOrRemoveCssClass(o,!0),this.cellComp.addOrRemoveCssClass(r,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(o,!1),this.cellComp.addOrRemoveCssClass(r,!0),this.eGui.style.transition=`background-color ${s}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(r,!1),this.eGui.style.transition="")},s))},i)})}onFlashCells(t){if(!this.cellComp)return;const i=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[i]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){return this.callValueFormatter(t)??t}callValueFormatter(t){return this.beans.valueService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){const i=this.value,s=this.valueFormatted;return this.value=this.beans.valueService.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),t?!this.valuesAreEqual(i,this.value)||this.valueFormatted!=s:!0}valuesAreEqual(t,i){const s=this.column.getColDef();return s.equals?s.equals(t,i):t===i}getComp(){return this.cellComp}getValue(){return this.value}addDomData(t){const i=this.getGui();Dn(this.beans.gos,i,Lp.DOM_DATA_KEY_CELL_CTRL,this),t.addDestroyFunc(()=>Dn(this.beans.gos,i,Lp.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,i){return this.beans.gos.addGridCommonParams({type:i,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})}processCharacter(t){var i;(i=this.cellKeyboardListenerFeature)==null||i.processCharacter(t)}onKeyDown(t){var i;(i=this.cellKeyboardListenerFeature)==null||i.onKeyDown(t)}onMouseEvent(t,i){var s;(s=this.cellMouseListenerFeature)==null||s.onMouseEvent(t,i)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var t;this.cellComp&&((t=this.cellPositionFeature)==null||t.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:t,column:i,beans:s}=this;Yy(t,i,s.visibleColsService)}refreshAriaColIndex(){const t=this.beans.visibleColsService.getAriaColIndex(this.column);uy(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var t;return(t=this.cellPositionFeature)==null?void 0:t.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,i=null){return this.cellComp?this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,i):(this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(t,i)}),!0)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}onSuppressCellFocusChanged(t){this.eGui&&ti(this.eGui,"tabindex",t?void 0:-1)}onFirstRightPinnedChanged(){if(!this.cellComp)return;const t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(eM,t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(tM,t)}onCellFocused(t){if(this.beans.focusService.isCellFocusSuppressed())return;const i=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){i&&(t!=null&&t.forceBrowserFocus)&&(this.focusEventToRestore=t);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(Zk,i),i&&t&&t.forceBrowserFocus){let n=this.cellComp.getFocusableElement();if(this.editing){const o=this.beans.focusService.findFocusableElements(n,null,!0);o.length&&(n=o[0])}n.focus({preventScroll:!!t.preventScrollOnBrowserFocus})}const s=this.beans.gos.get("editType")==="fullRow";!i&&!s&&this.editing&&this.stopRowOrCellEdit(),i&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:Yi(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(Qk,!0),this.cellComp.addOrRemoveCssClass(iM,!0);const t=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(Xk,t),this.cellComp.addOrRemoveCssClass(Jk,!t)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(sM,t)}onColDefChanged(){var i;if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?(i=this.beans.editService)==null||i.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){const t=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(nM,t)}dispatchCellContextMenuEvent(t){const i=this.column.getColDef(),s=this.createEvent(t,"cellContextMenu");this.beans.eventService.dispatchEvent(s),i.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{i.onCellContextMenu(s)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const t=new Ok;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){const t=new Bk(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,i,s){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,i);return}const n=this.createRowDragComp(t,i,s);n&&(this.customRowDragComp=n,this.addDestroyFunc(()=>{this.beans.context.destroyBean(n),this.customRowDragComp=null}))}createRowDragComp(t,i,s){const n=this.beans.gos.get("pagination"),o=this.beans.gos.get("rowDragManaged"),r=ke(this.beans.gos);if(o){if(!r){I("managed row dragging is only allowed in the Client Side Row Model");return}if(n){I("managed row dragging is not possible when doing pagination");return}}const a=new kp(()=>this.value,this.rowNode,this.column,t,i,s);return this.beans.context.createBean(a),a}setSuppressRefreshCell(t){this.suppressRefreshCell=t}getEditCompDetails(){return this.editCompDetails}onCellEditorAttached(t){this.onCellEditorAttachedFuncs.push(t)}cellEditorAttached(){this.onCellEditorAttachedFuncs.forEach(t=>t()),this.onCellEditorAttachedFuncs=[]}};r1.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var yn=r1,rM=0,a1=class Op extends D{constructor(t,i,s,n,o){var r;super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=i,this.gos=i.gos,this.rowNode=t,this.paginationPage=((r=i.paginationService)==null?void 0:r.getCurrentPage())??0,this.useAnimationFrameForCreate=n,this.printLayout=o,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=t.id+"-"+rM++,this.rowId=Ti(t.id),this.initRowBusinessKey(),this.rowFocused=i.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=i.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(s),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=Ti(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}isSticky(){return this.rowNode.sticky}updateGui(t,i){t==="left"?this.leftGui=i:t==="right"?this.rightGui=i:t==="fullWidth"?this.fullWidthGui=i:this.centerGui=i}setComp(t,i,s,n){n=Ha(this,this.beans.context,n);const o={rowComp:t,element:i,containerType:s,compBean:n};this.allRowGuis.push(o),this.updateGui(s,o),this.initialiseRowComp(o),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){this.allRowGuis=this.allRowGuis.filter(i=>i.containerType!==t),this.updateGui(t,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){const i=t?"none":"";this.allRowGuis.forEach(s=>s.element.style.display=i)}initialiseRowComp(t){const i=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),$c(i)&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);const s=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(o=>s.addOrRemoveCssClass(o,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&Jc(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(s),this.setRowCompRowBusinessKey(s),Dn(i,t.element,Op.DOM_DATA_KEY_ROW_CTRL,this),t.compBean.addDestroyFunc(()=>Dn(i,t.element,Op.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t),this.isFullWidth()&&this.setupFullWidth(t),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKeySanitised!=null&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=Ti(this.rowNode.id),this.rowId!=null&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){const{containerType:i}=t;this.slideInAnimation[i]&&(HC(()=>{this.onTopChanged()}),this.slideInAnimation[i]=!1),this.fadeInAnimation[i]&&(HC(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[i]=!1)}addRowDraggerToRow(t){if(is(this.gos)){I("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `cellSelection: true`");return}const i=this.beans.localeService.getLocaleTextFunc(),s=new kp(()=>`1 ${i("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0),n=this.createBean(s,this.beans.context);this.rowDragComps.push(n),t.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(o=>o!==n),this.destroyBean(n,this.beans.context)})}setupFullWidth(t){const i=this.getPinnedForContainer(t.containerType);if(this.rowType=="FullWidthDetail"&&!this.gos.assertModuleRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)"))return;const s=this.createFullWidthCompDetails(t.element,i);t.rowComp.showFullWidth(s)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var t,i;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(s=>{var n;return(n=s==null?void 0:s.rowComp)==null?void 0:n.getFullWidthCellRenderer()}):[(i=(t=this.fullWidthGui)==null?void 0:t.rowComp)==null?void 0:i.getFullWidthCellRenderer()]}getCellElement(t){const i=this.getCellCtrl(t);return i?i.getGui():null}executeProcessRowPostCreateFunc(){const t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;const i={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(i)}areAllContainersReady(){const t=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),i=!!this.centerGui,s=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return t&&i&&s}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this.rowNode}):!1}setRowType(){const t=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),i=this.isNodeFullWidthCell(),s=this.gos.get("masterDetail")&&this.rowNode.detail,n=this.beans.columnModel.isPivotMode(),r=!!this.rowNode.group&&!this.rowNode.footer&&Nu(this.gos,n);t?this.rowType="FullWidthLoading":s?this.rowType="FullWidthDetail":i?this.rowType="FullWidth":r?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,i=!1){if(this.isFullWidth())return;if(t||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(i);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(t,i,s=null){const n={list:[],map:{}},o=(r,a)=>{n.list.push(a),n.map[r]=a};return i.forEach(r=>{const a=r.getInstanceId();let l=t.map[a];l||(l=new yn(r,this.rowNode,this.beans,this)),o(a,l)}),t.list.forEach(r=>{const a=r.getColumn().getInstanceId();if(n.map[a]!=null)return;if(!this.isCellEligibleToBeRemoved(r,s)){o(a,r);return}r.destroy()}),n}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(i=>{const s=this.getCellCtrlsForContainer(i.containerType);i.rowComp.setCellCtrls(s,t)})}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const t=this.beans.columnViewportService,i=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const s=t.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,s);const n=i.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");const o=i.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,o,"right")}}isCellEligibleToBeRemoved(t,i){if(t.getColumn().getPinned()!=i)return!0;const r=t.isEditing(),a=this.beans.focusService.isCellFocused(t.getCellPosition());if(r||a){const c=t.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(c)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||it(this.gos,"print")}listenOnDomOrder(t){const i=()=>{t.rowComp.setDomOrder(this.getDomOrder())};t.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],i)}setAnimateFlags(t){if(this.isSticky()||!t)return;const i=N(this.rowNode.oldRowTop),s=this.beans.visibleColsService.isPinningLeft(),n=this.beans.visibleColsService.isPinningRight();if(i){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=s,this.slideInAnimation.right=n}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=s,this.fadeInAnimation.right=n}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const t=(a,l)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,l).params):!0,i=t(this.fullWidthGui,null),s=t(this.centerGui,null),n=t(this.leftGui,"left"),o=t(this.rightGui,"right");return i&&s&&n&&o}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(i=>{this.addRowDraggerToRow(i)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())},cellChanged:t=>{this.getAllCellCtrls().forEach(i=>i.onCellChanged(t))}})}onRowNodeDataChanged(t){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(s=>s.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(s=>{this.setRowCompRowId(s.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(s.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const t=this.rowNode.highlighted;this.allRowGuis.forEach(i=>{const s=t===0,n=t===1;i.rowComp.addOrRemoveCssClass("ag-row-highlight-above",s),i.rowComp.addOrRemoveCssClass("ag-row-highlight-below",n)})}postProcessRowDragging(){const t=this.rowNode.dragging;this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){const t=this.rowNode.isExpandable(),i=this.rowNode.expanded==!0;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass("ag-row-group",t),s.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&i),s.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!i),Jc(s.element,t&&i)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Yi(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}findFullWidthRowGui(t){return this.allRowGuis.find(i=>i.element.contains(t))}onKeyboardNavigate(t){const i=this.findFullWidthRowGui(t.target);if(!((i?i.element:null)===t.target))return;const o=this.rowNode,r=this.beans.focusService.getFocusedCell(),a={rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:(r==null?void 0:r.column)??this.getColumnForFullWidth(i)};this.beans.navigationService.navigateToNextCell(t,t.key,a,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||Qi(t))return;const i=this.allRowGuis.find(l=>l.element.contains(t.target)),s=i?i.element:null,n=s===t.target,o=Ie(this.gos);let r=!1;s&&o&&(r=s.contains(o)&&o.classList.contains("ag-cell"));let a=null;!n&&!r&&(a=this.beans.focusService.findNextFocusableElement(s,!1,t.shiftKey)),(this.isFullWidth()&&n||!a)&&this.beans.navigationService.onTabKeyDown(this,t)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var i;const t=(i=this.allRowGuis.find(s=>Ii(s.element)))==null?void 0:i.element;return t?t.getBoundingClientRect().top:0}onSuppressCellFocusChanged(t){const i=this.isFullWidth()&&t?void 0:-1;this.allRowGuis.forEach(s=>{ti(s.element,"tabindex",i)})}onFullWidthRowFocused(t){var o;const i=this.rowNode,s=t?this.isFullWidth()&&t.rowIndex===i.rowIndex&&t.rowPinned==i.rowPinned:!1,n=this.fullWidthGui?this.fullWidthGui.element:(o=this.centerGui)==null?void 0:o.element;n&&(n.classList.toggle("ag-full-width-focus",s),s&&(t!=null&&t.forceBrowserFocus)&&n.focus({preventScroll:!0}))}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),t.destroy(),this.updateColumnLists()}removeCellCtrl(t,i){const s={list:[],map:{}};return t.list.forEach(n=>{n!==i&&(s.list.push(n),s.map[n.getColumn().getInstanceId()]=n)}),s}onMouseEvent(t,i){switch(t){case"dblclick":this.onRowDblClick(i);break;case"click":this.onRowClick(i);break;case"touchstart":case"mousedown":this.onRowMouseDown(i);break}}createRowEvent(t,i){return this.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:i})}createRowEventWithSource(t,i){const s=this.createRowEvent(t,i);return s.source=this,s}onRowDblClick(t){Qi(t)||this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",t))}getColumnForFullWidth(t){const{visibleColsService:i}=this.beans;switch(t==null?void 0:t.containerType){case"center":return i.getCenterCols()[0];case"left":return i.getLeftCols()[0];case"right":return i.getRightCols()[0];default:return i.getAllCols()[0]}}onRowMouseDown(t){if(this.lastMouseDownOnDragger=fo(t.target,"ag-row-drag",3),!this.isFullWidth())return;const i=this.rowNode;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();const s=this.findFullWidthRowGui(t.target),n=s==null?void 0:s.element,o=t.target;let r=!0;n&&n.contains(o)&&gg(o)&&(r=!1),this.beans.focusService.setFocusedCell({rowIndex:i.rowIndex,column:this.getColumnForFullWidth(s),rowPinned:i.rowPinned,forceBrowserFocus:r})}onRowClick(t){if(Qi(t)||this.lastMouseDownOnDragger)return;const{gos:s}=this;this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowClicked",t));const n=t.ctrlKey||t.metaKey,o=t.shiftKey,r=this.rowNode.isSelected(),a=Tn(s),l=zC(s),c=tx(s);if(a&&this.rowNode.group||this.isRowSelectionBlocked()||!c&&!r||!l&&r)return;const u=ix(s),d="rowClicked";if(r)u?this.rowNode.setSelectedParams({newValue:!1,event:t,source:d}):n?l&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:d}):c&&this.rowNode.setSelectedParams({newValue:!0,clearSelection:!o,rangeSelect:o,event:t,source:d});else{const h=u?!1:!n;this.rowNode.setSelectedParams({newValue:!0,clearSelection:h,rangeSelect:o,event:t,source:d})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!$c(this.gos)}setupDetailRowAutoHeight(t){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;const i=()=>{const n=t.clientHeight;if(n!=null&&n>0){const o=()=>{this.rowNode.setRowHeight(n),(ke(this.gos)||Oi(this.gos))&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(o,0)}},s=this.beans.resizeObserverService.observeResize(t,i);this.addDestroyFunc(s),i()}createFullWidthCompDetails(t,i){const{gos:s,rowNode:n}=this,o=s.addGridCommonParams({fullWidth:!0,data:n.data,node:n,value:n.key,valueFormatted:n.key,eGridCell:t,eParentOfValue:t,pinned:i,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(a,l,c,u)=>this.addFullWidthRowDragging(a,l,c,u),setTooltip:(a,l)=>this.refreshRowTooltip(a,l)}),r=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return r.getFullWidthDetailCellRendererDetails(o);case"FullWidthGroup":return r.getFullWidthGroupCellRendererDetails(o);case"FullWidthLoading":return r.getFullWidthLoadingCellRendererDetails(o);default:return r.getFullWidthCellRendererDetails(o)}}refreshRowTooltip(t,i){if(!this.fullWidthGui)return;const s={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>t,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Ko(s,this.beans))}addFullWidthRowDragging(t,i,s="",n){if(!this.isFullWidth())return;const o=new kp(()=>s,this.rowNode,void 0,t,i,n);this.createBean(o,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(o,this.beans.context)})}onUiLevelChanged(){const t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){const i="ag-row-level-"+t,s="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass(i,!0),n.rowComp.addOrRemoveCssClass(s,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){const t=this.isFirstRowOnPage(),i=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==i&&(this.lastRowOnPage=i,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-last",i)))}stopEditing(t=!1){var i;this.stoppingRowEdit||(i=this.beans.rowEditService)==null||i.stopEditing(this,t)}setInlineEditingCss(){const t=this.editingRow||this.getAllCellCtrls().some(i=>i.isEditing());this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),i.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t}startRowEditing(t=null,i=null,s=null){var n;return this.editingRow?!0:((n=this.beans.rowEditService)==null?void 0:n.startEditing(this,t,i,s))??!0}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(i=>{this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass(i,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,i){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(i,s=>s.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"||t==="right"?t:null}getInitialRowClasses(t){const i=this.getPinnedForContainer(t),s={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:i};return this.beans.rowCssClassCalculator.getInitialRowClasses(s)}processStylesFromGridOptions(){const t=this.gos.get("rowStyle");if(t&&typeof t=="function"){I("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}const i=this.gos.getCallback("getRowStyle");let s;if(i){const n={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};s=i(n)}return s||t?Object.assign({},t,s):this.emptyStyle}onRowSelected(t){const i=!!this.rowNode.isSelected();this.forEachGui(t,s=>{s.rowComp.addOrRemoveCssClass("ag-row-selected",i),Zc(s.element,i),s.element.contains(Ie(this.gos))&&(s===this.centerGui||s===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;const t=this.rowNode.isSelected();if(t&&!zC(this.gos))return;const s=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(s,"rowSelection")}addHoverFunctionality(t){if(!this.active)return;const{element:i,compBean:s}=t,{rowNode:n,beans:o,gos:r}=this;s.addManagedListeners(i,{mouseenter:()=>n.onMouseEnter(),mouseleave:()=>n.onMouseLeave()}),s.addManagedListeners(n,{mouseEnter:()=>{!o.dragService.isDragging()&&!r.get("suppressRowHoverHighlight")&&(i.classList.add("ag-row-hover"),n.setHovered(!0))},mouseLeave:()=>{i.classList.remove("ag-row-hover"),n.setHovered(!1)}})}roundRowTopToBounds(t){const i=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),s=this.applyPaginationOffset(i.top,!0)-100,n=this.applyPaginationOffset(i.bottom,!0)+100;return Math.min(Math.max(s,t),n)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,i){t?i(t):this.allRowGuis.forEach(i)}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;const i=this.rowNode.rowHeight,s=this.beans.environment.getDefaultRowHeight(),o=Vw(this.gos)?Vs(this.gos,this.rowNode).height:void 0,r=o?`${Math.min(s,o)-2}px`:void 0;this.forEachGui(t,a=>{a.element.style.height=`${i}px`,r&&a.element.style.setProperty("--ag-line-height",r)})}addEventListener(t,i){super.addEventListener(t,i)}removeEventListener(t,i){super.removeEventListener(t,i)}destroyFirstPass(t=!1){if(this.active=!1,!t&&po(this.gos)&&!this.isSticky())if(this.rowNode.rowTop!=null){const n=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(n)}else this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);const i=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(i),this.beans.eventService.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const t=i=>(i.list.forEach(s=>s.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,i=>{i.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),i.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){var i;const t=((i=this.beans.paginationService)==null?void 0:i.getCurrentPage())??0;this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,i=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;const s=this.beans.pageBoundsService.getPixelOffset();return t+s*(i?1:-1)}setRowTop(t){if(!this.printLayout&&N(t)){const i=this.applyPaginationOffset(t),o=`${this.rowNode.isRowPinned()||this.rowNode.sticky?i:this.beans.rowContainerHeightService.getRealPixelPosition(i)}px`;this.setRowTopStyle(o)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";const i=this.rowNode;let s;if(this.isSticky())s=i.stickyRowTop;else{const n=this.slideInAnimation[t]?this.roundRowTopToBounds(i.oldRowTop):i.rowTop,o=this.applyPaginationOffset(n);s=i.isRowPinned()?o:this.beans.rowContainerHeightService.getRealPixelPosition(o)}return s+"px"}setRowTopStyle(t){this.allRowGuis.forEach(i=>this.suppressRowTransform?i.rowComp.setTop(t):i.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let i=null;return this.getAllCellCtrls().forEach(s=>{s.getColumn()==t&&(i=s)}),i!=null||this.getAllCellCtrls().forEach(s=>{s.getColSpanningList().indexOf(t)>=0&&(i=s)}),i}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){var r;const i=this.rowNode.getRowIndexString();if(i===null)return;const s=this.beans.headerNavigationService.getHeaderRowCount()+(((r=this.beans.filterManager)==null?void 0:r.getHeaderRowCount())??0),n=this.rowNode.rowIndex%2===0,o=s+this.rowNode.rowIndex+1;this.forEachGui(t,a=>{a.rowComp.setRowIndex(i),a.rowComp.addOrRemoveCssClass("ag-row-even",n),a.rowComp.addOrRemoveCssClass("ag-row-odd",!n),zx(a.element,o)})}setStoppingRowEdit(t){this.stoppingRowEdit=t}};a1.DOM_DATA_KEY_ROW_CTRL="renderedRow";var Rn=a1,aM=class extends D{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",Jw("touchstart")?"touchstart":"mousedown"].forEach(i=>{const s=this.processMouseEvent.bind(this,i);this.addManagedElementListeners(this.element,{[i]:s})})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||Qi(t))return;const i=this.getRowForEvent(t),s=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,i,s):(s&&s.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!qs())return;const e=new Ns(this.element),t=i=>{const s=this.getRowForEvent(i.touchEvent),n=this.mouseEventService.getRenderedCellForEvent(i.touchEvent);this.handleContextMenuMouseEvent(void 0,i.touchEvent,s,n)};this.addManagedListeners(e,{longTap:t}),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){const i=ya(this.gos,t,Rn.DOM_DATA_KEY_ROW_CTRL);if(i)return i;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,i,s){const n=i?i.getRowNode():null,o=s?s.getColumn():null;let r=null;if(o){const c=e||t;s.dispatchCellContextMenuEvent(c??null),r=this.valueService.getValue(o,n)}const a=this.ctrlsService.getGridBodyCtrl(),l=s?s.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:n,column:o,value:r,anchorToElement:l})}getControlsForEventTarget(e){return{cellCtrl:Sp(this.gos,e,yn.DOM_DATA_KEY_CELL_CTRL),rowCtrl:Sp(this.gos,e,Rn.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:s}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):s&&s.isFullWidth()&&this.processFullWidthRowKeyboardEvent(s,e,t))}processCellKeyboardEvent(e,t,i){const s=e.getRowNode(),n=e.getColumn(),o=e.isEditing();!Mp(this.gos,i,s,n,o)&&t==="keydown"&&(!o&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing()),_y(i)&&e.processCharacter(i)),t==="keydown"&&this.eventService.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){const s=e.getRowNode(),n=this.focusService.getFocusedCell(),o=n&&n.column;if(!Mp(this.gos,i,s,o,!1)){const a=i.key;if(t==="keydown")switch(a){case M.PAGE_HOME:case M.PAGE_END:case M.PAGE_UP:case M.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case M.UP:case M.DOWN:e.onKeyboardNavigate(i);break;case M.TAB:e.onTabKeyDown(i);break}}t==="keydown"&&this.eventService.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;const i=SE(e);if(i===M.A)return this.onCtrlAndA(e);if(i===M.C)return this.onCtrlAndC(e);if(i===M.D)return this.onCtrlAndD(e);if(i===M.V)return this.onCtrlAndV(e);if(i===M.X)return this.onCtrlAndX(e);if(i===M.Y)return this.onCtrlAndY();if(i===M.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){const{pinnedRowModel:t,rowModel:i,rangeService:s}=this;if(s&&i.isRowsToRender()){const[n,o]=[t.isEmpty("top"),t.isEmpty("bottom")],r=n?null:"top";let a,l;o?(a=null,l=i.getRowCount()-1):(a="bottom",l=t.getPinnedBottomRowCount()-1);const c=this.visibleColsService.getAllCols();if(Vt(c))return;s.setCellRange({rowStartIndex:0,rowStartPinned:r,rowEndIndex:l,rowEndPinned:a,columnStart:c[0],columnEnd:ae(c)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){!this.gos.get("undoRedoCellEditing")||!this.undoRedoService||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){var e;(e=this.undoRedoService)==null||e.redo("ui")}},lM=class extends D{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;Ae(this.element,t),gi(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},cM=class extends D{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;Ae(this.element,t),gi(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},kl=e=>e.getTopRowCtrls(),Ml=e=>e.getStickyTopRowCtrls(),Dl=e=>e.getStickyBottomRowCtrls(),Tl=e=>e.getBottomRowCtrls(),Al=e=>e.getCentreRowCtrls(),uM={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:Al},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:Al},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:Al},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:Al},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:kl},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:kl},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:kl},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:kl},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:Ml},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Ml},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Ml},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:Ml},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:Dl},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Dl},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Dl},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:Dl},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:Tl},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:Tl},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:Tl},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:Tl}};function io(e){return uM[e]}var dM=["topCenter","topLeft","topRight"],hM=["bottomCenter","bottomLeft","bottomRight"],pM=["center","left","right"],fM=["center","left","right","fullWidth"],gM=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],mM=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],CM=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],l1=["stickyTopCenter","stickyTopLeft","stickyTopRight"],c1=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],vM=[...l1,"stickyTopFullWidth",...c1,"stickyBottomFullWidth"],SM=[...dM,...hM,...pM,...l1,...c1],wM=class extends D{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=io(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new Ik(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,i){this.comp=e,this.eContainer=t,this.eViewport=i,this.createManagedBean(new aM(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const s=()=>this.onPinnedWidthChanged();this.forContainers(mM,()=>{this.pinnedWidthFeature=this.createManagedBean(new lM(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:s})}),this.forContainers(CM,()=>{this.pinnedWidthFeature=this.createManagedBean(new cM(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:s})}),this.forContainers(fM,()=>this.createManagedBean(new o1(this.eContainer,this.name==="center"?i:void 0))),this.forContainers(SM,()=>this.createManagedBean(new Lk(this.eContainer))),this.forContainers(gM,()=>this.createManagedBean(new Tg(n=>this.comp.setContainerWidth(`${n}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(vM.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const i=this.gos.get("ensureDomOrder"),s=it(this.gos,"print");this.comp.setDomOrder(i||s)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return Wa(this.eViewport)}getCenterViewportScrollLeft(){return iu(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return vy(this.eViewport)}getViewportScrollLeft(){return iu(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||tF(this.eViewport)}getViewportElement(){return this.eViewport}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){su(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const i=it(this.gos,"print"),n=this.gos.get("embedFullWidthRows")||i,o=t.filter(r=>{const a=r.isFullWidth();return this.options.fullWidth?!n&&a:n||!a});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}},yM="ag-force-vertical-scroll",RM="ag-selectable",bM="ag-column-moving",PM=class extends D{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,i,s,n,o,r){var a;this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=s,this.eBottom=n,this.eStickyTop=o,this.eStickyBottom=r,this.eCenterColsViewport=i.querySelector(`.${io("center").viewport}`),this.eFullWidthContainer=i.querySelector(`.${io("fullWidth").container}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${io("stickyTopFullWidth").container}`),this.eStickyBottomFullWidthContainer=r.querySelector(`.${io("stickyBottomFullWidth").container}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",l=>this.setCellTextSelection(l.currentValue)),this.createManagedBean(new Ig(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Ak(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([s,i,n,o,r]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),(a=this.filterManager)==null||a.setupAdvancedFilterHeaderComp(s),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){const e=this.setFloatingHeights.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.onScrollGapChanged.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:i=>{const{target:s}=i,n=fo(s,"ag-root",t);t.classList.toggle("ag-has-focus",!n)},focusout:i=>{const{target:s,relatedTarget:n}=i,o=t.contains(n),r=fo(n,"ag-root",t);fo(s,"ag-root",t)||(!o||r)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(bM,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(RM,e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();const t=e&&this.scrollVisibleService.getScrollbarWidth()||0,i=fy()?16:0,s=`calc(100% + ${t+i}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(s)),this.updateScrollingClasses()}onScrollGapChanged(){this.updateScrollingClasses()}updateScrollingClasses(){this.eGridBody.classList.toggle("ag-body-vertical-content-no-gap",!this.scrollVisibleService.hasVerticalScrollGap()),this.eGridBody.classList.toggle("ag-body-horizontal-content-no-gap",!this.scrollVisibleService.hasHorizontalScrollGap())}onGridColumnsChanged(){const e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const e=i=>{const s=i.relatedTarget;if(Fp(s)===null){this.rowRenderer.stopEditing();return}let n=t.some(o=>o.contains(s))&&this.mouseEventService.isElementInThisGrid(s);if(!n){const o=this.popupService;n=o.getActivePopups().some(r=>r.contains(s))||o.isElementWithinCustomPopup(s)}n||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach(i=>this.addManagedElementListeners(i,{focusout:e}))}updateRowCount(){var s;const e=this.headerNavigationService.getHeaderRowCount()+(((s=this.filterManager)==null?void 0:s.getHeaderRowCount())??0),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=t===-1?-1:e+t;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?yM:null,i=it(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&iF(this.eBodyViewport)}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes();const t=()=>{const i=e&&po(this.gos)&&!this.rowContainerHeightService.isStretching(),s=i?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(s,i)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:i,shiftKey:s}=e;(s||Math.abs(t)>Math.abs(i))&&this.mouseEventService.isEventFromThisGrid(e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaX:t,deltaY:i,shiftKey:s}=e,n=s||Math.abs(t)>Math.abs(i),o=e.target;n?(this.eStickyTopFullWidthContainer.contains(o)||this.eStickyBottomFullWidthContainer.contains(o))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(i))}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;this.gos.get("preventDefaultOnContextMenu")&&(e||i).preventDefault();const{target:s}=e||t;(s===this.eBodyViewport||s===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!qs())return;const t=new Ns(this.eBodyViewport),i=s=>{e(void 0,s.touchStart,s.touchEvent)};this.addManagedListeners(t,{longTap:i}),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}getGui(){return this.eGridBody}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new JF(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this.rowDragFeature))}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){const{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),i=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){var n;const t=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(((n=this.filterManager)==null?void 0:n.getHeaderHeight())??0),i=this.pinnedRowModel.getPinnedTopTotalHeight();let s=0;t>0&&(s+=t),i>0&&(s+=i),s>0&&(s+=1),this.comp.setStickyTopTop(`${s}px`)}setStickyBottomOffsetBottom(){const e=this.pinnedRowModel.getPinnedBottomTotalHeight(),i=this.scrollVisibleService.isHorizontalScrollShowing()&&this.scrollVisibleService.getScrollbarWidth()||0,s=e+i;this.comp.setStickyBottomBottom(`${s}px`)}sizeColumnsToFit(e,t){const s=this.isVerticalScrollShowing()?this.scrollVisibleService.getScrollbarWidth():0,o=Wa(this.eGridBody)-s;if(o>0){this.columnSizeService.sizeColumnsToFit(o,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):I("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}};function fr(e){return e.map(t=>`<ag-row-container name="${t}"></ag-row-container>`).join("")}`${fr(["topLeft","topCenter","topRight","topFullWidth"])}${fr(["left","center","right","fullWidth"])}${fr(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}${fr(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}${fr(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}`;var xM=class extends D{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.updateScrollVisible()}onDisplayedColumnsWidthChanged(){this.updateScrollVisible()}onCentreViewportResized(){this.updateScrollGap()}updateScrollVisible(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsService.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventService.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:"scrollVisibilityChanged"}))}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}hasHorizontalScrollGap(){return this.horizontalScrollGap}hasVerticalScrollGap(){return this.verticalScrollGap}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),i=typeof e=="number"&&e>=0?e:Jx();i!=null&&(this.scrollbarWidth=i,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},nv="__ag_grid_instance",u1=class d1 extends D{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=d1.gridInstanceSequence.next()}wireBeans(t){this.ctrlsService=t.ctrlsService}stampTopLevelGridCompWithGridInstance(t){t[nv]=this.gridInstanceId}getRenderedCellForEvent(t){return Sp(this.gos,t.target,yn.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let i=t;for(;i;){const s=i[nv];if(N(s))return s===this.gridInstanceId;i=i.parentElement}return!1}getCellPositionForEvent(t){const i=this.getRenderedCellForEvent(t);return i?i.getCellPosition():null}getNormalisedPosition(t){const i=it(this.gos,"normal"),s=t;let n,o;if(s.clientX!=null||s.clientY!=null?(n=s.clientX,o=s.clientY):(n=s.x,o=s.y),i){const r=this.ctrlsService.getGridBodyCtrl(),a=r.getScrollFeature().getVScrollPosition(),l=r.getScrollFeature().getHScrollPosition();n+=l.left,o+=a.top}return{x:n,y:o}}};u1.gridInstanceSequence=new Ao;var FM=u1,EM=class extends D{constructor(){super(),this.beanName="navigationService",this.onPageDown=VC(this.onPageDown,100),this.onPageUp=VC(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.scrollVisibleService=e.scrollVisibleService,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const i=e.key,s=e.altKey,n=e.ctrlKey||e.metaKey,o=!!this.rangeService&&e.shiftKey,r=this.mouseEventService.getCellPositionForEvent(e);let a=!1;switch(i){case M.PAGE_HOME:case M.PAGE_END:!n&&!s&&(this.onHomeOrEndKey(i),a=!0);break;case M.LEFT:case M.RIGHT:case M.UP:case M.DOWN:if(!r)return!1;n&&!s&&!o&&(this.onCtrlUpDownLeftRight(i,r),a=!0);break;case M.PAGE_DOWN:case M.PAGE_UP:!n&&!s&&(a=this.handlePageUpDown(i,r,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,i){return i&&(t=this.focusService.getFocusedCell()),t?(e===M.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){var r;const{scrollIndex:t,scrollType:i,scrollColumn:s,focusIndex:n,focusColumn:o}=e;N(s)&&!s.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(s),N(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(n),this.focusService.setFocusedCell({rowIndex:n,column:o,rowPinned:null,forceBrowserFocus:!0}),(r=this.rangeService)==null||r.setRangeToCell({rowIndex:n,rowPinned:null,column:o})}onPageDown(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.getViewportHeight(),n=this.pageBoundsService.getPixelOffset(),o=i.top+s,r=this.rowModel.getRowIndexAtPixel(o+n);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,r):this.navigateToNextPage(e,r)}onPageUp(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.pageBoundsService.getPixelOffset(),n=i.top,o=this.rowModel.getRowIndexAtPixel(n+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o,!0):this.navigateToNextPage(e,o,!0)}navigateToNextPage(e,t,i=!1){const s=this.getViewportHeight(),n=this.pageBoundsService.getFirstRow(),o=this.pageBoundsService.getLastRow(),r=this.pageBoundsService.getPixelOffset(),a=this.rowModel.getRow(e.rowIndex),l=i?(a==null?void 0:a.rowHeight)-s-r:s-r,c=(a==null?void 0:a.rowTop)+l;let u=this.rowModel.getRowIndexAtPixel(c+r);if(u===e.rowIndex){const h=i?-1:1;t=u=e.rowIndex+h}let d;i?(d="bottom",u<n&&(u=n),t<n&&(t=n)):(d="top",u>o&&(u=o),t>o&&(t=o)),this.isRowTallerThanView(u)&&(t=u,d="top"),this.navigateTo({scrollIndex:t,scrollType:d,scrollColumn:null,focusIndex:u,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const s=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const i=t?-1:1,s=this.getViewportHeight(),n=this.pageBoundsService.getLastRow();let o=0,r=e.rowIndex;for(;r>=0&&r<=n;){const a=this.rowModel.getRow(r);if(a){const l=a.rowHeight??0;if(o+l>s)break;o+=l}r+=i}return Math.max(0,Math.min(r,n))}getViewportHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),t=this.scrollVisibleService.getScrollbarWidth();let i=e.bottom-e.top;return this.ctrlsService.get("center").isHorizontalScrollShowing()&&(i-=t),i}isRowTallerThanView(e){const t=this.rowModel.getRow(e);if(!t)return!1;const i=t.rowHeight;return typeof i!="number"?!1:i>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:s}=i,n=i.column;this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:n,focusIndex:s,focusColumn:n})}onHomeOrEndKey(e){const t=e===M.PAGE_HOME,i=this.visibleColsService.getAllCols(),s=t?i[0]:ae(i),n=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:s,focusIndex:n,focusColumn:s})}onTabKeyDown(e,t){const i=t.shiftKey,s=this.tabToNextCellCommon(e,i,t);if(s!==!1){s?t.preventDefault():s===null&&this.focusService.allowFocusForNextGridCoreContainer(i);return}if(i){const{rowIndex:n,rowPinned:o}=e.getRowPosition();(o?n===0:n===this.pageBoundsService.getFirstRow())&&(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof yn&&e.focusCell(!0),(!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i))&&t.preventDefault()}tabToNextCell(e,t){const i=this.focusService.getFocusedCell();if(!i)return!1;let s=this.getCellByPosition(i);return!s&&(s=this.rowRenderer.getRowByPosition(i),!s||!s.isFullWidth())?!1:!!this.tabToNextCellCommon(s,e,t)}tabToNextCellCommon(e,t,i){let s=e.isEditing();if(!s&&e instanceof yn){const r=e.getRowCtrl();r&&(s=r.isEditing())}let n;return s?this.gos.get("editType")==="fullRow"?n=this.moveToNextEditingRow(e,t,i):n=this.moveToNextEditingCell(e,t,i):n=this.moveToNextCellNotEditing(e,t),n===null?n:n||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,i=null){const s=e.getCellPosition();e.getGui().focus(),e.stopEditing();const n=this.findNextCellToFocusOn(s,t,!0);return n===!1?null:n==null?!1:(n.startEditing(null,!0,i),n.focusCell(!1),!0)}moveToNextEditingRow(e,t,i=null){const s=e.getCellPosition(),n=this.findNextCellToFocusOn(s,t,!0);if(n===!1)return null;if(n==null)return!1;const o=n.getCellPosition(),r=this.isCellEditable(s),a=this.isCellEditable(o),l=o&&s.rowIndex===o.rowIndex&&s.rowPinned===o.rowPinned;return r&&e.setFocusOutOnEditor(),l||(e.getRowCtrl().stopEditing(),n.getRowCtrl().startRowEditing(void 0,void 0,i)),a?(n.setFocusInOnEditor(),n.focusCell()):n.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const i=this.visibleColsService.getAllCols();let s;e instanceof Rn?s={...e.getRowPosition(),column:t?i[0]:ae(i)}:s=e.getCellPosition();const n=this.findNextCellToFocusOn(s,t,!1);if(n===!1)return null;if(n instanceof yn)n.focusCell(!0);else if(n)return this.tryToFocusFullWidthRow(n.getRowPosition(),t);return N(n)}findNextCellToFocusOn(e,t,i){var n;let s=e;for(;;){e!==s&&(e=s),t||(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextTabbedCell(s,t);const o=this.gos.getCallback("tabToNextCell");if(N(o)){const c=o({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:s||null});if(c===!0||c===null)c===null&&I("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),s=e;else{if(c===!1)return!1;s={rowIndex:c.rowIndex,column:c.column,rowPinned:c.rowPinned}}}if(!s)return null;if(s.rowIndex<0){const l=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+s.rowIndex,column:s.column},fromCell:!0}),null}const r=this.gos.get("editType")==="fullRow";if(i&&!r&&!this.isCellEditable(s))continue;this.ensureCellVisible(s);const a=this.getCellByPosition(s);if(!a){const l=this.rowRenderer.getRowByPosition(s);if(!l||!l.isFullWidth()||i)continue;return l}if(!a.isSuppressNavigable())return(n=this.rangeService)==null||n.setRangeToCell(s),a}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){const t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,i,s){let n=i,o=!1;for(;n&&(n===i||!this.isValidNavigateCell(n));)this.gos.get("enableRtl")?t===M.LEFT&&(n=this.getLastCellOfColSpan(n)):t===M.RIGHT&&(n=this.getLastCellOfColSpan(n)),n=this.cellNavigationService.getNextCellToFocus(t,n),o=le(n);if(o&&e&&e.key===M.UP&&(n={rowIndex:-1,rowPinned:null,column:i.column}),s){const a=this.gos.getCallback("navigateToNextCell");if(N(a)){const c=a({key:t,previousCellPosition:i,nextCellPosition:n||null,event:e});N(c)?n={rowPinned:c.rowPinned,rowIndex:c.rowIndex,column:c.column}:n=null}}if(!n)return;if(n.rowIndex<0){const a=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+n.rowIndex,column:i.column},event:e||void 0,fromCell:!0});return}const r=this.getNormalisedPosition(n);r?this.focusPosition(r):this.tryToFocusFullWidthRow(n)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const i=this.visibleColsService.getAllCols(),s=this.rowRenderer.getRowByPosition(e);if(!s||!s.isFullWidth())return!1;const n=this.focusService.getFocusedCell(),o={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?ae(i):i[0])};this.focusPosition(o);const r=t??(n!=null&&this.rowPositionUtils.before(o,n));return this.eventService.dispatchEvent({type:"fullWidthRowFocused",rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:o.column,isFullWidthCell:!0,fromBelow:r}),!0}focusPosition(e){var t;this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),(t=this.rangeService)==null||t.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const t=this.getCellByPosition(e);if(!t)return e;const i=t.getColSpanningList();return i.length===1?e:{rowIndex:e.rowIndex,column:ae(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=Bu(this.gos),i=this.rowModel.getRow(e.rowIndex);!(t&&(i==null?void 0:i.sticky))&&le(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},kM=class extends D{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(i)}setResizeIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},MM=class extends D{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,i){this.showPopup(e,s=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:s})},i,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,i){let s=-1,n="left";const o=this.menuService.isLegacyMenuEnabled();!o&&this.gos.get("enableRtl")&&(s=1,n="right");const r=o?void 0:4*s,a=o?void 0:4;this.showPopup(e,l=>{this.popupService.positionPopupByComponent({type:i,eventSource:t,ePopup:l,nudgeX:r,nudgeY:a,alignSide:n,keepWithinBounds:!0,position:"under",column:e})},i,t,o)}showPopup(e,t,i,s,n){const o=e?this.createBean(new nE(e,"COLUMN_MENU")):void 0;if(this.activeMenu=o,!(o!=null&&o.hasFilter())||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const r=document.createElement("div");vi(r,"presentation"),r.classList.add("ag-menu"),n||r.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(r,{keydown:g=>this.trapFocusWithin(g,r)}),r.appendChild(o==null?void 0:o.getGui());let a;const l=()=>o==null?void 0:o.afterGuiDetached(),c=this.menuService.isColumnMenuAnchoringEnabled()?s??this.ctrlsService.getGridBodyCtrl().getGui():void 0,u=g=>{e.setMenuVisible(!1,"contextMenu");const v=g instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),v&&s&&Ii(s)){const S=this.focusService.findTabbableParent(s);S&&S.focus()}l(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e)},d=this.localeService.getLocaleTextFunc(),h=n&&i!=="columnFilter"?d("ariaLabelColumnMenu","Column Menu"):d("ariaLabelColumnFilter","Column Filter"),p=this.popupService.addPopup({modal:!0,eChild:r,closeOnEsc:!0,closedCallback:u,positionCallback:()=>t(r),anchorToElement:c,ariaLabel:h});p&&(this.hidePopup=a=p.hideFunc),o.afterInit().then(()=>{t(r),o.afterGuiAttached({container:i,hidePopup:a})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==M.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventService.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:i??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},DM=class extends D{constructor(){super(...arguments),this.beanName="resizeObserverService"}observeResize(e,t){const s=Ww(this.gos).ResizeObserver,n=s?new s(t):null;return n==null||n.observe(e),()=>n==null?void 0:n.disconnect()}},TM=class extends D{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){var i;const t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){const s=((i=this.paginationService)==null?void 0:i.getCurrentPage())??0;s!==this.lastPage&&(this.lastPage=s,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&I(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,i){this.verifyAnimationFrameOn(i);const s={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],s),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((i,s)=>i.index!==s.index?t*(s.index-i.index):s.createOrder-i.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,i=t.list,s=this.createTasksP2,n=s.list,o=this.destroyTasks,r=new Date().getTime();let a=new Date().getTime()-r;const l=e<=0,c=this.ctrlsService.getGridBodyCtrl();for(;l||a<e;){if(!c.getScrollFeature().scrollGridIfNeeded()){let d;if(i.length)this.sortTaskList(t),d=i.pop().task;else if(n.length)this.sortTaskList(s),d=n.pop().task;else if(o.length)d=o.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(d)||d()}a=new Date().getTime()-r}i.length||n.length||o.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const t=Ww(this.gos);t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}},AM=class extends D{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=ke(this.gos)}expandRows(e){if(!this.isClientSideRowModel)return;const t=new Set(e);this.rowModel.forEachNode(i=>{i.id&&t.has(i.id)&&(i.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const e=[];return this.rowModel.forEachNode(({expanded:t,id:i})=>{t&&i&&e.push(i)}),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,i,s){e&&(i&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,i,s),e.setExpanded(t,void 0,s))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},IM=class extends D{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.valueService=e.valueService,this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,i)}getContextMenuPosition(e,t){const i=this.getRowCtrl(e),s=this.getCellGui(i,t);if(!s)return i?{x:0,y:i.getRowYPosition()}:{x:0,y:0};const n=s.getBoundingClientRect();return{x:n.x+n.width/2,y:n.y+n.height/2}}showContextMenu(e){var o;const t=e.rowNode,i=e.column;let{anchorToElement:s,value:n}=e;t&&i&&n==null&&(n=this.valueService.getValueForDisplay(i,t)),s==null&&(s=this.getContextMenuAnchorElement(t,i)),(o=this.contextMenuFactory)==null||o.onContextMenu(e.mouseEvent??null,e.touchEvent??null,t??null,i??null,n,s)}showColumnChooser(e){var t;(t=this.columnChooserFactory)==null||t.showColumnChooser(e)}hidePopupMenu(){var e;(e=this.contextMenuFactory)==null||e.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var e;(e=this.columnChooserFactory)==null||e.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){const{suppressMenu:t,suppressHeaderMenuButton:i}=e.getColDef();return!(i??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){var t;return!e.getColDef().suppressHeaderFilterButton&&!!((t=this.filterManager)!=null&&t.isFilterAllowed(e))}isHeaderContextMenuEnabled(e){const t=e&&Ws(e)?e.getColDef():e==null?void 0:e.getColGroupDef();return!(t!=null&&t.suppressHeaderContextMenu)&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(qs()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){var t;return!!((t=this.filterManager)!=null&&t.isFilterAllowed(e))&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(e){var s;const t=e.getColDef(),i=(s=t.floatingFilterComponentParams)==null?void 0:s.suppressFilterButton;return i!=null&&I("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),t.suppressFloatingFilterButton==null?!i:!t.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?this.gos.exists("suppressMenuHide")?e:!1:e}showColumnMenuCommon(e,t,i,s){const{positionBy:n}=t,o=t.column;if(n==="button"){const{buttonElement:r}=t;e.showMenuAfterButtonClick(o,r,i,s)}else if(n==="mouse"){const{mouseEvent:r}=t;e.showMenuAfterMouseEvent(o,r,i,s)}else o&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(o,"auto"),this.animationFrameService.requestAnimationFrame(()=>{var a;const r=(a=this.ctrlsService.getHeaderRowContainerCtrl(o.getPinned()))==null?void 0:a.getHeaderCtrlForColumn(o);r&&e.showMenuAfterButtonClick(o,r.getAnchorElementForMenu(s),i,!0)}))}getRowCtrl(e){const{rowIndex:t,rowPinned:i}=e||{};if(t!=null)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i})||void 0}getCellGui(e,t){if(!e||!t)return;const i=e.getCellCtrl(t);return(i==null?void 0:i.getGui())||void 0}getContextMenuAnchorElement(e,t){const i=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),s=this.getRowCtrl(e);if(!s)return i;const n=this.getCellGui(s,t);return n||(s.isFullWidth()?s.getFullWidthElement():i)}},LM=class extends fn{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},OM={selector:"AG-INPUT-TEXT-AREA",component:LM},BM=class extends $o{constructor(){super(`<div class="ag-large-text">
        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,[OM]),this.eTextArea=ee}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),N(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===M.LEFT||t===M.UP||t===M.RIGHT||t===M.DOWN||e.shiftKey&&t===M.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return!N(e)&&!N(this.params.value)?this.params.value:this.params.parseValue(e)}},NM=class extends $o{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){Dn(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,i=s=>{Mp(this.gos,s,t.node,t.column,!0)||t.onKeyDown(s)};this.addManagedElementListeners(e,{keydown:i})}},_M=class extends $o{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>
            </div>`,[dE]),this.eSelect=ee,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueService:i,gos:s}=this,{values:n,value:o,eventKey:r}=e;if(le(n)){I("no values found for select cellEditor");return}this.startedByEnter=r!=null?r===M.ENTER:!1;let a=!1;n.forEach(d=>{const h={value:d},p=i.formatValue(e.column,null,d),g=p!=null;h.text=g?p:d,t.addOption(h),a=a||o===d}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:u}=e;l!=null&&t.setPickerGap(l),u!=null&&t.setPickerMaxHeight(u),c!=null&&t.setPickerMaxWidth(c),s.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},Wu=class extends $o{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=ee}init(e){this.params=e;const{cellStartedEdit:t,eventKey:i,suppressPreventDefault:s}=e,n=this.eInput;this.cellEditorInput.init(n,e);let o,r=!0;t?(this.focusAfterAttached=!0,i===M.BACKSPACE||i===M.DELETE?o="":i&&i.length===1?s?r=!1:o=i:(o=this.cellEditorInput.getStartValue(),i!==M.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,o=this.cellEditorInput.getStartValue()),r&&o!=null&&n.setStartValue(o),this.addManagedElementListeners(n.getGui(),{keydown:a=>{const{key:l}=a;(l===M.PAGE_UP||l===M.PAGE_DOWN)&&a.preventDefault()}})}afterGuiAttached(){var s,n;const e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Ai()||t.getFocusableElement().focus();const i=t.getInputElement();this.highlightAllOnFocus?i.select():(n=(s=this.cellEditorInput).setCaret)==null||n.call(s)}focusIn(){const e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},GM=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[Hu]}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){const e=this.eInput.getValue();return!N(e)&&!N(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),t=N(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},h1=class extends Wu{constructor(){super(new GM)}},HM=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[yE]}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step);const i=e.getInputElement();t.preventStepping?e.addManagedElementListeners(i,{keydown:this.preventStepping}):t.showStepperButtons&&i.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===M.UP||e.key===M.DOWN)&&e.preventDefault()}getValue(){const e=this.eInput.getValue();if(!N(e)&&!N(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}setCaret(){Ai()&&this.eInput.getInputElement().focus({preventScroll:!0})}},VM=class extends Wu{constructor(){super(new HM)}},WM=class extends Nn{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=Ai();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){Ie(this.gos)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?ii(e??null,!1)??void 0:e;return this.min===t?this:(this.min=t,ti(this.eInput,"min",t),this)}setMax(e){const t=e instanceof Date?ii(e??null,!1)??void 0:e;return this.max===t?this:(this.max=t,ti(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,ti(this.eInput,"step",e),this)}getDate(){if(this.eInput.validity.valid)return Mt(this.getValue())??void 0}setDate(e,t){this.setValue(ii(e??null,!1),t)}},p1={selector:"AG-INPUT-DATE-FIELD",component:WM},zM=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[p1]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.eInput.getDate();return!N(e)&&!N(this.params.value)?this.params.value:e??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return ii(e,!1)}},jM=class extends Wu{constructor(){super(new zM)}},UM=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[p1]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return!N(e)&&!N(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){return ii(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Mt(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):ii(e??null,!1)??void 0}},KM=class extends Wu{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new UM(()=>this.dataTypeService))}},$M=class extends $o{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[yg]),this.eCheckbox=ee}init(e){this.params=e;const t=e.value??void 0;this.eCheckbox.setValue(t),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:s=>this.setAriaLabel(s.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.localeService.getLocaleTextFunc(),i=hg(t,e),s=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${s} (${i})`)}},Mr=class{constructor(e){this.cellValueChanges=e}},Yd=class extends Mr{constructor(e,t,i,s){super(e),this.initialRange=t,this.finalRange=i,this.ranges=s}},qM=10,ov=class{constructor(e){this.actionStack=[],this.maxStackSize=e||qM,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},YM=class extends D{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),s=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(i||s||this.isPasting||this.isRangeInAction))return;const{rowPinned:o,rowIndex:r,column:a,oldValue:l,value:c}=e,u={rowPinned:o,rowIndex:r,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(u)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;const e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new ov(e),this.redoStack=new ov(e),this.addListeners();const t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:i=>{i.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady(this,i=>{this.gridBodyCtrl=i.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){this.eventService.dispatchEvent({type:"undoStarted",source:e});const t=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:"undoEnded",source:e,operationPerformed:t})}redo(e){this.eventService.dispatchEvent({type:"redoStarted",source:e});const t=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:"redoEnded",source:e,operationPerformed:t})}undoRedo(e,t,i,s,n){if(!e)return!1;const o=e.pop();return!o||!o.cellValueChanges?!1:(this.processAction(o,r=>r[s],n),o instanceof Yd?this.processRange(this.rangeService,o.ranges||[o[i]]):this.processCell(o.cellValueChanges),t.push(o),!0)}processAction(e,t,i){e.cellValueChanges.forEach(s=>{const{rowIndex:n,rowPinned:o,columnId:r}=s,a={rowIndex:n,rowPinned:o},l=this.rowPositionUtils.getRowNode(a);l.displayed&&l.setDataValue(r,t(s),i)})}processRange(e,t){let i;e.removeAllCellRanges(!0),t.forEach((s,n)=>{if(!s)return;const o=s.startRow,r=s.endRow;n===t.length-1&&(i={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:s.startColumn.getColId()},this.setLastFocusedCell(i));const a={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:r.rowIndex,rowEndPinned:r.rowPinned,columnStart:s.startColumn,columns:s.columns};e.addCellRange(a)})}processCell(e){const t=e[0],{rowIndex:i,rowPinned:s}=t,n={rowIndex:i,rowPinned:s},o=this.rowPositionUtils.getRowNode(n),r={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(r,this.rangeService)}setLastFocusedCell(e,t){const{rowIndex:i,columnId:s,rowPinned:n}=e,o=this.gridBodyCtrl.getScrollFeature(),r=this.columnModel.getCol(s);if(!r)return;o.ensureIndexVisible(i),o.ensureColumnVisible(r);const a={rowIndex:i,column:r,rowPinned:n};this.focusService.setFocusedCell({...a,forceBrowserFocus:!0}),t==null||t.setRangeToCell(a)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new Mr(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const i=new Mr(this.cellValueChanges);this.pushActionsToUndoStack(i)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new Mr(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new Yd(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;this.rangeService&&is(this.gos)?e=new Yd(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new Mr(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}};function QM(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()}function XM(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()}function f1(e,t,i="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,i),"ensureVisible")}function g1(e,t,i){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,i),"ensureVisible")}function JM(e,t,i=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,i),"ensureVisible")}function ZM(e){var t;(t=e.undoRedoService)==null||t.undo("api")}function eD(e){var t;(t=e.undoRedoService)==null||t.redo("api")}function tD(e,t={}){return e.rowRenderer.getCellEditorInstances(t).map(Kr)}function iD(e){return e.rowRenderer.getEditingCells()}function sD(e,t=!1){e.rowRenderer.stopEditing(t)}function nD(e,t){const i=e.columnModel.getCol(t.colKey);if(!i){I(`no column found for ${t.colKey}`);return}const s={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:i};t.rowPinned==null&&g1(e,t.rowIndex),f1(e,t.colKey);const o=e.navigationService.getCellByPosition(s);if(!o)return;const{focusService:r,gos:a}=e,l=()=>{const u=Ie(a),d=o.getGui();return u!==d&&!!(d!=null&&d.contains(u))},c=a.get("stopEditingWhenCellsLoseFocus")&&l();(c||!r.isCellFocused(s))&&r.setFocusedCell({...s,forceBrowserFocus:c,preventScrollOnBrowserFocus:!0}),o.startRowOrCellEdit(t.key)}function oD(e){var t;return((t=e.undoRedoService)==null?void 0:t.getCurrentUndoStackSize())??0}function rD(e){var t;return((t=e.undoRedoService)==null?void 0:t.getCurrentRedoStackSize())??0}var aD=class extends D{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e,t=null,i=!1,s=null){var c;const n=this.createCellEditorParams(e,t,i),o=e.getColumn().getColDef(),r=this.userComponentFactory.getCellEditorDetails(o,n),a=(r==null?void 0:r.popupFromSelector)!=null?r.popupFromSelector:!!o.cellEditorPopup,l=(r==null?void 0:r.popupPositionFromSelector)!=null?r.popupPositionFromSelector:o.cellEditorPopupPosition;return e.setEditing(!0,r),e.getComp().setEditDetails(r,a,l,this.gos.get("reactiveCustomComponents")),this.eventService.dispatchEvent(e.createEvent(s,"cellEditingStarted")),!((c=r==null?void 0:r.params)!=null&&c.suppressPreventDefault)}stopEditing(e,t){const i=e.getComp(),{newValue:s,newValueExists:n}=this.takeValueFromCellEditor(t,i),o=e.getRowNode(),r=e.getColumn(),a=this.valueService.getValueForDisplay(r,o);let l=!1;return n&&(l=this.saveNewValue(e,a,s,o,r)),e.setEditing(!1,void 0),i.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventService.dispatchEvent({...e.createEvent(null,"cellEditingStopped"),oldValue:a,newValue:s,valueChanged:l}),l}handleColDefChanged(e){const t=e.getCellEditor();if(t!=null&&t.refresh){const{eventKey:i,cellStartedEdit:s}=e.getEditCompDetails().params,n=this.createCellEditorParams(e,i,s),o=e.getColumn().getColDef(),r=this.userComponentFactory.getCellEditorDetails(o,n);t.refresh(r.params)}}setFocusOutOnEditor(e){const t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){const t=e.getComp(),i=t.getCellEditor();i!=null&&i.focusIn?i.focusIn():(e.focusCell(!0),e.onCellEditorAttached(()=>{var s,n;return(n=(s=t.getCellEditor())==null?void 0:s.focusIn)==null?void 0:n.call(s)}))}stopEditingAndFocus(e,t=!1,i=!1){e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(i,e.getCellPosition())}createPopupEditorWrapper(e){return new NM(e)}takeValueFromCellEditor(e,t){const i={newValueExists:!1};if(e)return i;const s=t.getCellEditor();return!s||s.isCancelAfterEnd&&s.isCancelAfterEnd()?i:{newValue:s.getValue(),newValueExists:!0}}saveNewValue(e,t,i,s,n){if(i===t)return!1;e.setSuppressRefreshCell(!0);const o=s.setDataValue(n,i,"edit");return e.setSuppressRefreshCell(!1),o}createCellEditorParams(e,t,i){const s=e.getColumn(),n=e.getRowNode();return this.gos.addGridCommonParams({value:this.valueService.getValueForDisplay(s,n),eventKey:t,column:s,colDef:s.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:n,data:n.data,cellStartedEdit:i,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:o=>this.valueService.parseValue(s,n,o,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const s=e?M.UP:M.DOWN;this.navigationService.navigateToNextCell(null,s,t,!1)}}},lD=class extends D{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e,t=null,i=null,s=null){let n=!0;return e.getAllCellCtrls().reduce((r,a)=>{const l=a===i;return l?n=a.startEditing(t,l,s):a.startEditing(null,l,s),r?!0:a.isEditing()},!1)&&this.setEditing(e,!0),n}stopEditing(e,t=!1){const i=e.getAllCellCtrls(),s=e.isEditing();e.setStoppingRowEdit(!0);let n=!1;for(const o of i){const r=o.stopEditing(t);s&&!t&&!n&&r&&(n=!0)}n&&this.eventService.dispatchEvent(e.createRowEvent("rowValueChanged")),s&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,s=>s.rowComp.addOrRemoveCssClass("ag-row-editing",t));const i=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(i)}},_n={version:ie,moduleName:"@ag-grid-community/edit-core",beans:[aD]},cD={version:ie,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:ZM,redoCellEditing:eD,getCellEditorInstances:tD,getEditingCells:iD,stopEditing:sD,startEditingCell:nD,getCurrentUndoSize:oD,getCurrentRedoSize:rD},dependantModules:[_n]},uD={version:ie,moduleName:"@ag-grid-community/undo-redo-edit",beans:[YM],dependantModules:[_n]},dD={version:ie,moduleName:"@ag-grid-community/full-row-edit",beans:[lD],dependantModules:[_n]},m1={version:ie,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:h1}],dependantModules:[_n]},hD={version:ie,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:h1},{name:"agNumberCellEditor",classImp:VM,params:{suppressPreventDefault:!0}},{name:"agDateCellEditor",classImp:jM},{name:"agDateStringCellEditor",classImp:KM},{name:"agCheckboxCellEditor",classImp:$M}],dependantModules:[m1]},pD={version:ie,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:_M}],dependantModules:[_n]},fD={version:ie,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:BM}],dependantModules:[_n]},gD={version:ie,moduleName:"@ag-grid-community/all-editors",dependantModules:[m1,hD,pD,fD]},mD={version:ie,moduleName:"@ag-grid-community/editing",dependantModules:[_n,uD,dD,gD,cD]},CD=class extends D{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const s=this.rowRenderer.getAllCellsForColumn(e);return t||s.push(i),this.addElementsToContainerAndGetWidth(s)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const i=this.centerRowContainerCtrl.getContainerElement();e.forEach(o=>this.cloneItemIntoDummy(o,t)),i.appendChild(t);const s=t.offsetWidth;i.removeChild(t);const n=this.getAutoSizePadding();return s+n}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>{const s=i.getHtmlElementForColumnHeader(e);s!=null&&(t=s)}),t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const s=document.createElement("div"),n=s.classList;["ag-header-cell","ag-header-group-cell"].some(a=>i.classList.contains(a))?(n.add("ag-header","ag-header-row"),s.style.position="static"):n.add("ag-row");let r=e.parentElement;for(;r;){if(["ag-header-row","ag-row"].some(l=>r.classList.contains(l))){for(let l=0;l<r.classList.length;l++){const c=r.classList[l];c!="ag-row-position-absolute"&&n.add(c)}break}r=r.parentElement}s.appendChild(i),t.appendChild(s)}},vD=class extends D{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=ke(this.gos),this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl}),this.resetStickyContainers()}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventService.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){var t,i;if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let n=(t=e.childStore)==null?void 0:t.getStoreBounds();return e.footer&&(n=(i=e.sibling.childStore)==null?void 0:i.getStoreBounds()),((n==null?void 0:n.heightPx)??0)+((n==null?void 0:n.topPx)??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&e.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let s=e.footer?e.sibling:e;for(;s.isExpandable()&&s.expanded;)if(s.master)s=s.detailNode;else if(s.childrenAfterSort){if(s.childrenAfterSort.length===0)break;s=ae(s.childrenAfterSort)}return s.rowTop+s.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){const t=e==="top";let i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,i);const s=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,n=new Set,o=c=>{if(n.add(c),t){const u=this.getLastPixelOfGroup(c),d=s+i+c.rowHeight;u<d?c.stickyRowTop=i+(u-d):c.stickyRowTop=i}else{const u=this.getFirstPixelOfGroup(c),d=s-(i+c.rowHeight);u>d?c.stickyRowTop=i-(u-d):c.stickyRowTop=i}i=0,n.forEach(u=>{const d=u.stickyRowTop+u.rowHeight;i<d&&(i=d)})},r=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=c=>{if(!c.displayed)return!1;if(c.footer){if(r===!0||r==="grand"&&c.level===-1||r==="group"&&c.level>-1)return!1;const u=c.sibling.rowIndex?c.sibling.rowIndex+1===c.rowIndex:!1;return e==="bottom"&&u?!1:!n.has(c)}return c.isExpandable()?a===!0||e==="bottom"?!1:!n.has(c)&&c.expanded:!1};for(let c=0;c<100;c++){let u=s+i;t||(u=s-i);const d=this.rowModel.getRowIndexAtPixel(u),h=this.rowModel.getRow(d);if(h==null)break;const g=this.getStickyAncestors(h).find(S=>(t?S.rowIndex<d:S.rowIndex>d)&&l(S));if(g){o(g);continue}if((t?h.rowTop<u:h.rowTop+h.rowHeight>u)&&l(h)){o(h);continue}break}return t||n.forEach(c=>{c.stickyRowTop=i-(c.stickyRowTop+c.rowHeight)}),this.refreshNodesAndContainerHeight(e,n,i)}areFooterRowsStickySuppressed(){const e=this.gos.get("suppressStickyTotalRow");if(e===!0)return!0;const t=!!this.gos.get("groupIncludeFooter")||e==="group",i=!!this.gos.get("groupIncludeTotalFooter")||e==="grand";return t&&i?!0:i?"grand":t?"group":!1}canRowsBeSticky(){const e=Bu(this.gos),t=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!i)}getStickyAncestors(e){const t=[];let i=e.footer?e.sibling:e.parent;for(;i;)i.sibling&&t.push(i.sibling),t.push(i),i=i.parent;return t.reverse()}checkStickyRows(){const e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){const t=new Set;if(this.stickyTopRowCtrls.some(i=>i.getRowNode()===e)){for(let i=0;i<this.stickyTopRowCtrls.length;i++){const s=this.stickyTopRowCtrls[i].getRowNode();s!==e&&t.add(s)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows();return}for(let i=0;i<this.stickyBottomRowCtrls.length;i++){const s=this.stickyBottomRowCtrls[i].getRowNode();s!==e&&t.add(s)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t,i){const s=e==="top",n=s?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,o={},r=[];for(let h=0;h<n.length;h++){const p=n[h].getRowNode();if(!t.has(p)){o[p.id]=n[h],p.sticky=!1;continue}r.push(n[h])}const a=new Set;for(let h=0;h<r.length;h++)a.add(r[h].getRowNode());const l=[];t.forEach(h=>{a.has(h)||(h.sticky=!0,l.push(this.createRowCon(h,!1,!1)))});let c=!!l.length||r.length!==n.length;s?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),c=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),c=!0),this.destroyRowCtrls(o,!1);const u=[...r,...l];u.sort((h,p)=>p.getRowNode().rowIndex-h.getRowNode().rowIndex),s||u.reverse(),u.forEach(h=>h.setRowTop(h.getRowNode().stickyRowTop));let d=0;return s?(t.forEach(h=>{h.rowIndex<this.pageBoundsService.getFirstRow()&&(d+=h.rowHeight)}),d>this.topContainerHeight&&(d=this.topContainerHeight),this.setOffsetTop(d)):(t.forEach(h=>{h.rowIndex>this.pageBoundsService.getLastRow()&&(d+=h.rowHeight)}),d>this.bottomContainerHeight&&(d=this.bottomContainerHeight),this.setOffsetBottom(d)),c?(s?this.stickyTopRowCtrls=u:this.stickyBottomRowCtrls=u,!0):!1}ensureRowHeightsValid(){let e=!1;const t=i=>{const s=i.getRowNode();if(s.rowHeightEstimated){const n=Vs(this.gos,s);s.setRowHeight(n.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},SD=class extends D{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(o=>o.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(o=>o.updateRangeBordersIfRangeCount())},i=()=>{this.eventService.addEventListener("cellSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},s=()=>{this.eventService.removeEventListener("cellSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>s()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{is(this.gos)?i():s()}),is(this.gos)&&i()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection","rowSelection"],()=>this.redrawRows()),Bu(this.gos)&&(ke(this.gos)||Oi(this.gos))&&(this.stickyRowFeature=this.createManagedBean(new vD(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=it(this.gos,"print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new wD(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){const e=Rp(this.rowCtrlsByRowIndex),t=Rp(this.zombieRowCtrls),i=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach(t=>{const i=l=>{this.getAllCellCtrls().forEach(c=>{c.getColumn()===t&&l(c)})},s=()=>{i(l=>l.onLeftChanged())},n=()=>{i(l=>l.onWidthChanged())},o=()=>{i(l=>l.onFirstRightPinnedChanged())},r=()=>{i(l=>l.onLastLeftPinnedChanged())},a=()=>{i(l=>l.onColDefChanged())};t.addEventListener("leftChanged",s),t.addEventListener("widthChanged",n),t.addEventListener("firstRightPinnedChanged",o),t.addEventListener("lastLeftPinnedChanged",r),t.addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",s),t.removeEventListener("widthChanged",n),t.removeEventListener("firstRightPinnedChanged",o),t.removeEventListener("lastLeftPinnedChanged",r),t.removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){const e=it(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){const t=[];return this.getAllRowCtrls().forEach(i=>{const s=i.getCellElement(e);s&&t.push(s)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){const{pinnedRowModel:i,beans:s,printLayout:n}=this,o=Object.fromEntries(e.map(a=>[a.getRowNode().id,a]));i.forEachPinnedRow(t,(a,l)=>{const c=e[l];c&&i.getPinnedRowById(c.getRowNode().id,t)===void 0&&(c.destroyFirstPass(),c.destroySecondPass()),a.id in o?(e[l]=o[a.id],delete o[a.id]):e[l]=new Rn(a,s,!1,!1,n)});const r=t==="top"?i.getPinnedTopRowCount():i.getPinnedBottomRowCount();e.length=r}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){var i;if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else if((i=this.cachedRowCtrls)!=null&&i.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const s=n=>{const o=n[e.rowIndex];o&&o.getRowNode()===e&&(o.destroyFirstPass(),o.destroySecondPass(),n[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":s(this.topRowCtrls);break;case"bottom":s(this.bottomRowCtrls);break;default:s(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e==null||e.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=e!=null&&e.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;const i=Ie(this.gos),s=ya(this.gos,i,yn.DOM_DATA_KEY_CELL_CTRL),n=ya(this.gos,i,Rn.DOM_DATA_KEY_ROW_CTRL);return s||n?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,s=e.animate&&po(this.gos),n=i?this.getRowsToRecycle():null;if(i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();const o=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();o&&this.updateContainerHeights(o)}this.recycleRows(n,s),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){var s;const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");t&&!i&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),(s=this.stickyRowFeature)==null||s.resetOffsets())}updateContainerHeights(e=0){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.pageBoundsService.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){var e,t;if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0,(t=(e=this.frameworkOverrides).getLockOnRefresh)==null||t.call(e)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,(t=(e=this.frameworkOverrides).releaseLockOnRefresh)==null||t.call(e)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusService.restoreFocusedCell(e,()=>{this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let s=0;s<i;s++){const n=t[s].getAllCellCtrls(),o=n.length;for(let r=0;r<o;r++)e.push(n[r])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],i=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(const s in this.rowCtrlsByRowIndex)i.push(this.rowCtrlsByRowIndex[s]);return i}addRenderedRowListener(e,t,i){const s=this.rowCtrlsByRowIndex[t];s&&s.addEventListener(e,i)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(const i of this.getCellCtrls(e.rowNodes,e.columns))i.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&YC()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(const i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){var n;const t=this.getCellCtrls(e.rowNodes,e.columns).map(o=>o.getCellRenderer()).filter(o=>o!=null);if((n=e.columns)!=null&&n.length)return t;const i=[],s=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(o=>{if(s&&!this.isRowInMap(o.getRowNode(),s)||!o.isFullWidth())return;const r=o.getFullWidthCellRenderers();for(let a=0;a<r.length;a++){const l=r[a];l!=null&&i.push(l)}}),[...i,...t]}getCellEditorInstances(e){const t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>{const s=i.getCellEditor();s&&t.push(s)}),t}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){const i=t.getCellPosition();e.push(i)}}),e}mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(i=>{const s=i.id;switch(i.rowPinned){case"top":t.top[s]=i;break;case"bottom":t.bottom[s]=i;break;default:t.normal[s]=i;break}}),t}isRowInMap(e,t){const i=e.id;switch(e.rowPinned){case"top":return t.top[i]!=null;case"bottom":return t.bottom[i]!=null;default:return t.normal[i]!=null}}getRowCtrls(e){const t=this.mapRowNodes(e),i=this.getAllRowCtrls();return!e||!t?i:i.filter(s=>{const n=s.getRowNode();return this.isRowInMap(n,t)})}getCellCtrls(e,t){let i;N(t)&&(i={},t.forEach(n=>{const o=this.columnModel.getCol(n);N(o)&&(i[o.getId()]=!0)}));const s=[];return this.getRowCtrls(e).forEach(n=>{n.getAllCellCtrls().forEach(o=>{const r=o.getColumn().getId();i&&!i[r]||s.push(o)})}),s}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){const e=[];di(this.rowCtrlsByRowIndex,(i,s)=>{s.getRowNode().id==null&&e.push(i)}),this.removeRowCtrls(e);const t={};return di(this.rowCtrlsByRowIndex,(i,s)=>{const n=s.getRowNode();t[n.id]=s}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(i=>{const s=this.rowCtrlsByRowIndex[i];s&&(s.destroyFirstPass(t),s.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{afterScroll:t}=e;let i;this.stickyRowFeature&&YC()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);const s=this.firstRenderedRow,n=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let o=!1;if(this.stickyRowFeature){o=this.stickyRowFeature.checkStickyRows();const a=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();a&&this.updateContainerHeights(a)}const r=this.firstRenderedRow!==s||this.lastRenderedRow!==n;if(!(t&&!o&&!r)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!o),i!=null)){const a=this.getCellToRestoreFocusToAfterRefresh();i!=null&&a==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){const i={};e.forEach(o=>i[o]=!0);const n=Object.keys(this.rowCtrlsByRowIndex).filter(o=>!i[o]);this.removeRowCtrls(n,t)}calculateIndexesToDraw(e){const t=PE(this.firstRenderedRow,this.lastRenderedRow),i=(n,o)=>{const r=o.getRowNode().rowIndex;r!=null&&(r<this.firstRenderedRow||r>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(o)&&t.push(r)};di(this.rowCtrlsByRowIndex,i),di(e,i),t.sort((n,o)=>n-o);const s=[];for(let n=0;n<t.length;n++){const o=t[n],r=this.rowModel.getRow(o);r&&!r.sticky&&s.push(o)}return s}recycleRows(e,t=!1,i=!1){const s=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(s,!t),s.forEach(n=>{this.createOrUpdateRowCtrl(n,e,t,i)}),e&&(i&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventService.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const i=t.getRowNode().rowIndex;e.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;const s=i.getRowNode();return!(t!=null&&!this.isRowInMap(s,t))})}createOrUpdateRowCtrl(e,t,i,s){let n,o=this.rowCtrlsByRowIndex[e];if(o||(n=this.rowModel.getRow(e),N(n)&&N(t)&&t[n.id]&&n.alreadyRendered&&(o=t[n.id],t[n.id]=null)),!o)if(n||(n=this.rowModel.getRow(e)),N(n))o=this.createRowCon(n,i,s);else return;return n&&(n.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o,o}destroyRowCtrls(e,t){const i=[];di(e,(s,n)=>{if(n){if(this.cachedRowCtrls&&n.isCacheable()){this.cachedRowCtrls.addRow(n);return}if(n.destroyFirstPass(!t),t){const o=n.instanceId;this.zombieRowCtrls[o]=n,i.push(()=>{n.destroySecondPass(),delete this.zombieRowCtrls[o]})}else n.destroySecondPass()}}),t&&(i.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),zP(i))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=Sn(this.gos);return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.rowModel.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{const a=this.getRowBufferInPixels(),l=this.ctrlsService.getGridBodyCtrl(),c=this.gos.get("suppressRowVirtualisation");let u=!1,d,h;do{const m=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:C,pageLastPixel:w}=this.pageBoundsService.getCurrentPagePixelRange(),R=this.rowContainerHeightService.getDivStretchOffset(),b=l.getScrollFeature().getVScrollPosition(),P=b.top,x=b.bottom;c?(d=C+R,h=w+R):(d=Math.max(P+m-a,C)+R,h=Math.min(x+m+a,w)+R),this.firstVisibleVPixel=Math.max(P+m,C)+R,this.lastVisibleVPixel=Math.min(x+m,w)+R,u=this.ensureAllRowsInRangeHaveHeightsCalculated(d,h)}while(u);let p=this.rowModel.getRowIndexAtPixel(d),g=this.rowModel.getRowIndexAtPixel(h);const v=this.pageBoundsService.getFirstRow(),S=this.pageBoundsService.getLastRow();p<v&&(p=v),g>S&&(g=S),e=p,t=g}const i=it(this.gos,"normal"),s=this.gos.get("suppressMaxRenderedRowRestriction"),n=Math.max(this.getRowBuffer(),500);i&&!s&&t-e>n&&(t=e+n);const o=e!==this.firstRenderedRow,r=t!==this.lastRenderedRow;(o||r)&&(this.firstRenderedRow=e,this.lastRenderedRow=t,this.eventService.dispatchEvent({type:"viewportChanged",firstRow:e,lastRow:t}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var o,r;const i=(o=this.pinnedRowModel)==null?void 0:o.ensureRowHeightsValid(),s=(r=this.stickyRowFeature)==null?void 0:r.ensureRowHeightsValid(),n=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(n||s)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),s||n||i?(this.updateContainerHeights(),!0):!1}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const s=e.getRowNode(),n=this.focusService.isRowNodeFocused(s),o=e.isEditing(),r=s.detail;return n||o||r?!!this.isRowPresent(s):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.paginationService?this.paginationService.isRowPresent(e):!0:!1}createRowCon(e,t,i){const s=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(s)return s;const n=this.gos.get("suppressAnimationFrame"),o=i&&!n&&!this.printLayout;return new Rn(e,this.beans,t,o,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.values(e).map(t=>t.getRowNode())}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(s=>s.getRowNode().rowIndex===i)||null,t||(t=this.getStickyBottomRowCtrls().find(s=>s.getRowNode().rowIndex===i)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const s=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!s}},wD=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],Ct(this.entriesList,i)}removeFromCache(e){const t=e.getRowNode().id;delete this.entriesMap[t],Ct(this.entriesList,e)}getEntries(){return this.entriesList}},yD=class extends D{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows=new rv,this.pinnedBottomRows=new rv}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedRowData(this.gos.get("pinnedTopRowData"),"top"),this.setPinnedRowData(this.gos.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",e=>this.setPinnedRowData(e.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",e=>this.setPinnedRowData(e.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return(e==="top"?this.pinnedTopRows:this.pinnedBottomRows).isEmpty()}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){const t=i=>{i.setRowHeight(i.rowHeight,!0)};this.pinnedBottomRows.forEach(t),this.pinnedTopRows.forEach(t)}}ensureRowHeightsValid(){var s,n;let e=!1,t=0;const i=o=>{if(o.rowHeightEstimated){const r=Vs(this.gos,o);o.setRowTop(t),o.setRowHeight(r.height),t+=r.height,e=!0}};return(s=this.pinnedBottomRows)==null||s.forEach(i),t=0,(n=this.pinnedTopRows)==null||n.forEach(i),this.eventService.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventService.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const i=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(e===void 0){i.clear();return}const s=jo(this.gos),n=t==="top"?Xi.ID_PREFIX_TOP_PINNED:Xi.ID_PREFIX_BOTTOM_PINNED,o=i.getIds(),r=[],a=new Set;let l=0,c=-1;for(const u of e){const d=(s==null?void 0:s({data:u,level:0,rowPinned:t}))??n+this.nextId++;if(a.has(d)){I("Duplicate ID",d,"found for pinned row with data",u,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter.");continue}c++,a.add(d),r.push(d);const h=i.getById(d);if(h!==void 0)h.data!==u&&h.setData(u),l+=this.setRowTopAndRowIndex(h,l,c),o.delete(d);else{const p=new Xi(this.beans);p.id=d,p.data=u,p.rowPinned=t,l+=this.setRowTopAndRowIndex(p,l,c),i.push(p)}}o.forEach(u=>{var d;(d=i.getById(u))==null||d.clearRowTopAndRowIndex()}),i.removeAllById(o),i.setOrder(r)}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight(Vs(this.gos,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getPinnedTopRowCount(){return this.pinnedTopRows.getSize()}getPinnedBottomRowCount(){return this.pinnedBottomRows.getSize()}getPinnedTopRow(e){return this.pinnedTopRows.getByIndex(e)}getPinnedBottomRow(e){return this.pinnedBottomRows.getByIndex(e)}getPinnedRowById(e,t){return t==="top"?this.pinnedTopRows.getById(e):this.pinnedBottomRows.getById(e)}forEachPinnedRow(e,t){return e==="top"?this.pinnedTopRows.forEach(t):this.pinnedBottomRows.forEach(t)}getTotalHeight(e){const t=e.getSize();if(t===0)return 0;const i=e.getByIndex(t-1);return i===void 0?0:i.rowTop+i.rowHeight}},rv=class{constructor(){this.cache={},this.ordering=[]}getById(e){return this.cache[e]}getByIndex(e){const t=this.ordering[e];return this.cache[t]}push(e){this.cache[e.id]=e,this.ordering.push(e.id)}removeAllById(e){for(const t of e)delete this.cache[t];this.ordering=this.ordering.filter(t=>!e.has(t))}setOrder(e){this.ordering=e}forEach(e){this.ordering.forEach((t,i)=>{const s=this.cache[t];s&&e(s,i)})}clear(){this.ordering.length=0,this.cache={}}isEmpty(){return this.ordering.length===0}getSize(){return this.ordering.length}getIds(){return new Set(this.ordering)}},RD=class extends D{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(e=!0){const t={type:"loadComplete",success:e,block:this};this.dispatchLocalEvent(t)}},bD=class extends D{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=mt(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){const e=this.gos.get("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Ct(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),this.activeBlockLoadsCount==0&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.gos.get("debug")&&hi("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const e=this.getAvailableLoadingCount(),t=this.blocks.filter(i=>i.getState()==="needsLoading").slice(0,e);this.registerLoads(t.length),t.forEach(i=>i.load()),this.printCacheStatus()}getBlockState(){if(Oi(this.gos))return this.rowModel.getBlockStates();const e={};return this.blocks.forEach(t=>{const{id:i,state:s}=t.getBlockStateJson();e[i]=s}),e}printCacheStatus(){this.gos.get("debug")&&hi(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}},PD={version:ie,moduleName:"@ag-grid-community/row-node-block",beans:[bD]},xD=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return this.root===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(){var e;return this.root&&((e=this.root)==null?void 0:e.key)===null&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){var e;return this.end&&((e=this.end)==null?void 0:e.key)===null&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){const t=this.getRange();if(t.length===0)return{keep:[],discard:[]};const i=t[0].id===this.root.id,s=t.findIndex(n=>n.id===e.id);if(s>-1){const n=t.slice(0,s),o=t.slice(s+1);return this.setEndRange(e),i?{keep:n,discard:o}:{keep:o,discard:n}}else return{keep:t,discard:[]}}extend(e,t=!1){const i=this.getRoot();if(i==null){const n=this.getRange().slice();return t&&e.depthFirstSearch(o=>!o.group&&n.push(o)),n.push(e),this.setRoot(e),{keep:n,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(i,e).find(n=>{var o;return n.id===((o=this.end)==null?void 0:o.id)}))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const n=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:n}}}},FD=class extends D{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,i,s){this.processClassRules(void 0,e.cellClassRules,t,i,s),this.processStaticCellClasses(e,t,i)}processClassRules(e,t,i,s,n){if(t==null&&e==null)return;const o={},r={},a=(l,c)=>{l.split(" ").forEach(u=>{u.trim()!=""&&c(u)})};if(t){const l=Object.keys(t);for(let c=0;c<l.length;c++){const u=l[c],d=t[u];let h;typeof d=="string"?h=this.expressionService.evaluate(d,i):typeof d=="function"&&(h=d(i)),a(u,p=>{h?o[p]=!0:r[p]=!0})}}e&&n&&Object.keys(e).forEach(l=>a(l,c=>{o[c]||(r[c]=!0)})),n&&Object.keys(r).forEach(n),Object.keys(o).forEach(s)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let s;return typeof i=="function"?s=i(t):s=i,typeof s=="string"&&(s=[s]),s||[]}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(n=>{i(n)})}},sc=(e=>(e.TAB_GUARD="ag-tab-guard",e.TAB_GUARD_TOP="ag-tab-guard-top",e.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",e))(sc||{}),C1=class extends D{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:s,focusTrapActive:n,forceFocusOutWhenTabGuardsAreEmpty:o,isFocusableContainer:r,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:u,onTabKeyDown:d,handleKeyDown:h,eFocusableElement:p}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=s,this.providedFocusInnerElement=a,this.eFocusableElement=p,this.focusTrapActive=!!n,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.isFocusableContainer=!!r,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=d,this.providedHandleKeyDown=h}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new Bn(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){var l;const t=Ge(this.gos),i=this.focusService.findFocusableElements(t.body,null,!0),s=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(s===-1)return;let n,o;e?(n=0,o=s):(n=s+1,o=i.length);const r=i.slice(n,o),a=this.gos.get("tabIndex");r.sort((c,u)=>{const d=parseInt(c.getAttribute("tabindex")||"0"),h=parseInt(u.getAttribute("tabindex")||"0");return h===a?1:d===a?-1:d===0?1:h===0?-1:d-h}),(l=r[e?r.length-1:0])==null||l.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},ED=class extends D{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:s}=this,n=[t,i],o={setTabIndex:v=>{n.forEach(S=>v!=null?S.setAttribute("tabindex",v):S.removeAttribute("tabindex"))}};this.addTabGuards(t,i);const{focusTrapActive:r=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:h,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}=e;this.tabGuardCtrl=this.createManagedBean(new C1({comp:o,focusTrapActive:r,eTopGuard:t,eBottomGuard:i,eFocusableElement:s,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:h,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=Ge(this.gos).createElement("div"),i=e==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",i),vi(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];zt(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){vg(t)||(t=t.getGui());const{eBottomGuard:s}=this;s?s.insertAdjacentElement("beforebegin",t):e(t,i)}},kD=class extends ye{initialiseTabGuard(t){this.tabGuardFeature=this.createManagedBean(new ED(this)),this.tabGuardFeature.initialiseTabGuard(t)}forceFocusOutOfContainer(t=!1){this.tabGuardFeature.forceFocusOutOfContainer(t)}appendChild(t,i){this.tabGuardFeature.appendChild(super.appendChild.bind(this),t,i)}},MD=0,DD=200,TD=class extends D{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i}=e,s=this.getPopupIndex(i);if(s!==-1){const p=this.popupList[s];p.alignedToElement=t}const n=t.getBoundingClientRect(),o=this.getParentRect(),r=this.keepXYWithinBounds(i,n.top-o.top,0),a=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${a}px`;const c=o.right-o.left-a;let u;this.gos.get("enableRtl")?(u=h(),u<0&&(u=d(),this.setAlignedStyles(i,"left")),u>c&&(u=0,this.setAlignedStyles(i,"right"))):(u=d(),u>c&&(u=h(),this.setAlignedStyles(i,"right")),u<0&&(u=0,this.setAlignedStyles(i,"left"))),i.style.left=`${u}px`,i.style.top=`${r}px`;function d(){return n.right-o.left-2}function h(){return n.left-o.left-a}}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:s,skipObserver:n}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:!0,skipObserver:n,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:n,eventSource:o,alignSide:r="left",position:a="over",column:l,rowNode:c,type:u}=e,d=o.getBoundingClientRect(),h=this.getParentRect(),p=this.getPopupIndex(t);if(p!==-1){const v=this.popupList[p];v.alignedToElement=o}const g=()=>{let v=d.left-h.left;r==="right"&&(v-=t.offsetWidth-d.width);let S;return a==="over"?(S=d.top-h.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,d,h,e.nudgeY||0)==="under"?S=d.top-h.top+d.height:S=d.top-t.offsetHeight-(s||0)*2-h.top),{x:v,y:S}};this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:n,updatePosition:g,postProcessCallback:()=>this.callPostProcessPopup(u,t,o,null,l,c)})}shouldRenderUnderOrAbove(e,t,i,s){const n=i.bottom-t.bottom,o=t.top-i.top,r=e.offsetHeight+s;return n>r?"under":o>r||o>n?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const s=this.popupList[i],{alignedToElement:n}=s;!n||(["right","left","over","above","under"].forEach(r=>{n.classList.remove(`ag-has-popup-positioned-${r}`),e.classList.remove(`ag-popup-positioned-${r}`)}),!t)||(n.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,i,s,n,o){const r=this.gos.getCallback("postProcessPopup");r&&r({column:n,rowNode:o,ePopup:t,type:e,eventSource:i,mouseEvent:s})}positionPopup(e){const{ePopup:t,keepWithinBounds:i,nudgeX:s,nudgeY:n,skipObserver:o,updatePosition:r}=e,a={width:0,height:0},l=(c=!1)=>{let{x:u,y:d}=r();c&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,s&&(u+=s),n&&(d+=n),i&&(u=this.keepXYWithinBounds(t,u,1),d=this.keepXYWithinBounds(t,d,0)),t.style.left=`${u}px`,t.style.top=`${d}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!o){const c=this.resizeObserverService.observeResize(t,()=>l(!0));setTimeout(()=>c(),DD)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){const e=Ge(this.gos);let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),Cy(t)}keepXYWithinBounds(e,t,i){const s=i===0,n=s?"clientHeight":"clientWidth",o=s?"top":"left",r=s?"height":"width",a=s?"scrollTop":"scrollLeft",l=Ge(this.gos),c=l.documentElement,u=this.getPopupParent(),d=e.getBoundingClientRect(),h=u.getBoundingClientRect(),p=l.documentElement.getBoundingClientRect(),g=u===l.body,v=Math.ceil(d[r]);let m=g?(s?my:eu)(c)+c[a]:u[n];g&&(m-=Math.abs(p[o]-h[o]));const C=m-v;return Math.min(Math.max(t,0),Math.abs(C))}addPopup(e){const t=Ge(this.gos),{eChild:i,ariaLabel:s,alwaysOnTop:n,positionCallback:o,anchorToElement:r}=e;if(!t)return I("could not find the document, document is empty"),{hideFunc:()=>{}};const a=this.getPopupIndex(i);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(i);const l=this.createPopupWrapper(i,s,!!n),c=this.addEventListenersToPopup({...e,wrapperEl:l});return o&&o(),this.addPopupToPopupList(i,l,c,r),{hideFunc:c}}initialisePopupPosition(e){const i=this.getPopupParent().getBoundingClientRect();N(e.style.top)||(e.style.top=`${i.top*-1}px`),N(e.style.left)||(e.style.left=`${i.left*-1}px`)}createPopupWrapper(e,t,i){const s=this.getPopupParent(),n=document.createElement("div");return this.environment.applyThemeClasses(n),n.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||vi(e,"dialog"),To(e,t),n.appendChild(e),s.appendChild(n),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),n}handleThemeChange(e){if(e.themeChanged)for(const t of this.popupList)this.environment.applyThemeClasses(t.wrapper)}addEventListenersToPopup(e){const t=Ge(this.gos),i=this.getPopupParent(),{wrapperEl:s,eChild:n,closedCallback:o,afterGuiAttached:r,closeOnEsc:a,modal:l}=e;let c=!1;const u=g=>{if(!s.contains(Ie(this.gos)))return;g.key===M.ESCAPE&&!Qi(g)&&p({keyboardEvent:g})},d=g=>p({mouseEvent:g}),h=g=>p({touchEvent:g}),p=(g={})=>{const{mouseEvent:v,touchEvent:S,keyboardEvent:m,forceHide:C}=g;!C&&(this.isEventFromCurrentPopup({mouseEvent:v,touchEvent:S},n)||c)||(c=!0,i.removeChild(s),t.removeEventListener("keydown",u),t.removeEventListener("mousedown",d),t.removeEventListener("touchstart",h),t.removeEventListener("contextmenu",d),this.eventService.removeEventListener("dragStarted",d),o&&o(v||S||m),this.removePopupFromPopupList(n))};return r&&r({hidePopup:p}),window.setTimeout(()=>{a&&t.addEventListener("keydown",u),l&&(t.addEventListener("mousedown",d),this.eventService.addEventListener("dragStarted",d),t.addEventListener("touchstart",h),t.addEventListener("contextmenu",d))},0),p}addPopupToPopupList(e,t,i,s){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:MD++,isAnchored:!!s}),s&&this.setPopupPositionRelatedToElement(e,s)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const s=this.popupList[i];if(s.stopAnchoringPromise&&s.stopAnchoringPromise.then(o=>o&&o()),s.stopAnchoringPromise=void 0,s.isAnchored=!1,!t)return;const n=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:s.hideFunc});return s.stopAnchoringPromise=n,s.isAnchored=!0,n}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:s,ePopup:n}=e,o=s.getBoundingClientRect(),r=d=>parseInt(d.substring(0,d.length-1),10),a=(d,h)=>{const p=i[d]-o[d],g=r(n.style[d]);return{initialDiff:p,lastDiff:p,initial:g,last:g,direction:h}},l=a("top",0),c=a("left",1),u=this.getFrameworkOverrides();return new _e(d=>{u.wrapIncoming(()=>{u.setInterval(()=>{const h=t.getBoundingClientRect(),p=s.getBoundingClientRect();if(p.top==0&&p.left==0&&p.height==0&&p.width==0){e.hidePopup();return}const v=(S,m)=>{const C=r(n.style[m]);S.last!==C&&(S.initial=C,S.last=C);const w=h[m]-p[m];if(w!=S.lastDiff){const R=this.keepXYWithinBounds(n,S.initial+S.initialDiff-w,S.direction);n.style[m]=`${R}px`,S.last=R}S.lastDiff=w};v(l,"top"),v(c,"left")},200).then(h=>{d(()=>{h!=null&&window.clearInterval(h)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:s}=e,n=i||s;if(!n)return!1;const o=this.getPopupIndex(t);if(o===-1)return!1;for(let r=o;r<this.popupList.length;r++){const a=this.popupList[r];if(lx(a.element,n))return!0}return this.isElementWithinCustomPopup(n.target)}isElementWithinCustomPopup(e){const t=Ge(this.gos);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),s=i.length,n=this.getWrapper(e);if(!n||s<=1||!t.contains(e))return;const o=[],r=[];for(const h of i)h!==n&&(h.classList.contains("ag-always-on-top")?r.push(h):o.push(h));const a=[],l=r.length,d=n.classList.contains("ag-always-on-top")||!l?[...o,...r,n]:[...o,n,...r];for(let h=0;h<=s;h++){const p=d[h];if(i[h]===d[h]||p===n)continue;p.querySelectorAll("div").forEach(v=>{v.scrollTop!==0&&a.push([v,v.scrollTop])}),h===0?t.insertAdjacentElement("afterbegin",p):d[h-1].insertAdjacentElement("afterend",p)}for(;a.length;){const h=a.pop();h[0].scrollTop=h[1]}}},AD=["touchstart","touchend","touchmove","touchcancel"],v1=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(e,t){return new _e(i=>{i(window.setInterval(e,t))})}addEventListener(e,t,i,s){const n=wn(AD,t);e.addEventListener(t,i,{capture:!!s,passive:n})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},ID=class extends D{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===M.UP,s=e===M.DOWN,n=e===M.LEFT;let o,r;if(i||s)r=i?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),o=t.column;else{const a=this.visibleColsService.getAllCols(),l=this.gos.get("enableRtl");r=t.rowIndex,o=n!==l?a[0]:ae(a)}return{rowIndex:r,rowPinned:null,column:o}}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,s=!1;for(;!s;){switch(e){case M.UP:i=this.getCellAbove(i);break;case M.DOWN:i=this.getCellBelow(i);break;case M.RIGHT:this.gos.get("enableRtl")?i=this.getCellToLeft(i):i=this.getCellToRight(i);break;case M.LEFT:this.gos.get("enableRtl")?i=this.getCellToRight(i):i=this.getCellToLeft(i);break;default:i=null,I("unknown key for navigation ",e);break}i?s=this.isCellGoodToFocusOn(i):s=!0}return i}isCellGoodToFocusOn(e){const t=e.column;let i;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex);break}return i?!t.isSuppressNavigable(i):!1}getCellToLeft(e){if(!e)return null;const t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,i=e.rowPinned;let s=!1;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else i&&(s=!0);const n=this.rowModel.getRow(e.rowIndex),o=s?void 0:this.getNextStickyPosition(n);return o||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){if(!Bu(this.gos)||!e||!e.sticky)return;const i=this.rowRenderer.getStickyTopRowCtrls().some(a=>a.getRowNode().rowIndex===e.rowIndex);let s=[];i?s=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex):s=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((a,l)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex);const n=t?-1:1,o=s.findIndex(a=>a.getRowNode().rowIndex===e.rowIndex),r=s[o+n];if(r)return{rowIndex:r.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,i=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowCount()-1<=i:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowCount()-1<=i:this.pageBoundsService.getLastRow()<=i}getRowAbove(e){const t=e.rowIndex,i=e.rowPinned,s=i?t===0:t===this.pageBoundsService.getFirstRow();let n=!1;if(s)return i==="top"?null:i?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;i&&(n=!0);const o=this.rowModel.getRow(e.rowIndex),r=n?void 0:this.getNextStickyPosition(o,!0);return r||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowCount()-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){var o;const t=this.visibleColsService.getAllCols();let i=e.rowIndex,s=e.rowPinned,n=this.visibleColsService.getColAfter(e.column);if(!n){n=t[0];const r=this.getRowBelow(e);if(le(r)||!r.rowPinned&&!(((o=this.paginationService)==null?void 0:o.isRowInPage(r))??!0))return null;i=r?r.rowIndex:null,s=r?r.rowPinned:null}return{rowIndex:i,column:n,rowPinned:s}}getNextTabbedCellBackwards(e){var o;const t=this.visibleColsService.getAllCols();let i=e.rowIndex,s=e.rowPinned,n=this.visibleColsService.getColBefore(e.column);if(!n){n=ae(t);const r=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(le(r)||!r.rowPinned&&!(((o=this.paginationService)==null?void 0:o.isRowInPage(r))??!0))return null;i=r?r.rowIndex:null,s=r?r.rowPinned:null}return{rowIndex:i,column:n,rowPinned:s}}},dt=(e,t)=>{for(const i in t)t[i]=e;return t},av={...dt("@ag-grid-community/core",{dispatchEvent:0,destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,getState:0,setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0,redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRow:0,getFirstDisplayedRowIndex:0,getLastDisplayedRow:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0,getModel:0,getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0,getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0,addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0,expireValueCache:0,getValue:0,getCellValue:0,showColumnMenuAfterButtonClick:0,showColumnMenuAfterMouseClick:0,showColumnMenu:0,hidePopupMenu:0,onSortChanged:0,getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0,setGridAriaProperty:0,refreshCells:0,flashCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0,addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getColumnDef:0,getColumnDefs:0,sizeColumnsToFit:0,setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumn:0,getDisplayNameForColumnGroup:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnVisible:0,setColumnsVisible:0,setColumnPinned:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0,moveColumn:0,moveColumnByIndex:0,moveColumns:0,setColumnWidth:0,setColumnWidths:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0,autoSizeColumn:0,autoSizeColumns:0,autoSizeAllColumns:0,undoCellEditing:0,redoCellEditing:0,getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,getCurrentUndoSize:0,getCurrentRedoSize:0,isAnyFilterPresent:0,onFilterChanged:0,isColumnFilterPresent:0,getFilterInstance:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0,paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0,expandAll:0,collapseAll:0,onRowHeightChanged:0,setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...dt("@ag-grid-community/client-side-row-model",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...dt("@ag-grid-community/csv-export",{getDataAsCsv:0,exportDataAsCsv:0}),...dt("@ag-grid-community/infinite-row-model",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...dt("@ag-grid-enterprise/advanced-filter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...dt("@ag-grid-enterprise/charts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...dt("@ag-grid-enterprise/clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...dt("@ag-grid-enterprise/excel-export",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...dt("@ag-grid-enterprise/master-detail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...dt("@ag-grid-enterprise/menu",{showContextMenu:0,showColumnChooser:0,hideColumnChooser:0}),...dt("@ag-grid-enterprise/range-selection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...dt("@ag-grid-enterprise/row-grouping",{addAggFunc:0,addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0,isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumn:0,removeValueColumns:0,addValueColumn:0,addValueColumns:0,setRowGroupColumns:0,removeRowGroupColumn:0,removeRowGroupColumns:0,addRowGroupColumn:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0,setPivotColumns:0,removePivotColumn:0,removePivotColumns:0,addPivotColumn:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...dt("@ag-grid-enterprise/server-side-row-model",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...dt("@ag-grid-enterprise/side-bar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...dt("@ag-grid-enterprise/status-bar",{getStatusPanel:0})},Qd={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},LD=(e,t)=>e.eventService.dispatchEvent(t),S1=class{};Reflect.defineProperty(S1,"name",{value:"GridApi"});var OD=class extends D{constructor(){super(),this.beanName="apiFunctionService",this.api=new S1,this.fns={...Qd,dispatchEvent:LD},this.beans=null,this.preDestroyLink="";const{api:e}=this;for(const t in av)e[t]=this.makeApi(t)[t]}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){var n;const{fns:i,beans:s}=this;i!==Qd&&(i[e]=((n=s==null?void 0:s.validationService)==null?void 0:n.validateApiFunction(e,t))??t)}makeApi(e){return{[e]:(...t)=>{const{beans:i,fns:{[e]:s}}=this;return s?s(i,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:i,preDestroyLink:s}=this;if(!t)I(`Grid API function ${e}() cannot be called as the grid has been destroyed.
Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${s}`);else{const n=av[e];i.assertModuleRegistered(n,`api.${e}`)&&I(`API function '${e}' not registered to module '${n}'`)}}destroy(){super.destroy(),this.fns=Qd,this.beans=null}};function BD(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionService").api}}var ND=class extends D{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,i){const s=[],n={};return e.forEach(o=>{const r=this.createDefFromColumn(o,t,i);let a=!0,l=r,c=o.getOriginalParent(),u=null;for(;c;){let d=null;if(c.isPadding()){c=c.getOriginalParent();continue}const h=n[c.getGroupId()];if(h){h.children.push(l),a=!1;break}if(d=this.createDefFromGroup(c),d&&(d.children=[l],n[d.groupId]=d,l=d,c=c.getOriginalParent()),c!=null&&u===c){a=!1;break}u=c}a&&s.push(l)}),s}createDefFromGroup(e){const t=yp(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const s=yp(e.getColDef());return s.colId=e.getColId(),s.width=e.getActualWidth(),s.rowGroup=e.isRowGroupActive(),s.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,s.pivot=e.isPivotActive(),s.pivotIndex=e.isPivotActive()?i.indexOf(e):null,s.aggFunc=e.isValueActive()?e.getAggFunc():null,s.hide=e.isVisible()?void 0:!0,s.pinned=e.isPinned()?e.getPinned():null,s.sort=e.getSort()?e.getSort():null,s.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,s}},_D=class extends D{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(e){this.eventService.dispatchEvent({type:"displayedColumnsChanged",source:e})}gridColumns(){this.eventService.dispatchEvent({type:"gridColumnsChanged"})}headerHeight(e){this.eventService.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"})}groupHeaderHeight(e){this.eventService.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}groupOpened(e){this.eventService.dispatchEvent({type:"columnGroupOpened",columnGroup:e.length===1?e[0]:void 0,columnGroups:e})}rowGroupChanged(e,t){this.eventService.dispatchEvent({type:"columnRowGroupChanged",columns:e,column:e.length===1?e[0]:null,source:t})}genericColumnEvent(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t.length===1?t[0]:null,source:i})}pivotModeChanged(){this.eventService.dispatchEvent({type:"columnPivotModeChanged"})}virtualColumnsChanged(e){this.eventService.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}newColumnsLoaded(e){this.eventService.dispatchEvent({type:"newColumnsLoaded",source:e})}everythingChanged(e){this.eventService.dispatchEvent({type:"columnEverythingChanged",source:e})}columnMoved(e){const{movedColumns:t,source:i,toIndex:s,finished:n}=e;this.eventService.dispatchEvent({type:"columnMoved",columns:t,column:t&&t.length===1?t[0]:null,toIndex:s,finished:n,source:i})}columnPinned(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,s=this.getCommonValue(e,n=>n.getPinned());this.eventService.dispatchEvent({type:"columnPinned",pinned:s??null,columns:e,column:i,source:t})}columnVisible(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,s=this.getCommonValue(e,n=>n.isVisible());this.eventService.dispatchEvent({type:"columnVisible",visible:s,columns:e,column:i,source:t})}getCommonValue(e,t){if(!e||e.length==0)return;const i=t(e[0]);for(let s=1;s<e.length;s++)if(i!==t(e[s]))return;return i}columnChanged(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t&&t.length==1?t[0]:null,source:i})}columnResized(e,t,i,s=null){e&&e.length&&this.eventService.dispatchEvent({type:"columnResized",columns:e,column:e.length===1?e[0]:null,flexColumns:s,finished:t,source:i})}},GD=class extends D{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){const e=this.columnModel.getColDefCols();if(le(e)||!this.columnModel.isAlive())return[];const i=this.columnModel.getAllCols().map(s=>this.createStateItemFromColumn(s));return this.orderColumnStateList(i),i}createStateItemFromColumn(e){const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns(),s=e.isRowGroupActive()?t.indexOf(e):null,n=e.isPivotActive()?i.indexOf(e):null,o=e.isValueActive()?e.getAggFunc():null,r=e.getSort()!=null?e.getSort():null,a=e.getSortIndex()!=null?e.getSortIndex():null,l=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:r,sortIndex:a,aggFunc:o,rowGroup:e.isRowGroupActive(),rowGroupIndex:s,pivot:e.isPivotActive(),pivotIndex:n,flex:l}}orderColumnStateList(e){const t=this.columnModel.getCols(),i=new Map(t.map((s,n)=>[s.getColId(),n]));e.sort((s,n)=>{const o=i.has(s.colId)?i.get(s.colId):-1,r=i.has(n.colId)?i.get(n.colId):-1;return o-r})}},HD=class extends D{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){const e=[],t=this.columnModel.getColTree();return ss(null,t,i=>{ft(i)&&e.push({groupId:i.getGroupId(),open:i.isExpanded()})}),e}resetColumnGroupState(e){const t=this.columnModel.getColDefColTree();if(!t)return;const i=[];ss(null,t,s=>{if(ft(s)){const n=s.getColGroupDef(),o={groupId:s.getGroupId(),open:n?n.openByDefault:void 0};i.push(o)}}),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();const s=[];e.forEach(n=>{const o=n.groupId,r=n.open,a=this.columnModel.getProvidedColGroup(o);a&&a.isExpanded()!==r&&(a.setExpanded(r),s.push(a))}),this.visibleColsService.refresh(t,!0),s.length&&this.eventDispatcher.groupOpened(s),this.columnAnimationService.finish()}},VD=class extends D{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,i=!1){const s=this.visibleColsService.isBodyWidthDirty();if(!(e===this.scrollWidth&&t===this.scrollPosition&&!s)){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){const o=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=o-this.scrollPosition-this.scrollWidth,this.viewportRight=o-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(i)}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t];break}return i||[]}extractViewportColumns(){const e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||this.isAnyParentAutoHeaderHeight(e)?!0:this.isColumnInRowViewport(e)}isAnyParentAutoHeaderHeight(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),s=this.viewportLeft-200,n=this.viewportRight+200,o=t<s&&i<s,r=t>n&&i>n;return!o&&!r}getViewportColumns(){const e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;const t=n=>{const o=n.getLeft();return N(o)&&o>this.viewportLeft},i=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),s=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,s,i,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};const e={},t=this.visibleColsService.getLeftCols(),i=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(i).forEach(o=>e[o.getId()]=!0);const n=(o,r,a)=>{let l=!1;for(let c=0;c<o.length;c++){const u=o[c];let d=!1;if(Ws(u))d=e[u.getId()]===!0;else{const p=u.getDisplayedChildren();p&&(d=n(p,r,a+1))}d&&(l=!0,r[a]||(r[a]=[]),r[a].push(u))}return l};n(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),n(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),n(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){const e=s=>`${s.getId()}-${s.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),i=this.colsWithinViewportHash!==t;return i&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),i}},WD=class extends D{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){const i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(){return!1}getGui(){return this.eGui}init(s){const n=e(s),o=typeof n;if(o==="string"||o==="number"||o==="boolean"){this.eGui=Ea("<span>"+n+"</span>");return}if(n==null){this.eGui=Ea("<span></span>");return}this.eGui=n}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}},zD=class extends D{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},dragAndDropImageComponent:{mandatoryMethodList:["setIcon","setLabel"],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},jD=["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","controlsColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"],lv=Object.fromEntries(jD.map((e,t)=>[e,t]));function UD(e,t){const i=(e.beanName?lv[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,s=(t.beanName?lv[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return i-s}function KD(e,t){return(e==null?void 0:e.beanName)==="gridDestroyService"?-1:0}var $D=class extends D{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e,...t){const i=this.registry[e];if(i!=null)return new i(...t)}},qD=class extends D{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={gridCtrl:void 0,gridBodyCtrl:void 0,center:void 0,left:void 0,right:void 0,bottomCenter:void 0,bottomLeft:void 0,bottomRight:void 0,topCenter:void 0,topLeft:void 0,topRight:void 0,stickyTopCenter:void 0,stickyTopLeft:void 0,stickyTopRight:void 0,stickyBottomCenter:void 0,stickyBottomLeft:void 0,stickyBottomRight:void 0,fakeHScrollComp:void 0,fakeVScrollComp:void 0,gridHeaderCtrl:void 0,centerHeader:void 0,leftHeader:void 0,rightHeader:void 0},this.ready=!1,this.readyCallbacks=[],this.runReadyCallbacksAsync=!1}wireBeans(e){var t,i;this.runReadyCallbacksAsync=((i=(t=e.frameworkOverrides).runWhenReadyAsync)==null?void 0:i.call(t))??!1}postConstruct(){this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(e=>e(this.params)),this.readyCallbacks.length=0)},this.runReadyCallbacksAsync)}updateReady(){this.ready=Object.values(this.params).every(e=>(e==null?void 0:e.isAlive())??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const i=this.readyCallbacks.indexOf(t);i>=0&&this.readyCallbacks.splice(i,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},YD=class extends D{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){const{rowIndex:t,rowPinned:i,column:s}=e;return this.createIdFromValues({rowIndex:t,column:s,rowPinned:i})}createIdFromValues(e){const{rowIndex:t,rowPinned:i,column:s}=e;return`${t}.${i??"null"}.${s.getId()}`}equals(e,t){const i=e.column===t.column,s=e.rowPinned===t.rowPinned,n=e.rowIndex===t.rowIndex;return i&&s&&n}},QD=class extends D{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){ke(this.gos)&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);const i=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(s=>this.eventService.dispatchEvent(s)),this.events=[]};t?i():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(i)),this.dispatchExpandedDebounced())}},XD=class extends D{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null;const i=this.pinnedRowModel.getPinnedBottomRowCount(),s=this.pinnedRowModel.getPinnedTopRowCount();return i?(t="bottom",e=i-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):s&&(t="top",e=s-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRow(e.rowIndex);case"bottom":return this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(N(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}},cv={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},uv={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},dv={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},JD=class extends D{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.ancestorThemeClasses=[],this.sizesMeasured=!1,this.gridTheme=null}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addDestroyFunc(()=>this.stopUsingTheme()),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.ancestorThemeClasses=this.readAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(cv),this.getSizeEl(uv),this.getSizeEl(dv)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(cv)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(uv)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(dv)}hasMeasuredSizes(){return this.sizesMeasured}getGridThemeClass(){var e;return((e=this.gridTheme)==null?void 0:e.getCssClass())||null}getThemeClasses(){return this.gridTheme?[this.gridTheme.getCssClass()]:this.ancestorThemeClasses}applyThemeClasses(e){const t=this.getThemeClasses();for(const i of Array.from(e.classList))i.startsWith("ag-theme-")&&!t.includes(i)&&e.classList.remove(i);e.classList.add(...t)}refreshRowHeightVariable(){const e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const i=`${t}px`;return e!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),t):e!=""?parseFloat(e):-1}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const i=this.measureSizeEl(e);return i==="detached"||i==="no-styles"?e.defaultValue:(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const i=t.offsetWidth;return i===hv?"no-styles":(this.sizesMeasured=!0,i)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let i=this.eMeasurementContainer;i||(i=this.eMeasurementContainer=document.createElement("div"),i.className="ag-measurement-container",this.gos.get("theme")&&this.applyThemeClasses(i),this.eGridDiv.appendChild(i)),t=document.createElement("div"),t.style.width=`var(${e.cssName}, ${hv}px)`,i.appendChild(t),this.sizeEls.set(e,t);let s=this.measureSizeEl(e);s==="no-styles"&&I(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);const n=this.resizeObserverService.observeResize(t,()=>{const o=this.measureSizeEl(e);o==="detached"||o==="no-styles"||(this.lastKnownValues.set(e,o),o!==s&&(s=o,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>n()),t}fireGridStylesChangedEvent(e){this.eventService.dispatchEvent({type:"gridStylesChanged",[e]:!0})}setUpThemeClassObservers(){const e=new MutationObserver(()=>{const i=this.readAncestorThemeClasses();ZD(i,this.ancestorThemeClasses)||(this.ancestorThemeClasses=i,this.fireGridStylesChangedEvent("themeChanged"))});let t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement;this.addDestroyFunc(()=>e.disconnect())}readAncestorThemeClasses(){let e=this.eGridDiv;const t=[];for(;e;){const i=Array.from(e.classList).filter(s=>s.startsWith("ag-theme-"));for(const s of i)t.includes(s)||t.unshift(s);e=e.parentElement}return Object.freeze(t)}handleThemeGridOptionChange(){const{gos:e,eMeasurementContainer:t,gridTheme:i}=this,s=e.get("theme")||null;s!==i&&(i==null||i.stopUse(),this.gridTheme=s,s==null||s.startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),container:this.eGridDiv}),t&&this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged"))}stopUsingTheme(){var e;(e=this.gridTheme)==null||e.stopUse(),this.gridTheme=null}},ZD=(e,t)=>e.length===t.length&&e.findIndex((i,s)=>e[s]!==t[s])===-1,hv=15538,eT=class extends D{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new zo}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){const e=qc(this.gos);this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,i){this.globalEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.globalEventService.removeEventListener(e,t,i)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},Lg=class qt extends D{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(t){this.eGridDiv=t.eGridDiv,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.headerNavigationService=t.headerNavigationService,this.headerPositionUtils=t.headerPositionUtils,this.rowRenderer=t.rowRenderer,this.rowPositionUtils=t.rowPositionUtils,this.cellPositionUtils=t.cellPositionUtils,this.navigationService=t.navigationService,this.ctrlsService=t.ctrlsService,this.filterManager=t.filterManager,this.rangeService=t.rangeService,this.advancedFilterService=t.advancedFilterService,this.overlayService=t.overlayService}static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",qt.toggleKeyboardMode),t.addEventListener("mousedown",qt.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.removeEventListener("keydown",qt.toggleKeyboardMode),t.removeEventListener("mousedown",qt.toggleKeyboardMode))}static toggleKeyboardMode(t){const i=qt.keyboardModeActive,s=t.type==="keydown";s&&(t.ctrlKey||t.metaKey||t.altKey)||i!==s&&(qt.keyboardModeActive=s)}postConstruct(){const t=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:t,columnRowGroupChanged:t}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(this,i=>{this.gridCtrl=i.gridCtrl})}registerKeyboardFocusEvents(){const t=Ge(this.gos);qt.addKeyboardModeEvents(t),qt.instanceCount++,this.addDestroyFunc(()=>{qt.instanceCount--,qt.removeKeyboardModeEvents(t)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const t=this.focusedCellPosition.column,i=this.columnModel.getCol(t.getId());t!==i&&this.clearFocusedCell()}isKeyboardMode(){return qt.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(Ie(this.gos),Rn.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(Ie(this.gos),Vu.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(t,i){let s=t;for(;s;){if(ya(this.gos,s,i))return!1;s=s.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(t){return this.isCellRestoreFocused(t)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}clearRestoreFocus(){this.restoredFocusedCellPosition=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(t,i){this.awaitRestoreFocusedCell=!0,setTimeout(()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(t),i())})}isCellRestoreFocused(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)}setRestoreFocusedCell(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)}getFocusEventParams(t){const{rowIndex:i,rowPinned:s,column:n}=t,o={rowIndex:i,rowPinned:s,column:n,isFullWidthCell:!1},r=this.rowRenderer.getRowByPosition({rowIndex:i,rowPinned:s});return r&&(o.isFullWidthCell=r.isFullWidth()),o}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;const t=this.getFocusEventParams(this.focusedCellPosition);this.focusedCellPosition=null,this.eventService.dispatchEvent({type:"cellFocusCleared",...t})}setFocusedCell(t){const{column:i,rowIndex:s,rowPinned:n,forceBrowserFocus:o=!1,preventScrollOnBrowserFocus:r=!1}=t,a=this.columnModel.getCol(i);if(!a){this.focusedCellPosition=null;return}this.focusedCellPosition={rowIndex:s,rowPinned:Yi(n),column:a},this.eventService.dispatchEvent({type:"cellFocused",...this.getFocusEventParams(this.focusedCellPosition),forceBrowserFocus:o,preventScrollOnBrowserFocus:r})}isCellFocused(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)}isRowNodeFocused(t){return this.isRowFocused(t.rowIndex,t.rowPinned)}isHeaderWrapperFocused(t){if(this.focusedHeaderPosition==null)return!1;const i=t.getColumnGroupChild(),s=t.getRowIndex(),n=t.getPinned(),{column:o,headerRowIndex:r}=this.focusedHeaderPosition;return i===o&&s===r&&n==o.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(t,i){this.focusedHeaderPosition={headerRowIndex:t,column:i}}isHeaderFocusSuppressed(){return this.gos.get("suppressHeaderFocus")||this.overlayService.isExclusive()}isCellFocusSuppressed(){return this.gos.get("suppressCellFocus")||this.overlayService.isExclusive()}focusHeaderPosition(t){var c;if(this.isHeaderFocusSuppressed())return!1;const{direction:i,fromTab:s,allowUserOverride:n,event:o,fromCell:r,rowWithoutSpanValue:a}=t;let{headerPosition:l}=t;if(r&&((c=this.filterManager)!=null&&c.isAdvancedFilterHeaderActive()))return this.focusAdvancedFilter(l);if(n){const u=this.getFocusedHeader(),d=this.headerNavigationService.getHeaderRowCount();if(s){const h=this.gos.getCallback("tabToNextHeader");h&&(l=this.getHeaderPositionFromUserFunc({userFunc:h,direction:i,currentPosition:u,headerPosition:l,headerRowCount:d}))}else{const h=this.gos.getCallback("navigateToNextHeader");if(h&&o){const p={key:o.key,previousHeaderPosition:u,nextHeaderPosition:l,headerRowCount:d,event:o};l=h(p)}}}return l?this.focusProvidedHeaderPosition({headerPosition:l,direction:i,event:o,fromCell:r,rowWithoutSpanValue:a}):!1}focusHeaderPositionFromUserFunc(t){if(this.isHeaderFocusSuppressed())return!1;const{userFunc:i,headerPosition:s,direction:n,event:o}=t,r=this.getFocusedHeader(),a=this.headerNavigationService.getHeaderRowCount(),l=this.getHeaderPositionFromUserFunc({userFunc:i,direction:n,currentPosition:r,headerPosition:s,headerRowCount:a});return!!l&&this.focusProvidedHeaderPosition({headerPosition:l,direction:n,event:o})}getHeaderPositionFromUserFunc(t){const{userFunc:i,direction:s,currentPosition:n,headerPosition:o,headerRowCount:r}=t,l=i({backwards:s==="Before",previousHeaderPosition:n,nextHeaderPosition:o,headerRowCount:r});return l===!0||l===null?(l===null&&I("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),n):l===!1?null:l}focusProvidedHeaderPosition(t){var d;const{headerPosition:i,direction:s,fromCell:n,rowWithoutSpanValue:o,event:r}=t,{column:a,headerRowIndex:l}=i;if(l===-1)return(d=this.filterManager)!=null&&d.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(i):this.focusGridView(a);this.headerNavigationService.scrollToColumn(a,s);const c=this.ctrlsService.getHeaderRowContainerCtrl(a.getPinned()),u=(c==null?void 0:c.focusHeader(i.headerRowIndex,a,r))||!1;return u&&(o!=null||n)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(o??-1),u}focusFirstHeader(){if(this.overlayService.isExclusive()&&this.focusOverlay())return!0;let t=this.visibleColsService.getAllCols()[0];if(!t)return!1;t.getParent()&&(t=this.visibleColsService.getColGroupAtLevel(t,0));const i=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:i,rowWithoutSpanValue:0})}focusLastHeader(t){if(this.overlayService.isExclusive()&&this.focusOverlay(!0))return!0;const i=this.headerNavigationService.getHeaderRowCount()-1,s=ae(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:i,column:s},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){var i;return(i=this.filterManager)!=null&&i.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(t,i){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===Yi(i)}findFocusableElements(t,i,s=!1){const n=Zx;let o=gy;i&&(o+=", "+i),s&&(o+=', [tabindex="-1"]');const r=Array.prototype.slice.apply(t.querySelectorAll(n)).filter(c=>Ii(c)),a=Array.prototype.slice.apply(t.querySelectorAll(o));return a.length?((c,u)=>c.filter(d=>u.indexOf(d)===-1))(r,a):r}focusInto(t,i=!1,s=!1){const n=this.findFocusableElements(t,null,s),o=i?ae(n):n[0];return o?(o.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(t,i){if(!i)return null;const s=this.findFocusableElements(t),n=s.indexOf(i);if(n===-1)return null;let o=-1;for(let r=n-1;r>=0;r--)if(s[r].classList.contains("ag-tab-guard-top")){o=r;break}return o<=0?null:s[o-1]}findNextFocusableElement(t=this.eGridDiv,i,s){const n=this.findFocusableElements(t,i?':not([tabindex="-1"])':null),o=Ie(this.gos);let r;i?r=n.findIndex(l=>l.contains(o)):r=n.indexOf(o);const a=r+(s?-1:1);return a<0||a>=n.length?null:n[a]}isTargetUnderManagedComponent(t,i){if(!i)return!1;const s=t.querySelectorAll(`.${Bn.FOCUS_MANAGED_CLASS}`);if(!s.length)return!1;for(let n=0;n<s.length;n++)if(s[n].contains(i))return!0;return!1}findTabbableParent(t,i=5){let s=0;for(;t&&Fp(t)===null&&++s<=i;)t=t.parentElement;return Fp(t)===null?null:t}focusOverlay(t){var s;const i=this.overlayService.isVisible()&&((s=this.overlayService.getOverlayWrapper())==null?void 0:s.getGui());return!!i&&this.focusInto(i,t)}focusGridViewFailed(t,i){return i&&this.focusOverlay(t)||t&&this.focusLastHeader()}focusGridView(t,i=!1,s=!0){var o,r;if(this.overlayService.isExclusive())return s&&this.focusOverlay(i);if(this.isCellFocusSuppressed())return i&&!this.isHeaderFocusSuppressed()?this.focusLastHeader():s&&this.focusOverlay(i)?!0:this.focusNextGridCoreContainer(!1);const n=i?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(n){const{rowIndex:a,rowPinned:l}=n;if(t??(t=(o=this.getFocusedHeader())==null?void 0:o.column),t&&a!==void 0&&a!==null){if(this.navigationService.ensureCellVisible({rowIndex:a,column:t,rowPinned:l}),i){const c=this.rowRenderer.getRowByPosition(n);if(c!=null&&c.isFullWidth()&&this.navigationService.tryToFocusFullWidthRow(n,i))return!0}return this.setFocusedCell({rowIndex:a,column:t,rowPinned:Yi(l),forceBrowserFocus:!0}),(r=this.rangeService)==null||r.setRangeToCell({rowIndex:a,rowPinned:l,column:t}),!0}}return!!(s&&this.focusOverlay(i)||i&&this.focusLastHeader())}isGridFocused(){const t=Ie(this.gos);return!!t&&this.eGridDiv.contains(t)}focusNextGridCoreContainer(t,i=!1){return!i&&this.gridCtrl.focusNextInnerContainer(t)?!0:((i||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)}focusAdvancedFilter(t){var i;return this.advancedFilterFocusColumn=t==null?void 0:t.column,((i=this.advancedFilterService)==null?void 0:i.getCtrl().focusHeaderComp())??!1}focusNextFromAdvancedFilter(t,i){var n;const s=(i?void 0:this.advancedFilterFocusColumn)??((n=this.visibleColsService.getAllCols())==null?void 0:n[0]);return t?this.focusHeaderPosition({headerPosition:{column:s,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(s)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(t){this.gridCtrl.addFocusableContainer(t)}removeFocusableContainer(t){this.gridCtrl.removeFocusableContainer(t)}focusGridInnerElement(t){return this.gridCtrl.focusInnerElement(t)}allowFocusForNextGridCoreContainer(t){this.gridCtrl.allowFocusForNextCoreContainer(t)}};Lg.keyboardModeActive=!1;Lg.instanceCount=0;var tT=Lg,iT=class extends D{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=it(this.gos,"print"),t=e?0:this.visibleColsService.getColsLeftWidth(),i=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},sT=class extends D{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDropService:s,mouseEventService:n,ctrlsService:o,resizeObserverService:r}=this.beans,a={getContainer:()=>this.eGui,isInterestedIn:c=>c===1||c===0,getIconName:()=>"notAllowed"};s.addDropTarget(a),this.addDestroyFunc(()=>s.removeDropTarget(a)),n.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new Ig(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),this.updateGridThemeClass(),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)});const l=r.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>l()),o.register("gridCtrl",this)}isDetailGrid(){var t;const e=this.focusService.findTabbableParent(this.getGui());return((t=e==null?void 0:e.getAttribute("row-id"))==null?void 0:t.startsWith("detail"))||!1}getOptionalSelectors(){var t,i,s,n,o;const e=this.beans;return{paginationSelector:(t=e.paginationService)==null?void 0:t.getPaginationSelector(),gridHeaderDropZonesSelector:(i=e.columnDropZonesService)==null?void 0:i.getDropZoneSelector(),sideBarSelector:(s=e.sideBarService)==null?void 0:s.getSideBarSelector(),statusBarSelector:(n=e.statusBarService)==null?void 0:n.getStatusPanelSelector(),watermarkSelector:(o=e.licenseManager)==null?void 0:o.getWatermarkSelector()}}onGridSizeChanged(){this.eventService.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:s}=this.getNextFocusableIndex(t,e);if(s<0||s>=t.length)return!1;if(s===0){if(i>0){const n=this.visibleColsService.getAllCols(),o=ae(n);if(this.focusService.focusGridView(o,!0))return!0}return!1}return this.focusContainer(t[s],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const i=this.getFocusableContainers(),s=this.visibleColsService.getAllCols();if(e){if(i.length>1)return this.focusContainer(ae(i),!0);const n=ae(s);if(this.focusService.focusGridView(n,!0))return!0}if(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()){if(this.focusService.focusGridView(s[0]))return!0;for(let n=1;n<i.length;n++)if(this.focusService.focusInto(i[n].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){var o;const t=this.view.getFocusableContainers(),{nextIndex:i,indexWithFocus:s}=this.getNextFocusableIndex(t,e);if(s===-1||i<0||i>=t.length)return;const n=t[i];(o=n.setAllowFocus)==null||o.call(n,!0),setTimeout(()=>{var r;(r=n.setAllowFocus)==null||r.call(n,!1)})}getNextFocusableIndex(e,t){const i=Ie(this.gos),s=e.findIndex(o=>o.getGui().contains(i)),n=s+(t?-1:1);return{indexWithFocus:s,nextIndex:n}}focusContainer(e,t){var s,n;(s=e.setAllowFocus)==null||s.call(e,!0);const i=this.focusService.focusInto(e.getGui(),t);return(n=e.setAllowFocus)==null||n.call(e,!1),i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}updateGridThemeClass(){const e=this.beans.environment.getGridThemeClass();e&&this.view.setGridThemeClass(e)}handleThemeChange(e){e.themeChanged&&this.updateGridThemeClass()}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},nT=class extends D{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t=typeof e=="function";typeof e=="function"&&(e=e());const i=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(n=>{var r;if(!n){ge("alignedGrids contains an undefined option."),t||ge(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),ge(i());return}if(this.isGridApi(n))return n;const o=n;return"current"in o?(r=o.current)==null?void 0:r.api:(o.api||ge(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${i()}`),o.api)}).filter(n=>!!n&&!n.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const i=[];return e.columns?e.columns.forEach(s=>{i.push(t(s))}):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":I("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){const{columnModel:t}=this;e.columnGroups.forEach(i=>{let s=null;i&&(s=t.getProvidedColGroup(i.getGroupId())),!(i&&!s)&&t.setColumnGroupOpened(s,i.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){var c;const t=e.column;let i=null;if(t&&(i=this.columnModel.getColDefCol(t.getColId())),t&&!i)return;const s=this.getMasterColumns(e),{columnApplyStateService:n,columnSizeService:o,ctrlsService:r}=this;switch(e.type){case"columnMoved":{const d=e.api.getColumnState().map(h=>({colId:h.colId}));n.applyColumnState({state:d,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const d=e.api.getColumnState().map(h=>({colId:h.colId,hide:h.hide}));n.applyColumnState({state:d},"alignedGridChanged")}break;case"columnPinned":{const d=e.api.getColumnState().map(h=>({colId:h.colId,pinned:h.pinned}));n.applyColumnState({state:d},"alignedGridChanged")}break;case"columnResized":{const u=e,d={};s.forEach(h=>{d[h.getId()]={key:h.getColId(),newWidth:h.getActualWidth()}}),(c=u.flexColumns)==null||c.forEach(h=>{d[h.getId()]&&delete d[h.getId()]}),o.setColumnWidths(Object.values(d),!1,u.finished,"alignedGridChanged");break}}const l=r.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(u=>{u.setGridOption("alwaysShowVerticalScroll",l)})}},oT={version:ie,moduleName:"@ag-grid-community/aligned-grid",beans:[nT]};function rT(e,t){const i=e.columnModel.getColDefCol(t);return i?i.getColDef():null}function aT(e){return e.columnModel.getColumnDefs()}function lT(e,t){typeof t=="number"?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)}function cT(e,t,i){e.columnModel.setColumnGroupOpened(t,i,"api")}function uT(e,t,i){return e.visibleColsService.getColumnGroup(t,i)}function dT(e,t){return e.columnModel.getProvidedColGroup(t)}function hT(e,t,i){return e.columnNameService.getDisplayNameForColumn(t,i)||""}function pT(e,t,i){return e.columnNameService.getDisplayNameForColumnGroup(t,i)||""}function fT(e,t){return e.columnModel.getColDefCol(t)}function gT(e){return e.columnModel.getColDefCols()}function mT(e,t){return e.columnApplyStateService.applyColumnState(t,"api")}function CT(e){return e.columnGetStateService.getColumnState()}function vT(e){e.columnApplyStateService.resetColumnState("api")}function ST(e){return e.columnGroupStateService.getColumnGroupState()}function wT(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")}function yT(e){e.columnGroupStateService.resetColumnGroupState("api")}function RT(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()}function bT(e){return e.visibleColsService.isPinningLeft()}function PT(e){return e.visibleColsService.isPinningRight()}function xT(e,t){return e.visibleColsService.getColAfter(t)}function FT(e,t){return e.visibleColsService.getColBefore(t)}function ET(e,t,i){e.columnModel.setColsVisible([t],i,"api")}function kT(e,t,i){e.columnModel.setColsVisible(t,i,"api")}function MT(e,t,i){e.columnModel.setColsPinned([t],i,"api")}function DT(e,t,i){e.columnModel.setColsPinned(t,i,"api")}function TT(e){return e.columnModel.getCols()}function AT(e){return e.visibleColsService.getLeftCols()}function IT(e){return e.visibleColsService.getCenterCols()}function LT(e){return e.visibleColsService.getRightCols()}function OT(e){return e.visibleColsService.getAllCols()}function BT(e){return e.columnViewportService.getViewportColumns()}function NT(e,t,i){e.columnMoveService.moveColumns([t],i,"api")}function _T(e,t,i){e.columnMoveService.moveColumnByIndex(t,i,"api")}function GT(e,t,i){e.columnMoveService.moveColumns(t,i,"api")}function HT(e,t,i,s=!0,n="api"){e.columnSizeService.setColumnWidths([{key:t,newWidth:i}],!1,s,n)}function VT(e,t,i=!0,s="api"){e.columnSizeService.setColumnWidths(t,!1,i,s)}function WT(e){return e.visibleColsService.getTreeLeft()}function zT(e){return e.visibleColsService.getTreeCenter()}function jT(e){return e.visibleColsService.getTreeRight()}function UT(e){return e.visibleColsService.getAllTrees()}function KT(e,t,i){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:i,source:"api"})}function $T(e,t,i){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"api"})}function qT(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}var YT=class extends D{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService,this.filterManager=e.filterManager}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(an(e.source))})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};const t=s=>n=>{const{column:o,node:r,value:a}=n;let l=o.getColDef().valueFormatter;return l===s.groupSafeValueFormatter&&(l=s.valueFormatter),this.valueService.formatValue(o,r,a,l)};Object.entries(e).forEach(([s,n])=>{const o={...n,groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)};this.dataTypeDefinitions[s]=o,this.formatValueFuncs[s]=t(o)});const i=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(i).forEach(([s,n])=>{const o=this.processDataTypeDefinition(n,i,[s],e);o&&(this.dataTypeDefinitions[s]=o,n.dataTypeMatcher&&(this.dataTypeMatchers[s]=n.dataTypeMatcher),this.formatValueFuncs[s]=t(o))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(s=>{const n=this.dataTypeMatchers[s];n&&delete this.dataTypeMatchers[s],this.dataTypeMatchers[s]=n??e[s].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){const i={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...ic(e.columnTypes),...ic(t.columnTypes)]),i}processDataTypeDefinition(e,t,i,s){let n;const o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let r=s[o];const a=t[o];if(r&&a&&(r=a),!this.validateDataTypeDefinition(e,r,o))return;n=this.mergeDataTypeDefinitions(r,e)}else{if(i.includes(o)){I('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}const r=t[o];if(!this.validateDataTypeDefinition(e,r,o))return;const a=this.processDataTypeDefinition(r,t,[...i,o],s);if(!a)return;n=this.mergeDataTypeDefinitions(a,e)}return{...n,groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)}}validateDataTypeDefinition(e,t,i){return t?t.baseDataType!==e.baseDataType?(I('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(I(`The data type definition ${i} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{var i,s;if((i=t.node)!=null&&i.group){const n=(t.colDef.pivotValueColumn??t.column).getAggFunc();if(n){if(n==="first"||n==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&n!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter({...t,value:t.value.toNumber()});if("value"in t.value)return e.valueFormatter({...t,value:t.value.value})}}return}if((this.gos.get("suppressGroupMaintainValueType")||this.gos.get("groupDisplayType")==="groupRows")&&!this.gos.get("treeData"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()&&typeof t.value=="string"&&!((s=e.dataTypeMatcher)!=null&&s.call(e,t.value)))return;return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:s}=t;const{field:n}=t;if(s===void 0&&(s=e.cellDataType),(s==null||s===!0)&&(s=this.canInferCellDataType(e,t)?this.inferCellDataType(n,i):!1),!s){e.cellDataType=!1;return}const o=this.dataTypeDefinitions[s];if(!o){I(`Missing data type definition - "${s}"`);return}return e.cellDataType=s,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,s,o,i),o.columnTypes}addColumnListeners(e){if(!this.isWaitingForRowData)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=s=>{t.add(s.key)};e.addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener("columnStateUpdated",i))}canInferCellDataType(e,t){if(!ke(this.gos))return!1;const i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,i))return!1;const s=t.type===null?e.type:t.type;if(s){const n=this.gos.get("columnTypes")??{};if(ic(s).some(r=>{const a=n[r.trim()];return a&&this.doColDefPropsPreventInference(a,i)}))return!1}return!this.doColDefPropsPreventInference(e,i)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,s])=>this.doesColDefPropPreventInference(e,t,i,s))}doesColDefPropPreventInference(e,t,i,s){if(!t[i])return!1;const n=e[i];return n===null?(t[i]=!1,!1):s===void 0?!!n:n===s}inferCellDataType(e,t){if(!e)return;let i;const s=this.getInitialData();if(s){const o=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");i=jr(s,e,o)}else this.initWaitForRowData(t);if(i==null)return;const[n]=Object.entries(this.dataTypeMatchers).find(([o,r])=>r(i))??["object"];return n}getInitialData(){const e=this.gos.get("rowData");if(e!=null&&e.length)return e[0];if(this.initialData)return this.initialData;{const t=this.rowModel.getRootNode().allLeafChildren;if(t!=null&&t.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();const[i]=this.addManagedEventListeners({rowDataUpdateStarted:s=>{const{firstRowData:n}=s;n&&(i==null||i(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(n,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations(),this.eventService.dispatchEvent({type:"dataTypesInferred"}))}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const s={},n={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([o,r])=>{const a=this.columnModel.getCol(o);if(!a)return;const l=a.getColDef();if(!this.columnModel.resetColDefIntoCol(a,"cellDataTypeInferred"))return;const c=a.getColDef();if(t&&c.type&&c.type!==l.type){const u=this.getUpdatedColumnState(a,r);u.rowGroup&&u.rowGroupIndex==null&&(s[o]=u),u.pivot&&u.pivotIndex==null&&(n[o]=u),i.push(u)}}),t&&i.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(s,n)),i.length&&this.columnApplyStateService.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){const i=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach(s=>{delete i[s],s==="rowGroup"?delete i.rowGroupIndex:s==="pivot"&&delete i.pivotIndex}),i}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return(t=this.getDataTypeDefinition(e))==null?void 0:t.baseDataType}checkType(e,t){var s;if(t==null)return!0;const i=(s=this.getDataTypeDefinition(e))==null?void 0:s.dataTypeMatcher;return i?i(t):!0}validateColDef(e){const t=i=>I(`Cell data type is "object" but no Value ${i} has been provided. Please either provide an object data type definition with a Value ${i}, or set "colDef.value${i}"`);e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&t("Parser"))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,i,s){var o;const n=this.formatValueFuncs[t];switch(i.baseDataType){case"number":{e.cellEditor="agNumberCellEditor";break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=r=>!!r.colDef.editable&&r.event.key===M.SPACE;break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=n;break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=n;break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(r,a)=>{const l=this.columnModel.getColDefCol(s),c=l==null?void 0:l.getColDef();if(!l||!c)return 0;const u=r==null?"":n({column:l,node:null,value:r}),d=a==null?"":n({column:l,node:null,value:a});return u===d?0:u>d?1:-1},e.keyCreator=n;break}}(o=this.filterManager)==null||o.setColDefPropertiesForDataType(e,i,n)}getDefaultDataTypes(){const e=i=>!!i.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:i=>{var s,n;return((n=(s=i.newValue)==null?void 0:s.trim)==null?void 0:n.call(s))===""?null:Number(i.newValue)},valueFormatter:i=>i.value==null?"":typeof i.value!="number"||isNaN(i.value)?t("invalidNumber","Invalid Number"):String(i.value),dataTypeMatcher:i=>typeof i=="number"},text:{baseDataType:"text",valueParser:i=>i.newValue===""?null:fp(i.newValue),dataTypeMatcher:i=>typeof i=="string"},boolean:{baseDataType:"boolean",valueParser:i=>{var s,n;return i.newValue==null?i.newValue:((n=(s=i.newValue)==null?void 0:s.trim)==null?void 0:n.call(s))===""?null:String(i.newValue).toLowerCase()==="true"},valueFormatter:i=>i.value==null?"":String(i.value),dataTypeMatcher:i=>typeof i=="boolean"},date:{baseDataType:"date",valueParser:i=>Mt(i.newValue==null?null:String(i.newValue)),valueFormatter:i=>i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):ii(i.value,!1)??"",dataTypeMatcher:i=>i instanceof Date},dateString:{baseDataType:"dateString",dateParser:i=>Mt(i)??void 0,dateFormatter:i=>ii(i??null,!1)??void 0,valueParser:i=>e(String(i.newValue))?i.newValue:null,valueFormatter:i=>e(String(i.value))?i.value:"",dataTypeMatcher:i=>typeof i=="string"&&e(i)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:i=>fp(i.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}},QT={version:ie,moduleName:"@ag-grid-community/data-type",beans:[YT]},XT={version:ie,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:rT,getColumnDefs:aT,sizeColumnsToFit:lT,setColumnGroupOpened:cT,getColumnGroup:uT,getProvidedColumnGroup:dT,getDisplayNameForColumn:hT,getDisplayNameForColumnGroup:pT,getColumn:fT,getColumns:gT,applyColumnState:mT,getColumnState:CT,resetColumnState:vT,getColumnGroupState:ST,setColumnGroupState:wT,resetColumnGroupState:yT,isPinning:RT,isPinningLeft:bT,isPinningRight:PT,getDisplayedColAfter:xT,getDisplayedColBefore:FT,setColumnVisible:ET,setColumnsVisible:kT,setColumnPinned:MT,setColumnsPinned:DT,getAllGridColumns:TT,getDisplayedLeftColumns:AT,getDisplayedCenterColumns:IT,getDisplayedRightColumns:LT,getAllDisplayedColumns:OT,getAllDisplayedVirtualColumns:BT,moveColumn:NT,moveColumnByIndex:_T,moveColumns:GT,setColumnWidth:HT,setColumnWidths:VT,getLeftDisplayedColumnGroups:WT,getCenterDisplayedColumnGroups:zT,getRightDisplayedColumnGroups:jT,getAllDisplayedColumnGroups:UT,autoSizeColumn:KT,autoSizeColumns:$T,autoSizeAllColumns:qT}};function JT(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)}function ZT(e,t){const i=e.dragAndDropService.findExternalZone(t);i&&e.dragAndDropService.removeDropTarget(i)}function eA(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}var tA={version:ie,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:JT,removeRowDropZone:ZT,getRowDropZoneParams:eA}};function iA(e){return e.pinnedRowModel.getPinnedTopRowCount()}function sA(e){return e.pinnedRowModel.getPinnedBottomRowCount()}function nA(e,t){return e.pinnedRowModel.getPinnedTopRow(t)}function oA(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}var rA={version:ie,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:iA,getPinnedBottomRowCount:sA,getPinnedTopRow:nA,getPinnedBottomRow:oA}};function aA(e){e.overlayService.showLoadingOverlay()}function lA(e){e.overlayService.showNoRowsOverlay()}function cA(e){e.overlayService.hideOverlay()}var uA={version:ie,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:aA,showNoRowsOverlay:lA,hideOverlay:cA}};function dA(e,t,i){if(!t)return;const s=e.ctrlsService.getGridBodyCtrl().getGui(),n=`aria-${t}`;i===null?s.removeAttribute(n):s.setAttribute(n,i)}function hA(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function pA(e,t={}){const i=s=>I(`Since v31.1 api.flashCells parameter '${s}Delay' is deprecated. Please use '${s}Duration' instead.`);N(t.fadeDelay)&&i("fade"),N(t.flashDelay)&&i("flash"),e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.flashCells(t))}function fA(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function gA(e){return e.animationFrameService.isQueueEmpty()}function mA(e){e.animationFrameService.flushAllFrames()}function CA(e){return{rowHeight:Sn(e.gos),headerHeight:e.columnModel.getHeaderHeight()}}function vA(e,t={}){return e.rowRenderer.getCellRendererInstances(t).map(Kr)}var SA={version:ie,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:dA,refreshCells:hA,flashCells:pA,refreshHeader:fA,isAnimationFrameQueueEmpty:gA,flushAllAnimationFrames:mA,getSizesForCurrentTheme:CA,getCellRendererInstances:vA}};function wA(e){e.valueCache.expire()}function yA(e,t,i){return w1(e,{colKey:t,rowNode:i})}function w1(e,t){const{colKey:i,rowNode:s,useFormatter:n}=t,o=e.columnModel.getColDefCol(i)??e.columnModel.getCol(i);if(le(o))return null;const r=e.valueService.getValueForDisplay(o,s);return n?e.valueService.formatValue(o,s,r)??Ti(r,!0):r}function RA(e){return e.context.getGridId()}function bA(e){e.gridDestroyService.destroy()}function PA(e){return e.gridDestroyService.isDestroyCalled()}function xA(e,t){return e.gos.get(t)}function FA(e,t,i){y1(e,{[t]:i})}function y1(e,t){e.gos.updateGridOptions({options:t})}function EA(e,t,i){e.apiEventService.addEventListener(t,i)}function kA(e,t,i){e.apiEventService.removeEventListener(t,i)}function MA(e,t){e.apiEventService.addGlobalListener(t)}function DA(e,t){e.apiEventService.removeGlobalListener(t)}function TA(e){return e.focusService.getFocusedCell()}function AA(e){return e.focusService.clearFocusedCell()}function IA(e,t,i,s){e.focusService.setFocusedCell({rowIndex:t,column:i,rowPinned:s,forceBrowserFocus:!0})}function LA(e,t){return e.navigationService.tabToNextCell(!1,t)}function OA(e,t){return e.navigationService.tabToNextCell(!0,t)}function BA(e,t,i=!1){const s=e.headerNavigationService.getHeaderPositionForColumn(t,i);s&&e.focusService.focusHeaderPosition({headerPosition:s})}function NA(e,t,i){const s=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:s,buttonElement:i,positionBy:"button"})}function _A(e,t,i){let s=e.columnModel.getCol(t);if(s||(s=e.columnModel.getColDefCol(t)),!s){ge(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:s,mouseEvent:i,positionBy:"mouse"})}function GA(e,t){const i=e.columnModel.getCol(t);if(!i){ge(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:i,positionBy:"auto"})}function HA(e){e.menuService.hidePopupMenu()}function VA(e,t={}){const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(i))}function WA(e,t,i,s,n){e.expansionService.setRowNodeExpanded(t,i,s,n)}function zA(e,t){return e.rowModel.getRowNode(t)}function jA(e,t,i,s){e.rowRenderer.addRenderedRowListener(t,i,s)}function UA(e){return e.rowRenderer.getRenderedNodes()}function KA(e,t,i){e.rowModel.forEachNode(t,i)}function $A(e){return R1(e)}function R1(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function qA(e){return b1(e)}function b1(e){return e.rowRenderer.getLastVirtualRenderedRow()}function YA(e,t){return e.rowModel.getRow(t)}function QA(e){return e.rowModel.getRowCount()}function XA(e){return e.rowModel}function JA(e,t){if(!t.nodes.every(a=>a.rowPinned?(I("cannot select pinned rows"),!1):a.id===void 0?(I("cannot select node until id for node is known"),!1):!0))return;const{nodes:s,source:n,newValue:o}=t,r=s;e.selectionService.setNodesSelected({nodes:r,source:n??"api",newValue:o})}function ZA(e,t="apiSelectAll"){e.selectionService.selectAllRowNodes({source:t})}function eI(e,t="apiSelectAll"){e.selectionService.deselectAllRowNodes({source:t})}function tI(e,t="apiSelectAllFiltered"){e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}function iI(e,t="apiSelectAllFiltered"){e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}function sI(e,t="apiSelectAllCurrentPage"){e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}function nI(e,t="apiSelectAllCurrentPage"){e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}function oI(e){return e.selectionService.getSelectedNodes()}function rI(e){return e.selectionService.getSelectedRows()}function aI(e){e.sortController.onSortChanged("api")}var lI={version:ie,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:RA,destroy:bA,isDestroyed:PA,getGridOption:xA,setGridOption:FA,updateGridOptions:y1}},cI={version:ie,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:JA,selectAll:ZA,deselectAll:eI,selectAllFiltered:tI,deselectAllFiltered:iI,selectAllOnCurrentPage:sI,deselectAllOnCurrentPage:nI,getSelectedNodes:oI,getSelectedRows:rI}},uI={version:ie,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:VA,setRowNodeExpanded:WA,getRowNode:zA,addRenderedRowListener:jA,getRenderedNodes:UA,forEachNode:KA,getFirstDisplayedRow:$A,getFirstDisplayedRowIndex:R1,getLastDisplayedRow:qA,getLastDisplayedRowIndex:b1,getDisplayedRowAtIndex:YA,getDisplayedRowCount:QA,getModel:XA}},dI={version:ie,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:QM,getHorizontalPixelRange:XM,ensureColumnVisible:f1,ensureIndexVisible:g1,ensureNodeVisible:JM}},hI={version:ie,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:TA,clearFocusedCell:AA,setFocusedCell:IA,setFocusedHeader:BA,tabToNextCell:LA,tabToPreviousCell:OA}},pI={version:ie,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:EA,addGlobalListener:MA,removeEventListener:kA,removeGlobalListener:DA}},fI={version:ie,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:wA,getValue:yA,getCellValue:w1}},gI={version:ie,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:NA,showColumnMenuAfterMouseClick:_A,showColumnMenu:GA,hidePopupMenu:HA}},mI={version:ie,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:aI}},CI={version:ie,moduleName:"@ag-grid-community/api",dependantModules:[lI,rA,cI,XT,uI,tA,dI,uA,hI,pI,SA,fI,gI,mI]};function vI(e){var t;return((t=e.stateService)==null?void 0:t.getState())??{}}function SI(e){switch(e={...e},e.version||(e.version="32.1.0"),e.version){case"32.1.0":e=wI(e)}return e}function wI(e){return e.cellSelection=yI(e,"rangeSelection"),e}function yI(e,t){if(e&&typeof e=="object")return e[t]}var RI=class extends D{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=mt(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=mt(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=mt(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=ke(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",ie),this.ctrlsService.whenReady(this,()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));const[e,t,i]=this.addManagedEventListeners({newColumnsLoaded:({source:s})=>{s==="gridInitializing"&&(e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{t==null||t(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{i==null||i(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())}})}getInitialState(){return SI(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());const e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){const e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());const t=i=>()=>this.updateColumnState([i]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){const{filter:e,rowGroupExpansion:t,rowSelection:i,pagination:s}=this.getInitialState(),n=this.gos.get("advancedFilterModel");(e||n)&&this.setFilterState(e,n),t&&this.setRowGroupExpansionState(t),i&&this.setRowSelectionState(i),s&&this.setPaginationState(s),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState());const o=()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState());this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:o,columnRowGroupChanged:o,rowDataUpdated:()=>{this.gos.get("groupDefaultExpanded")!==0&&setTimeout(()=>{o()})},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:r=>{(r.newPage||r.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){const{scroll:e,cellSelection:t,focusedCell:i,columnOrder:s}=this.getInitialState();i&&this.setFocusedCellState(i),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!(s!=null&&s.orderedColIds)),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState());const n=this.getRangeSelectionState();this.updateCachedState("rangeSelection",n),this.updateCachedState("cellSelection",n),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),cellSelectionChanged:o=>{if(o.finished){const r=this.getRangeSelectionState();this.updateCachedState("rangeSelection",r),this.updateCachedState("cellSelection",r)}},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){const e=this.columnModel.isPivotMode(),t=[],i=[],s=[],n=[],o=[],r=[],a=[],l=[],c=[];let u=0;const d=this.columnGetStateService.getColumnState();for(let h=0;h<d.length;h++){const{colId:p,sort:g,sortIndex:v,rowGroup:S,rowGroupIndex:m,aggFunc:C,pivot:w,pivotIndex:R,pinned:b,hide:P,width:x,flex:F}=d[h];c.push(p),g&&(t[v??u++]={colId:p,sort:g}),S&&(i[m??0]=p),typeof C=="string"&&s.push({colId:p,aggFunc:C}),w&&(n[R??0]=p),b&&(b==="right"?r:o).push(p),P&&a.push(p),(F||x)&&l.push({colId:p,flex:F??void 0,width:x})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:s.length?{aggregationModel:s}:void 0,pivot:n.length||e?{pivotMode:e,pivotColIds:n}:void 0,columnPinning:o.length||r.length?{leftColIds:o,rightColIds:r}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}setColumnState(e){const{sort:t,rowGroup:i,aggregation:s,pivot:n,columnPinning:o,columnVisibility:r,columnSizing:a,columnOrder:l,partialColumnState:c}=e,u={},d=S=>{let m=u[S];return m||(m={colId:S},u[S]=m,m)},h=c?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach(({colId:S,sort:m},C)=>{const w=d(S);w.sort=m,w.sortIndex=C}),h.sort=null,h.sortIndex=null),i&&(i.groupColIds.forEach((S,m)=>{const C=d(S);C.rowGroup=!0,C.rowGroupIndex=m}),h.rowGroup=null,h.rowGroupIndex=null),s&&(s.aggregationModel.forEach(({colId:S,aggFunc:m})=>{d(S).aggFunc=m}),h.aggFunc=null),n&&(n.pivotColIds.forEach((S,m)=>{const C=d(S);C.pivot=!0,C.pivotIndex=m}),this.gos.updateGridOptions({options:{pivotMode:n.pivotMode},source:"gridInitializing"}),h.pivot=null,h.pivotIndex=null),o&&(o.leftColIds.forEach(S=>{d(S).pinned="left"}),o.rightColIds.forEach(S=>{d(S).pinned="right"}),h.pinned=null),r&&(r.hiddenColIds.forEach(S=>{d(S).hide=!0}),h.hide=null),a&&(a.columnSizingModel.forEach(({colId:S,flex:m,width:C})=>{const w=d(S);w.flex=m??null,w.width=C}),h.flex=null);const p=l==null?void 0:l.orderedColIds,g=!!(p!=null&&p.length),v=g?p.map(S=>d(S)):Object.values(u);v.length&&(this.columnStates=v,this.columnApplyStateService.applyColumnState({state:v,applyOrder:g,defaultState:h},"gridInitializing"))}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.pivotResultColsService.isPivotResultColsPresent()){if(t){const s=[];for(const n of t)this.pivotResultColsService.getPivotResultCol(n.colId)&&s.push(n);this.columnApplyStateService.applyColumnState({state:s,applyOrder:e},"gridInitializing")}i&&this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){const e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach(({groupId:i,open:s})=>{s&&t.push(i)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){var n;if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const t=new Set((n=e.columnGroup)==null?void 0:n.openColumnGroupIds),s=this.columnGroupStateService.getColumnGroupState().map(({groupId:o})=>{const r=t.has(o);return r&&t.delete(o),{groupId:o,open:r}});t.forEach(o=>{s.push({groupId:o,open:!0})}),s.length&&(this.columnGroupStates=s),this.columnGroupStateService.setColumnGroupState(s,"gridInitializing")}getFilterState(){var i,s;let e=(i=this.filterManager)==null?void 0:i.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);const t=((s=this.filterManager)==null?void 0:s.getAdvancedFilterModel())??void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(e,t){var n,o;const{filterModel:i,advancedFilterModel:s}=e??{advancedFilterModel:t};i&&((n=this.filterManager)==null||n.setFilterModel(i,"columnFilter")),s&&((o=this.filterManager)==null||o.setAdvancedFilterModel(s))}getRangeSelectionState(){var t;const e=(t=this.rangeService)==null?void 0:t.getCellRanges().map(i=>{const{id:s,type:n,startRow:o,endRow:r,columns:a,startColumn:l}=i;return{id:s,type:n,startRow:o,endRow:r,colIds:a.map(c=>c.getColId()),startColId:l.getColId()}});return e!=null&&e.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeService:i,columnModel:s,visibleColsService:n}=this;if(!is(t)||!i)return;const o=[];if(e.cellRanges.forEach(r=>{const a=[];if(r.colIds.forEach(c=>{const u=s.getCol(c);u&&a.push(u)}),!a.length)return;let l=s.getCol(r.startColId);if(!l){const c=n.getAllCols(),u=new Set(a);l=c.find(d=>u.has(d))}o.push({...r,columns:a,startColumn:l})}),JP(t)&&ZP(t)&&o.length>1)return I("cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`");i.setCellRanges(o)}getScrollState(){var s;if(!this.isClientSideRowModel)return;const e=(s=this.ctrlsService.getGridBodyCtrl())==null?void 0:s.getScrollFeature(),{left:t}=(e==null?void 0:e.getHScrollPosition())??{left:0},{top:i}=(e==null?void 0:e.getVScrollPosition())??{top:0};return i||t?{top:i,left:t}:void 0}setScrollState(e){var s;if(!this.isClientSideRowModel)return;const{top:t,left:i}=e;(s=this.ctrlsService.getGridBodyCtrl())==null||s.getScrollFeature().setScrollPosition(t,i)}getSideBarState(){var e,t;return(t=(e=this.sideBarService)==null?void 0:e.getSideBarComp())==null?void 0:t.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.focusService.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:s}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:s}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:i,rowPinned:s}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:i,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;const e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();if(!(!e&&!t))return{page:e,pageSize:t}}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationService.setPage(e.page))}getRowSelectionState(){var i;const e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!((i=e==null?void 0:e.toggledNodes)!=null&&i.length)?void 0:e}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let i=!1;Object.entries(t).forEach(([s,n])=>{wa(n,this.cachedState[s])||(i=!0)}),this.cachedState={...this.cachedState,...t},i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),wa(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){this.staleStateKeys.forEach(e=>{switch(e){case"rowSelection":this.setCachedStateValue(e,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear(),this.eventService.dispatchEvent({type:"stateUpdated",sources:e,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},P1={version:ie,moduleName:"@ag-grid-community/state-core",beans:[RI]},bI={version:ie,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:vI},dependantModules:[P1]},PI={version:ie,moduleName:"@ag-grid-community/state",dependantModules:[P1,bI]};function xI(e){return e.rowModel.isLastRowIndexKnown()}function FI(e){var t;return((t=e.paginationService)==null?void 0:t.getPageSize())??100}function EI(e){var t;return((t=e.paginationService)==null?void 0:t.getCurrentPage())??0}function kI(e){var t;return((t=e.paginationService)==null?void 0:t.getTotalPages())??1}function MI(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()}function DI(e){var t;(t=e.paginationService)==null||t.goToNextPage()}function TI(e){var t;(t=e.paginationService)==null||t.goToPreviousPage()}function AI(e){var t;(t=e.paginationService)==null||t.goToFirstPage()}function II(e){var t;(t=e.paginationService)==null||t.goToLastPage()}function LI(e,t){var i;(i=e.paginationService)==null||i.goToPage(t)}var OI=class extends D{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){const t=()=>{const i=Math.max(Sn(this.gos),1),s=Math.floor(e/i);this.paginationService.setPageSize(s,"autoCalculated")};this.isBodyRendered?mt(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};function BI(e,t,i){e.addManagedElementListeners(t,{keydown:s=>{if(!s.defaultPrevented&&s.key===M.TAB){const n=s.shiftKey;i.findNextFocusableElement(t,!1,n)||i.focusNextGridCoreContainer(n)&&s.preventDefault()}}})}var gr="paginationPageSizeSelector",NI=class extends ye{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener(gr,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!(e!=null&&e.newPageSize))return;const t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){zt(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(gr)!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),i=!t||!e.includes(t);if(i){const n=this.gos.exists("paginationPageSize"),o=this.gos.get(gr)!==!0;I(`'paginationPageSize=${t}'${n?"":" (default value)"}, but ${t} is not included in${o?"":" the default"} paginationPageSizeSelector=[${e.join(", ")}].`),o||I(`Either set '${gr}' to an array that includes ${t} or to 'false' to disable the page size selector.`),e.unshift("")}const s=String(i?"":t);this.selectPageSizeComp?($s(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(s,!0)):this.createPageSizeSelectorComp(e,s),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){const i=this.localeService.getLocaleTextFunc(),s=i("pageSizeSelectorLabel","Page Size:"),n=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new Pg).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(n).setLabel(s).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(gr);return!Array.isArray(t)||Vt(t)?e:[...t].sort((i,s)=>i-s)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},_I={selector:"AG-PAGE-SIZE-SELECTOR",component:NI},GI=class extends kD{constructor(){super(),this.btFirst=ee,this.btPrevious=ee,this.btNext=ee,this.btLast=ee,this.lbRecordCount=ee,this.lbFirstRowOnPage=ee,this.lbLastRowOnPage=ee,this.lbCurrent=ee,this.lbTotal=ee,this.pageSizeComp=ee,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService,this.ariaAnnouncementService=e.ariaAnnouncementService}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[_I]);const{btFirst:t,btPrevious:i,btNext:s,btLast:n}=this;this.activateTabIndex([t,i,s,n]),t.insertAdjacentElement("afterbegin",Gt(e?"last":"first",this.gos)),i.insertAdjacentElement("afterbegin",Gt(e?"next":"previous",this.gos)),s.insertAdjacentElement("afterbegin",Gt(e?"previous":"next",this.gos)),n.insertAdjacentElement("afterbegin",Gt(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(o):this.focusService.focusGridInnerElement(o)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:s=>{(s.key===M.ENTER||s.key===M.SPACE)&&(s.preventDefault(),i())}})}),BI(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");if(t)return t({value:e});const i=this.localeService.getLocaleTextFunc(),s=i("thousandSeparator",","),n=i("decimalSeparator",".");return xE(e,s,n)}getTemplate(){const e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),s=e("of","of"),n=e("firstPage","First Page"),o=e("previousPage","Previous Page"),r=e("nextPage","Next Page"),a=e("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">
                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel">
                    <span id="ag-${l}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-to">${i}</span>
                    <span id="ag-${l}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-of">${s}</span>
                    <span id="ag-${l}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${n}"></div>
                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <span class="ag-paging-description">
                        <span id="ag-${l}-start-page">${t}</span>
                        <span id="ag-${l}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${l}-of-page">${s}</span>
                        <span id="ag-${l}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>
                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){const e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const s=this.isZeroPagesToDisplay(),n=e===i-1;this.nextButtonDisabled=n||s,this.lastButtonDisabled=!t||s||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){Gx(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&t===0}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),i=this.paginationService.getMasterRowCount(),s=e?i:null;if(s===1){const C=this.rowModel.getRow(0);if(C&&C.group&&!(C.groupData||C.aggData)){this.setTotalLabelsToZero();return}}const n=this.paginationService.getCurrentPage(),o=this.paginationService.getPageSize();let r,a;this.isZeroPagesToDisplay()?r=a=0:(r=o*n+1,a=r+o-1,e&&a>s&&(a=s));const l=r+o-1,c=!e&&i<l,u=this.formatNumber(r);this.lbFirstRowOnPage.textContent=u;let d;const h=this.localeService.getLocaleTextFunc();c?d=h("pageLastRowUnknown","?"):d=this.formatNumber(a),this.lbLastRowOnPage.textContent=d;const g=t>0?n+1:0,v=this.formatNumber(g);this.lbCurrent.textContent=v;let S,m;if(e)S=this.formatNumber(t),m=this.formatNumber(s);else{const C=h("more","more");S=C,m=C}this.lbTotal.textContent=S,this.lbRecordCount.textContent=m,this.announceAriaStatus(u,d,m,v,S)}announceAriaStatus(e,t,i,s,n){const o=this.localeService.getLocaleTextFunc(),r=o("page","Page"),a=o("to","to"),l=o("of","of"),c=`${e} ${a} ${t} ${l} ${i}`,u=`${r} ${s} ${l} ${n}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,this.ariaAnnouncementService.announceValue(c,"paginationRow")),u!==this.ariaPageStatus&&(this.ariaPageStatus=u,this.ariaAnnouncementService.announceValue(u,"paginationPage"))}setTotalLabelsToZero(){const e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}},HI={selector:"AG-PAGINATION",component:GI},VI=class extends D{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return HI}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){!this.active||this.currentPage===e||typeof this.currentPage!="number"||(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return N(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:N(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:N(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:N(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const t=this.pageSize*this.currentPage;let i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const s=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=s-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:s=!1}=e;this.eventService.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:s,keepRenderedRows:t})}},x1={version:ie,moduleName:"@ag-grid-community/pagination-core",beans:[VI,OI]},WI={version:ie,moduleName:"@ag-grid-community/pagination-api",dependantModules:[x1],apiFunctions:{paginationIsLastPageFound:xI,paginationGetPageSize:FI,paginationGetCurrentPage:EI,paginationGetTotalPages:kI,paginationGetRowCount:MI,paginationGoToNextPage:DI,paginationGoToPreviousPage:TI,paginationGoToFirstPage:AI,paginationGoToLastPage:II,paginationGoToPage:LI}},zI={version:ie,moduleName:"@ag-grid-community/pagination",dependantModules:[x1,WI]},bt="clientSide",ht="serverSide",Wn="infinite",jI={onGroupExpandedOrCollapsed:[bt],refreshClientSideRowModel:[bt],isRowDataEmpty:[bt],forEachLeafNode:[bt],forEachNodeAfterFilter:[bt],forEachNodeAfterFilterAndSort:[bt],resetRowHeights:[bt],applyTransaction:[bt],applyTransactionAsync:[bt],flushAsyncTransactions:[bt],getBestCostNodeSelection:[bt],getServerSideSelectionState:[ht],setServerSideSelectionState:[ht],applyServerSideTransaction:[ht],applyServerSideTransactionAsync:[ht],applyServerSideRowData:[ht],retryServerSideLoads:[ht],flushServerSideAsyncTransactions:[ht],refreshServerSide:[ht],getServerSideGroupLevelState:[ht],refreshInfiniteCache:[Wn],purgeInfiniteCache:[Wn],getInfiniteRowCount:[Wn],isLastRowIndexKnown:[Wn,ht],expandAll:[bt,ht],collapseAll:[bt,ht],onRowHeightChanged:[bt,ht],setRowCount:[Wn,ht],getCacheBlockState:[Wn,ht]},UI={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"}};function KI(e,t,i){const s=UI[e];if(s){const{version:o,new:r,old:a,message:l}=s,c=a??e;return(...u)=>{const d=r?`Please use ${r} instead. `:"";return I(`Since ${o} api.${c} is deprecated. ${d}${l??""}`),t.apply(t,u)}}const n=jI[e];return n?(...o)=>{const r=i.rowModel.getType();if(!n.includes(r)){ge(`api.${e} can only be called when gridOptions.rowModelType is ${n.join(" or ")}`);return}return t.apply(t,o)}:t}var $I={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},us=(e,t)=>{const i=t.rowModelType??"clientSide";return i==="clientSide"||i==="serverSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},qI={enableRowGroup:us,rowGroup:us,rowGroupIndex:us,enablePivot:us,enableValue:us,pivot:us,pivotIndex:us,aggFunc:us,cellEditor:e=>e.cellEditor==="agRichSelect"||e.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{var i;const t=["columnsMenuTab","generalMenuTab"];return(i=e.menuTabs)!=null&&i.some(s=>t.includes(s))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>zn},YI={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},QI=Object.keys(YI),zn={objectName:"colDef",allProperties:QI,docsUrl:"column-properties/",deprecations:$I,validations:qI},XI=()=>({advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."}}),JI={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1},ZI=()=>({sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",validate:e=>{const t=e.rowModelType??"clientSide";switch(t){case"clientSide":{const i=`treeData requires 'getDataPath' in the ${t} row model.`;return e.getDataPath?null:i}case"serverSide":{const i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:i}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],validate:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":return e.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},paginationPageSizeSelector:{validate:e=>{const t=e.paginationPageSizeSelector;return typeof t=="boolean"||t==null||t.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},rowSelection:{validate({rowSelection:e}){return e&&typeof e=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':e&&typeof e!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":null}},cellSelection:{module:"@ag-grid-enterprise/range-selection"},columnDefs:()=>zn,defaultColDef:()=>zn,defaultColGroupDef:()=>zn,autoGroupColumnDef:()=>zn,selectionColumnDef:()=>zn}),eL=()=>({objectName:"gridOptions",allProperties:[...ba.ALL_PROPERTIES,...Pa.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:XI(),validations:ZI()}),tL=class extends D{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,eL())}validateApiFunction(e,t){return KI(e,t,this.beans)}processOptions(e,t){const{validations:i,deprecations:s,allProperties:n,propertyExceptions:o,objectName:r,docsUrl:a}=t;n&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...o??[],...Object.keys(s)],n,r,a);const l=new Set;Object.keys(e).forEach(u=>{const d=s[u];if(d)if("renamed"in d){const{renamed:w,version:R}=d;l.add(`As of v${R}, ${String(u)} is deprecated. Please use ${String(w)} instead.`),e[w]=e[u]}else{const{message:w,version:R}=d;l.add(`As of v${R}, ${String(u)} is deprecated. ${w??""}`)}const h=e[u];if(h==null||h===!1)return;const p=i[u];let g;if(p)if(typeof p=="function"){const w=p(e,this.gridOptions);if(!w)return;if("objectName"in w){const R=e[u];if(Array.isArray(R)){R.forEach(b=>{this.processOptions(b,w)});return}this.processOptions(e[u],w);return}g=w}else g=p;else return;const{module:v,dependencies:S,validate:m,supportedRowModels:C}=g;if(C){const w=this.gridOptions.rowModelType??"clientSide";if(!C.includes(w)){l.add(`${String(u)} is not supported with the '${w}' row model.`);return}}if(v){const w=Array.isArray(v)?v:[v];let R=!0;if(w.forEach(b=>{this.gos.assertModuleRegistered(b,String(u))||(R=!1,l.add(`${String(u)} is only available when ${b} is loaded.`))}),!R)return}if(S){const w=this.checkForRequiredDependencies(u,S,e);if(w){l.add(w);return}}if(m){const w=m(e,this.gridOptions);if(w){l.add(w);return}}}),l.size>0&&l.forEach(u=>{I(u)})}checkForRequiredDependencies(e,t,i){const n=Object.entries(t).find(([a,l])=>{const c=i[a];return!l.includes(c)});if(!n)return null;const[o,r]=n;return r.length>1?`'${String(e)}' requires '${o}' to be one of [${r.join(", ")}].`:`'${String(e)}' requires '${o}' to be ${r[0]}.`}checkProperties(e,t,i,s,n){const o=["__ob__","__v_skip","__metadata__"],r=iL(Object.getOwnPropertyNames(e),[...o,...t,...i],i);if(di(r,(a,l)=>{let c=`invalid ${s} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}.`;i.includes("context")&&(c+=`
If you are trying to annotate ${s} with application data, use the '${s}.context' property instead.`),I(c)}),Object.keys(r).length>0&&n){const a=this.getFrameworkOverrides().getDocLink(n);I(`to see all the valid ${s} properties please check: ${a}`)}}};function iL(e,t,i){const s={},n=e.filter(o=>!t.some(r=>r===o));return n.length>0&&n.forEach(o=>s[o]=Fy({inputValue:o,allSuggestions:i}).values),s}var sL={version:ie,moduleName:"@ag-grid-community/core"},nL={version:ie,moduleName:"@ag-grid-community/core-validations",beans:[tL]},F1={version:ie,moduleName:"@ag-grid-community/core-community-features",dependantModules:[sL,nL,mD,ck,PI,QT,oT,zI,CI]},oL=class extends D{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){var e,t;this.destroyCalled||(this.eventService.dispatchEvent({type:"gridPreDestroyed",state:((e=this.beans.stateService)==null?void 0:e.getState())??{}}),this.destroyCalled=!0,(t=this.beans.ctrlsService.get("gridCtrl"))==null||t.destroyGridUi(),this.beans.context.destroy(),super.destroy())}isDestroyCalled(){return this.destroyCalled}},nc=new Set(["gridPreDestroyed","fillStart","pasteStart"]),rL=e=>e==="checkboxSelected"||e==="rowClicked"||e==="spaceKey"||e==="uiSelectAll"||e==="uiSelectAllCurrentPage"||e==="uiSelectAllFiltered",aL=new Map([...ba.BOOLEAN_PROPERTIES.map(e=>[e,mp]),...ba.NUMBER_PROPERTIES.map(e=>[e,jy]),["groupAggFiltering",e=>typeof e=="function"?e:mp(e)],["pageSize",Ri(1)],["autoSizePadding",Ri(0)],["keepDetailRowsCount",Ri(1)],["rowBuffer",Ri(0)],["infiniteInitialRowCount",Ri(1)],["cacheOverflowSize",Ri(1)],["cacheBlockSize",Ri(1)],["serverSideInitialRowCount",Ri(1)],["viewportRowModelPageSize",Ri(1)],["viewportRowModelBufferSize",Ri(0)]]);function E1(e,t){const i=aL.get(e);return i?i(t):t}function lL(e){const t={};return Object.entries(e).forEach(([i,s])=>{const n=E1(i,s);t[i]=n}),t}var k1=class M1 extends D{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new zo,this.globalEventHandlerFactory=t=>(i,s)=>{if(!this.isAlive())return;const n=nc.has(i);if(n&&!t||!n&&t)return;const o=Pa.getCallbackForEvent(i),r=this.gridOptions[o];typeof r=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{r(s)})}}wireBeans(t){this.gridOptions=t.gridOptions,this.eGridDiv=t.eGridDiv,this.validationService=t.validationService,this.environment=t.environment,this.api=t.gridApi,this.gridId=t.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){const t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:i})=>{this.updateGridOptions({options:i,force:!0,source:"gridOptionsUpdated"})}})}get(t){return this.gridOptions[t]??JI[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return N(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(s=>{const n=s;return n.api=this.api,n.context=this.gridOptionsContext,t(n)})}updateGridOptions({options:t,force:i,source:s="api"}){var r;const n={id:M1.changeSetId++,properties:[]},o=[];Object.entries(t).forEach(([a,l])=>{s==="api"&&Ax[a]&&I(`${a} is an initial property and cannot be updated.`);const c=E1(a,l),u=i||typeof c=="object"&&s==="api",d=this.gridOptions[a];if(u||d!==c){this.gridOptions[a]=c;const h={type:a,currentValue:c,previousValue:d,changeSet:n,source:s};o.push(h)}}),(r=this.validationService)==null||r.processGridOptions(this.gridOptions),n.properties=o.map(a=>a.type),o.forEach(a=>{this.gridOptions.debug&&hi(`Updated property ${a.type} from`,a.previousValue," to ",a.currentValue),this.propertyEventService.dispatchEvent(a)})}addPropertyEventListener(t,i){this.propertyEventService.addEventListener(t,i)}removePropertyEventListener(t,i){this.propertyEventService.removeEventListener(t,i)}getDomDataKey(){return this.domDataKey}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(t){const i=t;return i.api=this.api,i.context=this.gridOptionsContext,i}assertModuleRegistered(t,i){return ki.__assertRegistered(t,i,this.gridId)}isModuleRegistered(t){return ki.__isRegistered(t,this.gridId)}};k1.changeSetId=0;var cL=k1,uL=class extends D{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let i,s;if(We(e.column)?i=this.visibleColsService.getGroupAtDirection(e.column,t):(s=`getCol${t}`,i=this.visibleColsService[s](e.column)),!i)return;const{headerRowIndex:n}=e;if(this.getHeaderRowType(n)!=="filter"){const a=[i];for(;i.getParent();)i=i.getParent(),a.push(i);i=a[a.length-1-n]}const{column:o,headerRowIndex:r}=this.getHeaderIndexToFocus(i,n);return{column:o,headerRowIndex:r}}getHeaderIndexToFocus(e,t){let i;if(We(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){const s=e;i=s.getLeafColumns()[0];let n=i;for(;n!==s;)t++,n=n.getParent()}return{column:i||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){const i=this.getHeaderRowType(t),s=i==="filter",n=i==="column";let o=s?e:e.getParent(),r=t-1,a=r;if(n&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;o&&o.isPadding();)o=o.getParent(),r--;a=r,r<0&&(o=e,r=t,a=void 0)}return{column:o,headerRowIndex:r,headerRowIndexWithoutSpan:a}}getColumnVisibleChild(e,t,i="After"){const s=this.getHeaderRowType(t);let n=e,o=t+1;const r=o;if(s==="group"){const a=e.getDisplayedLeafColumns(),l=i==="After"?a[0]:ae(a),c=[];let u=l;for(;u.getParent()!==e;)u=u.getParent(),c.push(u);if(n=l,l.isSpanHeaderHeight())for(let d=c.length-1;d>=0;d--){const h=c[d];if(!h.isPadding()){n=h;break}o++}else n=ae(c),n||(n=l)}return{column:n,headerRowIndex:o,headerRowIndexWithoutSpan:r}}getHeaderRowType(e){const t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const i=this.visibleColsService.getAllCols(),s=i[t==="start"?0:i.length-1];if(!s)return;const n=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned()),o=n==null?void 0:n.getRowType(e);if(o=="group"){const r=this.visibleColsService.getColGroupAtLevel(s,e);return{headerRowIndex:e,column:r}}return{headerRowIndex:o==null?-1:e,column:s}}},dL=class extends D{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){const e=this.gos.getCallback("getLocaleText");if(e)return(i,s,n)=>e({key:i,defaultValue:s,variableValues:n});const t=this.gos.get("localeText");return(i,s,n)=>{let o=t&&t[i];if(o&&n&&n.length){let r=0;for(;!(r>=n.length||o.indexOf("${variable}")===-1);)o=o.replace("${variable}",n[r++])}return o??s}}},hL=class extends D{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new cg(this.getFrameworkOverrides())}addEventListener(e,t){const i=this.frameworkEventWrappingService.wrap(t),s=qc(this.gos)&&!nc.has(e),n=s?this.asyncEventListeners:this.syncEventListeners;n.has(e)||n.set(e,new Set),n.get(e).add(i),this.eventService.addEventListener(e,i,s)}removeEventListener(e,t){var o;const i=this.frameworkEventWrappingService.unwrap(t),s=this.asyncEventListeners.get(e),n=!!(s!=null&&s.delete(i));n||(o=this.syncEventListeners.get(e))==null||o.delete(i),this.eventService.removeEventListener(e,i,n)}addGlobalListener(e){const t=this.frameworkEventWrappingService.wrapGlobal(e);if(qc(this.gos)){const s=(o,r)=>{nc.has(o)&&t(o,r)},n=(o,r)=>{nc.has(o)||t(o,r)};this.globalEventListenerPairs.set(e,{syncListener:s,asyncListener:n}),this.eventService.addGlobalListener(s,!1),this.eventService.addGlobalListener(n,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){const t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){const{syncListener:s,asyncListener:n}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(s,!1),this.eventService.removeGlobalListener(n,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach((i,s)=>{i.forEach(n=>this.eventService.removeEventListener(s,n,t)),i.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(i=>this.eventService.removeGlobalListener(i,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}},pL=class extends D{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventService.dispatchEvent({type:"paginationChanged",animate:(e==null?void 0:e.animate)??!1,newData:(e==null?void 0:e.newData)??!1,newPage:(e==null?void 0:e.newPage)??!1,newPageSize:(e==null?void 0:e.newPageSize)??!1,keepRenderedRows:(e==null?void 0:e.keepRenderedRows)??!1})}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},fL=class extends D{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return le(this.topRowBounds)||le(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){const e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=N(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},gL=class extends D{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.updateAnnouncement=mt(this.updateAnnouncement.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){const e=Ge(this.gos),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),ly(t,"polite"),_x(t,"additions text"),Nx(t,!0),this.eGridDiv.appendChild(t)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50)}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(zt(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null,this.pendingAnnouncements.clear()}},mL=class extends D{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e,t){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){e(),t();return}const i=s=>{for(;s.length;){const n=s.pop();n&&n()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e(),i(this.executeNextFuncs)},0),window.setTimeout(()=>{t(),i(this.executeLaterFuncs)},200)})}},CL=class extends D{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}updateState(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:"columnHoverChanged"})}},vL=class extends D{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}postConstruct(){this.isClientSide=ke(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.onGridSizeChanged.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.overlayWrapperComp}isExclusive(){return this.state===1&&!!this.overlayWrapperComp}getOverlayWrapper(){return this.overlayWrapperComp}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos.get("loading");!e&&(e!==void 0||this.gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,!(this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay"))&&this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){I("Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.");return}this.doHideOverlay()}updateOverlayVisibility(){if(!this.overlayWrapperComp){this.state=0;return}let e=this.gos.get("loading");this.showInitialOverlay&&e===void 0&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.isClientSide),e?this.state!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.isClientSide?this.state!==2&&this.doShowNoRowsOverlay():this.state!==0&&this.doHideOverlay())}doShowLoadingOverlay(){this.overlayWrapperComp&&(this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.overlayWrapperComp&&(this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.overlayWrapperComp&&(this.state=0,this.overlayWrapperComp.hideOverlay(),this.updateExclusive())}showOverlay(e,t,i){var n;const s=e.newAgStackInstance();(n=this.overlayWrapperComp)==null||n.showOverlay(s,t,this.isExclusive(),i),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventService.dispatchEvent({type:"overlayExclusiveChanged"})}onGridSizeChanged(){this.refreshWrapperPadding()}refreshWrapperPadding(){if(!this.overlayWrapperComp)return;let e=0;if(this.state===2){const t=this.ctrlsService.get("gridHeaderCtrl");e=(t==null?void 0:t.getHeaderHeight())||0}else this.wrapperPadding!==0&&(e=0);this.wrapperPadding!==e&&(this.wrapperPadding=e,this.overlayWrapperComp.updateOverlayWrapperPaddingTop(e))}},SL=class extends D{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){const t=[];return N(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),jC(t,this.processClassesFromGridOptions(e.rowNode)),jC(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){const t=[],i=o=>{typeof o=="string"?t.push(o):Array.isArray(o)&&o.forEach(r=>t.push(r))},s=this.gos.get("rowClass");if(s){if(typeof s=="function")return I("rowClass should not be a function, please use getRowClass instead"),[];i(s)}const n=this.gos.getCallback("getRowClass");if(n){const o={data:e.data,node:e,rowIndex:e.rowIndex},r=n(o);i(r)}return t}preProcessRowClassRules(e){const t=[];return this.processRowClassRules(e,i=>{t.push(i)},()=>{}),t}processRowClassRules(e,t,i){const s=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),s,t,i)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},wL=class extends D{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=Yx(),this.gos.get("debug")&&hi("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight();(t!==this.scrollY||i!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=i,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&hi(`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),i=e/t;return this.maxScrollY*i}},yL=class extends D{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=Ei(this.gos),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=Ei(this.gos))}doFullSort(e,t){const i=(n,o)=>({currentPos:o,rowNode:n}),s=e.map(i);return s.sort(this.compareRowNodes.bind(this,t)),s.map(n=>n.rowNode)}compareRowNodes(e,t,i){const s=t.rowNode,n=i.rowNode;for(let o=0,r=e.length;o<r;o++){const a=e[o],l=a.sort==="desc",c=this.getValue(s,a.column),u=this.getValue(n,a.column);let d;const h=this.getComparator(a,s);if(h?d=h(c,u,s,n,l):d=$P(c,u,this.isAccentedSort),!isNaN(d)&&d!==0)return a.sort==="asc"?d:d*-1}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,s=i.getColDef().comparator;if(s!=null)return s;if(!i.getColDef().showRowGroup)return;const n=!t.group&&i.getColDef().field;if(!n)return;const o=this.columnModel.getColDefCol(n);if(o)return o.getColDef().comparator}getValue(e,t){var s,n,o;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(Nu(this.gos,this.columnModel.isPivotActive())){const l=(s=e.allLeafChildren)==null?void 0:s[0];return l?this.valueService.getValue(t,l,!1,!1):void 0}const a=(n=this.showRowGroupColsService)==null?void 0:n.getShowRowGroupCol(t.getId());return a?(o=e.groupData)==null?void 0:o[a.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}},zu=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let i=0;i<e.children.length;i++)this.depthFirstSearchChangedPath(e.children[i],t);t(e.rowNode)}depthFirstSearchEverything(e,t,i){if(e.childrenAfterGroup)for(let s=0;s<e.childrenAfterGroup.length;s++){const n=e.childrenAfterGroup[s];n.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[s],t,i):i&&t(n)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const s={rowNode:t,children:null};this.mapToItems[t.id]=s,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach(s=>this.nodeIdsToColumns[i.id][s.getId()]=!0),i=i.parent}linkPathItems(e,t){let i=e;for(let s=0;s<t;s++){const n=this.mapToItems[i.id],o=this.mapToItems[i.parent.id];o.children||(o.children=[]),o.children.push(n),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter(n=>i[n.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter(n=>!i[n.getId()])}},D1=class extends D{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new xD,this.rowSelectionMode=void 0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){const{gos:e,rowModel:t,onRowSelected:i}=this;this.selectionCtx.init(t),this.rowSelectionMode=Qc(e),this.groupSelectsChildren=Tn(e),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{const s=Tn(e),n=Qc(e);(s!==this.groupSelectsChildren||n!==this.rowSelectionMode)&&(this.groupSelectsChildren=s,this.rowSelectionMode=n,this.deselectAllRowNodes({source:"api"}))}),this.addManagedEventListeners({rowSelected:i.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiSelect(){return this.rowSelectionMode==="multiRow"}overrideSelectionValue(e,t){if(!rL(t))return e;const i=this.selectionCtx.getRoot();return i?i.isSelected()??!1:!0}setNodesSelected(e){var d;const{newValue:t,clearSelection:i,suppressFinishActions:s,rangeSelect:n,nodes:o,event:r,source:a}=e;if(o.length===0)return 0;if(o.length>1&&!this.isMultiSelect())return I("cannot multi select unless selection mode is 'multiRow'"),0;const l=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,c=o.map(h=>h.footer?h.sibling:h);if(n){if(c.length>1)return I("cannot range select while selecting multiple rows"),0;const h=c[0],p=this.overrideSelectionValue(t,a);if(this.isMultiSelect()){if(this.selectionCtx.isInRange(h)){const g=this.selectionCtx.truncate(h);return p&&this.selectRange(g.discard,!1,a),this.selectRange(g.keep,p,a)}else if(this.selectionCtx.getRoot()!==h){const S=this.selectionCtx.extend(h,this.groupSelectsChildren);return p&&this.selectRange(S.discard,!1,a),this.selectRange(S.keep,p,a)}}}s||this.selectionCtx.setRoot(c[0]);let u=0;for(let h=0;h<c.length;h++){const p=c[h];l&&p.group||p.selectThisNode(t,r,a)&&u++,this.groupSelectsChildren&&((d=p.childrenAfterGroup)!=null&&d.length)&&(u+=this.selectChildren(p,t,l,a))}return s||(t&&(i||!this.isMultiSelect())&&(u+=this.clearOtherNodes(c[0],a)),u>0&&(this.updateGroupsFromChildrenSelections(a),this.dispatchSelectionChanged(a))),u}selectRange(e,t,i){let s=0;return e.forEach(n=>{if(n.group&&this.groupSelectsChildren)return;n.selectThisNode(t,void 0,i)&&s++}),s>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),s}selectChildren(e,t,i,s){const n=i?e.childrenAfterAggFilter:e.childrenAfterGroup;return le(n)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:s,nodes:n})}getSelectedNodes(){const e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((i,s)=>{i&&e(i)&&t.set(s,i)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||!ke(this.gos))return!1;const s=this.rowModel.getRootNode();t||(t=new zu(!0,s),t.setInactive());let n=!1;return t.forEachChangedNodeDepthFirst(o=>{if(o!==s){const r=o.calculateSelectedFromChildren();n=o.selectThisNode(r===null?!1:r,void 0,e)||n}}),n}clearOtherNodes(e,t){const i=new Map;let s=0;return this.selectedNodes.forEach(n=>{if(n&&n.id!==e.id){const o=this.selectedNodes.get(n.id);s+=o.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&n.parent&&i.set(n.parent.id,n.parent)}}),i.forEach(n=>{const o=n.calculateSelectedFromChildren();n.selectThisNode(o===null?!1:o,void 0,t)}),s}onRowSelected(e){const t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(N(t)&&e.id!==t.id&&t){const s=t.id;this.selectedNodes.get(s)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){var e;(e=this.selectedNodes)==null||e.clear()}getBestCostNodeSelection(){if(!ke(this.gos))return;const t=this.rowModel.getTopLevelNodes();if(t===null)return;const i=[];function s(n){for(let o=0,r=n.length;o<r;o++){const a=n[o];if(a.isSelected())i.push(a);else{const l=a;l.group&&l.children&&s(l.children)}}}return s(t),i}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),e===0}deselectAllRowNodes(e){const t=r=>r.selectThisNode(!1,void 0,s),i=ke(this.gos),{source:s,justFiltered:n,justCurrentPage:o}=e;if(o||n){if(!i){ge("selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(n,o).forEach(t)}else this.selectedNodes.forEach(r=>{r&&t(r)}),this.reset(s);this.selectionCtx.reset(),i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(s),this.dispatchSelectionChanged(s)}getSelectedCounts(e,t){let i=0,s=0;const n=o=>{this.groupSelectsChildren&&o.group||(o.isSelected()?i++:o.selectable&&s++)};return this.getNodesToSelect(e,t).forEach(n),{selectedCount:i,notSelectedCount:s}}getSelectAllState(e,t){const{selectedCount:i,notSelectedCount:s}=this.getSelectedCounts(e,t);return i===0&&s===0?!1:i>0&&s>0?null:i>0}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(i=>i.selectable).length>0}getNodesToSelect(e=!1,t=!1){this.validateSelectAllType();const i=[];if(t)return this.forEachNodeOnPage(n=>{if(!n.group){i.push(n);return}if(!n.expanded){const o=r=>{var a;i.push(r),(a=r.childrenAfterFilter)!=null&&a.length&&r.childrenAfterFilter.forEach(o)};o(n);return}this.groupSelectsChildren||i.push(n)}),i;const s=this.rowModel;return e?(s.forEachNodeAfterFilter(n=>{i.push(n)}),i):(s.forEachNode(n=>{i.push(n)}),i)}forEachNodeOnPage(e){const t=this.pageBoundsService.getFirstRow(),i=this.pageBoundsService.getLastRow();for(let s=t;s<=i;s++){const n=this.rowModel.getRow(s);n&&e(n)}}selectAllRowNodes(e){if(XP(this.gos)&&!qw(this.gos))return I("cannot multi select unless selection mode is 'multiRow'");this.validateSelectAllType();const{source:t,justFiltered:i,justCurrentPage:s}=e,n=this.getNodesToSelect(i,s);n.forEach(o=>o.selectThisNode(!0,void 0,t)),this.selectionCtx.setRoot(n[0]??null),this.selectionCtx.setEndRange(ae(n)??null),ke(this.gos)&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)}getSelectionState(){const e=[];return this.selectedNodes.forEach(t=>{t!=null&&t.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return ge("Invalid selection state. When using client-side row model, the state must conform to `string[]`.");const i=new Set(e),s=[];this.rowModel.forEachNode(n=>{i.has(n.id)&&s.push(n)}),this.setNodesSelected({newValue:!0,nodes:s,source:t})}dispatchSelectionChanged(e){this.eventService.dispatchEvent({type:"selectionChanged",source:e})}validateSelectAllType(){if(!ke(this.gos))throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`)}},RL=class extends D{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){const{gos:t}=this,i=$c(t),s=rg(t);if(!i||!s)return;const n=Tn(t),o=ke(t)&&n,r=[],a=l=>{if(e&&!l.group)return;if(o&&l.group){const u=l.childrenAfterGroup.some(d=>d.selectable===!0);l.setRowSelectable(u,!0);return}const c=(s==null?void 0:s(l))??!0;l.setRowSelectable(c,!0),!c&&l.isSelected()&&r.push(l)};if(o){const l=this.rowModel;new zu(!1,l.getRootNode()).forEachChangedNodeDepthFirst(a,!0,!0)}else this.rowModel.forEachNode(a);r.length&&this.selectionService.setNodesSelected({nodes:r,newValue:!1,source:"selectableChanged"}),o&&this.selectionService instanceof D1&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},pv=["asc","desc",null],bL=class extends D{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,i){const s=this.getNextSortDirection(e);this.setSortForColumn(e,s,t,i)}setSortForColumn(e,t,i,s){t!=="asc"&&t!=="desc"&&(t=null);const n=Ei(this.gos);let o=[e];if(n&&e.getColDef().showRowGroup){const l=this.funcColsService.getSourceColumnsForGroupColumn(e),c=l==null?void 0:l.filter(u=>u.isSortable());c&&(o=[e,...c])}o.forEach(l=>l.setSort(t,s));const r=(i||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),a=[];if(!r){const l=this.clearSortBarTheseColumns(o,s);a.push(...l)}this.updateSortIndex(e),a.push(...o),this.dispatchSortChangedEvents(s,a)}updateSortIndex(e){var a;const t=Ei(this.gos),i=(a=this.showRowGroupColsService)==null?void 0:a.getShowRowGroupCol(e.getId()),s=t&&i||e,n=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach(l=>l.setSortIndex(null));const o=n.filter(l=>t&&l.getColDef().showRowGroup?!1:l!==s);(s.getSort()?[...o,s]:o).forEach((l,c)=>{l.setSortIndex(c)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const t=this.columnModel.getAllCols().filter(i=>!!i.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventService.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.columnModel.getAllCols().forEach(s=>{e.includes(s)||(s.getSort()&&i.push(s),s.setSort(void 0,t))}),i}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gos.get("sortingOrder")?t=this.gos.get("sortingOrder"):t=pv,!Array.isArray(t)||t.length<=0)return I(`sortingOrder must be an array with at least one element, currently it's ${t}`),null;const i=t.indexOf(e.getSort()),s=i<0,n=i==t.length-1;let o;return s||n?o=t[0]:o=t[i+1],pv.indexOf(o)<0?(I("invalid sort type ",o),null):o}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter(o=>!!o.getSort());if(this.columnModel.isPivotMode()){const o=Ei(this.gos);e=e.filter(r=>{var u;const a=!!r.getAggFunc(),l=!r.isPrimary(),c=o?(u=this.showRowGroupColsService)==null?void 0:u.getShowRowGroupCol(r.getId()):r.getColDef().showRowGroup;return a||l||c})}const t=this.funcColsService.getRowGroupColumns().filter(o=>!!o.getSort()),i={};e.forEach((o,r)=>i[o.getId()]=r),e.sort((o,r)=>{const a=o.getSortIndex(),l=r.getSortIndex();if(a!=null&&l!=null)return a-l;if(a==null&&l==null){const c=i[o.getId()],u=i[r.getId()];return c>u?1:-1}else return l==null?-1:1});const s=Ei(this.gos)&&!!t.length;s&&(e=[...new Set(e.map(o=>{var r;return((r=this.showRowGroupColsService)==null?void 0:r.getShowRowGroupCol(o.getId()))??o}))]);const n=new Map;return e.forEach((o,r)=>n.set(o,r)),s&&t.forEach(o=>{const r=this.showRowGroupColsService.getShowRowGroupCol(o.getId());n.set(o,n.get(r))}),n}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[i,s])=>t-s).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=Ei(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){const t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(t!=null&&t.length))return e.getSort();const s=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,n=s[0].getSort();return s.every(r=>r.getSort()==n)?n:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},PL=class extends D{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.eventService.dispatchEvent({type:"gridReady"});const e=this.gos.isModuleRegistered("@ag-grid-enterprise/core");this.gos.get("debug")&&hi(`initialised successfully, enterprise = ${e}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,an(e.source))}}},xL="paste",FL=class extends D{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){ke(this.gos)&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){e.source!==xL&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;const i=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const s=this.gos.get("aggregateOnlyChangedColumns"),n=new zu(s,this.clientSideRowModel.getRootNode());n.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(n),n.forEachChangedNodeDepthFirst(o=>{i.push(o)})}this.rowRenderer.refreshCells({rowNodes:i})}},EL=class extends D{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);ge("value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return hi("Processing of the expression failed"),hi("Expression = ",e),hi("Params = ",t),hi("Exception = ",i),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const t=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},kL=class extends D{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=i)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},ML=class extends D{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=Oi(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=i=>this.callColumnCellValueChangedHandler(i),t=qc(this.gos);this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener("cellValueChanged",e,t)),this.addManagedPropertyListener("treeData",i=>this.isTreeData=i.currentValue)}getValueForDisplay(e,t){const i=t.leafGroup&&this.columnModel.isPivotMode(),s=t.group&&t.expanded&&!t.footer&&!i,n=this.gos.get("groupSuppressBlankHeader");if(!s||n)return this.getValue(e,t);let o=!1;const r=this.gos.get("groupTotalRow")??this.gos.get("groupIncludeFooter");typeof r!="function"?o=!!r:o=!!(this.gos.getCallback("groupTotalRow")??this.gos.getCallback("groupIncludeFooter"))({node:this});const a=s&&o;return this.getValue(e,t,!1,a)}getValue(e,t,i=!1,s=!1){if(this.initialised||this.init(),!t)return;const n=e.getColDef(),o=n.field,r=e.getColId(),a=t.data;let l;const c=t.groupData&&t.groupData[r]!==void 0,u=!s&&t.aggData&&t.aggData[r]!==void 0,d=this.isSsrm&&s&&!!e.getColDef().aggFunc,h=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(i&&n.filterValueGetter?l=this.executeFilterValueGetter(n.filterValueGetter,a,e,t):this.isTreeData&&u?l=t.aggData[r]:this.isTreeData&&n.valueGetter?l=this.executeValueGetter(n.valueGetter,a,e,t):this.isTreeData&&o&&a?l=jr(a,o,e.isFieldContainsDots()):c?l=t.groupData[r]:u?l=t.aggData[r]:n.valueGetter?l=this.executeValueGetter(n.valueGetter,a,e,t):h?l=jr(a,t.field,e.isFieldContainsDots()):o&&a&&!d&&(l=jr(a,o,e.isFieldContainsDots())),this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){const p=l.substring(1);l=this.executeValueGetter(p,a,e,t)}if(l==null){const p=this.getOpenedGroup(t,e);if(p!=null)return p}return l}parseValue(e,t,i,s){const n=e.getColDef(),o=n.valueParser;if(N(o)){const r=this.gos.addGridCommonParams({node:t,data:t==null?void 0:t.data,oldValue:s,newValue:i,colDef:n,column:e});return typeof o=="function"?o(r):this.expressionService.evaluate(o,r)}return i}getDeleteValue(e,t){return N(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t))??null:null}formatValue(e,t,i,s,n=!0){let o=null,r;const a=e.getColDef();if(s?r=s:n&&(r=a.valueFormatter),r){const l=this.gos.addGridCommonParams({value:i,node:t,data:t?t.data:null,colDef:a,column:e});typeof r=="function"?o=r(l):o=this.expressionService.evaluate(r,l)}else if(a.refData)return a.refData[i]||"";return o==null&&Array.isArray(i)&&(o=i.join(", ")),o}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;const s=t.getColDef().showRowGroup;let n=e.parent;for(;n!=null;){if(n.rowGroupColumn&&(s===!0||s===n.rowGroupColumn.getColId()))return n.key;n=n.parent}}setValue(e,t,i,s){const n=this.columnModel.getColDefCol(t);if(!e||!n)return!1;le(e.data)&&(e.data={});const{field:o,valueSetter:r}=n.getColDef();if(le(o)&&le(r))return I("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(n,i))return I("Data type of the new value does not match the cell data type of the column"),!1;const a=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(n,e),newValue:i,colDef:n.getColDef(),column:n});a.newValue=i;let l;if(N(r)?typeof r=="function"?l=r(a):l=this.expressionService.evaluate(r,a):l=this.setValueUsingField(e.data,o,i,n.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged();const c=this.getValue(n,e);return this.eventService.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:a.column,colDef:a.colDef,data:e.data,node:e,oldValue:a.oldValue,newValue:c,value:c,source:s}),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,i,s){if(!t)return!1;let n=!1;if(!s)n=e[t]===i,n||(e[t]=i);else{const o=t.split(".");let r=e;for(;o.length>0&&r;){const a=o.shift();o.length===0?(n=r[a]===i,n||(r[a]=i)):r=r[a]}}return!n}executeFilterValueGetter(e,t,i,s){const n=this.gos.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});return typeof e=="function"?e(n):this.expressionService.evaluate(e,n)}executeValueGetter(e,t,i,s){const n=i.getColId(),o=this.valueCache.getValue(s,n);if(o!==void 0)return o;const r=this.gos.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});let a;return typeof e=="function"?a=e(r):a=this.expressionService.evaluate(e,r),this.valueCache.setValue(s,n,a),a}getValueCallback(e,t){const i=this.columnModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),s=e.getColDef().keyCreator;let n=i;if(s){const o=this.gos.addGridCommonParams({value:i,colDef:e.getColDef(),column:e,node:t,data:t.data});n=s(o)}return typeof n=="string"||n==null||(n=String(n),n==="[object Object]"&&I("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),n}},Og=class rn{static applyGlobalGridOptions(t){if(!rn.gridOptions)return t;let i={};return gt(i,rn.gridOptions,!0,!0),rn.mergeStrategy==="deep"?gt(i,t,!0,!0):i={...i,...t},rn.gridOptions.context&&(i.context=rn.gridOptions.context),t.context&&(rn.mergeStrategy==="deep"&&i.context&&gt(t.context,i.context,!0,!0),i.context=t.context),i}};Og.gridOptions=void 0;Og.mergeStrategy="shallow";var T1=Og;function DL(e){var t;return(t=T1.gridOptions)==null?void 0:t[e]}var TL=1,AL=class{create(e,t,i,s,n){const o=T1.applyGlobalGridOptions(t),r=lL(o),a=r.gridId??String(TL++),l=this.getRegisteredModules(n,a),c=this.createBeansList(r.rowModelType,l,a),u=this.createProvidedBeans(e,r,n);if(!c){ge("Failed to create grid.");return}const d={providedBeanInstances:u,beanClasses:c,gridId:a,beanInitComparator:UD,beanDestroyComparator:KD,derivedBeans:[BD]},h=new YF(d);return this.registerModuleUserComponents(h,l),this.registerControllers(h,l),this.registerModuleApiFunctions(h,l),i(h),h.getBean("syncService").start(),s&&s(h),h.getBean("gridApi")}registerControllers(e,t){const i=e.getBean("ctrlsFactory");t.forEach(s=>{s.controllers&&s.controllers.forEach(n=>i.register(n))})}getRegisteredModules(e,t){const i=e?e.modules:null,s=ki.__getRegisteredModules(t),n=[],o={},r=(a,l,c)=>{(d=>{o[d.moduleName]||(o[d.moduleName]=!0,n.push(d),ki.__register(d,a,c))})(l),l.dependantModules&&l.dependantModules.forEach(d=>r(a,d,c))};return r(!!(i!=null&&i.length)||!ki.__isPackageBased(),F1,void 0),i&&i.forEach(a=>r(!0,a,t)),s&&s.forEach(a=>r(!ki.__isPackageBased(),a,void 0)),n}registerModuleUserComponents(e,t){const i=this.extractModuleEntity(t,n=>n.userComponents?n.userComponents:[]),s=e.getBean("userComponentRegistry");i.forEach(({name:n,classImp:o,params:r})=>{s.registerDefaultComponent(n,o,r)})}registerModuleApiFunctions(e,t){const i=e.getBean("apiFunctionService");t.forEach(s=>{const n=s.apiFunctions;n&&Object.keys(n).forEach(r=>{i==null||i.addFunction(r,n[r])})})}createProvidedBeans(e,t,i){let s=i?i.frameworkOverrides:null;le(s)&&(s=new v1);const n={gridOptions:t,eGridDiv:e,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:s};return i&&i.providedBeanInstances&&Object.assign(n,i.providedBeanInstances),n}createBeansList(e="clientSide",t,i){const s=t.filter(l=>!l.rowModel||l.rowModel===e),n={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!n[e]){ge("Could not find row model for rowModelType = ",e);return}if(!ki.__assertRegistered(n[e],`rowModelType = '${e}'`,i))return;const o=[XD,YD,uL,oL,OD,MF,WD,zD,DM,Ey,wL,kM,dL,yD,ZF,Mx,eT,cL,TD,D1,vx,uk,fL,pL,SD,EL,Cx,EM,kL,ML,CD,MM,QF,tT,FM,JD,ID,FD,xM,bL,CL,mL,RL,FL,TM,ND,SL,yL,qD,iT,QD,$D,PL,vL,AM,hL,gL,IM,yx,_D,Rx,Sx,GD,HD,kx,wx,Fx,VD,Ex,hx],r=this.extractModuleEntity(s,l=>l.beans?l.beans:[]);o.push(...r);const a=[];return o.forEach(l=>{a.indexOf(l)<0&&a.push(l)}),a}extractModuleEntity(e,t){return[].concat(...e.map(t))}},A1=class extends D{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){const e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e;break}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};function IL(e){e.expansionService.expandAll(!0)}function LL(e){e.expansionService.expandAll(!1)}function OL(e){var s,n;const t=(s=e.rowModelHelperService)==null?void 0:s.getClientSideRowModel(),i=(n=e.rowModelHelperService)==null?void 0:n.getServerSideRowModel();t?t.onRowHeightChanged():i&&i.onRowHeightChanged()}function BL(e,t,i){var o,r;const s=(o=e.rowModelHelperService)==null?void 0:o.getServerSideRowModel();if(s){if(e.funcColsService.isRowGroupEmpty()){s.setRowCount(t,i);return}ge("setRowCount cannot be used while using row grouping.");return}const n=(r=e.rowModelHelperService)==null?void 0:r.getInfiniteRowModel();if(n){n.setRowCount(t,i);return}}function NL(e){var t;return((t=e.rowNodeBlockLoader)==null?void 0:t.getBlockState())??{}}function _L(e){return e.rowModel.isLastRowIndexKnown()}var GL={version:ie,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:IL,collapseAll:LL,onRowHeightChanged:OL}},HL={version:ie,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:BL,getCacheBlockState:NL,isLastRowIndexKnown:_L}},VL=class{wrap(e,t,i=[],s){const n=this.createWrapper(e,s);return t.forEach(o=>{this.createMethod(n,o,!0)}),i.forEach(o=>{this.createMethod(n,o,!1)}),n}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&I("Framework component is missing the method "+t+"()"),null)}}},qo=typeof global>"u"?{}:global;qo.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;qo.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;qo.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;qo.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;qo.Node=typeof Node>"u"?{}:Node;qo.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var WL="ROOT_NODE_ID",Xd=0,zL=class{constructor(e,t,i,s,n,o){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=i,this.funcColsService=s,this.beans=o,this.selectionService=n,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=WL,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return ey(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){I("rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);const t=this.rootNode,i=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map((s,n)=>this.createNode(s,this.rootNode,Xd,n)):(t.allLeafChildren=[],t.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=t.childrenAfterFilter,i.childrenAfterGroup=t.childrenAfterGroup,i.childrenAfterAggFilter=t.childrenAfterAggFilter,i.childrenAfterSort=t.childrenAfterSort,i.childrenMapped=t.childrenMapped,i.allLeafChildren=t.allLeafChildren)}updateRowData(e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const t={rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},i=[];return this.executeRemove(e,t,i),this.executeUpdate(e,t,i),this.executeAdd(e,t),this.updateSelection(i,"rowDataChanged"),t}updateRowOrderFromRowData(e){const t=this.rootNode.allLeafChildren,i=(t==null?void 0:t.length)??0,s=new Map;let n=-1,o=-1;for(let r=0;r<i;++r){const a=t[r],l=a.data;l!==e[r]&&(o<0&&(n=r),o=r,s.set(l,a))}if(n<0)return!1;for(let r=n;r<=o;++r){const a=s.get(e[r]);a!==void 0&&(t[r]=a,a.sourceRowIndex=r)}return!0}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){this.eventService.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e!=null&&e.length?e[0]:null})}updateSelection(e,t){const i=e.length>0;i&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),i&&this.eventService.dispatchEvent({type:"selectionChanged",source:t})}executeAdd(e,t){const i=e.add;if(Vt(i))return;const s=this.rootNode.allLeafChildren;let n=s.length;if(typeof e.addIndex=="number"&&(n=this.sanitizeAddIndex(e.addIndex),n>0&&this.gos.get("treeData")))for(let l=0;l<s.length;l++){const c=s[l];if((c==null?void 0:c.rowIndex)==n-1){n=l+1;break}}const o=i.map((a,l)=>this.createNode(a,this.rootNode,Xd,n+l));if(n<s.length){const a=s.slice(0,n),l=s.slice(n,s.length),c=a.length+o.length;for(let u=0,d=l.length;u<d;++u)l[u].sourceRowIndex=c+u;this.rootNode.allLeafChildren=[...a,...o,...l],t.rowsInserted=!0}else this.rootNode.allLeafChildren=s.concat(o);const r=this.rootNode.sibling;r&&(r.allLeafChildren=s),t.rowNodeTransaction.add=o}sanitizeAddIndex(e){var i;const t=((i=this.rootNode.allLeafChildren)==null?void 0:i.length)??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}executeRemove(e,{rowNodeTransaction:t},i){var r,a;const{remove:s}=e;if(Vt(s))return;const n={};s.forEach(l=>{const c=this.lookupRowNode(l);c&&(c.isSelected()&&i.push(c),c.clearRowTopAndRowIndex(),n[c.id]=!0,delete this.allNodesMap[c.id],t.remove.push(c))}),this.rootNode.allLeafChildren=((r=this.rootNode.allLeafChildren)==null?void 0:r.filter(l=>!n[l.id]))??null,(a=this.rootNode.allLeafChildren)==null||a.forEach((l,c)=>{l.sourceRowIndex=c});const o=this.rootNode.sibling;o&&(o.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,{rowNodeTransaction:t},i){const{update:s}=e;Vt(s)||s.forEach(n=>{const o=this.lookupRowNode(n);o&&(o.updateData(n),!o.selectable&&o.isSelected()&&i.push(o),this.setMasterForRow(o,n,Xd,!1),t.update.push(o))})}lookupRowNode(e){var s;const t=jo(this.gos);let i;if(t){const n=t({data:e,level:0});if(i=this.allNodesMap[n],!i)return ge(`could not find row id=${n}, data item was not found for this id`),null}else if(i=(s=this.rootNode.allLeafChildren)==null?void 0:s.find(n=>n.data===e),!i)return ge("could not find data item as object was not found",e),ge("Consider using getRowId to help the Grid find matching row data"),null;return i||null}createNode(e,t,i,s){const n=new Xi(this.beans);return n.sourceRowIndex=s,n.group=!1,this.setMasterForRow(n,e,i,!0),t&&(n.parent=t),n.level=i,n.setDataAndId(e,this.nextId.toString()),this.allNodesMap[n.id]&&I(`duplicate node id '${n.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[n.id]=n,this.nextId++,n}setMasterForRow(e,t,i,s){if(this.gos.get("treeData"))e.setMaster(!1),s&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){const r=this.gos.get("isRowMaster");r?e.setMaster(r(t)):e.setMaster(!0)}else e.setMaster(!1);if(s){const r=this.funcColsService.getRowGroupColumns(),a=r?r.length:0,l=i+a;e.expanded=e.master?this.isExpanded(l):!1}}}isExpanded(e){const t=this.gos.get("groupDefaultExpanded");return t===-1?!0:e<t}},jL=class extends D{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=mt(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){const e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:i,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new Xi(this.beans),this.nodeManager=new zL(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){const e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),s=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),n=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),o=new Set(["postSortRows","groupDisplayType","accentedSort"]),r=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...e,...t,...i,...s,...s,...n,...o,...r,...a];this.addManagedPropertyListeners(l,c=>{var h;const u=(h=c.changeSet)==null?void 0:h.properties;if(!u)return;const d=p=>u.some(g=>p.has(g));if(d(e)){this.setRowData(this.rootNode.allLeafChildren.map(p=>p.data));return}if(d(t)){this.refreshModel({step:"group"});return}if(d(i)){this.refreshModel({step:"filter"});return}if(d(s)){this.refreshModel({step:"pivot"});return}if(d(n)){this.refreshModel({step:"aggregate"});return}if(d(o)){this.refreshModel({step:"sort"});return}if(d(r)){this.refreshModel({step:"filter_aggregates"});return}d(a)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,i,s){let n,o=!1;do{n=!1;const r=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(r,i),c=Math.min(a,s);for(let u=l;u<=c;u++){const d=this.getRow(u);if(d.rowHeightEstimated){const h=Vs(this.gos,d);d.setRowHeight(h.height),n=!0,o=!0}}n&&this.setRowTopAndRowIndex()}while(n);return o}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let t=0;const i=new Set,s=it(this.gos,"normal");for(let n=0;n<this.rowsToDisplay.length;n++){const o=this.rowsToDisplay[n];if(o.id!=null&&i.add(o.id),o.rowHeight==null){const r=Vs(this.gos,o,s,e);o.setRowHeight(r.height,r.estimated)}o.setRowTop(t),o.setRowIndex(n),t+=o.rowHeight}return i}clearRowTopAndRowIndex(e,t){const i=e.isActive(),s=o=>{o&&o.id!=null&&!t.has(o.id)&&o.clearRowTopAndRowIndex()},n=o=>{if(s(o),s(o.detailNode),s(o.sibling),o.hasChildren()&&o.childrenAfterGroup){const r=o.level==-1;i&&!r&&!o.expanded||o.childrenAfterGroup.forEach(n)}};n(this.rootNode)}ensureRowsAtPixel(e,t,i=0){const s=this.getRowIndexAtPixel(t),n=this.getRow(s),o=!this.gos.get("suppressAnimationFrame");if(n===e[0])return!1;const r=this.rootNode.allLeafChildren;return e.forEach(a=>{Ct(r,a)}),e.forEach((a,l)=>{Xc(r,a,Math.max(s+i,0)+l)}),e.forEach((a,l)=>{a.sourceRowIndex=l}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:o,rowNodesOrderChanged:!0}),!0}highlightRowAtPixel(e,t){const i=t!=null?this.getRowIndexAtPixel(t):null,s=i!=null?this.getRow(i):null;if(!s||!e||t==null){this.clearHighlightedRow();return}const n=this.getHighlightPosition(t,s),o=this.isHighlightingCurrentPosition(e,s,n),r=this.lastHighlightedRow!=null&&this.lastHighlightedRow!==s;(o||r)&&(this.clearHighlightedRow(),o)||(s.setHighlighted(n),this.lastHighlightedRow=s)}getHighlightPosition(e,t){if(!t){const n=this.getRowIndexAtPixel(e);if(t=this.getRow(n||0),!t)return 1}const{rowTop:i,rowHeight:s}=t;return e-i<s/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(e,t,i){if(e===t)return!0;const s=i===0?-1:1;return this.getRow(t.rowIndex+s)===e}clearHighlightedRow(){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const t=this.rootNode.childrenAfterAggFilter,i=this.rootNode.sibling?1:0;return(t?t.length:0)+i}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let i=e;if(this.rowsToDisplay[0].footer){if(e===0)return 0;i-=1}const s=this.rowsToDisplay[this.rowsToDisplay.length-1],n=i>=this.rootNode.childrenAfterSort.length;if(s.footer&&n)return s.rowIndex;let o=this.rootNode.childrenAfterSort[i];if(this.gos.get("groupHideOpenParents"))for(;o.expanded&&o.childrenAfterSort&&o.childrenAfterSort.length>0;)o=o.childrenAfterSort[0];return o.rowIndex}getRowBounds(e){if(le(this.rowsToDisplay))return null;const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=po(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=po(this.gos),s=e.columns.length===0||e.columns.some(n=>n.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:s,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=po(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){const t=Vt(e),i=new zu(!1,this.rootNode);return t&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;const t=e.rowNodeTransactions.filter(s=>s.add!=null&&s.add.length>0||s.remove!=null&&s.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t="group";const i={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",filter_aggregates:"filter_aggregates",sort:"sort",pivot:"pivot",nothing:"nothing"};if(N(e)&&(t=i[e]),le(t)){ge(`invalid step ${e}, available steps are ${Object.keys(i).join(", ")}`);return}const s=!this.gos.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:s}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;const t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;const i=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,i,!!t.rowNodesOrderChanged,!!t.afterColumnsChanged);case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(t.rowNodeTransactions,i);case"map":this.doRowsToDisplay()}const s=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,s),this.isRefreshingModel=!1,this.eventService.dispatchEvent({type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack})}isEmpty(){const e=le(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return le(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return N(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,s=!1;const n=[],o=Tn(this.gos);return this.forEachNodeAfterFilterAndSort(r=>{if(s)return;if(i&&(r===t||r===e)&&(s=!0,r.group&&o)){n.push(...r.allLeafChildren);return}if(!i){if(r!==t&&r!==e)return;i=!0}if(!r.group||!o){n.push(r);return}}),n}setDatasource(e){ge("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(ae(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let n=-1,o=-1;for(;;){const r=Math.floor((t+i)/2),a=this.rowsToDisplay[r];if(this.isRowInPixel(a,e)||(a.rowTop<e?t=r+1:a.rowTop>e&&(i=r-1),n===t&&o===i))return r;n=t,o=i}}isRowInPixel(e,t){const i=e.rowTop,s=e.rowTop+e.rowHeight;return i<=t&&s>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,i)=>e(t,i))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){const{nodes:t,callback:i,recursionType:s,includeFooterNodes:n}=e;let{index:o}=e;const r=a=>{var p;const l=(p=t[0])==null?void 0:p.parent;if(!l)return;const c=n&&jw(this.gos),u=Uw(this.gos),d=n&&u({node:l});if(l===this.rootNode){c===a&&(l.createFooter(),i(l.sibling,o++));return}d===a&&(l.createFooter(),i(l.sibling,o++))};r("top");for(let a=0;a<t.length;a++){const l=t[a];if(i(l,o++),l.hasChildren()&&!l.footer){let c=null;switch(s){case 0:c=l.childrenAfterGroup;break;case 1:c=l.childrenAfterAggFilter;break;case 2:c=l.childrenAfterSort;break;case 3:c=l.leafGroup?null:l.childrenAfterSort;break}c&&(o=this.recursivelyWalkNodesAndCallback({nodes:[...c],callback:i,recursionType:s,index:o,includeFooterNodes:n}))}}return r("bottom"),o}doAggregate(e){var t;(t=this.aggregationStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const t=this.gos.get("treeData"),i=this.columnModel.isPivotActive(),s=n=>{n&&n.forEach(o=>{const r=()=>{o.expanded=e,s(o.childrenAfterGroup)};if(t){N(o.childrenAfterGroup)&&r();return}if(i){!o.leafGroup&&r();return}o.group&&r()})};this.rootNode&&s(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"}),this.eventService.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,i,s){if(this.groupStage)e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodesOrderChanged:i,changedPath:t}):this.groupStage.execute({rowNode:this.rootNode,changedPath:t,afterColumnsChanged:s}),Tn(this.gos)&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",t)&&this.eventService.dispatchEvent({type:"selectionChanged",source:"rowGroupChanged"});else{const n=this.rootNode,o=n.sibling;n.childrenAfterGroup=n.allLeafChildren,o&&(o.childrenAfterGroup=n.childrenAfterGroup),this.rootNode.updateHasChildren()}this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){var t;(t=this.pivotStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}getNodeManager(){return this.nodeManager}getRowNode(e){if(typeof e=="string"&&e.indexOf(Xi.ID_PREFIX_ROW_GROUP)==0){let i;return this.forEachNode(s=>{s.id===e&&(i=s)}),i}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const i=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},i)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){var s;this.valueCache.onDataChanged();const e=[],t=[];let i=!1;(s=this.rowDataTransactionBatch)==null||s.forEach(n=>{const{rowNodeTransaction:o,rowsInserted:r}=this.nodeManager.updateRowData(n.rowDataTransaction);r&&(i=!0),t.push(o),n.callback&&e.push(n.callback.bind(null,o))}),this.commonUpdateRowData(t,i),e.length>0&&window.setTimeout(()=>{e.forEach(n=>n())},0),t.length>0&&this.eventService.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache.onDataChanged();const{rowNodeTransaction:t,rowsInserted:i}=this.nodeManager.updateRowData(e);return this.commonUpdateRowData([t],i),t}afterImmutableDataChange(e,t){this.commonUpdateRowData([e],t)}commonUpdateRowData(e,t){if(!this.hasStarted)return;const i=!this.gos.get("suppressAnimationFrame");this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodesOrderChanged:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow()}};function UL(e){e.expansionService.onGroupExpandedOrCollapsed()}function KL(e,t){var i,s;(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||s.refreshModel(t)}function $L(e){var t,i;return((i=(t=e.rowModelHelperService)==null?void 0:t.getClientSideRowModel())==null?void 0:i.isEmpty())??!0}function qL(e,t){var i,s;(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||s.forEachLeafNode(t)}function YL(e,t){var i,s;(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||s.forEachNodeAfterFilter(t)}function QL(e,t){var i,s;(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||s.forEachNodeAfterFilterAndSort(t)}function XL(e){var t,i;if(e.columnModel.isAutoRowHeightActive()){I("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}(i=(t=e.rowModelHelperService)==null?void 0:t.getClientSideRowModel())==null||i.resetRowHeights()}function JL(e,t){return e.frameworkOverrides.wrapIncoming(()=>{var i,s;return(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null?void 0:s.updateRowData(t)})}function ZL(e,t,i){e.frameworkOverrides.wrapIncoming(()=>{var s,n;return(n=(s=e.rowModelHelperService)==null?void 0:s.getClientSideRowModel())==null?void 0:n.batchUpdateRowData(t,i)})}function eO(e){e.frameworkOverrides.wrapIncoming(()=>{var t,i;return(i=(t=e.rowModelHelperService)==null?void 0:t.getClientSideRowModel())==null?void 0:i.flushAsyncTransactions()})}function tO(e){return e.selectionService.getBestCostNodeSelection()}var iO=class extends D{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){var i;const t=!!((i=this.filterManager)!=null&&i.isChildFilterPresent());this.filterNodes(t,e)}filterNodes(e,t){const i=(s,n)=>{s.hasChildren()&&e&&!n?s.childrenAfterFilter=s.childrenAfterGroup.filter(o=>{const r=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,a=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return r||a}):s.childrenAfterFilter=s.childrenAfterGroup,s.sibling&&(s.sibling.childrenAfterFilter=s.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const s=(o,r)=>{if(o.childrenAfterGroup)for(let a=0;a<o.childrenAfterGroup.length;a++){const l=o.childrenAfterGroup[a],c=r||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?s(o.childrenAfterGroup[a],c):i(l,c)}i(o,r)},n=o=>s(o,!1);t.executeFromRootNode(n)}else{const s=n=>i(n,!1);t.forEachChangedNodeDepthFirst(s,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},sO=class extends D{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){const t=e.rowNode,i=[],s=this.columnModel.isPivotMode(),n=s&&t.leafGroup,o=n?[t]:t.childrenAfterSort,r=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(r,o,i,s,0);const a=i.length>0;if(!n&&a&&r.grandTotalRow){t.createFooter();const c=r.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(r,t.sibling,i,0,c)}return i}getFlattenDetails(){const e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:Kw(this.gos),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:jw(this.gos),groupTotalRow:Uw(this.gos)}}recursivelyAddToRowsToDisplay(e,t,i,s,n){if(!Vt(t))for(let o=0;o<t.length;o++){const r=t[o],a=r.hasChildren(),l=s&&!a,c=e.groupRemoveSingleChildren&&a&&r.childrenAfterGroup.length===1,u=e.groupRemoveLowestSingleChildren&&a&&r.leafGroup&&r.childrenAfterGroup.length===1,d=s&&r.leafGroup,h=e.hideOpenParents&&r.expanded&&!r.master&&!d;if(!l&&!h&&!c&&!u&&this.addRowNodeToRowsToDisplay(e,r,i,n),!(s&&r.leafGroup)){if(a){const g=c||u;if(r.expanded||g){const v=e.groupTotalRow({node:r});v||r.destroyFooter();const S=g?n:n+1;v==="top"&&(r.createFooter(),this.addRowNodeToRowsToDisplay(e,r.sibling,i,S)),this.recursivelyAddToRowsToDisplay(e,r.childrenAfterSort,i,s,S),v==="bottom"&&(r.createFooter(),this.addRowNodeToRowsToDisplay(e,r.sibling,i,S))}}else if(r.master&&r.expanded){const g=this.createDetailNode(r);this.addRowNodeToRowsToDisplay(e,g,i,n)}}}}addRowNodeToRowsToDisplay(e,t,i,s,n){n?i.unshift(t):i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:s)}createDetailNode(e){if(N(e.detailNode))return e.detailNode;const t=new Xi(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,N(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},nO=class extends D{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){ke(this.gos)&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){const e=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:e}setRowData(e){const t=this.createTransactionForRowData(e);if(!t)return;const i=this.clientSideRowModel.getNodeManager(),{rowNodeTransaction:s,rowsInserted:n}=i.updateRowData(t);let o=!1;this.gos.get("suppressMaintainUnsortedOrder")||(o=i.updateRowOrderFromRowData(e)),this.clientSideRowModel.afterImmutableDataChange(s,o||n)}createTransactionForRowData(e){if(!ke(this.gos))return ge("ImmutableService only works with ClientSideRowModel"),null;const t=jo(this.gos);if(t==null)return ge("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!"),null;const i=this.clientSideRowModel.getNodeManager().getCopyOfNodesMap(),s=[],n=[],o=[];return N(e)&&e.forEach(r=>{const a=t({data:r,level:0}),l=i[a];l?(l.data!==r&&n.push(r),i[a]=void 0):o.push(r)}),di(i,(r,a)=>{a&&s.push(a.data)}),{remove:s,update:n,add:o}}onRowDataUpdated(){const e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}},oO=class extends D{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,i,s,n,o){const r=this.gos.get("groupMaintainOrder"),a=this.columnModel.getCols().some(h=>h.isRowGroupActive());let l={};i&&s&&(l=this.calculateDirtyNodes(s));const c=this.columnModel.isPivotMode(),u=this.gos.getCallback("postSortRows"),d=h=>{var v;this.pullDownGroupDataForHideOpenParents(h.childrenAfterAggFilter,!0);const p=c&&h.leafGroup;if(r&&a&&!h.leafGroup&&!o){const S=(v=this.funcColsService.getRowGroupColumns())==null?void 0:v[h.level+1],m=(S==null?void 0:S.getSort())===null,C=h.childrenAfterAggFilter.slice(0);if(h.childrenAfterSort&&!m){const w={};h.childrenAfterSort.forEach((R,b)=>{w[R.id]=b}),C.sort((R,b)=>(w[R.id]??0)-(w[b.id]??0))}h.childrenAfterSort=C}else!t||p?h.childrenAfterSort=h.childrenAfterAggFilter.slice(0):i?h.childrenAfterSort=this.doDeltaSort(h,l,n,e):h.childrenAfterSort=this.rowNodeSorter.doFullSort(h.childrenAfterAggFilter,e);if(h.sibling&&(h.sibling.childrenAfterSort=h.childrenAfterSort),this.updateChildIndexes(h),u){const S={nodes:h.childrenAfterSort};u(S)}};n&&n.forEachChangedNodeDepthFirst(d),this.updateGroupDataForHideOpenParents(n)}calculateDirtyNodes(e){const t={},i=s=>{s&&s.forEach(n=>t[n.id]=!0)};return e&&e.forEach(s=>{i(s.add),i(s.update),i(s.remove)}),t}doDeltaSort(e,t,i,s){const n=e.childrenAfterAggFilter,o=e.childrenAfterSort;if(!o)return this.rowNodeSorter.doFullSort(n,s);const r={},a=[];n.forEach(d=>{t[d.id]||!i.canSkip(d)?a.push(d):r[d.id]=!0});const l=o.filter(d=>r[d.id]),c=(d,h)=>({currentPos:h,rowNode:d}),u=a.map(c).sort((d,h)=>this.rowNodeSorter.compareRowNodes(s,d,h));return this.mergeSortedArrays(s,u,l.map(c)).map(({rowNode:d})=>d)}mergeSortedArrays(e,t,i){const s=[];let n=0,o=0;for(;n<t.length&&o<i.length;)this.rowNodeSorter.compareRowNodes(e,t[n],i[o])<0?s.push(t[n++]):s.push(i[o++]);for(;n<t.length;)s.push(t[n++]);for(;o<i.length;)s.push(i[o++]);return s}updateChildIndexes(e){if(le(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let i=0;i<t.length;i++){const s=t[i],n=i===0,o=i===e.childrenAfterSort.length-1;s.setFirstChild(n),s.setLastChild(o),s.setChildIndex(i)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return I("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const t=i=>{this.pullDownGroupDataForHideOpenParents(i.childrenAfterSort,!1),i.childrenAfterSort.forEach(s=>{s.hasChildren()&&t(s)})};e&&e.executeFromRootNode(i=>t(i))}pullDownGroupDataForHideOpenParents(e,t){!this.gos.get("groupHideOpenParents")||le(e)||e.forEach(i=>{var n;(((n=this.showRowGroupColsService)==null?void 0:n.getShowRowGroupCols())??[]).forEach(o=>{const r=o.getColDef().showRowGroup;if(typeof r!="string"){ge("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}const a=r,l=this.columnModel.getColDefCol(a);if(l!==i.rowGroupColumn)if(t)i.setGroupValue(o.getId(),void 0);else{const u=this.getFirstChildOfFirstChild(i,l);u&&i.setGroupValue(o.getId(),u.key)}})})}getFirstChildOfFirstChild(e,t){let i=e;for(;i;){const s=i.parent;if(s&&i.firstChild){if(s.rowGroupColumn===t)return s}else return null;i=s}return null}},rO=class extends D{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){const t=this.sortController.getSortOptions(),i=N(t)&&t.length>0,s=i&&N(e.rowNodeTransactions)&&this.gos.get("deltaSort"),n=t.some(o=>Ei(this.gos)?o.column.isPrimary()&&o.column.isRowGroupActive():!!o.column.getColDef().showRowGroup);this.sortService.sort(t,i,s,e.rowNodeTransactions,e.changedPath,n)}},Bg="32.3.3",I1={version:Bg,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[jL,iO,rO,sO,oO,nO]},aO={version:Bg,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[A1],apiFunctions:{onGroupExpandedOrCollapsed:UL,refreshClientSideRowModel:KL,isRowDataEmpty:$L,forEachLeafNode:qL,forEachNodeAfterFilter:YL,forEachNodeAfterFilterAndSort:QL,resetRowHeights:XL,applyTransaction:JL,applyTransactionAsync:ZL,flushAsyncTransactions:eO,getBestCostNodeSelection:tO},dependantModules:[I1,GL]},lO={version:Bg,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[I1,aO]},cO=class extends D{setBeans(e){this.beans=e}getFileName(e){const t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},uO=class{constructor(e){this.groupColumns=[];const{columnModel:t,funcColsService:i,columnNameService:s,valueService:n,gos:o,processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.columnModel=t,this.funcColsService=i,this.columnNameService=s,this.valueService=n,this.gos=o,this.processCellCallback=r,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,i,s,n){const r=(!this.gos.get("groupHideOpenParents")||n.footer)&&this.shouldRenderGroupSummaryCell(n,e,t)?this.createValueForGroupNode(e,n):this.valueService.getValue(e,n);return this.processCell({accumulatedRowIndex:i,rowNode:n,column:e,value:r,processCellCallback:this.processCellCallback,type:s})}shouldRenderGroupSummaryCell(e,t,i){var r;if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){const a=(r=e.groupData)==null?void 0:r[t.getId()],l=this.gos.get("suppressGroupMaintainValueType");if(l&&a!=null||!l&&a!==void 0||Oi(this.gos)&&e.group)return!0;if(e.footer&&e.level===-1){const c=t.getColDef();return c==null||c.showRowGroup===!0||c.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}const o=Nu(this.gos,this.columnModel.isPivotMode());return i===0&&o}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));const i=this.gos.get("treeData"),s=this.gos.get("suppressGroupMaintainValueType"),n=l=>{var u;if(i||s)return l.key;const c=(u=l.groupData)==null?void 0:u[e.getId()];return!c||!l.rowGroupColumn||l.rowGroupColumn.getColDef().useValueFormatterForExport===!1?c:this.valueService.formatValue(l.rowGroupColumn,l,c)??c},o=t.footer,r=[n(t)];if(!Kw(this.gos))for(;t.parent;)t=t.parent,r.push(n(t));const a=r.reverse().join(" -> ");return o?`Total ${a}`:a}processCell(e){const{accumulatedRowIndex:t,rowNode:i,column:s,value:n,processCellCallback:o,type:r}=e;return o?{value:o(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:s,node:i,value:n,type:r,parseValue:a=>this.valueService.parseValue(s,i,a,this.valueService.getValue(s,i)),formatValue:a=>this.valueService.formatValue(s,i,a)??a}))??""}:s.getColDef().useValueFormatterForExport!==!1?{value:n??"",valueFormatted:this.valueService.formatValue(s,i,n)}:{value:n??""}}},dO=class{static download(e,t){const i=document.defaultView||window;if(!i){I("There is no `window` associated with the current `document`");return}const s=document.createElement("a"),n=i.URL.createObjectURL(t);s.setAttribute("href",n),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(s),i.setTimeout(()=>{i.URL.revokeObjectURL(n)},0)}},fv=`\r
`,hO=class extends uO{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,fv),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((i,s)=>{s!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i.data.value||""),i.mergeAcross&&this.appendEmptyCells(i.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,s){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(s)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){t!=0&&(this.result+=this.columnSeparator);const s=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(s.valueFormatted??s.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(I("unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=fv),this.isFirstLine=!1}},pO=class extends cO{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){I("Export cancelled. Export is not allowed as per your configuration.");return}const t=this.getMergedParams(e),i=this.getData(t),s=new Blob(["\uFEFF",i],{type:"text/plain"}),n=typeof t.fileName=="function"?t.fileName(this.gos.getGridCommonParams()):t.fileName;dO.download(this.getFileName(n),s)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const i=t?Object.assign({},e):this.getMergedParams(e);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{columnModel:t,columnNameService:i,funcColsService:s,valueService:n,gos:o}=this,{processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:u,columnSeparator:d}=e;return new hO({columnModel:t,columnNameService:i,funcColsService:s,valueService:n,gos:o,processCellCallback:r||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:u||!1,columnSeparator:d||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function fO(e,t){var i;return(i=e.csvCreator)==null?void 0:i.getDataAsCsv(t)}function gO(e,t){var i;(i=e.csvCreator)==null||i.exportDataAsCsv(t)}var mO=class extends D{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e,t={}){const{allColumns:i,columnKeys:s,skipRowGroups:n}=t,o=this.getColumnsToExport(i,n,s);return KP(this.prepareSession(o),this.prependContent(t),this.exportColumnGroups(t,o),this.exportHeaders(t,o),this.processPinnedTopRows(t,o),this.processRows(t,o),this.processPinnedBottomRows(t,o),this.appendContent(t))(e).parse()}processRow(e,t,i,s){var m;const n=t.shouldRowBeSkipped||(()=>!1),o=this.gos.get("groupRemoveSingleChildren"),r=this.gos.get("groupRemoveLowestSingleChildren"),l=t.rowPositions!=null||!!t.onlySelected,c=this.gos.get("groupHideOpenParents")&&!l,u=this.columnModel.isPivotMode()?s.leafGroup:!s.group,d=!!s.footer,h=r&&s.leafGroup,p=s.allChildrenCount===1&&((m=s.childrenAfterGroup)==null?void 0:m.length)===1&&(o||h);if(!u&&!d&&(t.skipRowGroups||p||c)||t.onlySelected&&!s.isSelected()||t.skipPinnedTop&&s.rowPinned==="top"||t.skipPinnedBottom&&s.rowPinned==="bottom"||s.level===-1&&!u&&!d||n(this.gos.addGridCommonParams({node:s})))return;const S=e.onNewBodyRow(s);if(i.forEach((C,w)=>{S.onColumn(C,w,s)}),t.getCustomContentBelowRow){const C=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:s}));C&&e.addCustomContent(C)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const s=new ny,n=this.visibleColsService.createGroups({columns:t,idCreator:s,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(n,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const s=i.onNewHeaderRow();t.forEach((n,o)=>{s.onColumn(n,o,void 0)})}return i}}processPinnedTopRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(n=>n.rowPinned==="top").sort((n,o)=>n.rowIndex-o.rowIndex).map(n=>this.pinnedRowModel.getPinnedTopRow(n.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedRow("top",s),i}}processRows(e,t){return i=>{const s=this.rowModel,n=ke(this.gos),o=Oi(this.gos),r=!n&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(c=>c.rowPinned==null).sort((c,u)=>c.rowIndex-u.rowIndex).map(c=>s.getRow(c.rowIndex)).forEach(a);else if(this.columnModel.isPivotMode())n?s.forEachPivotNode(a,!0):o?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);else if(e.onlySelectedAllPages||r){const c=this.selectionService.getSelectedNodes();this.replicateSortedOrder(c),c.forEach(a)}else l==="all"?s.forEachNode(a):n||o?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);return i}}replicateSortedOrder(e){const t=this.sortController.getSortOptions(),i=(s,n)=>{var o,r;return s.rowIndex!=null&&n.rowIndex!=null?s.rowIndex-n.rowIndex:s.level===n.level?((o=s.parent)==null?void 0:o.id)===((r=n.parent)==null?void 0:r.id)?this.rowNodeSorter.compareRowNodes(t,{rowNode:s,currentPos:s.rowIndex??-1},{rowNode:n,currentPos:n.rowIndex??-1}):i(s.parent,n.parent):s.level>n.level?i(s.parent,n):i(s,n.parent)};e.sort(i)}processPinnedBottomRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(n=>n.rowPinned==="bottom").sort((n,o)=>n.rowIndex-o.rowIndex).map(n=>this.pinnedRowModel.getPinnedBottomRow(n.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedRow("bottom",s),i}}getColumnsToExport(e=!1,t=!1,i){const s=this.columnModel.isPivotMode();if(i&&i.length)return this.columnModel.getColsForKeys(i);const n=this.gos.get("treeData");let o=[];return e&&!s?o=this.columnModel.getCols():o=this.visibleColsService.getAllCols(),t&&!n&&(o=o.filter(r=>wp(r)||Ga(r))),o}recursivelyAddHeaderGroups(e,t,i){const s=[];e.forEach(n=>{const o=n;o.getChildren&&o.getChildren().forEach(r=>s.push(r))}),e.length>0&&We(e[0])&&this.doAddHeaderHeader(t,e,i),s&&s.length>0&&this.recursivelyAddHeaderGroups(s,t,i)}doAddHeaderHeader(e,t,i){const s=e.onNewHeaderGroupingRow();let n=0;t.forEach(o=>{const r=o;let a;i?a=i(this.gos.addGridCommonParams({columnGroup:r})):a=this.columnNameService.getDisplayNameForColumnGroup(r,"header");const l=r.getLeafColumns().reduce((c,u,d,h)=>{let p=ae(c);return u.getColumnGroupShow()==="open"?(!p||p[1]!=null)&&(p=[d],c.push(p)):p&&p[1]==null&&(p[1]=d-1),d===h.length-1&&p&&p[1]==null&&(p[1]=d),c},[]);s.onColumn(r,a||"",n++,r.getLeafColumns().length-1,l)})}},Ng="32.3.3",L1={version:Ng,moduleName:"@ag-grid-community/csv-export-core",beans:[pO,mO]},CO={version:Ng,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:fO,exportDataAsCsv:gO},dependantModules:[L1]},vO={version:Ng,moduleName:"@ag-grid-community/csv-export",dependantModules:[L1,CO]},SO=class extends RD{wireBeans(e){this.beans=e}constructor(e,t,i){super(e),this.parentCache=t,this.params=i,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,i){N(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(le(this.params.datasource.getRows)){I("datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,i){this.rowNodes.forEach((s,n)=>{this.startRow+n<i&&e(s,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());const i=e-this.startRow;return this.rowNodes[i]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){const t=this.startRow+e,i=new Xi(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(t),i.setRowTop(this.params.rowHeight*t),this.rowNodes.push(i)}}processServerResult(e){this.rowNodes.forEach((i,s)=>{const n=e.rowData?e.rowData[s]:void 0;!i.id&&i.alreadyRendered&&n&&(this.rowNodes[s]=new Xi(this.beans),this.rowNodes[s].setRowIndex(i.rowIndex),this.rowNodes[s].setRowTop(i.rowTop),this.rowNodes[s].setRowHeight(i.rowHeight),i.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[s],n,this.startRow+s)});const t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},wO=2,yO=class extends D{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e,t=!1){const i=Math.floor(e/this.params.blockSize);let s=this.blocks[i];if(!s){if(t)return;s=this.createBlock(i)}return s.getRow(e)}createBlock(e){const t=this.createBean(new SO(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&hi(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(r=>r!=e),i=(r,a)=>a.getLastAccessed()-r.getLastAccessed();t.sort(i);const s=this.params.maxBlocksInCache>0,n=s?this.params.maxBlocksInCache-1:null,o=wO-1;t.forEach((r,a)=>{const l=r.getState()==="needsLoading"&&a>=o,c=s?a>=n:!1;if(l||c){if(this.isBlockCurrentlyDisplayed(r)||this.isBlockFocused(r))return;this.removeBlockFromCache(r)}})}isBlockFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const i=e.getStartRow(),s=e.getEndRow();return t.rowIndex>=i&&t.rowIndex<s}isBlockCurrentlyDisplayed(e){const t=e.getStartRow(),i=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,i)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const s=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<s&&(this.rowCount=s)}}setRowCount(e,t){this.rowCount=e,N(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t=new Ao;this.getBlocksInOrder().forEach(i=>i.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){const e=(i,s)=>i.getId()-s.getId();return Rp(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let s=-1,n=!1;const o=new Ao;let r=!1;return this.getBlocksInOrder().forEach(l=>{if(!r){if(n&&s+1!==l.getId()){r=!0;return}s=l.getId(),l.forEachNode(c=>{const u=c===e||c===t;(n||u)&&i.push(c),u&&(n=!n)},o,this.rowCount)}}),r||n?[]:i}},RO=class extends D{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.get("rowModelType")==="infinite"&&(this.rowHeight=Sn(this.gos),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&I("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=Sn(this.gos),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!wa(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;jo(this.gos)!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventService.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){var e;this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:((e=this.filterManager)==null?void 0:e.getFilterModel())??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:Sn(this.gos),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new Ao},this.infiniteCache=this.createBean(new yO(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){this.dispatchModelUpdatedEvent()}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};function bO(e){var t,i;(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null||i.refreshCache()}function PO(e){var t,i;(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null||i.purgeCache()}function xO(e){var t,i;return(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null?void 0:i.getRowCount()}var _g="32.3.3",O1={version:_g,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[RO],dependantModules:[PD]},FO={version:_g,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[A1],apiFunctions:{refreshInfiniteCache:bO,purgeInfiniteCache:PO,getInfiniteRowCount:xO},dependantModules:[O1,HL]},EO={version:_g,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[O1,FO]};ki.__registerModules([F1,lO,EO,vO],!1,void 0);var ut=B.createContext({}),ja=(e,t,i,s)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const o=e.newAgStackInstance();if(o==null)return;let r,a,l=!1;return o.then(c=>{if(l){t.destroyBean(c);return}r=c,a=r.getGui(),i.appendChild(a),gv(s,r)}),()=>{var c;l=!0,r&&((c=a==null?void 0:a.parentElement)==null||c.removeChild(a),t.destroyBean(r),s&&gv(s,void 0))}},gv=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const i=e;i.current=t}},ci=(...e)=>e.filter(i=>i!=null&&i!=="").join(" "),Jt=class B1{constructor(...t){this.classesMap={},t.forEach(i=>{this.classesMap[i]=!0})}setClass(t,i){if(!!this.classesMap[t]==i)return this;const n=new B1;return n.classesMap={...this.classesMap},n.classesMap[t]=i,n}toString(){return Object.keys(this.classesMap).filter(i=>this.classesMap[i]).join(" ")}},Yo=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,i=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===i()},yv,Bp=(yv=B.version)==null?void 0:yv.split(".")[0],kO=Bp==="16"||Bp==="17";function MO(){return Bp==="19"}var oc=!1;function DO(e){return oc||setTimeout(()=>oc=!1,0),oc=!0,e()}var Gg=(e,t)=>{!kO&&e&&!oc?C4.flushSync(t):t()};function Hg(e,t,i){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(i||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const s=[],n=[],o=new Map,r=new Map;for(let a=0;a<t.length;a++){const l=t[a];r.set(l.instanceId,l)}for(let a=0;a<e.length;a++){const l=e[a];o.set(l.instanceId,l),r.has(l.instanceId)&&s.push(l)}for(let a=0;a<t.length;a++){const l=t[a],c=l.instanceId;o.has(c)||n.push(l)}return s.length===e.length&&n.length===0?e:s.length===0&&n.length===t.length?t:s.length===0?n:n.length===0?s:[...s,...n]}var N1=y.forwardRef((e,t)=>{var q;const{ctrlsFactory:i,context:s}=y.useContext(ut),n=y.useRef(null),o=y.useRef(null),r=y.useRef(null),a=y.useRef(null),l=y.useRef(null),c=y.useRef(),[u,d]=y.useState(),[h,p]=y.useState(),[g,v]=y.useState(),[S,m]=y.useState(()=>new Jt),[C,w]=y.useState(()=>new Jt("ag-hidden")),[R,b]=y.useState(()=>new Jt("ag-hidden")),[P,x]=y.useState(()=>new Jt("ag-invisible"));y.useImperativeHandle(t,()=>({refresh(){return!1}})),y.useLayoutEffect(()=>ja(u,s,o.current),[u]);const F=y.useCallback(L=>{if(n.current=L,!L){c.current=s.destroyBean(c.current);return}const _={setInnerRenderer:(Z,Y)=>{d(Z),v(Y)},setChildCount:Z=>p(Z),addOrRemoveCssClass:(Z,Y)=>m(de=>de.setClass(Z,Y)),setContractedDisplayed:Z=>b(Y=>Y.setClass("ag-hidden",!Z)),setExpandedDisplayed:Z=>w(Y=>Y.setClass("ag-hidden",!Z)),setCheckboxVisible:Z=>x(Y=>Y.setClass("ag-invisible",!Z))},V=i.getInstance("groupCellRendererCtrl");V&&(c.current=s.createBean(V),c.current.init(_,L,r.current,a.current,l.current,N1,e))},[]),k=y.useMemo(()=>`ag-cell-wrapper ${S.toString()}`,[S]),E=y.useMemo(()=>`ag-group-expanded ${C.toString()}`,[C]),T=y.useMemo(()=>`ag-group-contracted ${R.toString()}`,[R]),O=y.useMemo(()=>`ag-group-checkbox ${P.toString()}`,[P]),z=u&&u.componentFromFramework,X=z?u.componentClass:void 0,j=u==null&&g!=null,U=Ti(g,!0);return B.createElement("span",{className:k,ref:F,...e.colDef?{}:{role:(q=c.current)==null?void 0:q.getCellAriaRole()}},B.createElement("span",{className:E,ref:a}),B.createElement("span",{className:T,ref:l}),B.createElement("span",{className:O,ref:r}),B.createElement("span",{className:"ag-group-value",ref:o},j&&B.createElement(B.Fragment,null,U),z&&B.createElement(X,{...u.params})),B.createElement("span",{className:"ag-group-child-count"},h))}),mv=N1,Vg=y.createContext({setMethods:()=>{}}),TO=e=>{const{initialProps:t,addUpdateCallback:i,CustomComponentClass:s,setMethods:n}=e,[{key:o,...r},a]=y.useState(t);return y.useEffect(()=>{i(l=>a(l))},[]),B.createElement(Vg.Provider,{value:{setMethods:n}},B.createElement(s,{key:o,...r}))},AO=y.memo(TO),IO=0;function Cv(){return`agPortalKey_${++IO}`}var _1=class{constructor(e,t,i,s){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=i,this.suppressFallbackMethods=!!s,this.statelessComponent=this.isStateless(this.reactComponent),this.key=Cv(),this.portalKey=Cv(),this.instanceCreated=this.isStatelessComponent()?_e.resolve(!1):new _e(n=>{this.resolveInstanceCreated=n})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),i=document.createElement(t||"div");return i.classList.add("ag-react-container"),e.reactContainer=i,i}addParentContainerStyleAndClasses(){this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&(I('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses()&&(I('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),this.componentInstance.getReactContainerClasses().forEach(t=>this.eParentElement.classList.add(t))))}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const i=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!i){setTimeout(()=>this.callMethod(e,t));return}const s=i[e];if(s)return s.apply(i,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new _e(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{var i;this.componentInstance=t,this.addParentContainerStyleAndClasses(),(i=this.resolveInstanceCreated)==null||i.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=bu.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return y.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const i=this[`${e}Component`];if(!this.suppressFallbackMethods&&i)return i.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function Wg(e,t,i){e.forEach(s=>{const n=t[s];n&&(i[s]=n)})}var Ni=class extends _1{constructor(){super(...arguments),this.awaitUpdateCallback=new _e(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=AO}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:i=>this.setMethods(i),addUpdateCallback:i=>{this.updateCallback=()=>(i(this.getProps()),new _e(s=>{setTimeout(()=>{s()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Wg(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new _e(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},LO=class extends Ni{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},OO=class extends Ni{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},BO=class extends Ni{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:i,shake:s}=this;return e.label=t,e.icon=i,e.shake=s,e}},NO=class extends Ni{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterChangedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var t;this.expectingNewMethods===!1&&this.hasBeenActive&&((t=this.providedMethods)==null?void 0:t.doesFilterPass)!==(e==null?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e)}updateModel(e){this.setModel(e).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,delete e.valueGetter,e}};function G1(e,t){e.parentFilterInstance(i=>{(i.setModel(t)||_e.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var _O=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=i=>this.updateModel(i)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Wg(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),G1(this.floatingFilterParams,e)}},GO=class extends Ni{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),G1(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},HO=class extends Ni{refresh(e){this.sourceParams=e,this.refreshProps()}},VO=class extends Ni{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},WO=class extends Ni{refresh(e){this.sourceParams=e,this.refreshProps()}},zO=class extends Ni{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},jO=class extends Ni{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function zg(){I("As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.")}var UO=1e3,KO=class{constructor(e,t,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=i||UO}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,i){this.portals=[...this.portals,e],this.waitForInstance(t,i),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,i=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout(()=>{this.waitForInstance(e,t,i)})}}},$O=({ctrl:e})=>{const t=e.isAlive(),{context:i}=y.useContext(ut),s=t?e.getColId():void 0,[n,o]=y.useState(),r=y.useRef(),a=y.useRef(null),l=y.useRef(null),c=y.useRef(null),u=y.useRef(),d=y.useRef();t&&!d.current&&(d.current=new Va(()=>a.current));const h=y.useCallback(S=>{var w;if(a.current=S,r.current=S?i.createBean(new Uo):i.destroyBean(r.current),!S||!t)return;const m={setWidth:R=>{a.current&&(a.current.style.width=R)},addOrRemoveCssClass:(R,b)=>d.current.addOrRemoveCssClass(R,b),setAriaSort:R=>{a.current&&(R?Kx(a.current,R):$x(a.current))},setUserCompDetails:R=>o(R),getUserCompInstance:()=>u.current||void 0};e.setComp(m,S,l.current,c.current,r.current);const C=e.getSelectAllGui();(w=l.current)==null||w.insertAdjacentElement("afterend",C),r.current.addDestroyFunc(()=>C.remove())},[]);y.useLayoutEffect(()=>ja(n,i,c.current,u),[n]),y.useEffect(()=>{e.setDragSource(a.current)},[n]);const p=y.useMemo(()=>!!((n==null?void 0:n.componentFromFramework)&&Yo(n.componentClass)),[n]),g=n&&n.componentFromFramework,v=n&&n.componentClass;return B.createElement("div",{ref:h,className:"ag-header-cell","col-id":s,role:"columnheader"},B.createElement("div",{ref:l,className:"ag-header-cell-resize",role:"presentation"}),B.createElement("div",{ref:c,className:"ag-header-cell-comp-wrapper",role:"presentation"},g&&p&&B.createElement(v,{...n.params}),g&&!p&&B.createElement(v,{...n.params,ref:u})))},qO=y.memo($O),YO=({ctrl:e})=>{const{context:t,gos:i}=y.useContext(ut),[s,n]=y.useState(()=>new Jt("ag-header-cell","ag-floating-filter")),[o,r]=y.useState(()=>new Jt),[a,l]=y.useState(()=>new Jt("ag-floating-filter-button","ag-hidden")),[c,u]=y.useState("false"),[d,h]=y.useState(),[,p]=y.useState(1),g=y.useRef(),v=y.useRef(null),S=y.useRef(null),m=y.useRef(null),C=y.useRef(null),w=y.useRef(),R=y.useRef(),b=U=>{U!=null&&w.current&&w.current(U)},P=y.useCallback(U=>{if(v.current=U,g.current=U?t.createBean(new Uo):t.destroyBean(g.current),!U)return;R.current=new _e(L=>{w.current=L});const q={addOrRemoveCssClass:(L,_)=>n(V=>V.setClass(L,_)),addOrRemoveBodyCssClass:(L,_)=>r(V=>V.setClass(L,_)),setButtonWrapperDisplayed:L=>{l(_=>_.setClass("ag-hidden",!L)),u(L?"false":"true")},setWidth:L=>{v.current&&(v.current.style.width=L)},setCompDetails:L=>h(L),getFloatingFilterComp:()=>R.current?R.current:null,setMenuIcon:L=>{var _;return(_=C.current)==null?void 0:_.appendChild(L)}};e.setComp(q,U,C.current,S.current,g.current)},[]);y.useLayoutEffect(()=>ja(d,t,S.current,b),[d]);const x=y.useMemo(()=>s.toString(),[s]),F=y.useMemo(()=>o.toString(),[o]),k=y.useMemo(()=>a.toString(),[a]),E=y.useMemo(()=>!!(d&&d.componentFromFramework&&Yo(d.componentClass)),[d]),T=y.useMemo(()=>i.get("reactiveCustomComponents"),[]),O=y.useMemo(()=>{if(d)if(T){const U=new _O(d.params,()=>p(q=>q+1));return b(U),U}else d.componentFromFramework&&zg()},[d]),z=O==null?void 0:O.getProps(),X=d&&d.componentFromFramework,j=d&&d.componentClass;return B.createElement("div",{ref:P,className:x,role:"gridcell"},B.createElement("div",{ref:S,className:F,role:"presentation"},X&&!T&&B.createElement(j,{...d.params,ref:E?()=>{}:b}),X&&T&&B.createElement(Vg.Provider,{value:{setMethods:U=>O.setMethods(U)}},B.createElement(j,{...z}))),B.createElement("div",{ref:m,"aria-hidden":c,className:k,role:"presentation"},B.createElement("button",{ref:C,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},QO=y.memo(YO),XO=({ctrl:e})=>{const{context:t}=y.useContext(ut),[i,s]=y.useState(()=>new Jt),[n,o]=y.useState(()=>new Jt),[r,a]=y.useState("false"),[l,c]=y.useState(),[u,d]=y.useState(),h=y.useMemo(()=>e.getColId(),[]),p=y.useRef(),g=y.useRef(null),v=y.useRef(null),S=y.useRef(null),m=y.useRef(),C=y.useCallback(F=>{if(g.current=F,p.current=F?t.createBean(new Uo):t.destroyBean(p.current),!F)return;const k={setWidth:E=>{g.current&&(g.current.style.width=E)},addOrRemoveCssClass:(E,T)=>s(O=>O.setClass(E,T)),setHeaderWrapperHidden:E=>{const T=S.current;T&&(E?T.style.setProperty("display","none"):T.style.removeProperty("display"))},setHeaderWrapperMaxHeight:E=>{const T=S.current;T&&(E!=null?T.style.setProperty("max-height",`${E}px`):T.style.removeProperty("max-height"),T.classList.toggle("ag-header-cell-comp-wrapper-limited-height",E!=null))},setUserCompDetails:E=>d(E),setResizableDisplayed:E=>{o(T=>T.setClass("ag-hidden",!E)),a(E?"false":"true")},setAriaExpanded:E=>c(E),getUserCompInstance:()=>m.current||void 0};e.setComp(k,F,v.current,S.current,p.current)},[]);y.useLayoutEffect(()=>ja(u,t,S.current),[u]),y.useEffect(()=>{g.current&&e.setDragSource(g.current)},[u]);const w=y.useMemo(()=>!!((u==null?void 0:u.componentFromFramework)&&Yo(u.componentClass)),[u]),R=y.useMemo(()=>"ag-header-group-cell "+i.toString(),[i]),b=y.useMemo(()=>"ag-header-cell-resize "+n.toString(),[n]),P=u&&u.componentFromFramework,x=u&&u.componentClass;return B.createElement("div",{ref:C,className:R,"col-id":h,role:"columnheader","aria-expanded":l},B.createElement("div",{ref:S,className:"ag-header-cell-comp-wrapper",role:"presentation"},P&&w&&B.createElement(x,{...u.params}),P&&!w&&B.createElement(x,{...u.params,ref:m})),B.createElement("div",{ref:v,"aria-hidden":r,className:b}))},JO=y.memo(XO),ZO=({ctrl:e})=>{const{context:t}=y.useContext(ut),{topOffset:i,rowHeight:s}=y.useMemo(()=>e.getTopAndHeight(),[]),n=e.getAriaRowIndex(),o=e.getHeaderRowClass(),[r,a]=y.useState(()=>s+"px"),[l,c]=y.useState(()=>i+"px"),u=y.useRef(null),d=y.useRef(null),[h,p]=y.useState(()=>e.getHeaderCtrls()),g=y.useRef(),v=y.useRef(null),S=y.useCallback(w=>{if(v.current=w,g.current=w?t.createBean(new Uo):t.destroyBean(g.current),!w)return;const R={setHeight:b=>a(b),setTop:b=>c(b),setHeaderCtrls:(b,P,x)=>{d.current=u.current,u.current=b;const F=Hg(d.current,b,P);F!==d.current&&Gg(x,()=>p(F))},setWidth:b=>{v.current&&(v.current.style.width=b)}};e.setComp(R,g.current,!1)},[]),m=y.useMemo(()=>({height:r,top:l}),[r,l]),C=y.useCallback(w=>{switch(e.getType()){case Tp.COLUMN_GROUP:return B.createElement(JO,{ctrl:w,key:w.instanceId});case Tp.FLOATING_FILTER:return B.createElement(QO,{ctrl:w,key:w.instanceId});default:return B.createElement(qO,{ctrl:w,key:w.instanceId})}},[]);return B.createElement("div",{ref:S,className:o,role:"row",style:m,"aria-rowindex":n},h.map(C))},eB=y.memo(ZO),tB=({pinned:e})=>{const[t,i]=y.useState(!0),[s,n]=y.useState([]),{context:o}=y.useContext(ut),r=y.useRef(null),a=y.useRef(null),l=y.useRef(),c=e==="left",u=e==="right",d=!c&&!u,h=y.useCallback(v=>{if(r.current=v,l.current=v?o.createBean(new kk(e)):o.destroyBean(l.current),!v)return;const S={setDisplayed:i,setCtrls:m=>n(m),setCenterWidth:m=>{a.current&&(a.current.style.width=m)},setViewportScrollLeft:m=>{r.current&&(r.current.scrollLeft=m)},setPinnedContainerWidth:m=>{r.current&&(r.current.style.width=m,r.current.style.minWidth=m,r.current.style.maxWidth=m)}};l.current.setComp(S,r.current)},[]),p=t?"":"ag-hidden",g=()=>s.map(v=>B.createElement(eB,{ctrl:v,key:v.instanceId}));return B.createElement(B.Fragment,null,c&&B.createElement("div",{ref:h,className:"ag-pinned-left-header "+p,"aria-hidden":!t,role:"rowgroup"},g()),u&&B.createElement("div",{ref:h,className:"ag-pinned-right-header "+p,"aria-hidden":!t,role:"rowgroup"},g()),d&&B.createElement("div",{ref:h,className:"ag-header-viewport "+p,role:"presentation"},B.createElement("div",{ref:a,className:"ag-header-container",role:"rowgroup"},g())))},Jd=y.memo(tB),iB=()=>{const[e,t]=y.useState(()=>new Jt),[i,s]=y.useState(),{context:n}=y.useContext(ut),o=y.useRef(null),r=y.useRef(),a=y.useCallback(u=>{if(o.current=u,r.current=u?n.createBean(new dk):n.destroyBean(r.current),!u)return;const d={addOrRemoveCssClass:(h,p)=>t(g=>g.setClass(h,p)),setHeightAndMinHeight:h=>s(h)};r.current.setComp(d,u,u)},[]),l=y.useMemo(()=>"ag-header "+e.toString(),[e]),c=y.useMemo(()=>({height:i,minHeight:i}),[i]);return B.createElement("div",{ref:a,className:l,style:c,role:"presentation"},B.createElement(Jd,{pinned:"left"}),B.createElement(Jd,{pinned:null}),B.createElement(Jd,{pinned:"right"}))},sB=y.memo(iB),nB=(e,t)=>{y.useEffect(()=>{const i=t.current;if(i){const s=i.parentElement;if(s){const n=document.createComment(e);return s.insertBefore(n,i),()=>{s.removeChild(n)}}}},[e])},cn=nB,oB=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new _e(i=>{this.resolveInstanceCreated=i}),this.onValueChange=i=>this.updateValue(i),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Wg(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var t;this.componentInstance=e,(t=this.resolveInstanceCreated)==null||t.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},rB=e=>{const t=y.useRef(e),i=y.useRef(),s=y.useRef(!1),n=y.useRef(!1),[,o]=y.useState(0);s.current&&(n.current=!0),y.useEffect(()=>(s.current||(i.current=t.current(),s.current=!0),o(r=>r+1),()=>{var r;n.current&&((r=i.current)==null||r.call(i))}),[])},aB=e=>{const[t,i]=y.useState(),{context:s,popupService:n,localeService:o,gos:r,editService:a}=y.useContext(ut);return rB(()=>{var R,b;const{editDetails:l,cellCtrl:c,eParentCell:u}=e,{compDetails:d}=l,h=r.get("stopEditingWhenCellsLoseFocus"),p=s.createBean(a.createPopupEditorWrapper(d.params)),g=p.getGui();if(e.jsChildComp){const P=e.jsChildComp.getGui();P&&g.appendChild(P)}const v={column:c.getColumn(),rowNode:c.getRowNode(),type:"popupCellEditor",eventSource:u,ePopup:g,position:l.popupPosition,keepWithinBounds:!0},S=n.positionPopupByComponent.bind(n,v),m=o.getLocaleTextFunc(),C=n.addPopup({modal:h,eChild:g,closeOnEsc:!0,closedCallback:()=>{c.onPopupEditorClosed()},anchorToElement:u,positionCallback:S,ariaLabel:m("ariaLabelCellEditor","Cell Editor")}),w=C?C.hideFunc:void 0;return i(p),(b=(R=e.jsChildComp)==null?void 0:R.afterGuiAttached)==null||b.call(R),()=>{w==null||w(),s.destroyBean(p)}}),B.createElement(B.Fragment,null,t&&e.wrappedContent&&bu.createPortal(e.wrappedContent,t.getGui()))},vv=y.memo(aB),lB=(e,t,i,s,n,o)=>{const{context:r}=y.useContext(ut),a=y.useCallback(()=>{const l=n.current;if(!l)return;const c=l.getGui();c&&c.parentElement&&c.parentElement.removeChild(c),r.destroyBean(l),n.current=void 0},[]);y.useEffect(()=>{const l=e!=null,c=(e==null?void 0:e.compDetails)&&!e.compDetails.componentFromFramework,u=t&&i==null;if(!(l&&c&&!u)){a();return}const h=e.compDetails;if(n.current){const g=n.current,S=g.refresh!=null&&e.force==!1?g.refresh(h.params):!1;if(S===!0||S===void 0)return;a()}const p=h.newAgStackInstance();p!=null&&p.then(g=>{if(!g)return;const v=g.getGui();if(!v)return;(t?i:o.current).appendChild(v),n.current=g})},[e,t,s]),y.useEffect(()=>a,[])},cB=lB,uB=(e,t,i)=>{const{compProxy:s}=e;i(s);const n=s.getProps(),o=Yo(t);return B.createElement(Vg.Provider,{value:{setMethods:r=>s.setMethods(r)}},o?B.createElement(t,{...n}):B.createElement(t,{...n,ref:r=>s.setRef(r)}))},Sv=(e,t,i)=>{const s=e.compProxy;return B.createElement(B.Fragment,null,s?uB(e,t,i):B.createElement(t,{...e.compDetails.params,ref:i}))},dB=(e,t,i,s,n)=>{const o=e.compDetails,r=o.componentClass,a=o.componentFromFramework&&!e.popup,l=o.componentFromFramework&&e.popup,c=!o.componentFromFramework&&e.popup;return B.createElement(B.Fragment,null,a&&Sv(e,r,t),l&&B.createElement(vv,{editDetails:e,cellCtrl:s,eParentCell:i,wrappedContent:Sv(e,r,t)}),c&&n&&B.createElement(vv,{editDetails:e,cellCtrl:s,eParentCell:i,jsChildComp:n}))},hB=(e,t,i,s,n,o,r)=>{const{compDetails:a,value:l}=e,c=!a,u=a&&a.componentFromFramework,d=a&&a.componentClass,h=l!=null&&l.toString?l.toString():l,p=()=>B.createElement(B.Fragment,null,c&&B.createElement(B.Fragment,null,h),u&&!o&&B.createElement(d,{...a.params,key:t,ref:s}),u&&o&&B.createElement(d,{...a.params,key:t}));return B.createElement(B.Fragment,null,n?B.createElement("span",{role:"presentation",id:`cell-${i}`,className:"ag-cell-value",ref:r},p()):p())},pB=({cellCtrl:e,printLayout:t,editingRow:i})=>{const{context:s}=y.useContext(ut),{colIdSanitised:n,instanceId:o}=e,r=y.useRef(),[a,l]=y.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[c,u]=y.useState(),[d,h]=y.useState(1),[p,g]=y.useState(),[v,S]=y.useState(!1),[m,C]=y.useState(!1),[w,R]=y.useState(!1),[b,P]=y.useState(),x=y.useMemo(()=>e.isForceWrapper(),[e]),F=y.useMemo(()=>e.getCellAriaRole(),[e]),k=y.useRef(null),E=y.useRef(null),T=y.useRef(),O=y.useRef(),z=y.useRef(),X=y.useRef([]),j=y.useRef(),[U,q]=y.useState(0),L=y.useCallback(A=>{j.current=A,q(H=>H+1)},[]),_=a!=null&&(v||w||m),V=x||_,Z=y.useCallback(A=>{if(O.current=A,A){const H=A.isCancelBeforeStart&&A.isCancelBeforeStart();setTimeout(()=>{H?(e.stopEditing(!0),e.focusCell(!0)):e.cellEditorAttached()})}},[e]),Y=y.useRef();Y.current||(Y.current=new Va(()=>k.current)),cB(a,V,j.current,U,T,k);const de=y.useRef();y.useLayoutEffect(()=>{var we;const A=de.current,H=a;if(de.current=a,A==null||A.compDetails==null||H==null||H.compDetails==null)return;const Q=A.compDetails,te=H.compDetails;if(Q.componentClass!=te.componentClass||((we=E.current)==null?void 0:we.refresh)==null)return;E.current.refresh(te.params)!=!0&&h(me=>me+1)},[a]),y.useLayoutEffect(()=>{if(!(c&&!c.compDetails.componentFromFramework))return;const H=c.compDetails,Q=c.popup===!0,te=H.newAgStackInstance();return te.then(re=>{if(!re)return;const we=re.getGui();if(Z(re),!Q){const me=(x?z:k).current;me==null||me.appendChild(we),re.afterGuiAttached&&re.afterGuiAttached()}P(re)}),()=>{te.then(re=>{var me;const we=re.getGui();s.destroyBean(re),Z(void 0),P(void 0),(me=we==null?void 0:we.parentElement)==null||me.removeChild(we)})}},[c]);const K=y.useCallback(A=>{if(z.current=A,!A){X.current.forEach(Q=>Q()),X.current=[];return}const H=Q=>{if(Q){const te=Q.getGui();A.insertAdjacentElement("afterbegin",te),X.current.push(()=>{s.destroyBean(Q),An(te)})}return Q};if(v){const Q=e.createSelectionCheckbox();H(Q)}w&&H(e.createDndSource()),m&&H(e.createRowDragComp())},[e,s,w,m,v]),W=y.useCallback(A=>{if(k.current=A,r.current=A?s.createBean(new Uo):s.destroyBean(r.current),!A||!e)return;const H={addOrRemoveCssClass:(te,re)=>Y.current.addOrRemoveCssClass(te,re),setUserStyles:te=>g(te),getFocusableElement:()=>k.current,setIncludeSelection:te=>S(te),setIncludeRowDrag:te=>C(te),setIncludeDndSource:te=>R(te),getCellEditor:()=>O.current||null,getCellRenderer:()=>E.current??T.current,getParentOfValue:()=>j.current??z.current??k.current,setRenderDetails:(te,re,we)=>{l(me=>(me==null?void 0:me.compDetails)!==te||(me==null?void 0:me.value)!==re||(me==null?void 0:me.force)!==we?{value:re,compDetails:te,force:we}:me)},setEditDetails:(te,re,we,me)=>{if(te){let It;me?It=new oB(te.params,()=>h(Si=>Si+1)):te.componentFromFramework&&zg(),u({compDetails:te,popup:re,popupPosition:we,compProxy:It}),re||l(void 0)}else u(It=>{It!=null&&It.compProxy&&(O.current=void 0)})}},Q=z.current||void 0;e.setComp(H,A,Q,t,i,r.current)},[]),J=y.useMemo(()=>{var H;return!!(((H=a==null?void 0:a.compDetails)==null?void 0:H.componentFromFramework)&&Yo(a.compDetails.componentClass))},[a]);y.useLayoutEffect(()=>{var A;k.current&&(Y.current.addOrRemoveCssClass("ag-cell-value",!V),Y.current.addOrRemoveCssClass("ag-cell-inline-editing",!!c&&!c.popup),Y.current.addOrRemoveCssClass("ag-cell-popup-editing",!!c&&!!c.popup),Y.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!c||!!c.popup),(A=e.getRowCtrl())==null||A.setInlineEditingCss(),e.shouldRestoreFocus()&&!e.isEditing()&&k.current.focus({preventScroll:!0}))});const oe=()=>B.createElement(B.Fragment,null,a!=null&&hB(a,d,o,E,V,J,L),c!=null&&dB(c,Z,k.current,e,b)),Re=y.useCallback(()=>e.onFocusOut(),[]);return B.createElement("div",{ref:W,style:p,role:F,"col-id":n,onBlur:Re},V?B.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:K},oe()):oe())},fB=y.memo(pB),gB=({rowCtrl:e,containerType:t})=>{const{context:i,gos:s}=y.useContext(ut),n=y.useRef(),o=y.useRef(e.getDomOrder()),r=e.isFullWidth(),a=e.getRowNode().displayed,[l,c]=y.useState(()=>a?e.getRowIndex():null),[u,d]=y.useState(()=>e.getRowId()),[h,p]=y.useState(()=>e.getBusinessKey()),[g,v]=y.useState(()=>e.getRowStyles()),S=y.useRef(null),m=y.useRef(null),[C,w]=y.useState(()=>null),[R,b]=y.useState(),[P,x]=y.useState(()=>a?e.getInitialRowTop(t):void 0),[F,k]=y.useState(()=>a?e.getInitialTransform(t):void 0),E=y.useRef(null),T=y.useRef(),O=y.useRef(!1),[z,X]=y.useState(0);y.useEffect(()=>{var W;if(O.current||!R||z>10)return;const K=(W=E.current)==null?void 0:W.firstChild;K?(e.setupDetailRowAutoHeight(K),O.current=!0):X(J=>J+1)},[R,z]);const j=y.useRef();j.current||(j.current=new Va(()=>E.current));const U=y.useCallback(K=>{if(E.current=K,n.current=K?i.createBean(new Uo):i.destroyBean(n.current),!K){e.unsetComp(t);return}if(!e.isAlive())return;const W={setTop:x,setTransform:k,addOrRemoveCssClass:(J,oe)=>j.current.addOrRemoveCssClass(J,oe),setDomOrder:J=>o.current=J,setRowIndex:c,setRowId:d,setRowBusinessKey:p,setUserStyles:v,setCellCtrls:(J,oe)=>{m.current=S.current,S.current=J;const Re=Hg(m.current,J,o.current);Re!==m.current&&Gg(oe,()=>w(Re))},showFullWidth:J=>b(J),getFullWidthCellRenderer:()=>T.current,refreshFullWidth:J=>Z.current?(b(oe=>({...oe,params:J()})),!0):!T.current||!T.current.refresh?!1:T.current.refresh(J())};e.setComp(W,K,t,n.current)},[]);y.useLayoutEffect(()=>ja(R,i,E.current,T),[R]);const q=y.useMemo(()=>{const K={top:P,transform:F};return Object.assign(K,g),K},[P,F,g]),L=r&&(R==null?void 0:R.componentFromFramework),_=!r&&C!=null,V=y.useMemo(()=>!!((R==null?void 0:R.componentFromFramework)&&Yo(R.componentClass)),[R]),Z=y.useRef(!1);y.useEffect(()=>{Z.current=V&&!!R&&!!s.get("reactiveCustomComponents")},[V,R]);const Y=()=>C==null?void 0:C.map(K=>B.createElement(fB,{cellCtrl:K,editingRow:e.isEditing(),printLayout:e.isPrintLayout(),key:K.instanceId})),de=()=>{const K=R.componentClass;return B.createElement(B.Fragment,null,V?B.createElement(K,{...R.params}):B.createElement(K,{...R.params,ref:T}))};return B.createElement("div",{ref:U,role:"row",style:q,"row-index":l,"row-id":u,"row-business-key":h},_&&Y(),L&&de())},mB=y.memo(gB),CB=({name:e})=>{const{context:t}=y.useContext(ut),i=y.useMemo(()=>io(e),[e]),s=y.useRef(null),n=y.useRef(null),o=y.useRef([]),r=y.useRef([]),[a,l]=y.useState(()=>[]),c=y.useRef(!1),u=y.useRef(),d=y.useMemo(()=>ci(i.viewport),[i]),h=y.useMemo(()=>ci(i.container),[i]),p=i.type==="center",g=p?s:n;cn(" AG Row Container "+e+" ",g);const v=y.useCallback(()=>p?s.current!=null&&n.current!=null:n.current!=null,[]),S=y.useCallback(()=>p?s.current==null&&n.current==null:n.current==null,[]),m=y.useCallback(()=>{if(S()&&(u.current=t.destroyBean(u.current)),v()){const b=x=>{const F=Hg(r.current,o.current,c.current);F!==r.current&&(r.current=F,Gg(x,()=>l(F)))},P={setHorizontalScroll:x=>{s.current&&(s.current.scrollLeft=x)},setViewportHeight:x=>{s.current&&(s.current.style.height=x)},setRowCtrls:({rowCtrls:x,useFlushSync:F})=>{const k=!!F&&o.current.length>0&&x.length>0;o.current=x,b(k)},setDomOrder:x=>{c.current!=x&&(c.current=x,b(!1))},setContainerWidth:x=>{n.current&&(n.current.style.width=x)},setOffsetTop:x=>{n.current&&(n.current.style.transform=`translateY(${x})`)}};u.current=t.createBean(new wM(e)),u.current.setComp(P,n.current,s.current)}},[v,S]),C=y.useCallback(b=>{n.current=b,m()},[m]),w=y.useCallback(b=>{s.current=b,m()},[m]),R=()=>B.createElement("div",{className:h,ref:C,role:"rowgroup"},a.map(b=>B.createElement(mB,{rowCtrl:b,containerType:i.type,key:b.instanceId})));return B.createElement(B.Fragment,null,p?B.createElement("div",{className:d,ref:w,role:"presentation"},R()):R())},vB=y.memo(CB),SB=()=>{const{context:e,resizeObserverService:t}=y.useContext(ut),[i,s]=y.useState(""),[n,o]=y.useState(0),[r,a]=y.useState(0),[l,c]=y.useState("0px"),[u,d]=y.useState("0px"),[h,p]=y.useState("100%"),[g,v]=y.useState("0px"),[S,m]=y.useState("0px"),[C,w]=y.useState("100%"),[R,b]=y.useState(""),[P,x]=y.useState(""),[F,k]=y.useState(null),[E,T]=y.useState(""),[O,z]=y.useState(null),[X,j]=y.useState("ag-layout-normal"),U=y.useRef();U.current||(U.current=new Va(()=>q.current));const q=y.useRef(null),L=y.useRef(null),_=y.useRef(null),V=y.useRef(null),Z=y.useRef(null),Y=y.useRef(null),de=y.useRef(null),K=y.useRef([]),W=y.useRef([]);cn(" AG Grid Body ",q),cn(" AG Pinned Top ",L),cn(" AG Sticky Top ",_),cn(" AG Middle ",Y),cn(" AG Pinned Bottom ",de);const J=y.useCallback(Pe=>{if(q.current=Pe,!Pe){K.current=e.destroyBeans(K.current),W.current.forEach(He=>He()),W.current=[];return}if(!e)return;const Qo=(He,Ot)=>{He.appendChild(Ot),W.current.push(()=>He.removeChild(Ot))},Xo=He=>{const Ot=e.createBean(new He);return K.current.push(Ot),Ot},Qs=(He,Ot,V1)=>{Qo(He,document.createComment(V1)),Qo(He,Xo(Ot).getGui())};Qs(Pe,Dk," AG Fake Horizontal Scroll "),Qs(Pe,Mk," AG Overlay Wrapper "),Z.current&&Qs(Z.current,Tk," AG Fake Vertical Scroll ");const jg={setRowAnimationCssOnBodyViewport:s,setColumnCount:He=>{q.current&&jx(q.current,He)},setRowCount:He=>{q.current&&Wx(q.current,He)},setTopHeight:o,setBottomHeight:a,setStickyTopHeight:c,setStickyTopTop:d,setStickyTopWidth:p,setTopDisplay:b,setBottomDisplay:x,setColumnMovingCss:(He,Ot)=>U.current.addOrRemoveCssClass(He,Ot),updateLayoutClasses:j,setAlwaysVerticalScrollClass:k,setPinnedTopBottomOverflowY:T,setCellSelectableCss:(He,Ot)=>z(Ot?He:null),setBodyViewportWidth:He=>{Y.current&&(Y.current.style.width=He)},registerBodyViewportResizeListener:He=>{if(Y.current){const Ot=t.observeResize(Y.current,He);W.current.push(()=>Ot())}},setStickyBottomHeight:v,setStickyBottomBottom:m,setStickyBottomWidth:w},Jo=e.createBean(new PM);K.current.push(Jo),Jo.setComp(jg,Pe,Y.current,L.current,de.current,_.current,V.current)},[]),oe=y.useMemo(()=>ci("ag-root","ag-unselectable",X),[X]),Re=y.useMemo(()=>ci("ag-body-viewport",i,X,F,O),[i,X,F,O]),A=y.useMemo(()=>ci("ag-body",X),[X]),H=y.useMemo(()=>ci("ag-floating-top",O),[O]),Q=y.useMemo(()=>ci("ag-sticky-top",O),[O]),te=y.useMemo(()=>ci("ag-sticky-bottom",g==="0px"?"ag-hidden":null,O),[O,g]),re=y.useMemo(()=>ci("ag-floating-bottom",O),[O]),we=y.useMemo(()=>({height:n,minHeight:n,display:R,overflowY:E}),[n,R,E]),me=y.useMemo(()=>({height:l,top:u,width:h}),[l,u,h]),It=y.useMemo(()=>({height:g,bottom:S,width:C}),[g,S,C]),Si=y.useMemo(()=>({height:r,minHeight:r,display:P,overflowY:E}),[r,P,E]),Ys=Pe=>B.createElement(vB,{name:Pe,key:`${Pe}-container`}),Lt=({section:Pe,children:Qo,className:Xo,style:Qs})=>B.createElement("div",{ref:Pe,className:Xo,role:"presentation",style:Qs},Qo.map(Ys));return B.createElement("div",{ref:J,className:oe,role:"treegrid"},B.createElement(sB,null),Lt({section:L,className:H,style:we,children:["topLeft","topCenter","topRight","topFullWidth"]}),B.createElement("div",{className:A,ref:Z,role:"presentation"},Lt({section:Y,className:Re,children:["left","center","right","fullWidth"]})),Lt({section:_,className:Q,style:me,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),Lt({section:V,className:te,style:It,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),Lt({section:de,className:re,style:Si,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},wB=y.memo(SB),yB=(e,t)=>{const{children:i,eFocusableElement:s,onTabKeyDown:n,gridCtrl:o,forceFocusOutWhenTabGuardsAreEmpty:r}=e,{context:a}=y.useContext(ut),l=y.useRef(null),c=y.useRef(null),u=y.useRef(),d=S=>{const m=S==null?void 0:parseInt(S,10).toString();[l,c].forEach(C=>{var w,R;m===void 0?(w=C.current)==null||w.removeAttribute("tabindex"):(R=C.current)==null||R.setAttribute("tabindex",m)})};y.useImperativeHandle(t,()=>({forceFocusOutOfContainer(S){var m;(m=u.current)==null||m.forceFocusOutOfContainer(S)}}));const h=y.useCallback(()=>{const S=l.current,m=c.current;if(!S&&!m){u.current=a.destroyBean(u.current);return}if(S&&m){const C={setTabIndex:d};u.current=a.createBean(new C1({comp:C,eTopGuard:S,eBottomGuard:m,eFocusableElement:s,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:r,focusInnerElement:w=>o.focusInnerElement(w)}))}},[]),p=y.useCallback(S=>{l.current=S,h()},[h]),g=y.useCallback(S=>{c.current=S,h()},[h]),v=S=>{const m=S==="top"?sc.TAB_GUARD_TOP:sc.TAB_GUARD_BOTTOM;return B.createElement("div",{className:`${sc.TAB_GUARD} ${m}`,role:"presentation",ref:S==="top"?p:g})};return B.createElement(B.Fragment,null,v("top"),i,v("bottom"))},RB=y.forwardRef(yB),bB=y.memo(RB),PB=({context:e})=>{const[t,i]=y.useState(""),[s,n]=y.useState(""),[o,r]=y.useState(""),[a,l]=y.useState(null),[c,u]=y.useState(null),[d,h]=y.useState(!1),[p,g]=y.useState(),v=y.useRef(),S=y.useRef(null),m=y.useRef(),[C,w]=y.useState(null),R=y.useRef(()=>{}),b=y.useRef(),P=y.useRef([]),x=y.useCallback(()=>{},[]),F=y.useMemo(()=>e.isDestroyed()?null:e.getBeans(),[e]);cn(" AG Grid ",S);const k=y.useCallback(X=>{if(S.current=X,v.current=X?e.createBean(new sT):e.destroyBean(v.current),!X||e.isDestroyed())return;const j=v.current;R.current=j.focusInnerElement.bind(j);const U={destroyGridUi:()=>{},setRtlClass:i,setGridThemeClass:n,forceFocusOutOfContainer:q=>{var L,_;if(!q&&((L=b.current)!=null&&L.isDisplayed())){b.current.forceFocusOutOfContainer(q);return}(_=m.current)==null||_.forceFocusOutOfContainer(q)},updateLayoutClasses:r,getFocusableContainers:()=>{var _;const q=[],L=(_=S.current)==null?void 0:_.querySelector(".ag-root");return L&&q.push({getGui:()=>L}),P.current.forEach(V=>{V.isDisplayed()&&q.push(V)}),q},setCursor:l,setUserSelect:u};j.setComp(U,X,X),h(!0)},[]);y.useEffect(()=>{const X=v.current,j=S.current;if(!p||!F||!X||!C||!j)return;const U=[],{watermarkSelector:q,paginationSelector:L,sideBarSelector:_,statusBarSelector:V,gridHeaderDropZonesSelector:Z}=X.getOptionalSelectors(),Y=[];if(Z){const K=e.createBean(new Z.component),W=K.getGui();j.insertAdjacentElement("afterbegin",W),Y.push(W),U.push(K)}if(_){const K=e.createBean(new _.component),W=K.getGui(),J=C.querySelector(".ag-tab-guard-bottom");J&&(J.insertAdjacentElement("beforebegin",W),Y.push(W)),U.push(K),P.current.push(K)}const de=K=>{const W=e.createBean(new K),J=W.getGui();return j.insertAdjacentElement("beforeend",J),Y.push(J),U.push(W),W};if(V&&de(V.component),L){const K=de(L.component);b.current=K,P.current.push(K)}return q&&de(q.component),()=>{e.destroyBeans(U),Y.forEach(K=>{var W;(W=K.parentElement)==null||W.removeChild(K)})}},[p,C,F]);const E=y.useMemo(()=>ci("ag-root-wrapper",t,s,o),[t,s,o]),T=y.useMemo(()=>ci("ag-root-wrapper-body","ag-focus-managed",o),[o]),O=y.useMemo(()=>({userSelect:c??"",WebkitUserSelect:c??"",cursor:a??""}),[c,a]),z=y.useCallback(X=>{m.current=X,g(X!==null)},[]);return B.createElement("div",{ref:k,className:E,style:O,role:"presentation"},B.createElement("div",{className:T,ref:w,role:"presentation"},d&&C&&F&&B.createElement(ut.Provider,{value:F},B.createElement(bB,{ref:z,eFocusableElement:C,onTabKeyDown:x,gridCtrl:v.current,forceFocusOutWhenTabGuardsAreEmpty:!0},B.createElement(wB,null)))))},xB=y.memo(PB),FB=class extends D{wireBeans(e){this.ctrlsService=e.ctrlsService}areHeaderCellsRendered(){return this.ctrlsService.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}},H1=e=>{var S;const t=y.useRef(),i=y.useRef(null),s=y.useRef(null),n=y.useRef([]),o=y.useRef([]),r=y.useRef(e),a=y.useRef(),l=y.useRef(),c=y.useRef(!1),[u,d]=y.useState(void 0),[,h]=y.useState(0),p=y.useCallback(m=>{if(i.current=m,!m){n.current.forEach(T=>T()),n.current.length=0;return}const C=e.modules||[];s.current||(s.current=new KO(()=>h(T=>T+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),n.current.push(()=>{var T;(T=s.current)==null||T.destroy(),s.current=null}));const w=Ix(e.gridOptions,e),R=()=>{if(c.current){const T=()=>{var z;return(z=a.current)!=null&&z.shouldQueueUpdates()?void 0:o.current.shift()};let O=T();for(;O;)O(),O=T()}},b=new DB(R);a.current=b;const P=new FB,x={providedBeanInstances:{frameworkComponentWrapper:new kB(s.current,w.reactiveCustomComponents??DL("reactiveCustomComponents")??!0),renderStatusService:P},modules:C,frameworkOverrides:b},F=T=>{d(T),T.createBean(P),n.current.push(()=>{T.destroy()}),T.getBean("ctrlsService").whenReady({addDestroyFunc:O=>{n.current.push(O)}},()=>{var z;if(T.isDestroyed())return;const O=t.current;O&&((z=e.setGridApi)==null||z.call(e,O))})},k=T=>{T.getBean("ctrlsService").whenReady({addDestroyFunc:O=>{n.current.push(O)}},()=>{o.current.forEach(O=>O()),o.current.length=0,c.current=!0})},E=new AL;w.gridId??(w.gridId=l.current),t.current=E.create(m,w,F,k,x),n.current.push(()=>{t.current=void 0}),t.current&&(l.current=t.current.getGridId())},[]),g=y.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),v=y.useCallback(m=>{var C;c.current&&!((C=a.current)!=null&&C.shouldQueueUpdates())?m():o.current.push(m)},[]);return y.useEffect(()=>{const m=EB(r.current,e);r.current=e,v(()=>{t.current&&Lx(m,t.current)})},[e]),B.createElement("div",{style:g,className:e.className,ref:p},u&&!u.isDestroyed()?B.createElement(xB,{context:u}):null,((S=s.current)==null?void 0:S.getPortals())??null)};function EB(e,t){const i={};return Object.keys(t).forEach(s=>{const n=t[s];e[s]!==n&&(i[s]=n)}),i}var kB=class extends VL{constructor(e,t){super(),this.parent=e,this.reactiveCustomComponents=t}createWrapper(e,t){if(this.reactiveCustomComponents){const n=(o=>{switch(o){case"filter":return NO;case"floatingFilterComponent":return GO;case"dateComponent":return OO;case"dragAndDropImageComponent":return BO;case"loadingOverlayComponent":return HO;case"noRowsOverlayComponent":return WO;case"statusPanel":return zO;case"toolPanel":return jO;case"menuItem":return VO;case"cellRenderer":return LO}})(t.propertyName);if(n)return new n(e,this.parent,t)}else switch(t.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":zg();break}const i=!t.cellRenderer&&t.propertyName!=="toolPanel";return new _1(e,this.parent,t,i)}},MB=y.forwardRef((e,t)=>{const{ctrlsFactory:i,context:s,gos:n,resizeObserverService:o,rowModel:r}=y.useContext(ut),[a,l]=y.useState(()=>new Jt),[c,u]=y.useState(()=>new Jt),[d,h]=y.useState(),[p,g]=y.useState(),v=y.useRef(),S=y.useRef(null),m=y.useRef(),C=y.useMemo(()=>ki.__getGridRegisteredModules(e.api.getGridId()),[e]),w=y.useMemo(()=>a.toString()+" ag-details-row",[a]),R=y.useMemo(()=>c.toString()+" ag-details-grid",[c]);t&&y.useImperativeHandle(t,()=>({refresh(){var x;return((x=v.current)==null?void 0:x.refresh())??!1}})),e.template&&I("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");const b=y.useCallback(x=>{var E;if(S.current=x,!x){v.current=s.destroyBean(v.current),(E=m.current)==null||E.call(m);return}const F={addOrRemoveCssClass:(T,O)=>l(z=>z.setClass(T,O)),addOrRemoveDetailGridCssClass:(T,O)=>u(z=>z.setClass(T,O)),setDetailGrid:T=>h(T),setRowData:T=>g(T),getGui:()=>S.current},k=i.getInstance("detailCellRenderer");if(k&&(s.createBean(k),k.init(F,e),v.current=k,n.get("detailRowAutoHeight"))){const T=()=>{if(S.current==null)return;const O=S.current.clientHeight;O!=null&&O>0&&setTimeout(()=>{e.node.setRowHeight(O),(ke(n)||Oi(n))&&r.onRowHeightChanged()},0)};m.current=o.observeResize(x,T),T()}},[]),P=y.useCallback(x=>{var F;(F=v.current)==null||F.registerDetailWithMaster(x)},[]);return B.createElement("div",{className:w,ref:b},d&&B.createElement(H1,{className:R,...d,modules:C,rowData:p,setGridApi:P}))}),DB=class extends v1{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.frameworkComponents={agGroupCellRenderer:mv,agGroupRowRenderer:mv,agDetailCellRenderer:MB},this.wrapIncoming=(t,i)=>i==="ensureVisible"?DO(t):t(),this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return MO()}},wv=class extends y.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(t=>t(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return B.createElement(H1,{...this.props,setGridApi:this.setGridApi})}};Lu.register(Fr,MP,yP,Zl,hp,pp);const TB=()=>{const[e,t]=y.useState([]),[i,s]=y.useState([]),[n,o]=y.useState({labels:[],datasets:[]}),[r,a]=y.useState({labels:[],datasets:[]}),l=y.useRef(null),[c,u]=y.useState(0),[d,h]=y.useState(0),[p,g]=y.useState(0),[v,S]=y.useState(),[m,C]=y.useState(),w=[{field:"category",headerName:"Categoria",sortable:!0,filter:!0},{field:"dateBuy",headerName:"Fecha de Compra",sortable:!0,filter:!0,valueFormatter:W=>W.value?new Date(W.value).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}):""},{field:"dateRegister",headerName:"Fecha de Registro",sortable:!0,filter:!0,valueFormatter:W=>W.value?new Date(W.value).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}):""},{field:"parti",headerName:"Usuario",sortable:!0,filter:!0},{field:"store",headerName:"Tienda",sortable:!0,filter:!0},{field:"money",headerName:"$ Total",sortable:!0,filter:!0,valueGetter:W=>W.data.money?`$ ${parseFloat(W.data.money.$numberDecimal).toLocaleString("en-US")}`:""}],R=[{field:"email",headerName:"Email",sortable:!0,filter:!0},{field:"folio",headerName:"Folio",sortable:!0,filter:!0},{field:"created_at",headerName:"Fecha Creado",sortable:!0,filter:!0,valueFormatter:W=>W.value?new Date(W.value).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}):""},{field:"update_at",headerName:"Fecha Update",sortable:!0,filter:!0,valueFormatter:W=>W.value?new Date(W.value).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}):""},{field:"isFull",headerName:"isfull",sortable:!0,filter:!0},{field:"numSpheres",headerName:"numSpheres",sortable:!0,filter:!0},{field:"parti",headerName:"parti",sortable:!0,filter:!0}],b={flex:1,minWidth:100,resizable:!0},P=()=>{l.current&&l.current.api.exportDataAsCsv({fileName:"Export.csv",columnSeparator:","})},[x,F]=y.useState({labels:[],datasets:[{label:"Registros por Día",data:[],backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]}),[k,E]=y.useState({labels:[],datasets:[{label:"Registros por Mes",data:[],backgroundColor:"rgba(153, 102, 255, 0.6)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1}]}),[T,O]=y.useState(!0),[z,X]=y.useState(null),j=(W,J)=>{const oe={};return W.forEach(Re=>{const A=new Date(Re.created_at),H=J==="day"?new Intl.DateTimeFormat("es-MX",{day:"2-digit",month:"2-digit",year:"numeric"}).format(A):new Intl.DateTimeFormat("es-MX",{month:"long",year:"numeric"}).format(A);oe[H]=(oe[H]||0)+1}),oe},U=async()=>{try{const W=await fetch(`${ue.url}boleto/getAllK`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")}});if(!W.ok)throw new Error("Error al obtener los datos");const J=await W.json(),oe=Array.isArray(J.boletosList)?J.boletosList:[];if(s(oe),!Array.isArray(oe))throw new Error("Los datos obtenidos no son un arreglo");const Re=oe.filter(me=>me.isFull),A=j(Re,"day"),H=Object.keys(A),Q=Object.values(A);F({labels:H,datasets:[{label:"Registros por Día",data:Q,backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]});const te=j(Re,"month"),re=Object.keys(te),we=Object.values(te);E({labels:re,datasets:[{label:"Registros por Mes",data:we,backgroundColor:"rgba(255, 159, 64, 0.6)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:1}]}),O(!1)}catch(W){console.error("Error al procesar los datos:",W),X(W.message),O(!1)}},q=W=>{const J=W.reduce((H,Q)=>(H[Q.store]=(H[Q.store]||0)+1,H),{}),oe=Object.entries(J).sort((H,Q)=>Q[1]-H[1]).slice(0,10),Re=oe.map(H=>H[0]),A=oe.map(H=>H[1]);o({labels:Re,datasets:[{label:"Registros por Tienda",data:A,backgroundColor:"rgba(153, 102, 255, 0.6)",borderColor:"rgba(153, 102, 255, 1)"}]})},L=W=>{let J=0;W=W.filter(Q=>Q._id!="674785b1dadb17f7feff2fae");const oe=W.reduce((Q,te)=>(Q[te.store]||(Q[te.store]=0),J+=parseFloat(te.money.$numberDecimal),Q[te.store]+=parseFloat(te.money.$numberDecimal),Q),{});C(parseFloat(J).toLocaleString("en-US"));const Re=Object.entries(oe).sort((Q,te)=>te[1]-Q[1]),A=Re.map(Q=>Q[0]),H=Re.map(Q=>Q[1]);a({labels:A,datasets:[{label:"Gasto Total por Tienda",data:H,backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)"}]})},_=async()=>{let W=localStorage.getItem("token");const oe=await(await fetch(ue.url+"ticket/getTicketsList",{method:"GET",headers:{"Content-Type":"application/json",Authorization:W}})).json();if(oe.status==="success"){t(oe.ticketsList),q(oe.ticketsList),L(oe.ticketsList);let Re=oe.ticketsList;g(Re.length)}},V=async()=>{let W=localStorage.getItem("token");const oe=await(await fetch(ue.url+"participante/getParticipantes",{method:"GET",headers:{"Content-Type":"application/json",Authorization:W}})).json();if(oe.status==="success"){let Re=oe.partList.filter(H=>H.isFull==!0),A=oe.partList.filter(H=>H.ticketsAssigned!=null);u(A.length),h(Re.length)}},Z={labels:["Participantes","Iniciaron Registro"],datasets:[{data:[c,d],backgroundColor:["#FF6384","#36A2EB"],hoverOffset:4}]},Y={responsive:!0,maintainAspectRatio:!1},de=W=>{console.log("Cell value changed:",W.data)},K=async()=>{let W=localStorage.getItem("token"),Re=(await(await fetch(ue.url+"contador/getContador",{method:"GET",headers:{"Content-Type":"application/json",Authorization:W}})).json()).contador.listCount,A="0000000".concat(Re);S(A.substring(A.length-6))};return y.useEffect(()=>{U(),_(),V(),K()},[]),T?f.jsx("p",{children:"Cargando..."}):z?f.jsxs("p",{children:["Error: ",z]}):f.jsxs("div",{className:"container mt-5",children:[f.jsxs("div",{className:"row my-5",children:[f.jsx("div",{className:"col-md-3",children:f.jsxs("div",{className:"card",children:[f.jsx("div",{className:"card-header",children:"Folio Actual"}),f.jsx("div",{className:"card-body text-center",children:f.jsxs("div",{className:"row",children:[f.jsx("div",{className:"col-md-6",children:f.jsx("i",{className:"fa-solid fa-ticket fa-xl"})}),f.jsxs("div",{className:"col-md-6",children:[v," de 550000"]})]})})]})}),f.jsx("div",{className:"col-md-3",children:f.jsxs("div",{className:"card",children:[f.jsx("div",{className:"card-header",children:"Participantes registrados"}),f.jsx("div",{className:"card-body text-center",children:f.jsxs("div",{className:"row",children:[f.jsx("div",{className:"col-md-6",children:f.jsx("i",{className:"fa-solid fa-users fa-xl"})}),f.jsx("div",{className:"col-md-6",children:c})]})})]})}),f.jsx("div",{className:"col-md-3",children:f.jsxs("div",{className:"card",children:[f.jsx("div",{className:"card-header",children:"Participantes que iniciarion su registro"}),f.jsx("div",{className:"card-body text-center",children:f.jsxs("div",{className:"row",children:[f.jsx("div",{className:"col-md-6",children:f.jsx("i",{className:"fa-solid fa-users-rectangle fa-xl"})}),f.jsx("div",{className:"col-md-6",children:d})]})})]})}),f.jsx("div",{className:"col-md-3",children:f.jsxs("div",{className:"card",children:[f.jsx("div",{className:"card-header",children:"Ticket Registrados"}),f.jsx("div",{className:"card-body text-center",children:f.jsxs("div",{className:"row",children:[f.jsx("div",{className:"col-md-6",children:f.jsx("i",{className:"fa-solid fa-ticket-simple fa-xl"})}),f.jsx("div",{className:"col-md-6",children:p})]})})]})})]}),f.jsxs("div",{className:"row",children:[f.jsx("div",{className:"col-md-6",children:f.jsxs("div",{style:{marginBottom:"2rem"},children:[f.jsx("h4",{children:"Registros por Día"}),f.jsx(Pl,{data:x})]})}),f.jsx("div",{className:"col-md-6",children:f.jsxs("div",{style:{marginBottom:"2rem"},children:[f.jsx("h4",{children:"Registros por Mes"}),f.jsx(Pl,{data:k})]})}),f.jsx("div",{className:"row",children:f.jsx("div",{className:"col-md-12",children:f.jsxs("div",{style:{marginBottom:"2rem"},children:[f.jsx("h4",{children:"Registros Tienda"}),f.jsx(Pl,{data:n})]})})}),f.jsx("div",{className:"row",children:f.jsx("div",{className:"col-md-12",children:f.jsxs("div",{style:{marginBottom:"2rem"},children:[f.jsx("h4",{children:"Registros Gasto en Tienda"}),f.jsxs("h3",{children:["Total: $",m]}),f.jsx(Pl,{data:r})]})})}),f.jsx("div",{className:"row",children:f.jsx("div",{className:"col-md-12",children:f.jsxs("div",{style:{marginBottom:"2rem"},children:[f.jsx("h3",{children:"Informacion de Participantes"}),f.jsx("div",{style:{width:"500px",height:"500px",justifySelf:"center"},children:f.jsx(WP,{data:Z,options:Y})})]})})})]}),f.jsx("hr",{className:"my-4 border-gray-200"}),f.jsx("div",{className:"row",children:f.jsx("div",{className:"col-md-12",children:f.jsxs("div",{className:"w-full p-4",children:[f.jsx("h3",{className:"text-center",children:"Lista de Tickets de Compra"}),f.jsx("div",{className:"row justify-content-end",children:f.jsx("div",{className:"col-md-2",children:f.jsx("button",{onClick:P,className:"btn btn-success btn-lg mb-4",children:"Exportar a Excel"})})}),f.jsx("div",{className:"ag-theme-alpine w-full h-96",children:f.jsx(wv,{ref:l,rowData:e,columnDefs:w,defaultColDef:b,pagination:!0,paginationPageSize:15,domLayout:"autoHeight",overlayNoRowsTemplate:'<span className="text-center">No hay registros</span>',onCellValueChanged:de})})]})})}),f.jsx("hr",{className:"my-4 border-gray-200"}),f.jsx("div",{className:"row",children:f.jsx("div",{className:"col-md-12",children:f.jsxs("div",{className:"w-full p-4",children:[f.jsx("h3",{className:"text-center",children:"Lista de Folios Digitales"}),f.jsx("div",{className:"row justify-content-end",children:f.jsx("div",{className:"col-md-2",children:f.jsx("button",{onClick:P,className:"btn btn-success btn-lg mb-4",children:"Exportar a Excel"})})}),f.jsx("div",{className:"ag-theme-alpine w-full h-96",children:f.jsx(wv,{ref:l,rowData:i,columnDefs:R,defaultColDef:b,pagination:!0,paginationPageSize:15,domLayout:"autoHeight",overlayNoRowsTemplate:'<span className="text-center">No hay registros</span>',onCellValueChanged:de})})]})})})]})},AB=()=>f.jsx(Q9,{children:f.jsx(i6,{children:f.jsxs(W9,{children:[f.jsxs(Ve,{path:"/",element:f.jsx(U6,{}),children:[f.jsx(Ve,{index:!0,element:f.jsx(R3,{})}),f.jsx(Ve,{path:"Scan",element:f.jsx(R3,{})}),f.jsx(Ve,{path:"Carga",element:f.jsx(iR,{})}),f.jsx(Ve,{path:"Update",element:f.jsx(q6,{})}),f.jsx(Ve,{path:"LoadTickets",element:f.jsx(Y6,{})}),f.jsx(Ve,{path:"Show",element:f.jsx(Q6,{})}),f.jsx(Ve,{path:"PDF",element:f.jsx(J6,{})}),f.jsx(Ve,{path:"AdministracionLogin",element:f.jsx(b3,{})}),f.jsx(Ve,{path:"Mensaje",element:f.jsx(eR,{})})]}),f.jsxs(Ve,{path:"/PSDADMIN",children:[f.jsx(Ve,{index:!0,element:f.jsx(X6,{})}),f.jsx(Ve,{path:"Administration",element:f.jsx(b3,{})})]}),f.jsxs(Ve,{path:"/feed",element:f.jsx($6,{}),children:[f.jsx(Ve,{index:!0,element:f.jsx(E3,{})}),f.jsx(Ve,{path:"Register",element:f.jsx(E3,{})}),f.jsx(Ve,{path:"NewUser",element:f.jsx(tR,{})}),f.jsx(Ve,{path:"Logout",element:f.jsx(Z6,{})}),f.jsx(Ve,{path:"Estadisticas",element:f.jsx(TB,{})})]}),f.jsx(Ve,{path:"*",element:f.jsxs(f.Fragment,{children:[f.jsx("h1",{children:"Error 404"}),f.jsx(IS,{to:"/",children:"Volver al inicio"})]})})]})})});function IB(){return f.jsx(AB,{})}L2(document.getElementById("root")).render(f.jsx(IB,{}));
